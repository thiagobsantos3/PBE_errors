var nA=Object.defineProperty;var sA=(e,t,r)=>t in e?nA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var wh=(e,t,r)=>sA(e,typeof t!="symbol"?t+"":t,r);function iA(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function aA(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var v1={exports:{}},Wd={},b1={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dc=Symbol.for("react.element"),oA=Symbol.for("react.portal"),lA=Symbol.for("react.fragment"),cA=Symbol.for("react.strict_mode"),uA=Symbol.for("react.profiler"),dA=Symbol.for("react.provider"),fA=Symbol.for("react.context"),hA=Symbol.for("react.forward_ref"),mA=Symbol.for("react.suspense"),pA=Symbol.for("react.memo"),gA=Symbol.for("react.lazy"),Iy=Symbol.iterator;function xA(e){return e===null||typeof e!="object"?null:(e=Iy&&e[Iy]||e["@@iterator"],typeof e=="function"?e:null)}var w1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j1=Object.assign,_1={};function vo(e,t,r){this.props=e,this.context=t,this.refs=_1,this.updater=r||w1}vo.prototype.isReactComponent={};vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N1(){}N1.prototype=vo.prototype;function Lg(e,t,r){this.props=e,this.context=t,this.refs=_1,this.updater=r||w1}var Rg=Lg.prototype=new N1;Rg.constructor=Lg;j1(Rg,vo.prototype);Rg.isPureReactComponent=!0;var $y=Array.isArray,S1=Object.prototype.hasOwnProperty,qg={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function P1(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)S1.call(t,n)&&!k1.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:dc,type:e,key:i,ref:o,props:s,_owner:qg.current}}function yA(e,t){return{$$typeof:dc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fg(e){return typeof e=="object"&&e!==null&&e.$$typeof===dc}function vA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zy=/\/+/g;function jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vA(""+e.key):t.toString(36)}function gu(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case dc:case oA:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jh(o,0):n,$y(s)?(r="",e!=null&&(r=e.replace(zy,"$&/")+"/"),gu(s,t,r,"",function(u){return u})):s!=null&&(Fg(s)&&(s=yA(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zy,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",$y(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jh(i,l);o+=gu(i,t,r,c,s)}else if(c=xA(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jh(i,l++),o+=gu(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Dc(e,t,r){if(e==null)return e;var n=[],s=0;return gu(e,n,"","",function(i){return t.call(r,i,s++)}),n}function bA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},xu={transition:null},wA={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:xu,ReactCurrentOwner:qg};function E1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Dc,forEach:function(e,t,r){Dc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Fg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=vo;be.Fragment=lA;be.Profiler=uA;be.PureComponent=Lg;be.StrictMode=cA;be.Suspense=mA;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wA;be.act=E1;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=j1({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=qg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S1.call(t,c)&&!k1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:dc,type:e.type,key:s,ref:i,props:n,_owner:o}};be.createContext=function(e){return e={$$typeof:fA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dA,_context:e},e.Consumer=e};be.createElement=P1;be.createFactory=function(e){var t=P1.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:hA,render:e}};be.isValidElement=Fg;be.lazy=function(e){return{$$typeof:gA,_payload:{_status:-1,_result:e},_init:bA}};be.memo=function(e,t){return{$$typeof:pA,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=xu.transition;xu.transition={};try{e()}finally{xu.transition=t}};be.unstable_act=E1;be.useCallback=function(e,t){return ir.current.useCallback(e,t)};be.useContext=function(e){return ir.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};be.useEffect=function(e,t){return ir.current.useEffect(e,t)};be.useId=function(){return ir.current.useId()};be.useImperativeHandle=function(e,t,r){return ir.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return ir.current.useMemo(e,t)};be.useReducer=function(e,t,r){return ir.current.useReducer(e,t,r)};be.useRef=function(e){return ir.current.useRef(e)};be.useState=function(e){return ir.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return ir.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return ir.current.useTransition()};be.version="18.3.1";b1.exports=be;var b=b1.exports;const ne=Qn(b),jA=iA({__proto__:null,default:ne},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A=b,NA=Symbol.for("react.element"),SA=Symbol.for("react.fragment"),kA=Object.prototype.hasOwnProperty,PA=_A.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EA={key:!0,ref:!0,__self:!0,__source:!0};function C1(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)kA.call(t,n)&&!EA.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:NA,type:e,key:i,ref:o,props:s,_owner:PA.current}}Wd.Fragment=SA;Wd.jsx=C1;Wd.jsxs=C1;v1.exports=Wd;var a=v1.exports,A1={exports:{}},Rr={},T1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,A){var T=P.length;P.push(A);e:for(;0<T;){var R=T-1>>>1,F=P[R];if(0<s(F,A))P[R]=A,P[T]=F,T=R;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var A=P[0],T=P.pop();if(T!==A){P[0]=T;e:for(var R=0,F=P.length,J=F>>>1;R<J;){var oe=2*(R+1)-1,fe=P[oe],Z=oe+1,he=P[Z];if(0>s(fe,T))Z<F&&0>s(he,fe)?(P[R]=he,P[Z]=T,R=Z):(P[R]=fe,P[oe]=T,R=oe);else if(Z<F&&0>s(he,T))P[R]=he,P[Z]=T,R=Z;else break e}}return A}function s(P,A){var T=P.sortIndex-A.sortIndex;return T!==0?T:P.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,h=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var A=r(u);A!==null;){if(A.callback===null)n(u);else if(A.startTime<=P)n(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(u)}}function _(P){if(y=!1,w(P),!p)if(r(c)!==null)p=!0,U(j);else{var A=r(u);A!==null&&D(_,A.startTime-P)}}function j(P,A){p=!1,y&&(y=!1,v(k),k=-1),h=!0;var T=m;try{for(w(A),f=r(c);f!==null&&(!(f.expirationTime>A)||P&&!M());){var R=f.callback;if(typeof R=="function"){f.callback=null,m=f.priorityLevel;var F=R(f.expirationTime<=A);A=e.unstable_now(),typeof F=="function"?f.callback=F:f===r(c)&&n(c),w(A)}else n(c);f=r(c)}if(f!==null)var J=!0;else{var oe=r(u);oe!==null&&D(_,oe.startTime-A),J=!1}return J}finally{f=null,m=T,h=!1}}var N=!1,S=null,k=-1,O=5,C=-1;function M(){return!(e.unstable_now()-C<O)}function E(){if(S!==null){var P=e.unstable_now();C=P;var A=!0;try{A=S(!0,P)}finally{A?z():(N=!1,S=null)}}else N=!1}var z;if(typeof g=="function")z=function(){g(E)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,q=$.port2;$.port1.onmessage=E,z=function(){q.postMessage(null)}}else z=function(){x(E,0)};function U(P){S=P,N||(N=!0,z())}function D(P,A){k=x(function(){P(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,U(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var T=m;m=A;try{return P()}finally{m=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,A){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var T=m;m=P;try{return A()}finally{m=T}},e.unstable_scheduleCallback=function(P,A,T){var R=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?R+T:R):T=R,P){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=T+F,P={id:d++,callback:A,priorityLevel:P,startTime:T,expirationTime:F,sortIndex:-1},T>R?(P.sortIndex=T,t(u,P),r(c)===null&&P===r(u)&&(y?(v(k),k=-1):y=!0,D(_,T-R))):(P.sortIndex=F,t(c,P),p||h||(p=!0,U(j))),P},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(P){var A=m;return function(){var T=m;m=A;try{return P.apply(this,arguments)}finally{m=T}}}})(O1);T1.exports=O1;var CA=T1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA=b,Dr=CA;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D1=new Set,El={};function na(e,t){Ga(e,t),Ga(e+"Capture",t)}function Ga(e,t){for(El[e]=t,e=0;e<t.length;e++)D1.add(t[e])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=Object.prototype.hasOwnProperty,TA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},Ry={};function OA(e){return Em.call(Ry,e)?!0:Em.call(Ly,e)?!1:TA.test(e)?Ry[e]=!0:(Ly[e]=!0,!1)}function DA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MA(e,t,r,n){if(t===null||typeof t>"u"||DA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Rt[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Rt[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Rt[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Rt[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Rt[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Rt[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Rt[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Rt[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Rt[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ug=/[\-:]([a-z])/g;function Bg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ug,Bg);Rt[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Rt[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qg(e,t,r,n){var s=Rt.hasOwnProperty(t)?Rt[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MA(t,r,s,n)&&(r=null),n||s===null?OA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var xs=AA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),ja=Symbol.for("react.portal"),_a=Symbol.for("react.fragment"),Vg=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),I1=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Am=Symbol.for("react.suspense"),Tm=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),$1=Symbol.for("react.offscreen"),qy=Symbol.iterator;function Lo(e){return e===null||typeof e!="object"?null:(e=qy&&e[qy]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,_h;function sl(e){if(_h===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var Nh=!1;function Sh(e,t){if(!e||Nh)return"";Nh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Nh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?sl(e):""}function IA(e){switch(e.tag){case 5:return sl(e.type);case 16:return sl("Lazy");case 13:return sl("Suspense");case 19:return sl("SuspenseList");case 0:case 2:case 15:return e=Sh(e.type,!1),e;case 11:return e=Sh(e.type.render,!1),e;case 1:return e=Sh(e.type,!0),e;default:return""}}function Om(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _a:return"Fragment";case ja:return"Portal";case Cm:return"Profiler";case Vg:return"StrictMode";case Am:return"Suspense";case Tm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case I1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Wg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Kg:return t=e.displayName||null,t!==null?t:Om(e.type)||"Memo";case Ts:t=e._payload,e=e._init;try{return Om(e(t))}catch{}}return null}function $A(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Om(t);case 8:return t===Vg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ri(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zA(e){var t=z1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ic(e){e._valueTracker||(e._valueTracker=zA(e))}function L1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=z1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Tu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dm(e,t){var r=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fy(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ri(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R1(e,t){t=t.checked,t!=null&&Qg(e,"checked",t,!1)}function Mm(e,t){R1(e,t);var r=ri(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Im(e,t.type,r):t.hasOwnProperty("defaultValue")&&Im(e,t.type,ri(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uy(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Im(e,t,r){(t!=="number"||Tu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var il=Array.isArray;function za(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ri(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $m(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function By(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(il(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ri(r)}}function q1(e,t){var r=ri(t.value),n=ri(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function F1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?F1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $c,U1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$c.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LA=["Webkit","ms","Moz","O"];Object.keys(dl).forEach(function(e){LA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dl[t]=dl[e]})});function B1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||dl.hasOwnProperty(e)&&dl[e]?(""+t).trim():t+"px"}function Q1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=B1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var RA=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lm(e,t){if(t){if(RA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function Rm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qm=null;function Hg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fm=null,La=null,Ra=null;function Vy(e){if(e=mc(e)){if(typeof Fm!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Xd(t),Fm(e.stateNode,e.type,t))}}function V1(e){La?Ra?Ra.push(e):Ra=[e]:La=e}function W1(){if(La){var e=La,t=Ra;if(Ra=La=null,Vy(e),t)for(e=0;e<t.length;e++)Vy(t[e])}}function K1(e,t){return e(t)}function H1(){}var kh=!1;function G1(e,t,r){if(kh)return e(t,r);kh=!0;try{return K1(e,t,r)}finally{kh=!1,(La!==null||Ra!==null)&&(H1(),W1())}}function Al(e,t){var r=e.stateNode;if(r===null)return null;var n=Xd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var Um=!1;if(ls)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Um=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Um=!1}function qA(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var fl=!1,Ou=null,Du=!1,Bm=null,FA={onError:function(e){fl=!0,Ou=e}};function UA(e,t,r,n,s,i,o,l,c){fl=!1,Ou=null,qA.apply(FA,arguments)}function BA(e,t,r,n,s,i,o,l,c){if(UA.apply(this,arguments),fl){if(fl){var u=Ou;fl=!1,Ou=null}else throw Error(X(198));Du||(Du=!0,Bm=u)}}function sa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Y1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wy(e){if(sa(e)!==e)throw Error(X(188))}function QA(e){var t=e.alternate;if(!t){if(t=sa(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Wy(s),e;if(i===n)return Wy(s),t;i=i.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function X1(e){return e=QA(e),e!==null?J1(e):null}function J1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=J1(e);if(t!==null)return t;e=e.sibling}return null}var Z1=Dr.unstable_scheduleCallback,Ky=Dr.unstable_cancelCallback,VA=Dr.unstable_shouldYield,WA=Dr.unstable_requestPaint,rt=Dr.unstable_now,KA=Dr.unstable_getCurrentPriorityLevel,Gg=Dr.unstable_ImmediatePriority,e_=Dr.unstable_UserBlockingPriority,Mu=Dr.unstable_NormalPriority,HA=Dr.unstable_LowPriority,t_=Dr.unstable_IdlePriority,Kd=null,$n=null;function GA(e){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Kd,e,void 0,(e.current.flags&128)===128)}catch{}}var wn=Math.clz32?Math.clz32:JA,YA=Math.log,XA=Math.LN2;function JA(e){return e>>>=0,e===0?32:31-(YA(e)/XA|0)|0}var zc=64,Lc=4194304;function al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Iu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=al(l):(i&=o,i!==0&&(n=al(i)))}else o=r&~s,o!==0?n=al(o):i!==0&&(n=al(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wn(t),s=1<<r,n|=e[r],t&=~s;return n}function ZA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-wn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=ZA(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Qm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function r_(){var e=zc;return zc<<=1,!(zc&4194240)&&(zc=64),e}function Ph(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wn(t),e[t]=r}function tT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-wn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Yg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function n_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var s_,Xg,i_,a_,o_,Vm=!1,Rc=[],Vs=null,Ws=null,Ks=null,Tl=new Map,Ol=new Map,Is=[],rT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(e,t){switch(e){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":Tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(t.pointerId)}}function qo(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=mc(t),t!==null&&Xg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nT(e,t,r,n,s){switch(t){case"focusin":return Vs=qo(Vs,e,t,r,n,s),!0;case"dragenter":return Ws=qo(Ws,e,t,r,n,s),!0;case"mouseover":return Ks=qo(Ks,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Tl.set(i,qo(Tl.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ol.set(i,qo(Ol.get(i)||null,e,t,r,n,s)),!0}return!1}function l_(e){var t=Pi(e.target);if(t!==null){var r=sa(t);if(r!==null){if(t=r.tag,t===13){if(t=Y1(r),t!==null){e.blockedOn=t,o_(e.priority,function(){i_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);qm=n,r.target.dispatchEvent(n),qm=null}else return t=mc(r),t!==null&&Xg(t),e.blockedOn=r,!1;t.shift()}return!0}function Gy(e,t,r){yu(e)&&r.delete(t)}function sT(){Vm=!1,Vs!==null&&yu(Vs)&&(Vs=null),Ws!==null&&yu(Ws)&&(Ws=null),Ks!==null&&yu(Ks)&&(Ks=null),Tl.forEach(Gy),Ol.forEach(Gy)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,Vm||(Vm=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,sT)))}function Dl(e){function t(s){return Fo(s,e)}if(0<Rc.length){Fo(Rc[0],e);for(var r=1;r<Rc.length;r++){var n=Rc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Vs!==null&&Fo(Vs,e),Ws!==null&&Fo(Ws,e),Ks!==null&&Fo(Ks,e),Tl.forEach(t),Ol.forEach(t),r=0;r<Is.length;r++)n=Is[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Is.length&&(r=Is[0],r.blockedOn===null);)l_(r),r.blockedOn===null&&Is.shift()}var qa=xs.ReactCurrentBatchConfig,$u=!0;function iT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=1,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function aT(e,t,r,n){var s=Ae,i=qa.transition;qa.transition=null;try{Ae=4,Jg(e,t,r,n)}finally{Ae=s,qa.transition=i}}function Jg(e,t,r,n){if($u){var s=Wm(e,t,r,n);if(s===null)zh(e,t,n,zu,r),Hy(e,n);else if(nT(s,e,t,r,n))n.stopPropagation();else if(Hy(e,n),t&4&&-1<rT.indexOf(e)){for(;s!==null;){var i=mc(s);if(i!==null&&s_(i),i=Wm(e,t,r,n),i===null&&zh(e,t,n,zu,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else zh(e,t,n,null,r)}}var zu=null;function Wm(e,t,r,n){if(zu=null,e=Hg(n),e=Pi(e),e!==null)if(t=sa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Y1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zu=e,null}function c_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KA()){case Gg:return 1;case e_:return 4;case Mu:case HA:return 16;case t_:return 536870912;default:return 16}default:return 16}}var qs=null,Zg=null,vu=null;function u_(){if(vu)return vu;var e,t=Zg,r=t.length,n,s="value"in qs?qs.value:qs.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return vu=s.slice(e,1<n?1-n:void 0)}function bu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qc(){return!0}function Yy(){return!1}function qr(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qc:Yy,this.isPropagationStopped=Yy,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=qr(bo),hc=Ze({},bo,{view:0,detail:0}),oT=qr(hc),Eh,Ch,Uo,Hd=Ze({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uo&&(Uo&&e.type==="mousemove"?(Eh=e.screenX-Uo.screenX,Ch=e.screenY-Uo.screenY):Ch=Eh=0,Uo=e),Eh)},movementY:function(e){return"movementY"in e?e.movementY:Ch}}),Xy=qr(Hd),lT=Ze({},Hd,{dataTransfer:0}),cT=qr(lT),uT=Ze({},hc,{relatedTarget:0}),Ah=qr(uT),dT=Ze({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),fT=qr(dT),hT=Ze({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mT=qr(hT),pT=Ze({},bo,{data:0}),Jy=qr(pT),gT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yT[e])?!!t[e]:!1}function t0(){return vT}var bT=Ze({},hc,{key:function(e){if(e.key){var t=gT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(e){return e.type==="keypress"?bu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wT=qr(bT),jT=Ze({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zy=qr(jT),_T=Ze({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),NT=qr(_T),ST=Ze({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),kT=qr(ST),PT=Ze({},Hd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ET=qr(PT),CT=[9,13,27,32],r0=ls&&"CompositionEvent"in window,hl=null;ls&&"documentMode"in document&&(hl=document.documentMode);var AT=ls&&"TextEvent"in window&&!hl,d_=ls&&(!r0||hl&&8<hl&&11>=hl),ev=" ",tv=!1;function f_(e,t){switch(e){case"keyup":return CT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function h_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function TT(e,t){switch(e){case"compositionend":return h_(t);case"keypress":return t.which!==32?null:(tv=!0,ev);case"textInput":return e=t.data,e===ev&&tv?null:e;default:return null}}function OT(e,t){if(Na)return e==="compositionend"||!r0&&f_(e,t)?(e=u_(),vu=Zg=qs=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d_&&t.locale!=="ko"?null:t.data;default:return null}}var DT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DT[e.type]:t==="textarea"}function m_(e,t,r,n){V1(n),t=Lu(t,"onChange"),0<t.length&&(r=new e0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ml=null,Ml=null;function MT(e){S_(e,0)}function Gd(e){var t=Pa(e);if(L1(t))return e}function IT(e,t){if(e==="change")return t}var p_=!1;if(ls){var Th;if(ls){var Oh="oninput"in document;if(!Oh){var nv=document.createElement("div");nv.setAttribute("oninput","return;"),Oh=typeof nv.oninput=="function"}Th=Oh}else Th=!1;p_=Th&&(!document.documentMode||9<document.documentMode)}function sv(){ml&&(ml.detachEvent("onpropertychange",g_),Ml=ml=null)}function g_(e){if(e.propertyName==="value"&&Gd(Ml)){var t=[];m_(t,Ml,e,Hg(e)),G1(MT,t)}}function $T(e,t,r){e==="focusin"?(sv(),ml=t,Ml=r,ml.attachEvent("onpropertychange",g_)):e==="focusout"&&sv()}function zT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Gd(Ml)}function LT(e,t){if(e==="click")return Gd(t)}function RT(e,t){if(e==="input"||e==="change")return Gd(t)}function qT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nn=typeof Object.is=="function"?Object.is:qT;function Il(e,t){if(Nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Em.call(t,s)||!Nn(e[s],t[s]))return!1}return!0}function iv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function av(e,t){var r=iv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=iv(r)}}function x_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function y_(){for(var e=window,t=Tu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Tu(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FT(e){var t=y_(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&x_(r.ownerDocument.documentElement,r)){if(n!==null&&n0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=av(r,i);var o=av(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var UT=ls&&"documentMode"in document&&11>=document.documentMode,Sa=null,Km=null,pl=null,Hm=!1;function ov(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hm||Sa==null||Sa!==Tu(n)||(n=Sa,"selectionStart"in n&&n0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pl&&Il(pl,n)||(pl=n,n=Lu(Km,"onSelect"),0<n.length&&(t=new e0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sa)))}function Fc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ka={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},Dh={},v_={};ls&&(v_=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Yd(e){if(Dh[e])return Dh[e];if(!ka[e])return e;var t=ka[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in v_)return Dh[e]=t[r];return e}var b_=Yd("animationend"),w_=Yd("animationiteration"),j_=Yd("animationstart"),__=Yd("transitionend"),N_=new Map,lv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(e,t){N_.set(e,t),na(t,[e])}for(var Mh=0;Mh<lv.length;Mh++){var Ih=lv[Mh],BT=Ih.toLowerCase(),QT=Ih[0].toUpperCase()+Ih.slice(1);ai(BT,"on"+QT)}ai(b_,"onAnimationEnd");ai(w_,"onAnimationIteration");ai(j_,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(__,"onTransitionEnd");Ga("onMouseEnter",["mouseout","mouseover"]);Ga("onMouseLeave",["mouseout","mouseover"]);Ga("onPointerEnter",["pointerout","pointerover"]);Ga("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function cv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,BA(n,t,void 0,e),e.currentTarget=null}function S_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;cv(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;cv(s,l,u),i=c}}}if(Du)throw e=Bm,Du=!1,Bm=null,e}function Ue(e,t){var r=t[Zm];r===void 0&&(r=t[Zm]=new Set);var n=e+"__bubble";r.has(n)||(k_(t,e,2,!1),r.add(n))}function $h(e,t,r){var n=0;t&&(n|=4),k_(r,e,n,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[Uc]){e[Uc]=!0,D1.forEach(function(r){r!=="selectionchange"&&(VT.has(r)||$h(r,!1,e),$h(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uc]||(t[Uc]=!0,$h("selectionchange",!1,t))}}function k_(e,t,r,n){switch(c_(t)){case 1:var s=iT;break;case 4:s=aT;break;default:s=Jg}r=s.bind(null,t,r,e),s=void 0,!Um||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function zh(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Pi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}G1(function(){var u=i,d=Hg(r),f=[];e:{var m=N_.get(e);if(m!==void 0){var h=e0,p=e;switch(e){case"keypress":if(bu(r)===0)break e;case"keydown":case"keyup":h=wT;break;case"focusin":p="focus",h=Ah;break;case"focusout":p="blur",h=Ah;break;case"beforeblur":case"afterblur":h=Ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=cT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=NT;break;case b_:case w_:case j_:h=fT;break;case __:h=kT;break;case"scroll":h=oT;break;case"wheel":h=ET;break;case"copy":case"cut":case"paste":h=mT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Zy}var y=(t&4)!==0,x=!y&&e==="scroll",v=y?m!==null?m+"Capture":null:m;y=[];for(var g=u,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Al(g,v),_!=null&&y.push(zl(g,_,w)))),x)break;g=g.return}0<y.length&&(m=new h(m,p,null,r,d),f.push({event:m,listeners:y}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&r!==qm&&(p=r.relatedTarget||r.fromElement)&&(Pi(p)||p[cs]))break e;if((h||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=u,p=p?Pi(p):null,p!==null&&(x=sa(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(y=Xy,_="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Zy,_="onPointerLeave",v="onPointerEnter",g="pointer"),x=h==null?m:Pa(h),w=p==null?m:Pa(p),m=new y(_,g+"leave",h,r,d),m.target=x,m.relatedTarget=w,_=null,Pi(d)===u&&(y=new y(v,g+"enter",p,r,d),y.target=w,y.relatedTarget=x,_=y),x=_,h&&p)t:{for(y=h,v=p,g=0,w=y;w;w=fa(w))g++;for(w=0,_=v;_;_=fa(_))w++;for(;0<g-w;)y=fa(y),g--;for(;0<w-g;)v=fa(v),w--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=fa(y),v=fa(v)}y=null}else y=null;h!==null&&uv(f,m,h,y,!1),p!==null&&x!==null&&uv(f,x,p,y,!0)}}e:{if(m=u?Pa(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=IT;else if(rv(m))if(p_)j=RT;else{j=zT;var N=$T}else(h=m.nodeName)&&h.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=LT);if(j&&(j=j(e,u))){m_(f,j,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Im(m,"number",m.value)}switch(N=u?Pa(u):window,e){case"focusin":(rv(N)||N.contentEditable==="true")&&(Sa=N,Km=u,pl=null);break;case"focusout":pl=Km=Sa=null;break;case"mousedown":Hm=!0;break;case"contextmenu":case"mouseup":case"dragend":Hm=!1,ov(f,r,d);break;case"selectionchange":if(UT)break;case"keydown":case"keyup":ov(f,r,d)}var S;if(r0)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Na?f_(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(d_&&r.locale!=="ko"&&(Na||k!=="onCompositionStart"?k==="onCompositionEnd"&&Na&&(S=u_()):(qs=d,Zg="value"in qs?qs.value:qs.textContent,Na=!0)),N=Lu(u,k),0<N.length&&(k=new Jy(k,e,null,r,d),f.push({event:k,listeners:N}),S?k.data=S:(S=h_(r),S!==null&&(k.data=S)))),(S=AT?TT(e,r):OT(e,r))&&(u=Lu(u,"onBeforeInput"),0<u.length&&(d=new Jy("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}S_(f,t)})}function zl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Lu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Al(e,r),i!=null&&n.unshift(zl(e,i,s)),i=Al(e,t),i!=null&&n.push(zl(e,i,s))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uv(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Al(r,i),c!=null&&o.unshift(zl(r,c,l))):s||(c=Al(r,i),c!=null&&o.push(zl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var WT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function dv(e){return(typeof e=="string"?e:""+e).replace(WT,`
`).replace(KT,"")}function Bc(e,t,r){if(t=dv(t),dv(e)!==t&&r)throw Error(X(425))}function Ru(){}var Gm=null,Ym=null;function Xm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jm=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,GT=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(e){return fv.resolve(null).then(e).catch(YT)}:Jm;function YT(e){setTimeout(function(){throw e})}function Lh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Dl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Dl(t)}function Hs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wo=Math.random().toString(36).slice(2),Dn="__reactFiber$"+wo,Ll="__reactProps$"+wo,cs="__reactContainer$"+wo,Zm="__reactEvents$"+wo,XT="__reactListeners$"+wo,JT="__reactHandles$"+wo;function Pi(e){var t=e[Dn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[cs]||r[Dn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hv(e);e!==null;){if(r=e[Dn])return r;e=hv(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[Dn]||e[cs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Xd(e){return e[Ll]||null}var ep=[],Ea=-1;function oi(e){return{current:e}}function Ve(e){0>Ea||(e.current=ep[Ea],ep[Ea]=null,Ea--)}function qe(e,t){Ea++,ep[Ea]=e.current,e.current=t}var ni={},Gt=oi(ni),vr=oi(!1),Ui=ni;function Ya(e,t){var r=e.type.contextTypes;if(!r)return ni;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function br(e){return e=e.childContextTypes,e!=null}function qu(){Ve(vr),Ve(Gt)}function mv(e,t,r){if(Gt.current!==ni)throw Error(X(168));qe(Gt,t),qe(vr,r)}function P_(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(X(108,$A(e)||"Unknown",s));return Ze({},r,n)}function Fu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ni,Ui=Gt.current,qe(Gt,e),qe(vr,vr.current),!0}function pv(e,t,r){var n=e.stateNode;if(!n)throw Error(X(169));r?(e=P_(e,t,Ui),n.__reactInternalMemoizedMergedChildContext=e,Ve(vr),Ve(Gt),qe(Gt,e)):Ve(vr),qe(vr,r)}var Gn=null,Jd=!1,Rh=!1;function E_(e){Gn===null?Gn=[e]:Gn.push(e)}function ZT(e){Jd=!0,E_(e)}function li(){if(!Rh&&Gn!==null){Rh=!0;var e=0,t=Ae;try{var r=Gn;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gn=null,Jd=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(e+1)),Z1(Gg,li),s}finally{Ae=t,Rh=!1}}return null}var Ca=[],Aa=0,Uu=null,Bu=0,Qr=[],Vr=0,Bi=null,ts=1,rs="";function bi(e,t){Ca[Aa++]=Bu,Ca[Aa++]=Uu,Uu=e,Bu=t}function C_(e,t,r){Qr[Vr++]=ts,Qr[Vr++]=rs,Qr[Vr++]=Bi,Bi=e;var n=ts;e=rs;var s=32-wn(n)-1;n&=~(1<<s),r+=1;var i=32-wn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ts=1<<32-wn(t)+s|r<<s|n,rs=i+e}else ts=1<<i|r<<s|n,rs=e}function s0(e){e.return!==null&&(bi(e,1),C_(e,1,0))}function i0(e){for(;e===Uu;)Uu=Ca[--Aa],Ca[Aa]=null,Bu=Ca[--Aa],Ca[Aa]=null;for(;e===Bi;)Bi=Qr[--Vr],Qr[Vr]=null,rs=Qr[--Vr],Qr[Vr]=null,ts=Qr[--Vr],Qr[Vr]=null}var Tr=null,Ar=null,We=!1,mn=null;function A_(e,t){var r=Kr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function gv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tr=e,Ar=Hs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tr=e,Ar=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bi!==null?{id:ts,overflow:rs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Tr=e,Ar=null,!0):!1;default:return!1}}function tp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rp(e){if(We){var t=Ar;if(t){var r=t;if(!gv(e,t)){if(tp(e))throw Error(X(418));t=Hs(r.nextSibling);var n=Tr;t&&gv(e,t)?A_(n,r):(e.flags=e.flags&-4097|2,We=!1,Tr=e)}}else{if(tp(e))throw Error(X(418));e.flags=e.flags&-4097|2,We=!1,Tr=e}}}function xv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tr=e}function Qc(e){if(e!==Tr)return!1;if(!We)return xv(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xm(e.type,e.memoizedProps)),t&&(t=Ar)){if(tp(e))throw T_(),Error(X(418));for(;t;)A_(e,t),t=Hs(t.nextSibling)}if(xv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ar=Hs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ar=null}}else Ar=Tr?Hs(e.stateNode.nextSibling):null;return!0}function T_(){for(var e=Ar;e;)e=Hs(e.nextSibling)}function Xa(){Ar=Tr=null,We=!1}function a0(e){mn===null?mn=[e]:mn.push(e)}var eO=xs.ReactCurrentBatchConfig;function Bo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yv(e){var t=e._init;return t(e._payload)}function O_(e){function t(v,g){if(e){var w=v.deletions;w===null?(v.deletions=[g],v.flags|=16):w.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=Js(v,g),v.index=0,v.sibling=null,v}function i(v,g,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<g?(v.flags|=2,g):w):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,w,_){return g===null||g.tag!==6?(g=Wh(w,v.mode,_),g.return=v,g):(g=s(g,w),g.return=v,g)}function c(v,g,w,_){var j=w.type;return j===_a?d(v,g,w.props.children,_,w.key):g!==null&&(g.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ts&&yv(j)===g.type)?(_=s(g,w.props),_.ref=Bo(v,g,w),_.return=v,_):(_=Pu(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,_)}function u(v,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=Kh(w,v.mode,_),g.return=v,g):(g=s(g,w.children||[]),g.return=v,g)}function d(v,g,w,_,j){return g===null||g.tag!==7?(g=zi(w,v.mode,_,j),g.return=v,g):(g=s(g,w),g.return=v,g)}function f(v,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Wh(""+g,v.mode,w),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Mc:return w=Pu(g.type,g.key,g.props,null,v.mode,w),w.ref=Bo(v,null,g),w.return=v,w;case ja:return g=Kh(g,v.mode,w),g.return=v,g;case Ts:var _=g._init;return f(v,_(g._payload),w)}if(il(g)||Lo(g))return g=zi(g,v.mode,w,null),g.return=v,g;Vc(v,g)}return null}function m(v,g,w,_){var j=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:return w.key===j?c(v,g,w,_):null;case ja:return w.key===j?u(v,g,w,_):null;case Ts:return j=w._init,m(v,g,j(w._payload),_)}if(il(w)||Lo(w))return j!==null?null:d(v,g,w,_,null);Vc(v,w)}return null}function h(v,g,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(g,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Mc:return v=v.get(_.key===null?w:_.key)||null,c(g,v,_,j);case ja:return v=v.get(_.key===null?w:_.key)||null,u(g,v,_,j);case Ts:var N=_._init;return h(v,g,w,N(_._payload),j)}if(il(_)||Lo(_))return v=v.get(w)||null,d(g,v,_,j,null);Vc(g,_)}return null}function p(v,g,w,_){for(var j=null,N=null,S=g,k=g=0,O=null;S!==null&&k<w.length;k++){S.index>k?(O=S,S=null):O=S.sibling;var C=m(v,S,w[k],_);if(C===null){S===null&&(S=O);break}e&&S&&C.alternate===null&&t(v,S),g=i(C,g,k),N===null?j=C:N.sibling=C,N=C,S=O}if(k===w.length)return r(v,S),We&&bi(v,k),j;if(S===null){for(;k<w.length;k++)S=f(v,w[k],_),S!==null&&(g=i(S,g,k),N===null?j=S:N.sibling=S,N=S);return We&&bi(v,k),j}for(S=n(v,S);k<w.length;k++)O=h(S,v,k,w[k],_),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?k:O.key),g=i(O,g,k),N===null?j=O:N.sibling=O,N=O);return e&&S.forEach(function(M){return t(v,M)}),We&&bi(v,k),j}function y(v,g,w,_){var j=Lo(w);if(typeof j!="function")throw Error(X(150));if(w=j.call(w),w==null)throw Error(X(151));for(var N=j=null,S=g,k=g=0,O=null,C=w.next();S!==null&&!C.done;k++,C=w.next()){S.index>k?(O=S,S=null):O=S.sibling;var M=m(v,S,C.value,_);if(M===null){S===null&&(S=O);break}e&&S&&M.alternate===null&&t(v,S),g=i(M,g,k),N===null?j=M:N.sibling=M,N=M,S=O}if(C.done)return r(v,S),We&&bi(v,k),j;if(S===null){for(;!C.done;k++,C=w.next())C=f(v,C.value,_),C!==null&&(g=i(C,g,k),N===null?j=C:N.sibling=C,N=C);return We&&bi(v,k),j}for(S=n(v,S);!C.done;k++,C=w.next())C=h(S,v,k,C.value,_),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?k:C.key),g=i(C,g,k),N===null?j=C:N.sibling=C,N=C);return e&&S.forEach(function(E){return t(v,E)}),We&&bi(v,k),j}function x(v,g,w,_){if(typeof w=="object"&&w!==null&&w.type===_a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Mc:e:{for(var j=w.key,N=g;N!==null;){if(N.key===j){if(j=w.type,j===_a){if(N.tag===7){r(v,N.sibling),g=s(N,w.props.children),g.return=v,v=g;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ts&&yv(j)===N.type){r(v,N.sibling),g=s(N,w.props),g.ref=Bo(v,N,w),g.return=v,v=g;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===_a?(g=zi(w.props.children,v.mode,_,w.key),g.return=v,v=g):(_=Pu(w.type,w.key,w.props,null,v.mode,_),_.ref=Bo(v,g,w),_.return=v,v=_)}return o(v);case ja:e:{for(N=w.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){r(v,g.sibling),g=s(g,w.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Kh(w,v.mode,_),g.return=v,v=g}return o(v);case Ts:return N=w._init,x(v,g,N(w._payload),_)}if(il(w))return p(v,g,w,_);if(Lo(w))return y(v,g,w,_);Vc(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,w),g.return=v,v=g):(r(v,g),g=Wh(w,v.mode,_),g.return=v,v=g),o(v)):r(v,g)}return x}var Ja=O_(!0),D_=O_(!1),Qu=oi(null),Vu=null,Ta=null,o0=null;function l0(){o0=Ta=Vu=null}function c0(e){var t=Qu.current;Ve(Qu),e._currentValue=t}function np(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Fa(e,t){Vu=e,o0=Ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mr=!0),e.firstContext=null)}function Zr(e){var t=e._currentValue;if(o0!==e)if(e={context:e,memoizedValue:t,next:null},Ta===null){if(Vu===null)throw Error(X(308));Ta=e,Vu.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var Ei=null;function u0(e){Ei===null?Ei=[e]:Ei.push(e)}function M_(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,u0(t)):(r.next=s.next,s.next=r),t.interleaved=r,us(e,n)}function us(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Os=!1;function d0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,je&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,us(e,r)}return s=n.interleaved,s===null?(t.next=t,u0(n)):(t.next=s.next,s.next=t),n.interleaved=t,us(e,r)}function wu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}function vv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wu(e,t,r,n){var s=e.updateQueue;Os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,h=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,y=l;switch(m=t,h=r,y.tag){case 1:if(p=y.payload,typeof p=="function"){f=p.call(h,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,m=typeof p=="function"?p.call(h,f,m):p,m==null)break e;f=Ze({},f,m);break e;case 2:Os=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Vi|=o,e.lanes=o,e.memoizedState=f}}function bv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var pc={},zn=oi(pc),Rl=oi(pc),ql=oi(pc);function Ci(e){if(e===pc)throw Error(X(174));return e}function f0(e,t){switch(qe(ql,t),qe(Rl,e),qe(zn,pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zm(t,e)}Ve(zn),qe(zn,t)}function Za(){Ve(zn),Ve(Rl),Ve(ql)}function $_(e){Ci(ql.current);var t=Ci(zn.current),r=zm(t,e.type);t!==r&&(qe(Rl,e),qe(zn,r))}function h0(e){Rl.current===e&&(Ve(zn),Ve(Rl))}var Xe=oi(0);function Ku(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qh=[];function m0(){for(var e=0;e<qh.length;e++)qh[e]._workInProgressVersionPrimary=null;qh.length=0}var ju=xs.ReactCurrentDispatcher,Fh=xs.ReactCurrentBatchConfig,Qi=0,Je=null,gt=null,jt=null,Hu=!1,gl=!1,Fl=0,tO=0;function Ft(){throw Error(X(321))}function p0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Nn(e[r],t[r]))return!1;return!0}function g0(e,t,r,n,s,i){if(Qi=i,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ju.current=e===null||e.memoizedState===null?iO:aO,e=r(n,s),gl){i=0;do{if(gl=!1,Fl=0,25<=i)throw Error(X(301));i+=1,jt=gt=null,t.updateQueue=null,ju.current=oO,e=r(n,s)}while(gl)}if(ju.current=Gu,t=gt!==null&&gt.next!==null,Qi=0,jt=gt=Je=null,Hu=!1,t)throw Error(X(300));return e}function x0(){var e=Fl!==0;return Fl=0,e}function Tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Je.memoizedState=jt=e:jt=jt.next=e,jt}function en(){if(gt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=jt===null?Je.memoizedState:jt.next;if(t!==null)jt=t,gt=e;else{if(e===null)throw Error(X(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},jt===null?Je.memoizedState=jt=e:jt=jt.next=e}return jt}function Ul(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=gt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Qi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Je.lanes|=d,Vi|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Nn(n,t.memoizedState)||(mr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Je.lanes|=i,Vi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bh(e){var t=en(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Nn(i,t.memoizedState)||(mr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function z_(){}function L_(e,t){var r=Je,n=en(),s=t(),i=!Nn(n.memoizedState,s);if(i&&(n.memoizedState=s,mr=!0),n=n.queue,y0(F_.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,Bl(9,q_.bind(null,r,n,s,t),void 0,null),Nt===null)throw Error(X(349));Qi&30||R_(r,t,s)}return s}function R_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function q_(e,t,r,n){t.value=r,t.getSnapshot=n,U_(t)&&B_(e)}function F_(e,t,r){return r(function(){U_(t)&&B_(e)})}function U_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Nn(e,r)}catch{return!0}}function B_(e){var t=us(e,1);t!==null&&jn(t,e,1,-1)}function wv(e){var t=Tn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ul,lastRenderedState:e},t.queue=e,e=e.dispatch=sO.bind(null,Je,e),[t.memoizedState,e]}function Bl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Je.updateQueue,t===null?(t={lastEffect:null,stores:null},Je.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Q_(){return en().memoizedState}function _u(e,t,r,n){var s=Tn();Je.flags|=e,s.memoizedState=Bl(1|t,r,void 0,n===void 0?null:n)}function Zd(e,t,r,n){var s=en();n=n===void 0?null:n;var i=void 0;if(gt!==null){var o=gt.memoizedState;if(i=o.destroy,n!==null&&p0(n,o.deps)){s.memoizedState=Bl(t,r,i,n);return}}Je.flags|=e,s.memoizedState=Bl(1|t,r,i,n)}function jv(e,t){return _u(8390656,8,e,t)}function y0(e,t){return Zd(2048,8,e,t)}function V_(e,t){return Zd(4,2,e,t)}function W_(e,t){return Zd(4,4,e,t)}function K_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H_(e,t,r){return r=r!=null?r.concat([e]):null,Zd(4,4,K_.bind(null,t,e),r)}function v0(){}function G_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Y_(e,t){var r=en();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&p0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function X_(e,t,r){return Qi&21?(Nn(r,t)||(r=r_(),Je.lanes|=r,Vi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mr=!0),e.memoizedState=r)}function rO(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=Fh.transition;Fh.transition={};try{e(!1),t()}finally{Ae=r,Fh.transition=n}}function J_(){return en().memoizedState}function nO(e,t,r){var n=Xs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Z_(e))eN(t,r);else if(r=M_(e,t,r,n),r!==null){var s=nr();jn(r,e,n,s),tN(r,t,n)}}function sO(e,t,r){var n=Xs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Z_(e))eN(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Nn(l,o)){var c=t.interleaved;c===null?(s.next=s,u0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=M_(e,t,s,n),r!==null&&(s=nr(),jn(r,e,n,s),tN(r,t,n))}}function Z_(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function eN(e,t){gl=Hu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function tN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Yg(e,r)}}var Gu={readContext:Zr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},iO={readContext:Zr,useCallback:function(e,t){return Tn().memoizedState=[e,t===void 0?null:t],e},useContext:Zr,useEffect:jv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,_u(4194308,4,K_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return _u(4194308,4,e,t)},useInsertionEffect:function(e,t){return _u(4,2,e,t)},useMemo:function(e,t){var r=Tn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Tn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=nO.bind(null,Je,e),[n.memoizedState,e]},useRef:function(e){var t=Tn();return e={current:e},t.memoizedState=e},useState:wv,useDebugValue:v0,useDeferredValue:function(e){return Tn().memoizedState=e},useTransition:function(){var e=wv(!1),t=e[0];return e=rO.bind(null,e[1]),Tn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Je,s=Tn();if(We){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),Nt===null)throw Error(X(349));Qi&30||R_(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,jv(F_.bind(null,n,i,e),[e]),n.flags|=2048,Bl(9,q_.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Tn(),t=Nt.identifierPrefix;if(We){var r=rs,n=ts;r=(n&~(1<<32-wn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=tO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},aO={readContext:Zr,useCallback:G_,useContext:Zr,useEffect:y0,useImperativeHandle:H_,useInsertionEffect:V_,useLayoutEffect:W_,useMemo:Y_,useReducer:Uh,useRef:Q_,useState:function(){return Uh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return X_(t,gt.memoizedState,e)},useTransition:function(){var e=Uh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:z_,useSyncExternalStore:L_,useId:J_,unstable_isNewReconciler:!1},oO={readContext:Zr,useCallback:G_,useContext:Zr,useEffect:y0,useImperativeHandle:H_,useInsertionEffect:V_,useLayoutEffect:W_,useMemo:Y_,useReducer:Bh,useRef:Q_,useState:function(){return Bh(Ul)},useDebugValue:v0,useDeferredValue:function(e){var t=en();return gt===null?t.memoizedState=e:X_(t,gt.memoizedState,e)},useTransition:function(){var e=Bh(Ul)[0],t=en().memoizedState;return[e,t]},useMutableSource:z_,useSyncExternalStore:L_,useId:J_,unstable_isNewReconciler:!1};function dn(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ze({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ef={isMounted:function(e){return(e=e._reactInternals)?sa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Xs(e),i=is(n,s);i.payload=t,r!=null&&(i.callback=r),t=Gs(e,i,s),t!==null&&(jn(t,e,s,n),wu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nr(),s=Xs(e),i=is(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Gs(e,i,s),t!==null&&(jn(t,e,s,n),wu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nr(),n=Xs(e),s=is(r,n);s.tag=2,t!=null&&(s.callback=t),t=Gs(e,s,n),t!==null&&(jn(t,e,n,r),wu(t,e,n))}};function _v(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Il(r,n)||!Il(s,i):!0}function rN(e,t,r){var n=!1,s=ni,i=t.contextType;return typeof i=="object"&&i!==null?i=Zr(i):(s=br(t)?Ui:Gt.current,n=t.contextTypes,i=(n=n!=null)?Ya(e,s):ni),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ef,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Nv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ef.enqueueReplaceState(t,t.state,null)}function ip(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},d0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Zr(i):(i=br(t)?Ui:Gt.current,s.context=Ya(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sp(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ef.enqueueReplaceState(s,s.state,null),Wu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var r="",n=t;do r+=IA(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Qh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ap(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lO=typeof WeakMap=="function"?WeakMap:Map;function nN(e,t,r){r=is(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Xu||(Xu=!0,gp=n),ap(e,t)},r}function sN(e,t,r){r=is(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ap(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ap(e,t),typeof n!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Sv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lO;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=jO.bind(null,e,t,r),t.then(e,e))}function kv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=is(-1,1),t.tag=2,Gs(r,t,1))),r.lanes|=1),e)}var cO=xs.ReactCurrentOwner,mr=!1;function er(e,t,r,n){t.child=e===null?D_(t,null,r,n):Ja(t,e.child,r,n)}function Ev(e,t,r,n,s){r=r.render;var i=t.ref;return Fa(t,s),n=g0(e,t,r,n,i,s),r=x0(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(We&&r&&s0(t),t.flags|=1,er(e,t,n,s),t.child)}function Cv(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,iN(e,t,i,n,s)):(e=Pu(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Il,r(o,n)&&e.ref===t.ref)return ds(e,t,s)}return t.flags|=1,e=Js(i,n),e.ref=t.ref,e.return=t,t.child=e}function iN(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Il(i,n)&&e.ref===t.ref)if(mr=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(mr=!0);else return t.lanes=e.lanes,ds(e,t,s)}return op(e,t,r,n,s)}function aN(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Da,kr),kr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(Da,kr),kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,qe(Da,kr),kr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,qe(Da,kr),kr|=n;return er(e,t,s,r),t.child}function oN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function op(e,t,r,n,s){var i=br(r)?Ui:Gt.current;return i=Ya(t,i),Fa(t,s),r=g0(e,t,r,n,i,s),n=x0(),e!==null&&!mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ds(e,t,s)):(We&&n&&s0(t),t.flags|=1,er(e,t,r,s),t.child)}function Av(e,t,r,n,s){if(br(r)){var i=!0;Fu(t)}else i=!1;if(Fa(t,s),t.stateNode===null)Nu(e,t),rN(t,r,n),ip(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=br(r)?Ui:Gt.current,u=Ya(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Nv(t,o,n,u),Os=!1;var m=t.memoizedState;o.state=m,Wu(t,n,o,s),c=t.memoizedState,l!==n||m!==c||vr.current||Os?(typeof d=="function"&&(sp(t,r,d,n),c=t.memoizedState),(l=Os||_v(t,r,l,n,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,I_(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:dn(t.type,l),o.props=u,f=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zr(c):(c=br(r)?Ui:Gt.current,c=Ya(t,c));var h=r.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Nv(t,o,n,c),Os=!1,m=t.memoizedState,o.state=m,Wu(t,n,o,s);var p=t.memoizedState;l!==f||m!==p||vr.current||Os?(typeof h=="function"&&(sp(t,r,h,n),p=t.memoizedState),(u=Os||_v(t,r,u,n,m,p,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return lp(e,t,r,n,i,s)}function lp(e,t,r,n,s,i){oN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&pv(t,r,!1),ds(e,t,i);n=t.stateNode,cO.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ja(t,e.child,null,i),t.child=Ja(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,s&&pv(t,r,!0),t.child}function lN(e){var t=e.stateNode;t.pendingContext?mv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mv(e,t.context,!1),f0(e,t.containerInfo)}function Tv(e,t,r,n,s){return Xa(),a0(s),t.flags|=256,er(e,t,r,n),t.child}var cp={dehydrated:null,treeContext:null,retryLane:0};function up(e){return{baseLanes:e,cachePool:null,transitions:null}}function cN(e,t,r){var n=t.pendingProps,s=Xe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),qe(Xe,s&1),e===null)return rp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=nf(o,n,0,null),e=zi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=up(r),t.memoizedState=cp,e):b0(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return uO(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Js(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Js(l,i):(i=zi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?up(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=cp,n}return i=e.child,e=i.sibling,n=Js(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function b0(e,t){return t=nf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wc(e,t,r,n){return n!==null&&a0(n),Ja(t,e.child,null,r),e=b0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uO(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Qh(Error(X(422))),Wc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=nf({mode:"visible",children:n.children},s,0,null),i=zi(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ja(t,e.child,null,o),t.child.memoizedState=up(o),t.memoizedState=cp,i);if(!(t.mode&1))return Wc(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(X(419)),n=Qh(i,n,void 0),Wc(e,t,o,n)}if(l=(o&e.childLanes)!==0,mr||l){if(n=Nt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,us(e,s),jn(n,e,s,-1))}return k0(),n=Qh(Error(X(421))),Wc(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_O.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ar=Hs(s.nextSibling),Tr=t,We=!0,mn=null,e!==null&&(Qr[Vr++]=ts,Qr[Vr++]=rs,Qr[Vr++]=Bi,ts=e.id,rs=e.overflow,Bi=t),t=b0(t,n.children),t.flags|=4096,t)}function Ov(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),np(e.return,t,r)}function Vh(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function uN(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=Xe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ov(e,r,t);else if(e.tag===19)Ov(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(qe(Xe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ku(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vh(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ku(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vh(t,!0,r,null,i);break;case"together":Vh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ds(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Js(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Js(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dO(e,t,r){switch(t.tag){case 3:lN(t),Xa();break;case 5:$_(t);break;case 1:br(t.type)&&Fu(t);break;case 4:f0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;qe(Qu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(qe(Xe,Xe.current&1),t.flags|=128,null):r&t.child.childLanes?cN(e,t,r):(qe(Xe,Xe.current&1),e=ds(e,t,r),e!==null?e.sibling:null);qe(Xe,Xe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return uN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),qe(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,aN(e,t,r)}return ds(e,t,r)}var dN,dp,fN,hN;dN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dp=function(){};fN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Ci(zn.current);var i=null;switch(r){case"input":s=Dm(e,s),n=Dm(e,n),i=[];break;case"select":s=Ze({},s,{value:void 0}),n=Ze({},n,{value:void 0}),i=[];break;case"textarea":s=$m(e,s),n=$m(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ru)}Lm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(El.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(El.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};hN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qo(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function fO(e,t,r){var n=t.pendingProps;switch(i0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return br(t.type)&&qu(),Ut(t),null;case 3:return n=t.stateNode,Za(),Ve(vr),Ve(Gt),m0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mn!==null&&(vp(mn),mn=null))),dp(e,t),Ut(t),null;case 5:h0(t);var s=Ci(ql.current);if(r=t.type,e!==null&&t.stateNode!=null)fN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(X(166));return Ut(t),null}if(e=Ci(zn.current),Qc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Dn]=t,n[Ll]=i,e=(t.mode&1)!==0,r){case"dialog":Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":case"embed":Ue("load",n);break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],n);break;case"source":Ue("error",n);break;case"img":case"image":case"link":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"input":Fy(n,i),Ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ue("invalid",n);break;case"textarea":By(n,i),Ue("invalid",n)}Lm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bc(n.textContent,l,e),s=["children",""+l]):El.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",n)}switch(r){case"input":Ic(n),Uy(n,i,!0);break;case"textarea":Ic(n),Qy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ru)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=F1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Dn]=t,e[Ll]=n,dN(e,t,!1,!1),t.stateNode=e;e:{switch(o=Rm(r,n),r){case"dialog":Ue("cancel",e),Ue("close",e),s=n;break;case"iframe":case"object":case"embed":Ue("load",e),s=n;break;case"video":case"audio":for(s=0;s<ol.length;s++)Ue(ol[s],e);s=n;break;case"source":Ue("error",e),s=n;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),s=n;break;case"details":Ue("toggle",e),s=n;break;case"input":Fy(e,n),s=Dm(e,n),Ue("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ze({},n,{value:void 0}),Ue("invalid",e);break;case"textarea":By(e,n),s=$m(e,n),Ue("invalid",e);break;default:s=n}Lm(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Q1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&U1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cl(e,c):typeof c=="number"&&Cl(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(El.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ue("scroll",e):c!=null&&Qg(e,i,c,o))}switch(r){case"input":Ic(e),Uy(e,n,!1);break;case"textarea":Ic(e),Qy(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ri(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?za(e,!!n.multiple,i,!1):n.defaultValue!=null&&za(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ru)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)hN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(X(166));if(r=Ci(ql.current),Ci(zn.current),Qc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Dn]=t,(i=n.nodeValue!==r)&&(e=Tr,e!==null))switch(e.tag){case 3:Bc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dn]=t,t.stateNode=n}return Ut(t),null;case 13:if(Ve(Xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Ar!==null&&t.mode&1&&!(t.flags&128))T_(),Xa(),t.flags|=98560,i=!1;else if(i=Qc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Dn]=t}else Xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),i=!1}else mn!==null&&(vp(mn),mn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Xe.current&1?xt===0&&(xt=3):k0())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return Za(),dp(e,t),e===null&&$l(t.stateNode.containerInfo),Ut(t),null;case 10:return c0(t.type._context),Ut(t),null;case 17:return br(t.type)&&qu(),Ut(t),null;case 19:if(Ve(Xe),i=t.memoizedState,i===null)return Ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Qo(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ku(e),o!==null){for(t.flags|=128,Qo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(Xe,Xe.current&1|2),t.child}e=e.sibling}i.tail!==null&&rt()>to&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ku(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!We)return Ut(t),null}else 2*rt()-i.renderingStartTime>to&&r!==1073741824&&(t.flags|=128,n=!0,Qo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,r=Xe.current,qe(Xe,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return S0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?kr&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function hO(e,t){switch(i0(t),t.tag){case 1:return br(t.type)&&qu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Za(),Ve(vr),Ve(Gt),m0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return h0(t),null;case 13:if(Ve(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Xe),null;case 4:return Za(),null;case 10:return c0(t.type._context),null;case 22:case 23:return S0(),null;case 24:return null;default:return null}}var Kc=!1,Vt=!1,mO=typeof WeakSet=="function"?WeakSet:Set,re=null;function Oa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){tt(e,t,n)}else r.current=null}function fp(e,t,r){try{r()}catch(n){tt(e,t,n)}}var Dv=!1;function pO(e,t){if(Gm=$u,e=y_(),n0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var h;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)m=f,f=h;for(;;){if(f===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(h=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ym={focusedElem:e,selectionRange:r},$u=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,x=p.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:dn(t.type,y),x);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){tt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return p=Dv,Dv=!1,p}function xl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&fp(t,r,i)}s=s.next}while(s!==n)}}function tf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function hp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mN(e){var t=e.alternate;t!==null&&(e.alternate=null,mN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dn],delete t[Ll],delete t[Zm],delete t[XT],delete t[JT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pN(e){return e.tag===5||e.tag===3||e.tag===4}function Mv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ru));else if(n!==4&&(e=e.child,e!==null))for(mp(e,t,r),e=e.sibling;e!==null;)mp(e,t,r),e=e.sibling}function pp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pp(e,t,r),e=e.sibling;e!==null;)pp(e,t,r),e=e.sibling}var Ot=null,fn=!1;function Ps(e,t,r){for(r=r.child;r!==null;)gN(e,t,r),r=r.sibling}function gN(e,t,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Kd,r)}catch{}switch(r.tag){case 5:Vt||Oa(r,t);case 6:var n=Ot,s=fn;Ot=null,Ps(e,t,r),Ot=n,fn=s,Ot!==null&&(fn?(e=Ot,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ot.removeChild(r.stateNode));break;case 18:Ot!==null&&(fn?(e=Ot,r=r.stateNode,e.nodeType===8?Lh(e.parentNode,r):e.nodeType===1&&Lh(e,r),Dl(e)):Lh(Ot,r.stateNode));break;case 4:n=Ot,s=fn,Ot=r.stateNode.containerInfo,fn=!0,Ps(e,t,r),Ot=n,fn=s;break;case 0:case 11:case 14:case 15:if(!Vt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fp(r,t,o),s=s.next}while(s!==n)}Ps(e,t,r);break;case 1:if(!Vt&&(Oa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){tt(r,t,l)}Ps(e,t,r);break;case 21:Ps(e,t,r);break;case 22:r.mode&1?(Vt=(n=Vt)||r.memoizedState!==null,Ps(e,t,r),Vt=n):Ps(e,t,r);break;default:Ps(e,t,r)}}function Iv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new mO),t.forEach(function(n){var s=NO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ot=l.stateNode,fn=!1;break e;case 3:Ot=l.stateNode.containerInfo,fn=!0;break e;case 4:Ot=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(Ot===null)throw Error(X(160));gN(i,o,s),Ot=null,fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){tt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xN(t,e),t=t.sibling}function xN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cn(t,e),An(e),n&4){try{xl(3,e,e.return),tf(3,e)}catch(y){tt(e,e.return,y)}try{xl(5,e,e.return)}catch(y){tt(e,e.return,y)}}break;case 1:cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return);break;case 5:if(cn(t,e),An(e),n&512&&r!==null&&Oa(r,r.return),e.flags&32){var s=e.stateNode;try{Cl(s,"")}catch(y){tt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&R1(s,i),Rm(l,o);var u=Rm(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Q1(s,f):d==="dangerouslySetInnerHTML"?U1(s,f):d==="children"?Cl(s,f):Qg(s,d,f,u)}switch(l){case"input":Mm(s,i);break;case"textarea":q1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?za(s,!!i.multiple,h,!1):m!==!!i.multiple&&(i.defaultValue!=null?za(s,!!i.multiple,i.defaultValue,!0):za(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ll]=i}catch(y){tt(e,e.return,y)}}break;case 6:if(cn(t,e),An(e),n&4){if(e.stateNode===null)throw Error(X(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){tt(e,e.return,y)}}break;case 3:if(cn(t,e),An(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Dl(t.containerInfo)}catch(y){tt(e,e.return,y)}break;case 4:cn(t,e),An(e);break;case 13:cn(t,e),An(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_0=rt())),n&4&&Iv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Vt=(u=Vt)||d,cn(t,e),Vt=u):cn(t,e),An(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(re=e,d=e.child;d!==null;){for(f=re=d;re!==null;){switch(m=re,h=m.child,m.tag){case 0:case 11:case 14:case 15:xl(4,m,m.return);break;case 1:Oa(m,m.return);var p=m.stateNode;if(typeof p.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){tt(n,r,y)}}break;case 5:Oa(m,m.return);break;case 22:if(m.memoizedState!==null){zv(f);continue}}h!==null?(h.return=m,re=h):zv(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=B1("display",o))}catch(y){tt(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){tt(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(t,e),An(e),n&4&&Iv(e);break;case 21:break;default:cn(t,e),An(e)}}function An(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(pN(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Cl(s,""),n.flags&=-33);var i=Mv(e);pp(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Mv(e);mp(e,l,o);break;default:throw Error(X(161))}}catch(c){tt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gO(e,t,r){re=e,yN(e)}function yN(e,t,r){for(var n=(e.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Kc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Vt;l=Kc;var u=Vt;if(Kc=o,(Vt=c)&&!u)for(re=s;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?Lv(s):c!==null?(c.return=o,re=c):Lv(s);for(;i!==null;)re=i,yN(i),i=i.sibling;re=s,Kc=l,Vt=u}$v(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):$v(e)}}function $v(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Vt||tf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Vt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:dn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&bv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}bv(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Vt||t.flags&512&&hp(t)}catch(m){tt(t,t.return,m)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function zv(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function Lv(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{tf(4,t)}catch(c){tt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){tt(t,s,c)}}var i=t.return;try{hp(t)}catch(c){tt(t,i,c)}break;case 5:var o=t.return;try{hp(t)}catch(c){tt(t,o,c)}}}catch(c){tt(t,t.return,c)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var xO=Math.ceil,Yu=xs.ReactCurrentDispatcher,w0=xs.ReactCurrentOwner,Gr=xs.ReactCurrentBatchConfig,je=0,Nt=null,dt=null,zt=0,kr=0,Da=oi(0),xt=0,Ql=null,Vi=0,rf=0,j0=0,yl=null,dr=null,_0=0,to=1/0,Kn=null,Xu=!1,gp=null,Ys=null,Hc=!1,Fs=null,Ju=0,vl=0,xp=null,Su=-1,ku=0;function nr(){return je&6?rt():Su!==-1?Su:Su=rt()}function Xs(e){return e.mode&1?je&2&&zt!==0?zt&-zt:eO.transition!==null?(ku===0&&(ku=r_()),ku):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:c_(e.type)),e):1}function jn(e,t,r,n){if(50<vl)throw vl=0,xp=null,Error(X(185));fc(e,r,n),(!(je&2)||e!==Nt)&&(e===Nt&&(!(je&2)&&(rf|=r),xt===4&&$s(e,zt)),wr(e,n),r===1&&je===0&&!(t.mode&1)&&(to=rt()+500,Jd&&li()))}function wr(e,t){var r=e.callbackNode;eT(e,t);var n=Iu(e,e===Nt?zt:0);if(n===0)r!==null&&Ky(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ky(r),t===1)e.tag===0?ZT(Rv.bind(null,e)):E_(Rv.bind(null,e)),GT(function(){!(je&6)&&li()}),r=null;else{switch(n_(n)){case 1:r=Gg;break;case 4:r=e_;break;case 16:r=Mu;break;case 536870912:r=t_;break;default:r=Mu}r=kN(r,vN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function vN(e,t){if(Su=-1,ku=0,je&6)throw Error(X(327));var r=e.callbackNode;if(Ua()&&e.callbackNode!==r)return null;var n=Iu(e,e===Nt?zt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zu(e,n);else{t=n;var s=je;je|=2;var i=wN();(Nt!==e||zt!==t)&&(Kn=null,to=rt()+500,$i(e,t));do try{bO();break}catch(l){bN(e,l)}while(!0);l0(),Yu.current=i,je=s,dt!==null?t=0:(Nt=null,zt=0,t=xt)}if(t!==0){if(t===2&&(s=Qm(e),s!==0&&(n=s,t=yp(e,s))),t===1)throw r=Ql,$i(e,0),$s(e,n),wr(e,rt()),r;if(t===6)$s(e,n);else{if(s=e.current.alternate,!(n&30)&&!yO(s)&&(t=Zu(e,n),t===2&&(i=Qm(e),i!==0&&(n=i,t=yp(e,i))),t===1))throw r=Ql,$i(e,0),$s(e,n),wr(e,rt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(X(345));case 2:wi(e,dr,Kn);break;case 3:if($s(e,n),(n&130023424)===n&&(t=_0+500-rt(),10<t)){if(Iu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){nr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Jm(wi.bind(null,e,dr,Kn),t);break}wi(e,dr,Kn);break;case 4:if($s(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-wn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xO(n/1960))-n,10<n){e.timeoutHandle=Jm(wi.bind(null,e,dr,Kn),n);break}wi(e,dr,Kn);break;case 5:wi(e,dr,Kn);break;default:throw Error(X(329))}}}return wr(e,rt()),e.callbackNode===r?vN.bind(null,e):null}function yp(e,t){var r=yl;return e.current.memoizedState.isDehydrated&&($i(e,t).flags|=256),e=Zu(e,t),e!==2&&(t=dr,dr=r,t!==null&&vp(t)),e}function vp(e){dr===null?dr=e:dr.push.apply(dr,e)}function yO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Nn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $s(e,t){for(t&=~j0,t&=~rf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wn(t),n=1<<r;e[r]=-1,t&=~n}}function Rv(e){if(je&6)throw Error(X(327));Ua();var t=Iu(e,0);if(!(t&1))return wr(e,rt()),null;var r=Zu(e,t);if(e.tag!==0&&r===2){var n=Qm(e);n!==0&&(t=n,r=yp(e,n))}if(r===1)throw r=Ql,$i(e,0),$s(e,t),wr(e,rt()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wi(e,dr,Kn),wr(e,rt()),null}function N0(e,t){var r=je;je|=1;try{return e(t)}finally{je=r,je===0&&(to=rt()+500,Jd&&li())}}function Wi(e){Fs!==null&&Fs.tag===0&&!(je&6)&&Ua();var t=je;je|=1;var r=Gr.transition,n=Ae;try{if(Gr.transition=null,Ae=1,e)return e()}finally{Ae=n,Gr.transition=r,je=t,!(je&6)&&li()}}function S0(){kr=Da.current,Ve(Da)}function $i(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HT(r)),dt!==null)for(r=dt.return;r!==null;){var n=r;switch(i0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qu();break;case 3:Za(),Ve(vr),Ve(Gt),m0();break;case 5:h0(n);break;case 4:Za();break;case 13:Ve(Xe);break;case 19:Ve(Xe);break;case 10:c0(n.type._context);break;case 22:case 23:S0()}r=r.return}if(Nt=e,dt=e=Js(e.current,null),zt=kr=t,xt=0,Ql=null,j0=rf=Vi=0,dr=yl=null,Ei!==null){for(t=0;t<Ei.length;t++)if(r=Ei[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ei=null}return e}function bN(e,t){do{var r=dt;try{if(l0(),ju.current=Gu,Hu){for(var n=Je.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Hu=!1}if(Qi=0,jt=gt=Je=null,gl=!1,Fl=0,w0.current=null,r===null||r.return===null){xt=1,Ql=t,dt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=kv(o);if(h!==null){h.flags&=-257,Pv(h,o,l,i,t),h.mode&1&&Sv(i,u,t),t=h,c=u;var p=t.updateQueue;if(p===null){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}else{if(!(t&1)){Sv(i,u,t),k0();break e}c=Error(X(426))}}else if(We&&l.mode&1){var x=kv(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Pv(x,o,l,i,t),a0(eo(c,l));break e}}i=c=eo(c,l),xt!==4&&(xt=2),yl===null?yl=[i]:yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=nN(i,c,t);vv(i,v);break e;case 1:l=c;var g=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ys===null||!Ys.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=sN(i,l,t);vv(i,_);break e}}i=i.return}while(i!==null)}_N(r)}catch(j){t=j,dt===r&&r!==null&&(dt=r=r.return);continue}break}while(!0)}function wN(){var e=Yu.current;return Yu.current=Gu,e===null?Gu:e}function k0(){(xt===0||xt===3||xt===2)&&(xt=4),Nt===null||!(Vi&268435455)&&!(rf&268435455)||$s(Nt,zt)}function Zu(e,t){var r=je;je|=2;var n=wN();(Nt!==e||zt!==t)&&(Kn=null,$i(e,t));do try{vO();break}catch(s){bN(e,s)}while(!0);if(l0(),je=r,Yu.current=n,dt!==null)throw Error(X(261));return Nt=null,zt=0,xt}function vO(){for(;dt!==null;)jN(dt)}function bO(){for(;dt!==null&&!VA();)jN(dt)}function jN(e){var t=SN(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?_N(e):dt=t,w0.current=null}function _N(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hO(r,t),r!==null){r.flags&=32767,dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,dt=null;return}}else if(r=fO(r,t,kr),r!==null){dt=r;return}if(t=t.sibling,t!==null){dt=t;return}dt=t=e}while(t!==null);xt===0&&(xt=5)}function wi(e,t,r){var n=Ae,s=Gr.transition;try{Gr.transition=null,Ae=1,wO(e,t,r,n)}finally{Gr.transition=s,Ae=n}return null}function wO(e,t,r,n){do Ua();while(Fs!==null);if(je&6)throw Error(X(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(tT(e,i),e===Nt&&(dt=Nt=null,zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hc||(Hc=!0,kN(Mu,function(){return Ua(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Gr.transition,Gr.transition=null;var o=Ae;Ae=1;var l=je;je|=4,w0.current=null,pO(e,r),xN(r,e),FT(Ym),$u=!!Gm,Ym=Gm=null,e.current=r,gO(r),WA(),je=l,Ae=o,Gr.transition=i}else e.current=r;if(Hc&&(Hc=!1,Fs=e,Ju=s),i=e.pendingLanes,i===0&&(Ys=null),GA(r.stateNode),wr(e,rt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,e=gp,gp=null,e;return Ju&1&&e.tag!==0&&Ua(),i=e.pendingLanes,i&1?e===xp?vl++:(vl=0,xp=e):vl=0,li(),null}function Ua(){if(Fs!==null){var e=n_(Ju),t=Gr.transition,r=Ae;try{if(Gr.transition=null,Ae=16>e?16:e,Fs===null)var n=!1;else{if(e=Fs,Fs=null,Ju=0,je&6)throw Error(X(331));var s=je;for(je|=4,re=e.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:xl(8,d,i)}var f=d.child;if(f!==null)f.return=d,re=f;else for(;re!==null;){d=re;var m=d.sibling,h=d.return;if(mN(d),d===u){re=null;break}if(m!==null){m.return=h,re=m;break}re=h}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xl(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,re=v;break e}re=i.return}}var g=e.current;for(re=g;re!==null;){o=re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,re=w;else e:for(o=g;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tf(9,l)}}catch(j){tt(l,l.return,j)}if(l===o){re=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,re=_;break e}re=l.return}}if(je=s,li(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Kd,e)}catch{}n=!0}return n}finally{Ae=r,Gr.transition=t}}return!1}function qv(e,t,r){t=eo(r,t),t=nN(e,t,1),e=Gs(e,t,1),t=nr(),e!==null&&(fc(e,1,t),wr(e,t))}function tt(e,t,r){if(e.tag===3)qv(e,e,r);else for(;t!==null;){if(t.tag===3){qv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ys===null||!Ys.has(n))){e=eo(r,e),e=sN(t,e,1),t=Gs(t,e,1),e=nr(),t!==null&&(fc(t,1,e),wr(t,e));break}}t=t.return}}function jO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nr(),e.pingedLanes|=e.suspendedLanes&r,Nt===e&&(zt&r)===r&&(xt===4||xt===3&&(zt&130023424)===zt&&500>rt()-_0?$i(e,0):j0|=r),wr(e,t)}function NN(e,t){t===0&&(e.mode&1?(t=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):t=1);var r=nr();e=us(e,t),e!==null&&(fc(e,t,r),wr(e,r))}function _O(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),NN(e,r)}function NO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(t),NN(e,r)}var SN;SN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vr.current)mr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return mr=!1,dO(e,t,r);mr=!!(e.flags&131072)}else mr=!1,We&&t.flags&1048576&&C_(t,Bu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Nu(e,t),e=t.pendingProps;var s=Ya(t,Gt.current);Fa(t,r),s=g0(null,t,n,e,s,r);var i=x0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,br(n)?(i=!0,Fu(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,d0(t),s.updater=ef,t.stateNode=s,s._reactInternals=t,ip(t,n,e,r),t=lp(null,t,n,!0,i,r)):(t.tag=0,We&&i&&s0(t),er(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Nu(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=kO(n),e=dn(n,e),s){case 0:t=op(null,t,n,e,r);break e;case 1:t=Av(null,t,n,e,r);break e;case 11:t=Ev(null,t,n,e,r);break e;case 14:t=Cv(null,t,n,dn(n.type,e),r);break e}throw Error(X(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),op(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Av(e,t,n,s,r);case 3:e:{if(lN(t),e===null)throw Error(X(387));n=t.pendingProps,i=t.memoizedState,s=i.element,I_(e,t),Wu(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=eo(Error(X(423)),t),t=Tv(e,t,n,r,s);break e}else if(n!==s){s=eo(Error(X(424)),t),t=Tv(e,t,n,r,s);break e}else for(Ar=Hs(t.stateNode.containerInfo.firstChild),Tr=t,We=!0,mn=null,r=D_(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xa(),n===s){t=ds(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return $_(t),e===null&&rp(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Xm(n,s)?o=null:i!==null&&Xm(n,i)&&(t.flags|=32),oN(e,t),er(e,t,o,r),t.child;case 6:return e===null&&rp(t),null;case 13:return cN(e,t,r);case 4:return f0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ja(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Ev(e,t,n,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,qe(Qu,n._currentValue),n._currentValue=o,i!==null)if(Nn(i.value,o)){if(i.children===s.children&&!vr.current){t=ds(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=is(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),np(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),np(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Fa(t,r),s=Zr(s),n=n(s),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,s=dn(n,t.pendingProps),s=dn(n.type,s),Cv(e,t,n,s,r);case 15:return iN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:dn(n,s),Nu(e,t),t.tag=1,br(n)?(e=!0,Fu(t)):e=!1,Fa(t,r),rN(t,n,s),ip(t,n,s,r),lp(null,t,n,!0,e,r);case 19:return uN(e,t,r);case 22:return aN(e,t,r)}throw Error(X(156,t.tag))};function kN(e,t){return Z1(e,t)}function SO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(e,t,r,n){return new SO(e,t,r,n)}function P0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kO(e){if(typeof e=="function")return P0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wg)return 11;if(e===Kg)return 14}return 2}function Js(e,t){var r=e.alternate;return r===null?(r=Kr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pu(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")P0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _a:return zi(r.children,s,i,t);case Vg:o=8,s|=8;break;case Cm:return e=Kr(12,r,t,s|2),e.elementType=Cm,e.lanes=i,e;case Am:return e=Kr(13,r,t,s),e.elementType=Am,e.lanes=i,e;case Tm:return e=Kr(19,r,t,s),e.elementType=Tm,e.lanes=i,e;case $1:return nf(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:o=10;break e;case I1:o=9;break e;case Wg:o=11;break e;case Kg:o=14;break e;case Ts:o=16,n=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Kr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function zi(e,t,r,n){return e=Kr(7,e,n,t),e.lanes=r,e}function nf(e,t,r,n){return e=Kr(22,e,n,t),e.elementType=$1,e.lanes=r,e.stateNode={isHidden:!1},e}function Wh(e,t,r){return e=Kr(6,e,null,t),e.lanes=r,e}function Kh(e,t,r){return t=Kr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function PO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ph(0),this.expirationTimes=Ph(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ph(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function E0(e,t,r,n,s,i,o,l,c){return e=new PO(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(i),e}function EO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function PN(e){if(!e)return ni;e=e._reactInternals;e:{if(sa(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(br(r))return P_(e,r,t)}return t}function EN(e,t,r,n,s,i,o,l,c){return e=E0(r,n,!0,e,s,i,o,l,c),e.context=PN(null),r=e.current,n=nr(),s=Xs(r),i=is(n,s),i.callback=t??null,Gs(r,i,s),e.current.lanes=s,fc(e,s,n),wr(e,n),e}function sf(e,t,r,n){var s=t.current,i=nr(),o=Xs(s);return r=PN(r),t.context===null?t.context=r:t.pendingContext=r,t=is(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Gs(s,t,o),e!==null&&(jn(e,s,o,i),wu(e,s,o)),o}function ed(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function C0(e,t){Fv(e,t),(e=e.alternate)&&Fv(e,t)}function CO(){return null}var CN=typeof reportError=="function"?reportError:function(e){console.error(e)};function A0(e){this._internalRoot=e}af.prototype.render=A0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));sf(e,t,null,null)};af.prototype.unmount=A0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wi(function(){sf(null,e,null,null)}),t[cs]=null}};function af(e){this._internalRoot=e}af.prototype.unstable_scheduleHydration=function(e){if(e){var t=a_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Is.length&&t!==0&&t<Is[r].priority;r++);Is.splice(r,0,e),r===0&&l_(e)}};function T0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function of(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uv(){}function AO(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=ed(o);i.call(u)}}var o=EN(t,n,e,0,null,!1,!1,"",Uv);return e._reactRootContainer=o,e[cs]=o.current,$l(e.nodeType===8?e.parentNode:e),Wi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=ed(c);l.call(u)}}var c=E0(e,0,!1,null,null,!1,!1,"",Uv);return e._reactRootContainer=c,e[cs]=c.current,$l(e.nodeType===8?e.parentNode:e),Wi(function(){sf(t,c,r,n)}),c}function lf(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ed(o);l.call(c)}}sf(t,o,e,s)}else o=AO(r,t,e,s,n);return ed(o)}s_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=al(t.pendingLanes);r!==0&&(Yg(t,r|1),wr(t,rt()),!(je&6)&&(to=rt()+500,li()))}break;case 13:Wi(function(){var n=us(e,1);if(n!==null){var s=nr();jn(n,e,1,s)}}),C0(e,1)}};Xg=function(e){if(e.tag===13){var t=us(e,134217728);if(t!==null){var r=nr();jn(t,e,134217728,r)}C0(e,134217728)}};i_=function(e){if(e.tag===13){var t=Xs(e),r=us(e,t);if(r!==null){var n=nr();jn(r,e,t,n)}C0(e,t)}};a_=function(){return Ae};o_=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};Fm=function(e,t,r){switch(t){case"input":if(Mm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Xd(n);if(!s)throw Error(X(90));L1(n),Mm(n,s)}}}break;case"textarea":q1(e,r);break;case"select":t=r.value,t!=null&&za(e,!!r.multiple,t,!1)}};K1=N0;H1=Wi;var TO={usingClientEntryPoint:!1,Events:[mc,Pa,Xd,V1,W1,N0]},Vo={findFiberByHostInstance:Pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OO={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X1(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||CO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Kd=Gc.inject(OO),$n=Gc}catch{}}Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TO;Rr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(t))throw Error(X(200));return EO(e,t,null,r)};Rr.createRoot=function(e,t){if(!T0(e))throw Error(X(299));var r=!1,n="",s=CN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=E0(e,1,!1,null,null,r,!1,n,s),e[cs]=t.current,$l(e.nodeType===8?e.parentNode:e),new A0(t)};Rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=X1(t),e=e===null?null:e.stateNode,e};Rr.flushSync=function(e){return Wi(e)};Rr.hydrate=function(e,t,r){if(!of(t))throw Error(X(200));return lf(null,e,t,!0,r)};Rr.hydrateRoot=function(e,t,r){if(!T0(e))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=CN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=EN(t,null,e,1,r??null,s,!1,i,o),e[cs]=t.current,$l(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new af(t)};Rr.render=function(e,t,r){if(!of(t))throw Error(X(200));return lf(null,e,t,!1,r)};Rr.unmountComponentAtNode=function(e){if(!of(e))throw Error(X(40));return e._reactRootContainer?(Wi(function(){lf(null,null,e,!1,function(){e._reactRootContainer=null,e[cs]=null})}),!0):!1};Rr.unstable_batchedUpdates=N0;Rr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!of(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return lf(e,t,r,!1,n)};Rr.version="18.3.1-next-f1338f8080-20240426";function AN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AN)}catch(e){console.error(e)}}AN(),A1.exports=Rr;var TN=A1.exports,ON,Bv=TN;ON=Bv.createRoot,Bv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(this,arguments)}var Us;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Us||(Us={}));const Qv="popstate";function DO(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return bp("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:td(s)}return IO(t,r,null,e)}function nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function DN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function MO(){return Math.random().toString(36).substr(2,8)}function Vv(e,t){return{usr:e.state,key:e.key,idx:t}}function bp(e,t,r,n){return r===void 0&&(r=null),Vl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jo(t):t,{state:r,key:t&&t.key||n||MO()})}function td(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function IO(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Us.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Vl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Us.Pop;let x=d(),v=x==null?null:x-u;u=x,c&&c({action:l,location:y.location,delta:v})}function m(x,v){l=Us.Push;let g=bp(y.location,x,v);u=d()+1;let w=Vv(g,u),_=y.createHref(g);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&c&&c({action:l,location:y.location,delta:1})}function h(x,v){l=Us.Replace;let g=bp(y.location,x,v);u=d();let w=Vv(g,u),_=y.createHref(g);o.replaceState(w,"",_),i&&c&&c({action:l,location:y.location,delta:0})}function p(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof x=="string"?x:td(x);return g=g.replace(/ $/,"%20"),nt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let y={get action(){return l},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qv,f),c=x,()=>{s.removeEventListener(Qv,f),c=null}},createHref(x){return t(s,x)},createURL:p,encodeLocation(x){let v=p(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:h,go(x){return o.go(x)}};return y}var Wv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wv||(Wv={}));function $O(e,t,r){return r===void 0&&(r="/"),zO(e,t,r,!1)}function zO(e,t,r,n){let s=typeof t=="string"?jo(t):t,i=O0(s.pathname||"/",r);if(i==null)return null;let o=MN(e);LO(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=GO(i);l=KO(o[c],u,n)}return l}function MN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Zs([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),MN(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:VO(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of IN(i.path))s(i,o,c)}),t}function IN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=IN(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function LO(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:WO(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const RO=/^:[\w-]+$/,qO=3,FO=2,UO=1,BO=10,QO=-2,Kv=e=>e==="*";function VO(e,t){let r=e.split("/"),n=r.length;return r.some(Kv)&&(n+=QO),t&&(n+=FO),r.filter(s=>!Kv(s)).reduce((s,i)=>s+(RO.test(i)?qO:i===""?UO:BO),n)}function WO(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function KO(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Zs([i,f.pathname]),pathnameBase:ZO(Zs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Zs([i,f.pathnameBase]))}return o}function Hv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=HO(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:h}=d;if(m==="*"){let y=l[f]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[f];return h&&!p?u[m]=void 0:u[m]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function HO(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),DN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function GO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return DN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function YO(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?jo(e):e;return{pathname:r?r.startsWith("/")?r:XO(r,t):t,search:e4(n),hash:t4(s)}}function XO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hh(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JO(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function D0(e,t){let r=JO(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function M0(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=jo(e):(s=Vl({},e),nt(!s.pathname||!s.pathname.includes("?"),Hh("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),Hh("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),Hh("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=YO(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Zs=e=>e.join("/").replace(/\/\/+/g,"/"),ZO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),e4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,t4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function r4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const $N=["post","put","patch","delete"];new Set($N);const n4=["get",...$N];new Set(n4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(this,arguments)}const I0=b.createContext(null),s4=b.createContext(null),ci=b.createContext(null),cf=b.createContext(null),ys=b.createContext({outlet:null,matches:[],isDataRoute:!1}),zN=b.createContext(null);function i4(e,t){let{relative:r}=t===void 0?{}:t;_o()||nt(!1);let{basename:n,navigator:s}=b.useContext(ci),{hash:i,pathname:o,search:l}=qN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Zs([n,o])),s.createHref({pathname:c,search:l,hash:i})}function _o(){return b.useContext(cf)!=null}function vs(){return _o()||nt(!1),b.useContext(cf).location}function LN(e){b.useContext(ci).static||b.useLayoutEffect(e)}function kt(){let{isDataRoute:e}=b.useContext(ys);return e?y4():a4()}function a4(){_o()||nt(!1);let e=b.useContext(I0),{basename:t,future:r,navigator:n}=b.useContext(ci),{matches:s}=b.useContext(ys),{pathname:i}=vs(),o=JSON.stringify(D0(s,r.v7_relativeSplatPath)),l=b.useRef(!1);return LN(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=M0(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Zs([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function RN(){let{matches:e}=b.useContext(ys),t=e[e.length-1];return t?t.params:{}}function qN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=b.useContext(ci),{matches:s}=b.useContext(ys),{pathname:i}=vs(),o=JSON.stringify(D0(s,n.v7_relativeSplatPath));return b.useMemo(()=>M0(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function o4(e,t){return l4(e,t)}function l4(e,t,r,n){_o()||nt(!1);let{navigator:s}=b.useContext(ci),{matches:i}=b.useContext(ys),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=vs(),d;if(t){var f;let x=typeof t=="string"?jo(t):t;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||nt(!1),d=x}else d=u;let m=d.pathname||"/",h=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");h="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let p=$O(e,{pathname:h}),y=h4(p&&p.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Zs([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Zs([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&y?b.createElement(cf.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Us.Pop}},y):y}function c4(){let e=x4(),t=r4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:s},r):null,null)}const u4=b.createElement(c4,null);class d4 extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?b.createElement(ys.Provider,{value:this.props.routeContext},b.createElement(zN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f4(e){let{routeContext:t,match:r,children:n}=e,s=b.useContext(I0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(ys.Provider,{value:t},n)}function h4(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||nt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:h}=r,p=f.route.loader&&m[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let h,p=!1,y=null,x=null;r&&(h=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||u4,c&&(u<0&&m===0?(p=!0,x=null):u===m&&(p=!0,x=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),g=()=>{let w;return h?w=y:p?w=x:f.route.Component?w=b.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,b.createElement(f4,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?b.createElement(d4,{location:r.location,revalidation:r.revalidation,component:y,error:h,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var FN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(FN||{}),rd=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rd||{});function m4(e){let t=b.useContext(I0);return t||nt(!1),t}function p4(e){let t=b.useContext(s4);return t||nt(!1),t}function g4(e){let t=b.useContext(ys);return t||nt(!1),t}function UN(e){let t=g4(),r=t.matches[t.matches.length-1];return r.route.id||nt(!1),r.route.id}function x4(){var e;let t=b.useContext(zN),r=p4(rd.UseRouteError),n=UN(rd.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function y4(){let{router:e}=m4(FN.UseNavigateStable),t=UN(rd.UseNavigateStable),r=b.useRef(!1);return LN(()=>{r.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Wl({fromRouteId:t},i)))},[e,t])}function v4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yn(e){let{to:t,replace:r,state:n,relative:s}=e;_o()||nt(!1);let{future:i,static:o}=b.useContext(ci),{matches:l}=b.useContext(ys),{pathname:c}=vs(),u=kt(),d=M0(t,D0(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Se(e){nt(!1)}function b4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Us.Pop,navigator:i,static:o=!1,future:l}=e;_o()&&nt(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:Wl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=jo(n));let{pathname:d="/",search:f="",hash:m="",state:h=null,key:p="default"}=n,y=b.useMemo(()=>{let x=O0(d,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:h,key:p},navigationType:s}},[c,d,f,m,h,p,s]);return y==null?null:b.createElement(ci.Provider,{value:u},b.createElement(cf.Provider,{children:r,value:y}))}function w4(e){let{children:t,location:r}=e;return o4(wp(t),r)}new Promise(()=>{});function wp(e,t){t===void 0&&(t=[]);let r=[];return b.Children.forEach(e,(n,s)=>{if(!b.isValidElement(n))return;let i=[...t,s];if(n.type===b.Fragment){r.push.apply(r,wp(n.props.children,i));return}n.type!==Se&&nt(!1),!n.props.index||!n.props.children||nt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=wp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jp(){return jp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jp.apply(this,arguments)}function j4(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function N4(e,t){return e.button===0&&(!t||t==="_self")&&!_4(e)}function _p(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function S4(e,t){let r=_p(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}const k4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],P4="6";try{window.__reactRouterVersion=P4}catch{}const E4="startTransition",Gv=jA[E4];function C4(e){let{basename:t,children:r,future:n,window:s}=e,i=b.useRef();i.current==null&&(i.current=DO({window:s,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=b.useCallback(f=>{u&&Gv?Gv(()=>c(f)):c(f)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>v4(n),[n]),b.createElement(b4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const A4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",T4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=b.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=j4(t,k4),{basename:h}=b.useContext(ci),p,y=!1;if(typeof u=="string"&&T4.test(u)&&(p=u,A4))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=O0(_.pathname,h);_.origin===w.origin&&j!=null?u=j+_.search+_.hash:y=!0}catch{}let x=i4(u,{relative:s}),v=O4(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function g(w){n&&n(w),w.defaultPrevented||v(w)}return b.createElement("a",jp({},m,{href:p||x,onClick:y||i?n:g,ref:r,target:c}))});var Yv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yv||(Yv={}));var Xv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xv||(Xv={}));function O4(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=kt(),u=vs(),d=qN(e,{relative:o});return b.useCallback(f=>{if(N4(f,r)){f.preventDefault();let m=n!==void 0?n:td(u)===td(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function BN(e){let t=b.useRef(_p(e)),r=b.useRef(!1),n=vs(),s=b.useMemo(()=>S4(n.search,r.current?null:t.current),[n.search]),i=kt(),o=b.useCallback((l,c)=>{const u=_p(typeof l=="function"?l(s):l);r.current=!0,i("?"+u,c)},[i,s]);return[s,o]}function D4(e){return e?/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)?e.includes("..")||e.startsWith(".")||e.endsWith(".")?{isValid:!1,error:"Invalid email format"}:e.length>254?{isValid:!1,error:"Email too long"}:{isValid:!0}:{isValid:!1,error:"Invalid email format"}:{isValid:!1,error:"Email is required"}}function QN(e){if(!e)return{isValid:!1,error:"Password is required",strength:0};let t=0;const r={length:e.length>=12,lowercase:/[a-z]/.test(e),uppercase:/[A-Z]/.test(e),numbers:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};return Object.values(r).forEach(n=>{n&&(t+=20)}),r.length?r.lowercase?r.uppercase?r.numbers?r.special?{isValid:!0,strength:t}:{isValid:!1,error:'Password must contain at least one special character (!@#$%^&*(),.?":{}|<>)',strength:t}:{isValid:!1,error:"Password must contain at least one number",strength:t}:{isValid:!1,error:"Password must contain at least one uppercase letter",strength:t}:{isValid:!1,error:"Password must contain at least one lowercase letter",strength:t}:{isValid:!1,error:"Password must be at least 12 characters",strength:t}}function Kl(e){if(!e)return e;const t=["password","token","email","phone","ssn","credit_card"];if(typeof e=="string")return e.includes("@")&&e.includes(".")?"[EMAIL_REDACTED]":e.length>20&&/^[A-Za-z0-9+/=]+$/.test(e)?"[TOKEN_REDACTED]":e;if(Array.isArray(e))return e.map(r=>Kl(r));if(typeof e=="object"&&e!==null){const r={};for(const[n,s]of Object.entries(e)){const i=n.toLowerCase();t.some(o=>i.includes(o))?r[n]="[REDACTED]":typeof s=="object"?r[n]=Kl(s):r[n]=s}return r}return e}class M4{constructor(){this.attempts=new Map}isAllowed(t,r=5,n=6e4){const s=Date.now(),o=(this.attempts.get(t)||[]).filter(l=>s-l<n);return o.length>=r?!1:(o.push(s),this.attempts.set(t,o),!0)}reset(t){this.attempts.delete(t)}}const Jv=new M4;function I4(e){return(...t)=>{if(!e)return;const r=t.map(n=>Kl(n));console.log(...r)}}class Qs{static getInstance(){return Qs.instance||(Qs.instance=new Qs),Qs.instance}logSecurityEvent(t){const r={timestamp:new Date().toISOString(),type:t.type,userId:t.userId||"anonymous",details:Kl(t.details),ipAddress:t.ipAddress||"unknown",userAgent:t.userAgent||"unknown"};console.log("[SECURITY_AUDIT]",r)}async sendToAuditService(t){}}function $4(e,t){const r=Kl(t);console.error("[ERROR]",{message:e.message,stack:e.stack,context:r,timestamp:new Date().toISOString()})}let z4=class extends ne.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){$4(t,{errorInfo:r,timestamp:new Date().toISOString()})}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please refresh the page to continue."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})}):this.props.children}};const L4="modulepreload",R4=function(e){return"/"+e},Zv={},gc=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=R4(c),c in Zv)return;Zv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":L4,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,h)=>{f.addEventListener("load",m),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},q4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class $0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class F4 extends $0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U4 extends $0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class B4 extends $0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Np;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Np||(Np={}));var Q4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class V4{constructor(t,{headers:r={},customFetch:n,region:s=Np.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=q4(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Q4(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(p=>{throw new F4(p)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new U4(d);if(!d.ok)throw new B4(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return m==="application/json"?h=yield d.json():m==="application/octet-stream"?h=yield d.blob():m==="text/event-stream"?h=d:m==="multipart/form-data"?h=yield d.formData():h=yield d.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}}var fr={},z0={},uf={},xc={},df={},ff={},W4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ro=W4();const K4=ro.fetch,VN=ro.fetch.bind(ro),WN=ro.Headers,H4=ro.Request,G4=ro.Response,No=Object.freeze(Object.defineProperty({__proto__:null,Headers:WN,Request:H4,Response:G4,default:VN,fetch:K4},Symbol.toStringTag,{value:"Module"})),Y4=aA(No);var hf={};Object.defineProperty(hf,"__esModule",{value:!0});let X4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};hf.default=X4;var KN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ff,"__esModule",{value:!0});const J4=KN(Y4),Z4=KN(hf);let e6=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=J4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,m=i.status,h=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,h="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,h="OK")}catch{i.status===404&&y===""?(m=204,h="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,h="OK"),u&&this.shouldThrowOnError)throw new Z4.default(u)}return{error:u,data:d,count:f,status:m,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};ff.default=e6;var t6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const r6=t6(ff);let n6=class extends r6.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};df.default=n6;var s6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xc,"__esModule",{value:!0});const i6=s6(df);let a6=class extends i6.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};xc.default=a6;var o6=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});const Wo=o6(xc);let l6=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wo.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Wo.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};uf.default=l6;var mf={},pf={};Object.defineProperty(pf,"__esModule",{value:!0});pf.version=void 0;pf.version="0.0.0-automated";Object.defineProperty(mf,"__esModule",{value:!0});mf.DEFAULT_HEADERS=void 0;const c6=pf;mf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c6.version}`};var HN=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z0,"__esModule",{value:!0});const u6=HN(uf),d6=HN(xc),f6=mf;let h6=class GN{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},f6.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new u6.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new GN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new d6.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};z0.default=h6;var So=Jr&&Jr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});fr.PostgrestError=fr.PostgrestBuilder=fr.PostgrestTransformBuilder=fr.PostgrestFilterBuilder=fr.PostgrestQueryBuilder=fr.PostgrestClient=void 0;const YN=So(z0);fr.PostgrestClient=YN.default;const XN=So(uf);fr.PostgrestQueryBuilder=XN.default;const JN=So(xc);fr.PostgrestFilterBuilder=JN.default;const ZN=So(df);fr.PostgrestTransformBuilder=ZN.default;const eS=So(ff);fr.PostgrestBuilder=eS.default;const tS=So(hf);fr.PostgrestError=tS.default;var m6=fr.default={PostgrestClient:YN.default,PostgrestQueryBuilder:XN.default,PostgrestFilterBuilder:JN.default,PostgrestTransformBuilder:ZN.default,PostgrestBuilder:eS.default,PostgrestError:tS.default};const{PostgrestClient:p6,PostgrestQueryBuilder:CK,PostgrestFilterBuilder:AK,PostgrestTransformBuilder:TK,PostgrestBuilder:OK,PostgrestError:DK}=m6;let Sp;typeof window>"u"?Sp=require("ws"):Sp=window.WebSocket;const g6=Sp,x6="2.11.10",y6={"X-Client-Info":`realtime-js/${x6}`},v6="1.0.0",rS=1e4,b6=1e3;var Ba;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ba||(Ba={}));var Zt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Zt||(Zt={}));var hn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(hn||(hn={}));var kp;(function(e){e.websocket="websocket"})(kp||(kp={}));var ki;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ki||(ki={}));class w6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class nS{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const eb=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=j6(o,e,t,s),i),{})},j6=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?sS(i,o):Pp(o)},sS=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return k6(t,r)}switch(e){case Le.bool:return _6(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return N6(t);case Le.json:case Le.jsonb:return S6(t);case Le.timestamp:return P6(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Pp(t);default:return Pp(t)}},Pp=e=>e,_6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},N6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},S6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},k6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>sS(t,l))}return e},P6=e=>typeof e=="string"?e.replace(" ","T"):e,iS=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Gh{constructor(t,r,n={},s=rS){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(tb||(tb={}));class bl{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=bl.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bl.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const m=d.map(x=>x.presence_ref),h=f.map(x=>x.presence_ref),p=d.filter(x=>h.indexOf(x.presence_ref)<0),y=f.filter(x=>m.indexOf(x.presence_ref)<0);p.length>0&&(l[u]=p),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),m=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(rb||(rb={}));var nb;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(nb||(nb={}));var Hn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class L0{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Gh(this,hn.join,this.params,this.timeout),this.rejoinTimer=new nS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bl(this),this.broadcastEndpointURL=iS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Hn.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Hn.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Hn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,h=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,p=[];for(let y=0;y<h;y++){const x=m[y],{filter:{event:v,schema:g,table:w,filter:_}}=x,j=d&&d[y];if(j&&j.event===v&&j.schema===g&&j.table===w&&j.filter===_)p.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Hn.SUBSCRIBED);return}}).receive("error",d=>{this.state=Zt.errored,t==null||t(Hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Zt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Gh(this,hn.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gh(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=hn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var p,y,x;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(y=h.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(h=>h.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var p,y,x,v,g,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const _=h.id,j=(p=h.filter)===null||p===void 0?void 0:p.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(g=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:y,table:x,commit_timestamp:v,type:g,errors:w}=p;m=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:w}),this._getPayloadRecords(p))}h.callback(m,n)})}_isClosed(){return this.state===Zt.closed}_isJoined(){return this.state===Zt.joined}_isJoining(){return this.state===Zt.joining}_isLeaving(){return this.state===Zt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&L0.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(hn.close,{},t)}_onError(t){this._on(hn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Zt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=eb(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=eb(t.columns,t.old_record)),r}}const sb=()=>{},E6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class C6{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=y6,this.params={},this.timeout=rS,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sb,this.ref=0,this.logger=sb,this.conn=null,this.sendBuffer=[],this.serializer=new w6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>gc(async()=>{const{default:c}=await Promise.resolve().then(()=>No);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${kp.websocket}`,this.httpEndpoint=iS(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nS(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=g6),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new A6(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:v6}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ba.connecting:return ki.Connecting;case Ba.open:return ki.Open;case Ba.closing:return ki.Closing;default:return ki.Closed}}isConnected(){return this.connectionState()===ki.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new L0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(hn.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(b6,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(hn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([E6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class A6{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ba.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class R0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function bt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class T6 extends R0{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ep extends R0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var O6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const aS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},D6=()=>O6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield gc(()=>Promise.resolve().then(()=>No),void 0)).Response:Response}),Cp=e=>{if(Array.isArray(e))return e.map(r=>Cp(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Cp(n)}),t};var ia=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Yh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),M6=(e,t,r)=>ia(void 0,void 0,void 0,function*(){const n=yield D6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new T6(Yh(s),e.status||500))}).catch(s=>{t(new Ep(Yh(s),s))}):t(new Ep(Yh(e),e))}),I6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function yc(e,t,r,n,s,i){return ia(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,I6(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>M6(c,l,n))})})}function nd(e,t,r,n){return ia(this,void 0,void 0,function*(){return yc(e,"GET",t,r,n)})}function Ds(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"POST",t,n,s,r)})}function $6(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"PUT",t,n,s,r)})}function z6(e,t,r,n){return ia(this,void 0,void 0,function*(){return yc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function oS(e,t,r,n,s){return ia(this,void 0,void 0,function*(){return yc(e,"DELETE",t,n,s,r)})}var lr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const L6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ib={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class R6{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=aS(s)}uploadOrUpdate(t,r,n,s){return lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ib),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(bt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ib.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(bt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return lr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ds(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new R0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}update(t,r,n){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ds(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ds(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=yield Ds(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}download(t,r){return lr(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield nd(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(bt(l))return{data:null,error:l};throw l}})}info(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield nd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Cp(n),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}exists(t){return lr(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield z6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(bt(n)&&n instanceof Ep){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return lr(this,void 0,void 0,function*(){try{return{data:yield oS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}list(t,r,n){return lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},L6),r),{prefix:t||""});return{data:yield Ds(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(bt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const q6="2.7.1",F6={"X-Client-Info":`storage-js/${q6}`};var ha=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class U6{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},F6),r),this.fetch=aS(n)}listBuckets(){return ha(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(bt(t))return{data:null,error:t};throw t}})}getBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield nd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return ha(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return ha(this,void 0,void 0,function*(){try{return{data:yield $6(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(bt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ha(this,void 0,void 0,function*(){try{return{data:yield oS(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(bt(r))return{data:null,error:r};throw r}})}}class B6 extends U6{constructor(t,r={},n){super(t,r,n)}from(t){return new R6(this.url,this.headers,t,this.fetch)}}const Q6="2.50.0";let ll="";typeof Deno<"u"?ll="deno":typeof document<"u"?ll="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ll="react-native":ll="node";const V6={"X-Client-Info":`supabase-js-${ll}/${Q6}`},W6={headers:V6},K6={schema:"public"},H6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G6={};var Y6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const X6=e=>{let t;return e?t=e:typeof fetch>"u"?t=VN:t=fetch,(...r)=>t(...r)},J6=()=>typeof Headers>"u"?WN:Headers,Z6=(e,t,r)=>{const n=X6(r),s=J6();return(i,o)=>Y6(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var eD=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function tD(e){return e.endsWith("/")?e:e+"/"}function rD(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>eD(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const lS="2.70.0",wa=30*1e3,Ap=3,Xh=Ap*wa,nD="http://localhost:9999",sD="supabase.auth.token",iD={"X-Client-Info":`gotrue-js/${lS}`},Tp="X-Supabase-Api-Version",cS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oD=6e5;class q0 extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lD extends q0{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cD(e){return me(e)&&e.name==="AuthApiError"}class uS extends q0{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ui extends q0{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class As extends ui{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uD(e){return me(e)&&e.name==="AuthSessionMissingError"}class Yc extends ui{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends ui{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Jc extends ui{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dD(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class ab extends ui{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Op extends ui{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Jh(e){return me(e)&&e.name==="AuthRetryableFetchError"}class ob extends ui{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class wl extends ui{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lb=` 	
\r=`.split(""),fD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<lb.length;t+=1)e[lb[t].charCodeAt(0)]=-2;for(let t=0;t<sd.length;t+=1)e[sd[t].charCodeAt(0)]=t;return e})();function cb(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sd[n]),t.queuedBits-=6}}function dS(e,t,r){const n=fD[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ub(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{pD(o,n,r)};for(let o=0;o<e.length;o+=1)dS(e.charCodeAt(o),s,i);return t.join("")}function hD(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mD(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}hD(n,t)}}function pD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)dS(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xD(e){const t=[];return mD(e,r=>t.push(r)),new Uint8Array(t)}function yD(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>cb(s,r,n)),cb(null,r,n),t.join("")}function vD(e){return Math.round(Date.now()/1e3)+e}function bD(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const un=()=>typeof window<"u"&&typeof document<"u",vi={tested:!1,writable:!1},jl=()=>{if(!un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vi.tested)return vi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vi.tested=!0,vi.writable=!0}catch{vi.tested=!0,vi.writable=!1}return vi.writable};function wD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const fS=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>gc(async()=>{const{default:n}=await Promise.resolve().then(()=>No);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},jD=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hS=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Zc=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},eu=async(e,t)=>{await e.removeItem(t)};class gf{constructor(){this.promise=new gf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}gf.promiseConstructor=Promise;function Zh(e){const t=e.split(".");if(t.length!==3)throw new wl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!aD.test(t[n]))throw new wl("JWT not in base64url format");return{header:JSON.parse(ub(t[0])),payload:JSON.parse(ub(t[1])),signature:gD(t[2]),raw:{header:t[0],payload:t[1]}}}async function _D(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ND(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function SD(e){return("0"+e.toString(16)).substr(-2)}function kD(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,SD).join("")}async function PD(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ED(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await PD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ma(e,t,r=!1){const n=kD();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await hS(e,`${t}-code-verifier`,s);const i=await ED(n);return[i,n===i?"plain":"s256"]}const CD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function AD(e){const t=e.headers.get(Tp);if(!t||!t.match(CD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function TD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function OD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pa(e){if(!DD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var MD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ji=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ID=[502,503,504];async function db(e){var t;if(!jD(e))throw new Op(ji(e),0);if(ID.includes(e.status))throw new Op(ji(e),e.status);let r;try{r=await e.json()}catch(i){throw new uS(ji(i),i)}let n;const s=AD(e);if(s&&s.getTime()>=cS["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ob(ji(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new As}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ob(ji(r),e.status,r.weak_password.reasons);throw new lD(ji(r),e.status||500,n)}const $D=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ve(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Tp]||(i[Tp]=cS["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await zD(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function zD(e,t,r,n,s,i){const o=$D(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Op(ji(c),0)}if(l.ok||await db(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await db(c)}}function Wn(e){var t;let r=null;FD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vD(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function fb(e){const t=Wn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function LD(e){return{data:e,error:null}}function RD(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=MD(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function qD(e){return e}function FD(e){return e.access_token&&e.refresh_token&&e.expires_in}const em=["global","local","others"];var UD=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class BD{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=fS(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=em[0]){if(em.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=UD(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:RD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zs})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:qD});if(d.error)throw d.error;const f=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){pa(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zs})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){pa(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:zs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){pa(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:zs})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){pa(t.userId);try{const{data:r,error:n}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){pa(t.userId),pa(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}}const QD={getItem:e=>jl()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{jl()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{jl()&&globalThis.localStorage.removeItem(e)}};function hb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function VD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ga={debug:!!(globalThis&&jl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WD extends mS{}async function KD(e,t,r){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WD(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ga.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}VD();const HD={url:nD,storageKey:sD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mb(e,t,r){return await r()}class Hl{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hl.nextInstanceID,Hl.nextInstanceID+=1,this.instanceID>0&&un()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},HD),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new BD({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fS(s.fetch),this.lock=s.lock||mb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:un()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=KD:this.lock=mb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:jl()?this.storage=QD:(this.memoryStorage={},this.storage=hb(this.memoryStorage)):(this.memoryStorage={},this.storage=hb(this.memoryStorage)),un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lS}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=wD(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),un()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),dD(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new uS("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wn}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:m}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ma(this.storage,this.storageKey)),i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:p},xform:Wn})}else if("phone"in t){const{phone:d,password:f,options:m}=t;i=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Wn})}else throw new Xc("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fb})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fb})}else throw new Xc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,f,m,h;let p,y;if("message"in t)p=t.message,y=t.signature;else{const{chain:x,wallet:v,statement:g,options:w}=t;let _;if(un())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),g?{statement:g}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:x,error:v}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:yD(y)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Wn});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Yc}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(me(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Wn});if(await eu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(me(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ma(this.storage,this.storageKey));const{error:f}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Xc("You must provide either an email or phone number.")}catch(l){if(me(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ma(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:LD})}catch(i){if(me(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new As;const{error:s}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Xc("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Zc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zs}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new As}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:zs})})}catch(r){if(me(r))return uD(r)&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new As;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ma(this.storage,this.storageKey));const{data:u,error:d}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:zs});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new As;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Zh(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new As;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!un())throw new Jc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Jc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ab("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ab("No code detected.");const{data:g,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Jc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const h=m-d;h*1e3<=wa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const p=m-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,d);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Zc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cD(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await eu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=bD(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ma(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(me(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:m}=i;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return un()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(me(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ND(async s=>(s>0&&await _D(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Wn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Jh(i)&&Date.now()+o-n<wa})}catch(n){if(this._debug(r,"error",n),me(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),un()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Zc(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xh;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Xh}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Jh(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new As;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new gf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new As;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),me(i)){const o={session:null,error:i};return Jh(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await hS(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await eu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wa);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wa}ms, refresh threshold is ${Ap} ticks`),s<=Ap&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ma(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zh(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+oD>Date.now()))return n;const{data:s,error:i}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new wl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new wl("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};n=h.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Zh(n);if(TD(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:s,signature:o},error:null}}const u=OD(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,xD(`${l}.${c}`)))throw new wl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}}Hl.nextInstanceID=0;const GD=Hl;class YD extends GD{constructor(t){super(t)}}var XD=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class JD{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=tD(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:K6,realtime:G6,auth:Object.assign(Object.assign({},H6),{storageKey:u}),global:W6},f=rD(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=Z6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new p6(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new V4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new B6(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return XD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YD({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new C6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ZD=(e,t,r)=>new JD(e,t,r),eM="https://pgnhngzjjgxkwcdqotky.supabase.co",tM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4",V=ZD(eM,tM),pS=b.createContext(void 0);function rM({children:e}){const[t,r]=b.useState(null),[n,s]=b.useState(!0),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(()=>!1);b.useRef(u);const f=I4(u);b.useEffect(()=>{},[u]);const m=b.useCallback(()=>{{console.warn("Developer mode cannot be enabled in production");return}},[]),h=f;console.log("DEBUG: isDeveloperMode status:",u);const p=(E,z,$)=>{h(`🔄 [${new Date().toISOString()}] AuthContext Loading: ${E} -> ${z}${$?` (${$})`:""}`)};b.useEffect(()=>{p("Initial setup",!0,"Component mounted"),(async()=>{s(!0),p("Auth initialization start",!0,"Fetching initial session");const{data:{session:$}}=await V.auth.getSession();$!=null&&$.user?(h("🔄 Initial session found, loading user profile...",$.user.id),p("Initial session found",!0,"Loading user profile"),o(!0),c(!0),s(!1),v($.user.id,$.user.email).catch(q=>{h("💥 Initial profile load error (non-blocking):",q)}).finally(()=>{c(!1),p("Initial setup complete",!1,"Auth initialization finished")})):(h("📭 No initial session found"),p("No initial session",!1,"No session found"),r(null),o(!1),c(!1),s(!1),p("Initial setup complete",!1,"Auth initialization finished"))})();const{data:{subscription:z}}=V.auth.onAuthStateChange(async($,q)=>{var U,D;h("🔄 Auth state change:",$,(U=q==null?void 0:q.user)==null?void 0:U.id,"Current loading state:",n),p(`Auth event: ${$}`,!0,`Session: ${((D=q==null?void 0:q.user)==null?void 0:D.id)||"none"}`),$==="SIGNED_OUT"||$==="USER_DELETED"?(h("👋 User signed out or deleted"),p("User signed out/deleted",!1,"Clearing user state"),r(null),o(!1),c(!1),s(!1)):q!=null&&q.user?(h("🔄 User session active, loading profile"),p("User session active",!0,"Loading profile"),o(!0),c(!0),s(!1),v(q.user.id,q.user.email).catch(P=>{h("💥 Auth event profile load error (non-blocking):",P),p("Auth event profile load error",!1,(P==null?void 0:P.message)||"Unknown error")}).finally(()=>{c(!1)})):(h("📭 Auth state change: No user in session"),p("Auth state change: No user",!1,"Setting user to null"),r(null),o(!1),c(!1),s(!1))});return()=>z.unsubscribe()},[]);const y=async E=>{try{h("📝 fetchUserSubscription: Attempting to fetch subscription for user:",E);const{data:z,error:$}=await V.from("subscriptions").select("*").eq("user_id",E).eq("status","active").order("created_at",{ascending:!1}).maybeSingle();return $?(h("❌ fetchUserSubscription: Error loading subscription:",$),null):(h("✅ fetchUserSubscription: Subscription data:",z),z)}catch(z){return h("💥 fetchUserSubscription: Error fetching subscription:",z),null}},x=async E=>{try{h("📝 fetchPlanSettingsForPlan: Fetching plan settings for plan:",E);const{data:z,error:$}=await V.from("plan_settings").select("*").eq("plan_id",E).maybeSingle();return $?(h("❌ fetchPlanSettingsForPlan: Error loading plan settings:",$),null):(h("✅ fetchPlanSettingsForPlan: Plan settings loaded:",z),z)}catch(z){return h("💥 fetchPlanSettingsForPlan: Error fetching plan settings:",z),null}},v=async(E,z)=>{console.log("--- Entering loadUserProfile function ---");try{console.log("DEBUG: loadUserProfile - About to fetch user profile from DB (Step 1)"),p("loadUserProfile start",!0,`User: ${E}`),h("📝 loadUserProfile: Starting profile load for:",E),h("📝 loadUserProfile: Step 1: Fetching user profile from DB...");const{data:$,error:q}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          avatar_url,
          created_at,
          updated_at,
          nickname
        `).eq("id",E).maybeSingle();if(q)return h("❌ loadUserProfile: Step 1 Error loading user profile from DB:",q),p("Profile load error",!1,q.message),r(null),null;if(h("✅ loadUserProfile: Step 1: Raw profile data from DB:",$),!$)return h("⚠️ loadUserProfile: Step 1: No user profile found for user:",E),p("No profile found",!1,"Profile does not exist"),r(null),null;h("📝 loadUserProfile: Step 2: Fetching user subscription...");let U=await y(E),D=null;if(h("📝 loadUserProfile: Step 2: User subscription check:",{userId:E,hasSubscription:!!U,subscriptionPlan:U==null?void 0:U.plan,teamId:$.team_id,teamRole:$.team_role}),$.team_id&&(!U||U.plan==="free")){h("📝 loadUserProfile: Step 3: Team member with no/free subscription, checking team owner plan settings for team:",$.team_id),h("📝 loadUserProfile: Step 3: Calling get_team_owner_plan_settings RPC...");const{data:R,error:F}=await V.rpc("get_team_owner_plan_settings",{p_team_id:$.team_id});!F&&(R!=null&&R.success)?(h("📝 loadUserProfile: Step 3: get_team_owner_plan_settings RPC returned successfully."),h("📝 loadUserProfile: Step 3: Found team owner plan settings:",R.subscription_plan),h("✅ loadUserProfile: Step 3: Using team owner plan settings directly"),D=R.plan_settings):h("❌ loadUserProfile: Step 3: Failed to get team owner plan settings:",F||(R==null?void 0:R.error))}h("📝 loadUserProfile: Step 4: Determining plan settings..."),D?h("📝 loadUserProfile: Step 4: Using team owner plan settings:",D):U?(h("📝 loadUserProfile: Step 4: Loading plan settings for plan:",U.plan),D=await x(U.plan),h("📝 loadUserProfile: Step 4: Plan settings loaded:",D)):(h('📝 loadUserProfile: Step 4: No active subscription found, fetching settings for "free" plan'),D=await x("free"),h("📝 loadUserProfile: Step 4: Free plan settings loaded:",D));let A;$.team_id&&D?(A=D.max_team_members,h("✅ loadUserProfile: Step 5: Using max_team_members from plan settings:",A)):h("ℹ️ loadUserProfile: Step 5: No team or plan settings available for max_team_members");const T={id:$.id,email:$.email||z||"",name:$.name,nickname:$.nickname,role:$.role,teamId:$.team_id,teamRole:$.team_role,maxTeamMembers:A,createdAt:$.created_at,subscription:U?{id:U.id,plan:U.plan,status:U.status,currentPeriodEnd:U.current_period_end,cancelAtPeriodEnd:U.cancel_at_period_end,cancelledAt:U.cancelled_at}:void 0,planSettings:D};return h("✅ loadUserProfile: User profile loaded successfully:",T),r(T),h("✅ loadUserProfile: setUser called with:",T.id),p("loadUserProfile success",!1,`User: ${T.name}`),T}catch($){return h("💥 loadUserProfile: Error loading user data:",$),p("loadUserProfile error",!1,$ instanceof Error?$.message:"Unknown error"),r(null),null}},M={user:t,login:async(E,z)=>{try{p("login start",!0,`Email: ${E}`),h("🔐 Starting login process for:",E);try{const D=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"login",identifier:E})});if(D.status===429){const P=await D.json(),A=P.retryAfter?Math.ceil(P.retryAfter/60):15;throw new Error(`Too many login attempts. Please try again in ${A} minutes.`)}D.ok||console.warn("Rate limiting check failed, proceeding with login")}catch(D){console.warn("Rate limiting check failed:",D)}const{data:$,error:q}=await V.auth.signInWithPassword({email:E,password:z});if(q)throw h("❌ Login failed:",q),p("login error",!1,q.message),q;if(!$.user)throw h("❌ Login failed: No user returned"),p("login no user",!1,"No user in response"),new Error("Login failed");if(h("✅ Auth login successful, loading user profile..."),!await v($.user.id,$.user.email))throw new Error("User profile not found. Please contact support or try creating a new account.");h("🎉 Login process completed successfully"),p("login success",!1,"Login complete")}catch($){throw p("login catch",!1,$ instanceof Error?$.message:"Unknown error"),$}},signup:async(E,z,$,q)=>{try{p("signup start",!0,`Email: ${E}, Team: ${q}`),h("🚀 Starting signup process for:",{email:E,name:$,teamName:q}),h("📝 Step 1: Creating auth user...");const{data:U,error:D}=await V.auth.signUp({email:E,password:z});if(D)throw h("❌ Auth user creation failed:",D),p("signup auth error",!1,D.message),D;if(!U.user)throw h("❌ Auth user creation failed: No user returned"),p("signup no user",!1,"No user in auth response"),new Error("Failed to create user");const P=U.user.id;h("✅ Auth user created successfully:",P),h("📝 Step 2: Creating team...");let A=5;try{const{data:Z,error:he}=await V.from("plan_settings").select("max_team_members").eq("plan_id","free").single();!he&&Z?(A=Z.max_team_members,h("📝 Step 2: Using max_team_members from free plan settings:",A)):h("⚠️ Step 2: Could not fetch free plan settings, using default:",A)}catch{h("⚠️ Step 2: Error fetching plan settings, using default:",A)}const{data:T,error:R}=await V.from("teams").insert([{name:q,description:`${q} team`,owner_id:P,member_count:1,max_members:A}]).select().single();if(R)throw h("❌ Team creation failed:",R),p("signup team error",!1,R.message),R;h("✅ Team created successfully:",T),h("📝 Step 3: Creating user profile...");const{error:F}=await V.from("user_profiles").insert([{id:P,email:E,name:$,role:"user",team_id:T.id,team_role:"owner"}]);if(F)throw h("❌ User profile creation failed:",F),p("signup profile error",!1,F.message),F;h("✅ User profile created successfully"),h("📝 Step 4: Creating subscription...");const{error:J}=await V.from("subscriptions").insert([{user_id:P,plan:"free",status:"active",current_period_end:new Date(Date.now()+30*24*60*60*1e3).toISOString(),cancel_at_period_end:!1}]);if(J)throw h("❌ Subscription creation failed:",J),p("signup subscription error",!1,J.message),J;h("✅ Subscription created successfully"),h("📝 Step 5: Creating team member entry...");const{error:oe}=await V.from("team_members").insert([{user_id:P,team_id:T.id,role:"owner",status:"active",invited_by:P}]);if(oe)throw h("❌ Team member creation failed:",oe),p("signup member error",!1,oe.message),oe;h("✅ Team member entry created successfully");try{await V.functions.invoke("send-email-brevo",{body:{to:E,subject:`Welcome to PBE Quiz, ${$}!`,htmlContent:`
              <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
                <h1 style="color: #4F46E5; text-align: center;">Welcome to PBE Quiz!</h1>
                <p>Hello ${$},</p>
                <p>Welcome to PBE Quiz! Your account has been successfully created, and you are now part of the <strong>${q}</strong> team.</p>
                <div style="text-align: center; margin: 30px 0;">
                  <a href="${window.location.origin}/dashboard" style="background-color: #4F46E5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">Go to Dashboard</a>
                </div>
                <p>Here's what you can do next:</p>
                <ul>
                  <li>Take a Quick Start Quiz to test your knowledge</li>
                  <li>Create custom quizzes focused on specific books</li>
                  <li>View your study schedule and assignments</li>
                  <li>Track your progress and achievements</li>
                </ul>
                <p>Best regards,<br>The PBE Quiz Team</p>
              </div>
            `}}),h("✅ Custom welcome email sent via Brevo")}catch(Z){console.error("❌ Failed to send custom welcome email via Brevo:",Z)}if(h("📝 Step 6: Loading complete user profile..."),!await v(P,U.user.email))throw new Error("Failed to load user profile after signup. Please try logging in.");h("🎉 Signup process completed successfully!"),p("signup success",!1,"Signup complete")}catch(U){throw h("💥 Signup process failed:",U),p("signup catch",!1,U instanceof Error?U.message:"Unknown error"),U}},signupForInvitation:async(E,z,$)=>{try{p("signup for invitation start",!0,`Email: ${E}`),h("🚀 Starting invitation signup process for:",{email:E,name:$}),h("📝 Step 1: Creating auth user...");const{data:q,error:U}=await V.auth.signUp({email:E,password:z});if(U)throw h("❌ Auth user creation failed:",U),p("signup for invitation auth error",!1,U.message),U;if(!q.user)throw h("❌ Auth user creation failed: No user returned"),p("signup for invitation no user",!1,"No user in auth response"),new Error("Failed to create user");const D=q.user.id;h("✅ Auth user created successfully:",D),h("📝 Step 2: Creating user profile...");const{error:P}=await V.from("user_profiles").insert([{id:D,email:E,name:$,role:"user",team_id:null,team_role:null}]);if(P)throw h("❌ User profile creation failed:",P),p("signup for invitation profile error",!1,P.message),P;if(h("✅ User profile created successfully"),h("📝 Step 3: Loading complete user profile..."),!await v(D,E))throw new Error("Failed to load user profile after creation");h("🎉 Invitation signup process completed successfully!"),p("signup for invitation success",!1,"Signup complete")}catch(q){throw p("signup for invitation catch",!1,q instanceof Error?q.message:"Unknown error"),q}},updateUserProfile:async E=>{if(!t)throw new Error("User not authenticated");try{p("updateUserProfile start",!0,`Updates: ${Object.keys(E).join(", ")}`),h("🔄 Updating user profile:",E);const z={};if(E.name!==void 0&&(z.name=E.name),E.email!==void 0&&(z.email=E.email),E.nickname!==void 0&&(z.nickname=E.nickname),Object.keys(z).length>0){const{error:$}=await V.from("user_profiles").update(z).eq("id",t.id);if($)throw h("❌ Error updating user profile:",$),$}if(E.email&&E.email!==t.email){const{error:$}=await V.auth.updateUser({email:E.email});if($)throw h("❌ Error updating auth user email:",$),$}await v(t.id,E.email||t.email),h("✅ User profile updated successfully")}catch(z){throw h("💥 Error updating user profile:",z),p("updateUserProfile error",!1,z instanceof Error?z.message:"Unknown error"),z}finally{p("updateUserProfile finally",!1,"Function complete")}},updatePassword:async E=>{if(!t)throw new Error("User not authenticated");try{p("updatePassword start",!0,"Updating password"),h("🔄 Updating user password...");const{error:z}=await V.auth.updateUser({password:E});if(z)throw h("❌ Error updating password:",z),p("updatePassword error",!1,z.message),z;h("✅ Password updated successfully"),p("updatePassword success",!1,"Password updated")}catch(z){throw h("💥 Error updating password:",z),p("updatePassword catch",!1,z instanceof Error?z.message:"Unknown error"),z}finally{p("updatePassword finally",!1,"Function complete")}},forgotPassword:async E=>{try{p("forgotPassword start",!0,`Email: ${E}`),h("🔄 Sending password reset email to:",E);try{const q=await fetch("https://pgnhngzjjgxkwcdqotky.supabase.co/functions/v1/auth-rate-limit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbmhuZ3pqamd4a3djZHFvdGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk3MjkyMzcsImV4cCI6MjA2NTMwNTIzN30.K-TL4StwSuHrkeM6voMFAobGOgm9RLbXNS2tpJ6C-E4"},body:JSON.stringify({action:"password_reset",identifier:E})});if(q.status===429){const U=await q.json(),D=U.retryAfter?Math.ceil(U.retryAfter/60):60;throw new Error(`Too many password reset attempts. Please try again in ${D} minutes.`)}q.ok||console.warn("Rate limiting check failed, proceeding with password reset")}catch(q){console.warn("Rate limiting check failed:",q)}const z=window.location.origin,{error:$}=await V.auth.resetPasswordForEmail(E,{redirectTo:`${z}/reset-password`});if($)throw h("❌ Error sending password reset email:",$),p("forgotPassword error",!1,$.message),$;h("✅ Password reset email sent successfully"),p("forgotPassword success",!1,"Reset email sent")}catch(z){throw p("forgotPassword catch",!1,z instanceof Error?z.message:"Unknown error"),z}},resetPasswordWithToken:async(E,z)=>{try{p("resetPasswordWithToken start",!0,"Setting session and updating password"),h("🔄 Resetting password with token...");const{data:$,error:q}=await V.auth.setSession({access_token:E,refresh_token:""});if(q)throw h("❌ Error setting session with reset token:",q),p("resetPasswordWithToken session error",!1,q.message),new Error("Invalid or expired reset token");if(!$.user)throw h("❌ No user found with reset token"),p("resetPasswordWithToken no user",!1,"Invalid reset token"),new Error("Invalid reset token");h("✅ Reset token verified, updating password...");const{data:U,error:D}=await V.auth.updateUser({password:z});if(D)throw h("❌ Error updating password:",D),p("resetPasswordWithToken update error",!1,D.message),D;h("✅ Password updated successfully"),p("resetPasswordWithToken success",!1,"Password reset complete"),U.user&&await v($.user.id,$.user.email)}catch($){throw h("💥 Error resetting password:",$),p("resetPasswordWithToken catch",!1,$ instanceof Error?$.message:"Unknown error"),$}},refreshUser:async()=>{try{p("refreshUser start",!0,"Force refresh requested");const{data:{session:E},error:z}=await V.auth.getSession();if(z)return h("❌ Session error during refresh:",z),p("Session error during refresh",!1,z.message),r(null),null;if(!(E!=null&&E.user))return h("🚫 No session found during refresh"),p("No session during refresh",!1,"Setting user to null"),r(null),null;h("🔄 Refreshing user profile for:",E.user.id);const $=await v(E.user.id,E.user.email);return $&&h("✅ User profile refreshed successfully:",$.name),p("refreshUser complete",!1,"Manual refresh complete"),$}catch(E){return h("💥 Error refreshing user:",E),p("refreshUser error",!1,E instanceof Error?E.message:"Unknown error"),null}},logout:async()=>{p("logout start",!0,"Signing out"),t&&Qs.getInstance().logSecurityEvent({type:"logout",userId:t.id,details:{success:!0}});const{error:E}=await V.auth.signOut();E?(h("Error signing out:",E),p("logout error",!1,E.message)):p("logout success",!1,"Signed out successfully"),r(null),s(!1)},loading:n,hasSession:i,profileLoading:l,isDeveloperMode:u,toggleDeveloperMode:m,developerLog:h};return a.jsx(pS.Provider,{value:M,children:e})}function ge(){const e=b.useContext(pS);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const gS=b.createContext(void 0);function nM({children:e}){const[t,r]=b.useState([]),[n,s]=b.useState(!1),{user:i,developerLog:o,loading:l}=ge(),c=b.useCallback(async()=>{if(l){o("🔍 QuestionContext: Auth still loading, skipping question fetch");return}s(!0);try{o("🔍 Fetching questions from Supabase...");const{data:h,error:p}=await V.from("questions").select("*").order("created_at",{ascending:!1});if(p)throw o("❌ Error fetching questions:",p),p;o("✅ Questions fetched successfully:",(h==null?void 0:h.length)||0,"questions"),r(h||[])}catch(h){o("💥 Error in fetchQuestions:",h),r([])}finally{s(!1)}},[l,o]);ne.useEffect(()=>{l||(o("🔍 QuestionContext: Auth loaded, fetching questions"),c())},[l,c]);const u=b.useCallback(async h=>{if(!i)throw new Error("User not authenticated");try{o("📝 Creating new question...");const{data:p,error:y}=await V.from("questions").insert([{...h,created_by:i.id}]).select().single();if(y)throw o("❌ Error creating question:",y),y;o("✅ Question created successfully:",p),r(x=>[p,...x])}catch(p){throw o("💥 Error creating question:",p),p}},[i]),d=b.useCallback(async(h,p)=>{try{o("📝 Updating question:",h);const{data:y,error:x}=await V.from("questions").update(p).eq("id",h).select().single();if(x)throw o("❌ Error updating question:",x),x;o("✅ Question updated successfully:",y),r(v=>v.map(g=>g.id===h?y:g))}catch(y){throw o("💥 Error updating question:",y),y}},[]),f=b.useCallback(async h=>{try{o("🗑️ Deleting question:",h);const{error:p}=await V.from("questions").delete().eq("id",h);if(p)throw o("❌ Error deleting question:",p),p;o("✅ Question deleted successfully"),r(y=>y.filter(x=>x.id!==h))}catch(p){throw o("💥 Error deleting question:",p),p}},[]),m={questions:t,loading:n,fetchQuestions:c,createQuestion:u,updateQuestion:d,deleteQuestion:f};return a.jsx(gS.Provider,{value:m,children:e})}function aa(){const e=b.useContext(gS);if(e===void 0)throw new Error("useQuestion must be used within a QuestionProvider");return e}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=b.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>b.createElement("svg",{ref:d,...sM,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${iM(e)}`,l].join(" "),...u},[...t.map(([f,m])=>b.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=te("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=te("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=te("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=te("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=te("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=te("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=te("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=te("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=te("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=te("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=te("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=te("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=te("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Ma(e,t="free",r){const n={free:0,pro:1,enterprise:2},s=n[t];return e.length===0?[]:(e.reduce((i,o)=>(i[o.tier]=(i[o.tier]||0)+1,i),{}),e.filter(i=>n[i.tier]<=s))}function SS(e,t,r){if(!e||e.length===0)return[];if(!t||t.length===0)return[];let n=[];return t.forEach((i,o)=>{i.chapters.forEach(l=>{const c=e.filter(u=>u.book_of_bible===i.book&&u.chapter===l);if(i.verses&&i.verses.length>0){const u=c.filter(d=>{const f=d.verse||1;return i.verses.includes(f)});n=[...n,...u]}else n=[...n,...c]})}),n.filter((i,o,l)=>o===l.findIndex(c=>c.id===i.id))}function Va(e,t){const r=t.filter(s=>s.book_of_bible===e);return[...new Set(r.map(s=>s.chapter))].sort((s,i)=>s-i)}function tm(e,t,r){const n=r.filter(i=>i.book_of_bible===e&&i.chapter===t);return[...new Set(n.map(i=>i.verse||1))].sort((i,o)=>i-o)}function kS(e){return[...new Set(e.map(r=>r.book_of_bible))].sort()}function PS(e){switch(e){case"quick-start":return"Quick Start";case"custom":return"Custom Quiz";case"study-assignment":return"Study Assignment";default:return"Quiz"}}function bb(e){switch(e){case"quick-start":return Pn;case"custom":return ko;case"study-assignment":return Yt;default:return St}}function ES(e){const[t,r,n]=e.split("-").map(Number),s=new Date(t,r-1,n);return hr(s)}function hr(e){var o,l,c;const r=new Intl.DateTimeFormat("en-CA",{timeZone:"Europe/London",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(e),n=parseInt(((o=r.find(u=>u.type==="year"))==null?void 0:o.value)||"1970"),s=parseInt(((l=r.find(u=>u.type==="month"))==null?void 0:l.value)||"1")-1,i=parseInt(((c=r.find(u=>u.type==="day"))==null?void 0:c.value)||"1");return new Date(Date.UTC(n,s,i,0,0,0,0))}function ao(e,t={}){const r={timeZone:"Europe/London",...t};return e.toLocaleDateString("en-GB",r)}function PM(e){return e.toLocaleDateString("en-CA",{timeZone:"Europe/London"})}function $p(e,t){const r=e.toLocaleDateString("en-CA",{timeZone:"Europe/London"}),n=t.toLocaleDateString("en-CA",{timeZone:"Europe/London"});return r===n}function rm(e){if(!e||e.length===0)return"";const t=[...e].sort((i,o)=>i-o),r=[];let n=t[0],s=t[0];for(let i=1;i<t.length;i++)t[i]===s+1?s=t[i]:(r.push(n===s?`${n}`:`${n}-${s}`),n=s=t[i]);return r.push(n===s?`${n}`:`${n}-${s}`),r.join(", ")}function EM(e,t,r="free",n){n==null||n("*** Entering calculateTotalQuestionsForStudyItems ***"),n==null||n("*** Input studyItems:",e),n==null||n("*** Total questions available:",t.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Input studyItems:",e),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Total questions in database:",t.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: User subscription plan:",r);const s=SS(t,e),i=Ma(s,r);return n==null||n("*** Final count:",i.length),n==null||n("🔍 calculateTotalQuestionsForStudyItems: Total count:",i.length),i.length}function CS(e){if(!e||e.length===0)return 0;const t=[...new Set(e.map(l=>{const c=new Date(l.completed_at);return hr(c).getTime()}))].sort((l,c)=>c-l);if(t.length===0)return 0;let r=0;const n=hr(new Date).getTime(),s=n-24*60*60*1e3;let i=n;const o=t[0];if(o===s)i=s;else if(o!==n)return 0;for(const l of t)if(l===i)r++,i-=24*60*60*1e3;else break;return r}function AS(e){if(!e||e.length===0)return 0;const t=[...new Set(e.map(s=>{const i=new Date(s.completed_at);return hr(i).getTime()}))].sort((s,i)=>s-i);if(t.length===0)return 0;if(t.length===1)return 1;let r=1,n=1;for(let s=1;s<t.length;s++){const i=t[s],l=t[s-1]+24*60*60*1e3;i===l?(n++,r=Math.max(r,n)):n=1}return r}function V0(e){return CS(e)}function It(e){const t=Math.round(e);if(t<60)return`${t}m`;const r=Math.floor(t/60),n=t%60;return n===0?`${r}h`:`${r}h ${n}m`}function oo(e,t=[]){return!e||e.length===0?"":e.map(r=>{if(r.verses&&r.verses.length>0){const n=rm(r.verses);if(r.chapters.length===1)return`${r.book} ${r.chapters[0]}:${n}`;{const s=rm(r.chapters);return`${r.book} (Ch. ${s}, Verses: ${n})`}}else{const n=rm(r.chapters);return r.chapters.length===1?`${r.book} ${r.chapters[0]}`:`${r.book} (Ch. ${n})`}}).join(", ")}const TS=b.createContext(void 0);function CM({children:e}){const[t,r]=b.useState([]),n=b.useCallback((i,o)=>{const l=Math.random().toString(36).substring(2,9),c={id:l,type:i,achievement:o};r(u=>[...u,c]),setTimeout(()=>{r(u=>u.filter(d=>d.id!==l))},5e3)},[]),s=b.useCallback(i=>{r(o=>o.filter(l=>l.id!==i))},[]);return a.jsxs(TS.Provider,{value:{showNotification:n},children:[e,a.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(i=>a.jsx(TM,{notification:i,onDismiss:()=>s(i.id)},i.id))})]})}function AM(){const e=b.useContext(TS);if(e===void 0)throw new Error("useNotification must be used within a NotificationProvider");return e}function TM({notification:e,onDismiss:t}){const{achievement:r}=e;return a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4 flex items-center space-x-4 animate-fade-in-up",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:r.badge_icon_url||"/vite.svg",alt:"Achievement Badge",className:"h-10 w-10 rounded-full"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Achievement Unlocked!"}),a.jsx("p",{className:"text-md text-indigo-600 font-bold",children:r.name}),a.jsx("p",{className:"text-xs text-gray-500",children:r.description})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:"×"})]})}async function OM(e){try{console.log("🔍 Checking if assignment should be marked as completed:",e);const{data:t,error:r}=await V.from("study_assignments").select("id, study_items, completed").eq("id",e).single();if(r)throw console.error("❌ Error loading assignment for completion check:",r),r;if(!t){console.warn("⚠️ Assignment not found for completion check:",e);return}if(t.completed){console.log("ℹ️ Assignment already marked as completed:",e);return}console.log("📚 Assignment study items:",t.study_items);const{data:n,error:s}=await V.from("quiz_sessions").select("id, questions, status, completed_at").eq("assignment_id",e).eq("status","completed");if(s)throw console.error("❌ Error loading quiz sessions for assignment:",s),s;if(console.log("🎯 Completed quiz sessions for assignment:",(n==null?void 0:n.length)||0),!n||n.length===0){console.log("ℹ️ No completed quiz sessions found for assignment");return}const i=new Set;n.forEach(u=>{u.questions&&Array.isArray(u.questions)&&u.questions.forEach(d=>{if(d.book_of_bible&&d.chapter){const f=`${d.book_of_bible}:${d.chapter}`;i.add(f)}})}),console.log("✅ Chapters completed through quizzes:",Array.from(i));const o=t.study_items||[],l=new Set;o.forEach(u=>{u.chapters.forEach(d=>{const f=`${u.book}:${d}`;l.add(f)})}),console.log("📋 Required chapters for assignment:",Array.from(l));const c=Array.from(l).every(u=>i.has(u));if(console.log("🎯 All chapters completed?",c),c){console.log("🎉 All chapters completed! Marking assignment as completed:",e);const{error:u}=await V.from("study_assignments").update({completed:!0,completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e);if(u)throw console.error("❌ Error marking assignment as completed:",u),u;console.log("✅ Assignment marked as completed successfully")}else{const u=i.size,d=l.size;console.log(`📊 Assignment progress: ${u}/${d} chapters completed`)}}catch(t){throw console.error("💥 Failed to check/mark assignment completion:",t),t}}const Eu=500;function DM(e){return Math.floor(e/Eu)+1}function MM(e,t){const r=(t-1)*Eu,n=t*Eu,s=e-r,i=n-e,o=s/Eu*100;return{current:s,needed:i,percentage:Math.min(o,100)}}const tu=10,OS=b.createContext(void 0);function IM({children:e}){const[t,r]=b.useState([]),{user:n,developerLog:s,refreshUser:i}=ge(),{showNotification:o}=AM();b.useEffect(()=>{n?l():r([])},[n]);const l=b.useCallback(async()=>{if(n)try{const{data:j,error:N}=await V.from("quiz_sessions").select("*").eq("user_id",n.id).order("created_at",{ascending:!1});if(N)throw N;r(j||[])}catch(j){console.error("Error loading quiz sessions:",j)}},[n]),c=b.useCallback(async j=>{if(!n)throw new Error("User not authenticated");try{s("🚀 Creating quiz session...",j);const{data:N,error:S}=await V.from("quiz_sessions").insert([j]).select().single();if(S)throw s("❌ Error creating quiz session:",S),S;return s("✅ Quiz session created successfully:",N),r(k=>[N,...k]),N.id}catch(N){throw s("💥 Error creating quiz session:",N),N}},[n]),u=b.useCallback(j=>t.find(N=>N.id===j)||null,[t]),d=b.useCallback(j=>t.filter(N=>N.user_id===j&&N.status==="active"),[t]),f=b.useCallback((j,N)=>t.find(S=>S.assignment_id===j&&S.user_id===N)||null,[t]),m=b.useCallback(async j=>{if(!n)throw new Error("User not authenticated");try{s("🗑️ Deleting quiz session using RPC function:",j);const{data:N,error:S}=await V.rpc("delete_quiz_and_adjust_gamification",{p_quiz_session_id:j,p_user_id:n.id});if(S)throw s("❌ Error calling delete RPC function:",S),S;if(!(N!=null&&N.success)){const k=(N==null?void 0:N.error)||"Failed to delete quiz session";throw s("❌ RPC function returned error:",k),new Error(k)}s("✅ Quiz session deleted successfully via RPC"),r(k=>k.filter(O=>O.id!==j));try{await i(),s("✅ User data refreshed after quiz deletion")}catch(k){s("⚠️ Could not refresh user data after deletion:",k)}}catch(N){throw s("💥 Error deleting quiz session:",N),N}},[n,s,i]),h=j=>!j||!Array.isArray(j)?0:j.reduce((N,S)=>N+(Number(S.pointsEarned)||0),0),p=j=>!j||!Array.isArray(j)?0:j.reduce((N,S)=>N+(Number(S.timeSpent)||0),0),y=async j=>{if(!j.assignment_id)return 0;try{s("📅 Checking for on-time completion bonus for assignment:",j.assignment_id);const{data:N,error:S}=await V.from("study_assignments").select("date").eq("id",j.assignment_id).single();if(S||!N)return s("⚠️ Could not fetch assignment date for bonus XP check:",S),0;const k=new Date(N.date),O=new Date(j.completed_at||new Date);return $p(k,O)?(s("🎉 On-time completion bonus earned:",tu,"XP"),tu):(s("📅 Assignment completed on different day - no bonus XP"),0)}catch(N){return s("💥 Error checking for bonus XP:",N),0}},x=async(j,N)=>{if(n)try{const{data:S,error:k}=await V.from("user_stats").select("*").eq("user_id",n.id).maybeSingle();if(k)throw k;s("📊 Current user stats from database:",S);const{data:O,error:C}=await V.from("quiz_sessions").select("total_points").eq("user_id",n.id).eq("status","completed");if(C)throw C;const M=(O||[]).reduce((T,R)=>T+(Number(R.total_points)||0),0),E=M+N;s("🔍 XP recalculation from all sessions:",{allCompletedSessionsCount:(O==null?void 0:O.length)||0,totalXpFromAllSessions:M,bonusXp:N,finalNewTotalXp:E,previousTotalXp:(S==null?void 0:S.total_xp)||0});const z=DM(E),{data:$,error:q}=await V.from("quiz_sessions").select("completed_at").eq("user_id",n.id).eq("status","completed").order("completed_at",{ascending:!1});if(q)throw q;const U=V0($||[]),D=AS($||[]);s("📈 Streak calculation:",{currentStudyStreak:U,trueHistoricalLongestStreak:D,previousLongestStreak:(S==null?void 0:S.longest_streak)||0});const P={user_id:n.id,total_xp:E,current_level:z,longest_streak:D,last_quiz_date:new Date().toISOString().split("T")[0]};s("💾 About to upsert user stats:",P);const{error:A}=await V.from("user_stats").upsert(P,{onConflict:"user_id"});if(A)throw A;s("✅ User stats successfully updated:",P)}catch(S){throw s("💥 Error updating user stats:",S),S}},v=async()=>{if(n)try{const{data:j,error:N}=await V.from("achievements").select("*");if(N)throw N;const{data:S,error:k}=await V.from("user_achievements").select("achievement_id").eq("user_id",n.id);if(k)throw k;const O=new Set((S==null?void 0:S.map(C=>C.achievement_id))||[]);for(const C of j||[]){if(O.has(C.id))continue;let M=!1;switch(C.criteria_type){case"total_quizzes_completed":const{count:E,error:z}=await V.from("quiz_sessions").select("*",{count:"exact",head:!0}).eq("user_id",n.id).eq("status","completed");if(z)throw z;M=(E||0)>=C.criteria_value;break;case"total_points_earned":const{data:$,error:q}=await V.from("user_stats").select("total_xp").eq("user_id",n.id).single();!q&&$&&(M=$.total_xp>=C.criteria_value);break;case"longest_streak":const{data:U,error:D}=await V.from("user_stats").select("longest_streak").eq("user_id",n.id).single();!D&&U&&(M=U.longest_streak>=C.criteria_value);break;default:s("⚠️ Unknown achievement criteria type:",C.criteria_type);break}if(M){const{error:E}=await V.from("user_achievements").insert({user_id:n.id,achievement_id:C.id,unlocked_at:new Date().toISOString()});if(E){s("❌ Error unlocking achievement:",E);continue}s("🏆 Achievement unlocked:",C.name),o("achievement",C)}}}catch(j){s("💥 Error checking achievements:",j)}},g=b.useCallback(async(j,N)=>{if(!j)throw new Error("Session ID is required");if(!N)throw new Error("Updates object is required");if(!n)throw new Error("User not authenticated");try{s("🔄 Updating quiz session:",j,"with updates:",N);const S=t.find(O=>O.id===j);if(!S)throw new Error(`Session with ID ${j} not found`);let k={...N};if(N.results){const O=h(N.results),C=p(N.results);k.total_points=O,k.total_actual_time_spent_seconds=C,s("🔄 Recalculated derived values:",{calculatedTotalPoints:O,calculatedTimeSpent:C,resultsCount:N.results.length})}if(N.status==="completed"){s("🎯 Quiz session being marked as completed");let O=0;S.assignment_id&&(O=await y({...S,completed_at:k.completed_at||new Date().toISOString()}),O>0&&(k.bonus_xp=O,o("achievement",{id:"bonus-xp",name:"On-Time Completion Bonus!",description:`You earned ${tu} bonus XP for completing your study assignment on time!`,criteria_type:"bonus_xp",criteria_value:tu,badge_icon_url:"/images/badges/perfect.png"})));const{error:C}=await V.from("quiz_sessions").update(k).eq("id",j);if(C)throw s("❌ Error updating quiz session:",C),C;if(s("✅ Quiz session updated successfully"),S.assignment_id)try{s("📚 Marking assignment as completed:",S.assignment_id),await OM(S.assignment_id),s("✅ Assignment marked as completed")}catch(M){s("❌ Failed to mark assignment as completed:",M)}try{const M=h(k.results||S.results||[]);await x(M,O),await v()}catch(M){s("❌ Error in gamification updates:",M)}}else{const{error:O}=await V.from("quiz_sessions").update(k).eq("id",j);if(O)throw s("❌ Error updating quiz session:",O),O}r(O=>O.map(C=>C.id===j?{...C,...k}:C)),s("✅ Quiz session update completed successfully")}catch(S){throw s("💥 Error in updateQuizSession:",S),S}},[n,t,s,o]),w=b.useCallback(async(j,N)=>{if(!n)throw new Error("User not authenticated");if(!j)throw new Error("Session ID is required");try{s("🔄 Updating quiz approval status:",j,"to:",N);const{error:S}=await V.from("quiz_sessions").update({approval_status:N,updated_at:new Date().toISOString()}).eq("id",j);if(S)throw s("❌ Error updating quiz approval status:",S),S;r(k=>k.map(O=>O.id===j?{...O,approval_status:N}:O)),s("✅ Quiz approval status updated successfully")}catch(S){throw s("💥 Error in updateQuizApprovalStatus:",S),S}},[n,s]),_={sessions:t,createQuizSession:c,updateQuizSession:g,loadQuizSession:u,loadUserSessions:l,getActiveSessionsForUser:d,getSessionForAssignment:f,deleteQuizSession:m,updateQuizApprovalStatus:w};return a.jsx(OS.Provider,{value:_,children:e})}function di(){const e=b.useContext(OS);if(e===void 0)throw new Error("useQuizSession must be used within a QuizSessionProvider");return e}function ht({children:e,requireAdmin:t=!1,requireUser:r=!1,allowedTeamRoles:n}){const{user:s,loading:i,hasSession:o,profileLoading:l,developerLog:c}=ge(),u=vs();if(c("🚦 ProtectedRoute: Rendering with user:",s,"loading:",i,"hasSession:",o,"profileLoading:",l,"path:",u.pathname),i)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});if(!s)return o&&l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):a.jsx(Yn,{to:"/login",replace:!0});if(t&&s.role!=="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(r&&s.role==="admin")return a.jsx(Yn,{to:"/dashboard",replace:!0});if(n&&s.teamRole&&!n.includes(s.teamRole))return a.jsx(Yn,{to:"/dashboard",replace:!0});try{return a.jsx(a.Fragment,{children:e})}catch(d){return console.error("ProtectedRoute error:",d),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please try refreshing the page."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Refresh Page"})]})})}}const zp=[{id:"prod_SkGQB88LYZDhx4",name:"PBE Pro Play Yearly",description:"Annual subscription to PBE Pro Play with advanced features and unlimited access.",priceId:"price_1RoltBEGamTK7gLp3vFhnNpg",mode:"subscription",price:150,currency:"GBP",interval:"year",features:["Unlimited quiz sessions","Advanced analytics","Priority support","All question tiers","Team collaboration","Study schedule management"]},{id:"prod_SkG8EHn9mio3Tg",name:"PBE Pro Plan",description:"Monthly subscription to PBE Pro with enhanced features and team management.",priceId:"price_1RolccEGamTK7gLpzKYZ7aYj",mode:"subscription",price:15,currency:"GBP",interval:"month",features:["Enhanced quiz features","Team management","Progress tracking","Pro question access","Custom quiz builder","Basic analytics"]}];function Ko(e,t){const r=t||"GBP",n=typeof e=="number"&&!isNaN(e)?e:0;return new Intl.NumberFormat("en-GB",{style:"currency",currency:r}).format(n)}function xa(e){return new Date(e*1e3).toLocaleDateString()}function _l(e){if(e<60)return`${e}s`;const t=Math.floor(e/60),r=e%60;return`${t}:${r.toString().padStart(2,"0")}`}function Lp(e){const t=new Date,r=new Date(e),n=t.getTime()-r.getTime(),s=Math.floor(n/(1e3*60)),i=Math.floor(n/(1e3*60*60)),o=Math.floor(i/24);return s<1?"Just now":s<60?`${s} minute${s!==1?"s":""} ago`:i<24?`${i} hour${i!==1?"s":""} ago`:o<7?`${o} day${o!==1?"s":""} ago`:r.toLocaleDateString()}var vc=e=>e.type==="checkbox",Ai=e=>e instanceof Date,tr=e=>e==null;const DS=e=>typeof e=="object";var st=e=>!tr(e)&&!Array.isArray(e)&&DS(e)&&!Ai(e),$M=e=>st(e)&&e.target?vc(e.target)?e.target.checked:e.target.value:e,zM=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,LM=(e,t)=>e.has(zM(t)),RM=e=>{const t=e.constructor&&e.constructor.prototype;return st(t)&&t.hasOwnProperty("isPrototypeOf")},W0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Bt(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(W0&&(e instanceof Blob||n))&&(r||st(e)))if(t=r?[]:{},!r&&!RM(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Bt(e[s]));else return e;return t}var yf=e=>Array.isArray(e)?e.filter(Boolean):[],ut=e=>e===void 0,ce=(e,t,r)=>{if(!t||!st(e))return r;const n=yf(t.split(/[,[\].]+?/)).reduce((s,i)=>tr(s)?s:s[i],e);return ut(n)||n===e?ut(e[t])?r:e[t]:n},On=e=>typeof e=="boolean",K0=e=>/^\w*$/.test(e),MS=e=>yf(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(e,t,r)=>{let n=-1;const s=K0(t)?[t]:MS(t),i=s.length,o=i-1;for(;++n<i;){const l=s[n];let c=r;if(n!==o){const u=e[l];c=st(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const wb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ne.createContext(null);var qM=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const o=i;return t._proxyFormState[o]!==xn.all&&(t._proxyFormState[o]=!n||xn.all),e[o]}});return s};const FM=typeof window<"u"?b.useLayoutEffect:b.useEffect;var Mn=e=>typeof e=="string",UM=(e,t,r,n,s)=>Mn(e)?(n&&t.watch.add(e),ce(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),ce(r,i))):(n&&(t.watchAll=!0),r),BM=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Nl=e=>Array.isArray(e)?e:[e],jb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}},Rp=e=>tr(e)||!DS(e);function Ls(e,t){if(Rp(e)||Rp(t))return e===t;if(Ai(e)&&Ai(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const i=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Ai(i)&&Ai(o)||st(i)&&st(o)||Array.isArray(i)&&Array.isArray(o)?!Ls(i,o):i!==o)return!1}}return!0}var cr=e=>st(e)&&!Object.keys(e).length,H0=e=>e.type==="file",yn=e=>typeof e=="function",ad=e=>{if(!W0)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},IS=e=>e.type==="select-multiple",G0=e=>e.type==="radio",QM=e=>G0(e)||vc(e),nm=e=>ad(e)&&e.isConnected;function VM(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ut(e)?n++:e[t[n++]];return e}function WM(e){for(const t in e)if(e.hasOwnProperty(t)&&!ut(e[t]))return!1;return!0}function pt(e,t){const r=Array.isArray(t)?t:K0(t)?[t]:MS(t),n=r.length===1?e:VM(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(st(n)&&cr(n)||Array.isArray(n)&&WM(n))&&pt(e,r.slice(0,-1)),e}var $S=e=>{for(const t in e)if(yn(e[t]))return!0;return!1};function od(e,t={}){const r=Array.isArray(e);if(st(e)||r)for(const n in e)Array.isArray(e[n])||st(e[n])&&!$S(e[n])?(t[n]=Array.isArray(e[n])?[]:{},od(e[n],t[n])):tr(e[n])||(t[n]=!0);return t}function zS(e,t,r){const n=Array.isArray(e);if(st(e)||n)for(const s in e)Array.isArray(e[s])||st(e[s])&&!$S(e[s])?ut(t)||Rp(r[s])?r[s]=Array.isArray(e[s])?od(e[s],[]):{...od(e[s])}:zS(e[s],tr(t)?{}:t[s],r[s]):r[s]=!Ls(e[s],t[s]);return r}var Ho=(e,t)=>zS(e,t,od(t));const _b={value:!1,isValid:!1},Nb={value:!0,isValid:!0};var LS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ut(e[0].attributes.value)?ut(e[0].value)||e[0].value===""?Nb:{value:e[0].value,isValid:!0}:Nb:_b}return _b},RS=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ut(e)?e:t?e===""?NaN:e&&+e:r&&Mn(e)?new Date(e):n?n(e):e;const Sb={isValid:!1,value:null};var qS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Sb):Sb;function kb(e){const t=e.ref;return H0(t)?t.files:G0(t)?qS(e.refs).value:IS(t)?[...t.selectedOptions].map(({value:r})=>r):vc(t)?LS(e.refs).value:RS(ut(t.value)?e.ref.value:t.value,e)}var KM=(e,t,r,n)=>{const s={};for(const i of e){const o=ce(t,i);o&&Be(s,i,o._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},ld=e=>e instanceof RegExp,Go=e=>ut(e)?e:ld(e)?e.source:st(e)?ld(e.value)?e.value.source:e.value:e,Pb=e=>({isOnSubmit:!e||e===xn.onSubmit,isOnBlur:e===xn.onBlur,isOnChange:e===xn.onChange,isOnAll:e===xn.all,isOnTouch:e===xn.onTouched});const Eb="AsyncFunction";var HM=e=>!!e&&!!e.validate&&!!(yn(e.validate)&&e.validate.constructor.name===Eb||st(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Eb)),GM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Cb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Sl=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=ce(e,s);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],s)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Sl(l,t))break}else if(st(l)&&Sl(l,t))break}}};function Ab(e,t,r){const n=ce(e,r);if(n||K0(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=ce(t,i),l=ce(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};s.pop()}return{name:r}}var YM=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return cr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||xn.all))},XM=(e,t,r)=>!e||!t||e===t||Nl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),JM=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,ZM=(e,t)=>!yf(ce(e,t)).length&&pt(e,t),eI=(e,t,r)=>{const n=Nl(ce(e,r));return Be(n,"root",t[r]),Be(e,r,n),e},Cu=e=>Mn(e);function Tb(e,t,r="validate"){if(Cu(e)||Array.isArray(e)&&e.every(Cu)||On(e)&&!e)return{type:r,message:Cu(e)?e:"",ref:t}}var ya=e=>st(e)&&!ld(e)?e:{value:e,message:""},Ob=async(e,t,r,n,s,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:m,pattern:h,validate:p,name:y,valueAsNumber:x,mount:v}=e._f,g=ce(r,y);if(!v||t.has(y))return{};const w=l?l[0]:o,_=E=>{s&&w.reportValidity&&(w.setCustomValidity(On(E)?"":E||""),w.reportValidity())},j={},N=G0(o),S=vc(o),k=N||S,O=(x||H0(o))&&ut(o.value)&&ut(g)||ad(o)&&o.value===""||g===""||Array.isArray(g)&&!g.length,C=BM.bind(null,y,n,j),M=(E,z,$,q=Vn.maxLength,U=Vn.minLength)=>{const D=E?z:$;j[y]={type:E?q:U,message:D,ref:o,...C(E?q:U,D)}};if(i?!Array.isArray(g)||!g.length:c&&(!k&&(O||tr(g))||On(g)&&!g||S&&!LS(l).isValid||N&&!qS(l).isValid)){const{value:E,message:z}=Cu(c)?{value:!!c,message:c}:ya(c);if(E&&(j[y]={type:Vn.required,message:z,ref:w,...C(Vn.required,z)},!n))return _(z),j}if(!O&&(!tr(f)||!tr(m))){let E,z;const $=ya(m),q=ya(f);if(!tr(g)&&!isNaN(g)){const U=o.valueAsNumber||g&&+g;tr($.value)||(E=U>$.value),tr(q.value)||(z=U<q.value)}else{const U=o.valueAsDate||new Date(g),D=T=>new Date(new Date().toDateString()+" "+T),P=o.type=="time",A=o.type=="week";Mn($.value)&&g&&(E=P?D(g)>D($.value):A?g>$.value:U>new Date($.value)),Mn(q.value)&&g&&(z=P?D(g)<D(q.value):A?g<q.value:U<new Date(q.value))}if((E||z)&&(M(!!E,$.message,q.message,Vn.max,Vn.min),!n))return _(j[y].message),j}if((u||d)&&!O&&(Mn(g)||i&&Array.isArray(g))){const E=ya(u),z=ya(d),$=!tr(E.value)&&g.length>+E.value,q=!tr(z.value)&&g.length<+z.value;if(($||q)&&(M($,E.message,z.message),!n))return _(j[y].message),j}if(h&&!O&&Mn(g)){const{value:E,message:z}=ya(h);if(ld(E)&&!g.match(E)&&(j[y]={type:Vn.pattern,message:z,ref:o,...C(Vn.pattern,z)},!n))return _(z),j}if(p){if(yn(p)){const E=await p(g,r),z=Tb(E,w);if(z&&(j[y]={...z,...C(Vn.validate,z.message)},!n))return _(z.message),j}else if(st(p)){let E={};for(const z in p){if(!cr(E)&&!n)break;const $=Tb(await p[z](g,r),w,z);$&&(E={...$,...C(z,$.message)},_($.message),n&&(j[y]=E))}if(!cr(E)&&(j[y]={ref:w,...E},!n))return j}}return _(!0),j};const tI={mode:xn.onSubmit,reValidateMode:xn.onChange,shouldFocusError:!0};function rI(e={}){let t={...tI,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:yn(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=st(t.defaultValues)||st(t.values)?Bt(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Bt(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const m={array:jb(),state:jb()},h=t.criteriaMode===xn.all,p=I=>L=>{clearTimeout(u),u=setTimeout(I,L)},y=async I=>{if(!t.disabled&&(d.isValid||f.isValid||I)){const L=t.resolver?cr((await S()).errors):await O(n,!0);L!==r.isValid&&m.state.next({isValid:L})}},x=(I,L)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((I||Array.from(l.mount)).forEach(Q=>{Q&&(L?Be(r.validatingFields,Q,L):pt(r.validatingFields,Q))}),m.state.next({validatingFields:r.validatingFields,isValidating:!cr(r.validatingFields)}))},v=(I,L=[],Q,Y,W=!0,G=!0)=>{if(Y&&Q&&!t.disabled){if(o.action=!0,G&&Array.isArray(ce(n,I))){const ie=Q(ce(n,I),Y.argA,Y.argB);W&&Be(n,I,ie)}if(G&&Array.isArray(ce(r.errors,I))){const ie=Q(ce(r.errors,I),Y.argA,Y.argB);W&&Be(r.errors,I,ie),ZM(r.errors,I)}if((d.touchedFields||f.touchedFields)&&G&&Array.isArray(ce(r.touchedFields,I))){const ie=Q(ce(r.touchedFields,I),Y.argA,Y.argB);W&&Be(r.touchedFields,I,ie)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ho(s,i)),m.state.next({name:I,isDirty:M(I,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Be(i,I,L)},g=(I,L)=>{Be(r.errors,I,L),m.state.next({errors:r.errors})},w=I=>{r.errors=I,m.state.next({errors:r.errors,isValid:!1})},_=(I,L,Q,Y)=>{const W=ce(n,I);if(W){const G=ce(i,I,ut(Q)?ce(s,I):Q);ut(G)||Y&&Y.defaultChecked||L?Be(i,I,L?G:kb(W._f)):$(I,G),o.mount&&y()}},j=(I,L,Q,Y,W)=>{let G=!1,ie=!1;const we={name:I};if(!t.disabled){if(!Q||Y){(d.isDirty||f.isDirty)&&(ie=r.isDirty,r.isDirty=we.isDirty=M(),G=ie!==we.isDirty);const De=Ls(ce(s,I),L);ie=!!ce(r.dirtyFields,I),De?pt(r.dirtyFields,I):Be(r.dirtyFields,I,!0),we.dirtyFields=r.dirtyFields,G=G||(d.dirtyFields||f.dirtyFields)&&ie!==!De}if(Q){const De=ce(r.touchedFields,I);De||(Be(r.touchedFields,I,Q),we.touchedFields=r.touchedFields,G=G||(d.touchedFields||f.touchedFields)&&De!==Q)}G&&W&&m.state.next(we)}return G?we:{}},N=(I,L,Q,Y)=>{const W=ce(r.errors,I),G=(d.isValid||f.isValid)&&On(L)&&r.isValid!==L;if(t.delayError&&Q?(c=p(()=>g(I,Q)),c(t.delayError)):(clearTimeout(u),c=null,Q?Be(r.errors,I,Q):pt(r.errors,I)),(Q?!Ls(W,Q):W)||!cr(Y)||G){const ie={...Y,...G&&On(L)?{isValid:L}:{},errors:r.errors,name:I};r={...r,...ie},m.state.next(ie)}},S=async I=>{x(I,!0);const L=await t.resolver(i,t.context,KM(I||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return x(I),L},k=async I=>{const{errors:L}=await S(I);if(I)for(const Q of I){const Y=ce(L,Q);Y?Be(r.errors,Q,Y):pt(r.errors,Q)}else r.errors=L;return L},O=async(I,L,Q={valid:!0})=>{for(const Y in I){const W=I[Y];if(W){const{_f:G,...ie}=W;if(G){const we=l.array.has(G.name),De=W._f&&HM(W._f);De&&d.validatingFields&&x([Y],!0);const Xt=await Ob(W,l.disabled,i,h,t.shouldUseNativeValidation&&!L,we);if(De&&d.validatingFields&&x([Y]),Xt[G.name]&&(Q.valid=!1,L))break;!L&&(ce(Xt,G.name)?we?eI(r.errors,Xt,G.name):Be(r.errors,G.name,Xt[G.name]):pt(r.errors,G.name))}!cr(ie)&&await O(ie,L,Q)}}return Q.valid},C=()=>{for(const I of l.unMount){const L=ce(n,I);L&&(L._f.refs?L._f.refs.every(Q=>!nm(Q)):!nm(L._f.ref))&&he(I)}l.unMount=new Set},M=(I,L)=>!t.disabled&&(I&&L&&Be(i,I,L),!Ls(T(),s)),E=(I,L,Q)=>UM(I,l,{...o.mount?i:ut(L)?s:Mn(I)?{[I]:L}:L},Q,L),z=I=>yf(ce(o.mount?i:s,I,t.shouldUnregister?ce(s,I,[]):[])),$=(I,L,Q={})=>{const Y=ce(n,I);let W=L;if(Y){const G=Y._f;G&&(!G.disabled&&Be(i,I,RS(L,G)),W=ad(G.ref)&&tr(L)?"":L,IS(G.ref)?[...G.ref.options].forEach(ie=>ie.selected=W.includes(ie.value)):G.refs?vc(G.ref)?G.refs.forEach(ie=>{(!ie.defaultChecked||!ie.disabled)&&(Array.isArray(W)?ie.checked=!!W.find(we=>we===ie.value):ie.checked=W===ie.value||!!W)}):G.refs.forEach(ie=>ie.checked=ie.value===W):H0(G.ref)?G.ref.value="":(G.ref.value=W,G.ref.type||m.state.next({name:I,values:Bt(i)})))}(Q.shouldDirty||Q.shouldTouch)&&j(I,W,Q.shouldTouch,Q.shouldDirty,!0),Q.shouldValidate&&A(I)},q=(I,L,Q)=>{for(const Y in L){if(!L.hasOwnProperty(Y))return;const W=L[Y],G=I+"."+Y,ie=ce(n,G);(l.array.has(I)||st(W)||ie&&!ie._f)&&!Ai(W)?q(G,W,Q):$(G,W,Q)}},U=(I,L,Q={})=>{const Y=ce(n,I),W=l.array.has(I),G=Bt(L);Be(i,I,G),W?(m.array.next({name:I,values:Bt(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Q.shouldDirty&&m.state.next({name:I,dirtyFields:Ho(s,i),isDirty:M(I,G)})):Y&&!Y._f&&!tr(G)?q(I,G,Q):$(I,G,Q),Cb(I,l)&&m.state.next({...r}),m.state.next({name:o.mount?I:void 0,values:Bt(i)})},D=async I=>{o.mount=!0;const L=I.target;let Q=L.name,Y=!0;const W=ce(n,Q),G=De=>{Y=Number.isNaN(De)||Ai(De)&&isNaN(De.getTime())||Ls(De,ce(i,Q,De))},ie=Pb(t.mode),we=Pb(t.reValidateMode);if(W){let De,Xt;const yi=L.type?kb(W._f):$M(I),Cn=I.type===wb.BLUR||I.type===wb.FOCUS_OUT,vh=!GM(W._f)&&!t.resolver&&!ce(r.errors,Q)&&!W._f.deps||JM(Cn,ce(r.touchedFields,Q),r.isSubmitted,we,ie),Io=Cb(Q,l,Cn);Be(i,Q,yi),Cn?(W._f.onBlur&&W._f.onBlur(I),c&&c(0)):W._f.onChange&&W._f.onChange(I);const $o=j(Q,yi,Cn),Oc=!cr($o)||Io;if(!Cn&&m.state.next({name:Q,type:I.type,values:Bt(i)}),vh)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Cn&&y():Cn||y()),Oc&&m.state.next({name:Q,...Io?{}:$o});if(!Cn&&Io&&m.state.next({...r}),t.resolver){const{errors:zo}=await S([Q]);if(G(yi),Y){const xe=Ab(r.errors,n,Q),Jt=Ab(zo,n,xe.name||Q);De=Jt.error,Q=Jt.name,Xt=cr(zo)}}else x([Q],!0),De=(await Ob(W,l.disabled,i,h,t.shouldUseNativeValidation))[Q],x([Q]),G(yi),Y&&(De?Xt=!1:(d.isValid||f.isValid)&&(Xt=await O(n,!0)));Y&&(W._f.deps&&A(W._f.deps),N(Q,Xt,De,$o))}},P=(I,L)=>{if(ce(r.errors,L)&&I.focus)return I.focus(),1},A=async(I,L={})=>{let Q,Y;const W=Nl(I);if(t.resolver){const G=await k(ut(I)?I:W);Q=cr(G),Y=I?!W.some(ie=>ce(G,ie)):Q}else I?(Y=(await Promise.all(W.map(async G=>{const ie=ce(n,G);return await O(ie&&ie._f?{[G]:ie}:ie)}))).every(Boolean),!(!Y&&!r.isValid)&&y()):Y=Q=await O(n);return m.state.next({...!Mn(I)||(d.isValid||f.isValid)&&Q!==r.isValid?{}:{name:I},...t.resolver||!I?{isValid:Q}:{},errors:r.errors}),L.shouldFocus&&!Y&&Sl(n,P,I?W:l.mount),Y},T=I=>{const L={...o.mount?i:s};return ut(I)?L:Mn(I)?ce(L,I):I.map(Q=>ce(L,Q))},R=(I,L)=>({invalid:!!ce((L||r).errors,I),isDirty:!!ce((L||r).dirtyFields,I),error:ce((L||r).errors,I),isValidating:!!ce(r.validatingFields,I),isTouched:!!ce((L||r).touchedFields,I)}),F=I=>{I&&Nl(I).forEach(L=>pt(r.errors,L)),m.state.next({errors:I?r.errors:{}})},J=(I,L,Q)=>{const Y=(ce(n,I,{_f:{}})._f||{}).ref,W=ce(r.errors,I)||{},{ref:G,message:ie,type:we,...De}=W;Be(r.errors,I,{...De,...L,ref:Y}),m.state.next({name:I,errors:r.errors,isValid:!1}),Q&&Q.shouldFocus&&Y&&Y.focus&&Y.focus()},oe=(I,L)=>yn(I)?m.state.subscribe({next:Q=>I(E(void 0,L),Q)}):E(I,L,!0),fe=I=>m.state.subscribe({next:L=>{XM(I.name,L.name,I.exact)&&YM(L,I.formState||d,ot,I.reRenderRoot)&&I.callback({values:{...i},...r,...L})}}).unsubscribe,Z=I=>(o.mount=!0,f={...f,...I.formState},fe({...I,formState:f})),he=(I,L={})=>{for(const Q of I?Nl(I):l.mount)l.mount.delete(Q),l.array.delete(Q),L.keepValue||(pt(n,Q),pt(i,Q)),!L.keepError&&pt(r.errors,Q),!L.keepDirty&&pt(r.dirtyFields,Q),!L.keepTouched&&pt(r.touchedFields,Q),!L.keepIsValidating&&pt(r.validatingFields,Q),!t.shouldUnregister&&!L.keepDefaultValue&&pt(s,Q);m.state.next({values:Bt(i)}),m.state.next({...r,...L.keepDirty?{isDirty:M()}:{}}),!L.keepIsValid&&y()},at=({disabled:I,name:L})=>{(On(I)&&o.mount||I||l.disabled.has(L))&&(I?l.disabled.add(L):l.disabled.delete(L))},B=(I,L={})=>{let Q=ce(n,I);const Y=On(L.disabled)||On(t.disabled);return Be(n,I,{...Q||{},_f:{...Q&&Q._f?Q._f:{ref:{name:I}},name:I,mount:!0,...L}}),l.mount.add(I),Q?at({disabled:On(L.disabled)?L.disabled:t.disabled,name:I}):_(I,!0,L.value),{...Y?{disabled:L.disabled||t.disabled}:{},...t.progressive?{required:!!L.required,min:Go(L.min),max:Go(L.max),minLength:Go(L.minLength),maxLength:Go(L.maxLength),pattern:Go(L.pattern)}:{},name:I,onChange:D,onBlur:D,ref:W=>{if(W){B(I,L),Q=ce(n,I);const G=ut(W.value)&&W.querySelectorAll&&W.querySelectorAll("input,select,textarea")[0]||W,ie=QM(G),we=Q._f.refs||[];if(ie?we.find(De=>De===G):G===Q._f.ref)return;Be(n,I,{_f:{...Q._f,...ie?{refs:[...we.filter(nm),G,...Array.isArray(ce(s,I))?[{}]:[]],ref:{type:G.type,name:I}}:{ref:G}}}),_(I,!1,void 0,G)}else Q=ce(n,I,{}),Q._f&&(Q._f.mount=!1),(t.shouldUnregister||L.shouldUnregister)&&!(LM(l.array,I)&&o.action)&&l.unMount.add(I)}}},ee=()=>t.shouldFocusError&&Sl(n,P,l.mount),ue=I=>{On(I)&&(m.state.next({disabled:I}),Sl(n,(L,Q)=>{const Y=ce(n,Q);Y&&(L.disabled=Y._f.disabled||I,Array.isArray(Y._f.refs)&&Y._f.refs.forEach(W=>{W.disabled=Y._f.disabled||I}))},0,!1))},H=(I,L)=>async Q=>{let Y;Q&&(Q.preventDefault&&Q.preventDefault(),Q.persist&&Q.persist());let W=Bt(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:G,values:ie}=await S();r.errors=G,W=ie}else await O(n);if(l.disabled.size)for(const G of l.disabled)Be(W,G,void 0);if(pt(r.errors,"root"),cr(r.errors)){m.state.next({errors:{}});try{await I(W,Q)}catch(G){Y=G}}else L&&await L({...r.errors},Q),ee(),setTimeout(ee);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:cr(r.errors)&&!Y,submitCount:r.submitCount+1,errors:r.errors}),Y)throw Y},et=(I,L={})=>{ce(n,I)&&(ut(L.defaultValue)?U(I,Bt(ce(s,I))):(U(I,L.defaultValue),Be(s,I,Bt(L.defaultValue))),L.keepTouched||pt(r.touchedFields,I),L.keepDirty||(pt(r.dirtyFields,I),r.isDirty=L.defaultValue?M(I,Bt(ce(s,I))):M()),L.keepError||(pt(r.errors,I),d.isValid&&y()),m.state.next({...r}))},ye=(I,L={})=>{const Q=I?Bt(I):s,Y=Bt(Q),W=cr(I),G=W?s:Y;if(L.keepDefaultValues||(s=Q),!L.keepValues){if(L.keepDirtyValues){const ie=new Set([...l.mount,...Object.keys(Ho(s,i))]);for(const we of Array.from(ie))ce(r.dirtyFields,we)?Be(G,we,ce(i,we)):U(we,ce(G,we))}else{if(W0&&ut(I))for(const ie of l.mount){const we=ce(n,ie);if(we&&we._f){const De=Array.isArray(we._f.refs)?we._f.refs[0]:we._f.ref;if(ad(De)){const Xt=De.closest("form");if(Xt){Xt.reset();break}}}}for(const ie of l.mount)U(ie,ce(G,ie))}i=Bt(G),m.array.next({values:{...G}}),m.state.next({values:{...G}})}l={mount:L.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!L.keepIsValid||!!L.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:W?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!Ls(I,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:W?{}:L.keepDirtyValues?L.keepDefaultValues&&i?Ho(s,i):r.dirtyFields:L.keepDefaultValues&&I?Ho(s,I):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ee=(I,L)=>ye(yn(I)?I(i):I,L),Oe=(I,L={})=>{const Q=ce(n,I),Y=Q&&Q._f;if(Y){const W=Y.refs?Y.refs[0]:Y.ref;W.focus&&(W.focus(),L.shouldSelect&&yn(W.select)&&W.select())}},ot=I=>{r={...r,...I}},le={control:{register:B,unregister:he,getFieldState:R,handleSubmit:H,setError:J,_subscribe:fe,_runSchema:S,_focusError:ee,_getWatch:E,_getDirty:M,_setValid:y,_setFieldArray:v,_setDisabledField:at,_setErrors:w,_getFieldArray:z,_reset:ye,_resetDefaultValues:()=>yn(t.defaultValues)&&t.defaultValues().then(I=>{Ee(I,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:ue,_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(I){o=I},get _defaultValues(){return s},get _names(){return l},set _names(I){l=I},get _formState(){return r},get _options(){return t},set _options(I){t={...t,...I}}},subscribe:Z,trigger:A,register:B,handleSubmit:H,watch:oe,setValue:U,getValues:T,reset:Ee,resetField:et,clearErrors:F,unregister:he,setError:J,setFocus:Oe,getFieldState:R};return{...le,formControl:le}}function Yi(e={}){const t=ne.useRef(void 0),r=ne.useRef(void 0),[n,s]=ne.useState({isDirty:!1,isValidating:!1,isLoading:yn(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:yn(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:rI(e),formState:n},e.formControl&&e.defaultValues&&!yn(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,FM(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),ne.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),ne.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),ne.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),ne.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),ne.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ne.useEffect(()=>{e.values&&!Ls(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,s(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),ne.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=qM(n,i),t.current}function Fe({type:e,title:t,message:r,dismissible:n=!1,onDismiss:s,className:i=""}){const o=()=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-700";case"error":return"bg-red-50 border-red-200 text-red-700";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-700";case"info":return"bg-blue-50 border-blue-200 text-blue-700";default:return"bg-gray-50 border-gray-200 text-gray-700"}},l=()=>{const c="h-5 w-5 flex-shrink-0";switch(e){case"success":return a.jsx(_t,{className:`${c} text-green-600`});case"error":return a.jsx(tn,{className:`${c} text-red-600`});case"warning":return a.jsx(qn,{className:`${c} text-yellow-600`});case"info":return a.jsx(yb,{className:`${c} text-blue-600`});default:return a.jsx(yb,{className:`${c} text-gray-600`})}};return a.jsx("div",{className:`border rounded-lg p-4 ${o()} ${i}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[l(),a.jsxs("div",{className:"flex-1 min-w-0",children:[t&&a.jsx("h3",{className:"text-sm font-medium mb-1",children:t}),a.jsx("p",{className:"text-sm",children:r})]}),n&&s&&a.jsx("button",{onClick:s,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(Ln,{className:"h-4 w-4"})})]})})}function Lt({size:e="md",text:t,className:r="",fullScreen:n=!1}){const s={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},i={sm:"text-sm",md:"text-base",lg:"text-lg"};return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto mb-4 ${s[e]}`,children:a.jsx(vb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})}):a.jsx("div",{className:`flex items-center justify-center ${r}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-indigo-600 mx-auto ${t?"mb-4":""} ${s[e]}`,children:a.jsx(vb,{className:`${s[e]} text-transparent`})}),t&&a.jsx("p",{className:`text-gray-600 ${i[e]}`,children:t})]})})}function lo({size:e="sm",className:t=""}){const r={sm:"h-4 w-4",md:"h-5 w-5"};return a.jsx("div",{className:`animate-spin rounded-full border-b-2 border-current ${r[e]} ${t}`})}const qp={disabledRoutes:["/documentation","/features","/signup"],redirectTo:"/login",betaMessage:"Welcome to PBE Journey Beta! Sign in to access the application.",showBetaBadge:!1};function nI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{login:o,loading:l,developerLog:c}=ge(),u=kt(),{register:d,handleSubmit:f,formState:{errors:m}}=Yi(),h=async y=>{const x=`login_${y.email}`;if(!Jv.isAllowed(x,5,3e5)){n("Too many login attempts. Please wait 5 minutes before trying again.");return}if(!D4(y.email).isValid){n("Please enter a valid email address");return}c("Form submitted with data:",y);try{n(""),i(!0),c("Attempting login...");const g=y.email.toLowerCase().trim();await o(g,y.password),Jv.reset(x),Qs.getInstance().logSecurityEvent({type:"login",userId:g,details:{success:!0}}),c("Login successful, navigating to dashboard"),u("/dashboard")}catch(g){console.error("Login error:",g),Qs.getInstance().logSecurityEvent({type:"login",userId:y.email,details:{success:!1,error:g.message}}),n(g.message||"Invalid email or password")}finally{i(!1)}},p=y=>{c("Form submit event triggered"),y.preventDefault(),f(h)(y)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Sign in to your account"}),qp.showBetaBadge,a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:qp.betaMessage})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:p,children:[r&&a.jsx(Fe,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),m.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:e?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...d("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),m.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.message})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"/forgot-password",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Forgot your password?"})})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})]})})]})})}function sI(){const[e,t]=b.useState(!1),[r,n]=b.useState(""),[s,i]=b.useState(!1),{forgotPassword:o,loading:l}=ge(),{register:c,handleSubmit:u,formState:{errors:d},getValues:f}=Yi(),m=async h=>{try{n(""),i(!0),await o(h.email),t(!0)}catch(p){console.error("Forgot password error:",p),n(p.message||"Failed to send reset email")}finally{i(!1)}};return e?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Yl,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Check your email"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to"," ",a.jsx("span",{className:"font-medium",children:f("email")})]})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-600 mb-6",children:"Click the link in the email to reset your password. The link will expire in 1 hour."}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Bs,{to:"/login",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition-all duration-200",children:"Back to Sign In"}),a.jsx("button",{onClick:()=>t(!1),className:"w-full flex justify-center py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-all duration-200",children:"Send another email"})]})]})})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Forgot your password?"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:u(m),children:[r&&a.jsx(Fe,{type:"error",message:r}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your email address",...c("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}})}),d.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:s?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Sending reset email..."})]}):"Send reset email"}),a.jsx("div",{className:"text-center",children:a.jsxs(Bs,{to:"/login",className:"flex items-center justify-center space-x-2 text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to sign in"})]})})]})})]})})}function iI(){const e=kt(),[t,r]=b.useState(!1),[n,s]=b.useState(!1),[i,o]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[f,m]=b.useState(null),[h,p]=b.useState(null),{resetPasswordWithToken:y,loading:x}=ge(),{register:v,handleSubmit:g,watch:w,formState:{errors:_}}=Yi(),[j,N]=b.useState(!1),[S,k]=b.useState(null),O=w("password");console.log("🔍 ResetPassword Debug:",{error:i,success:l,accessToken:f,resetType:h,loading:x,windowLocationHash:window.location.hash,windowLocationHref:window.location.href}),b.useEffect(()=>{const E=(()=>{const D=window.location.hash;if(!D)return{};const P=new URLSearchParams(D.substring(1)),A={};for(const[T,R]of P.entries())A[T]=R;return A})();if(E.error){console.error("Supabase auth error from hash:",{error:E.error,error_code:E.error_code,error_description:E.error_description}),E.error_code==="otp_expired"?(console.log("🔍 Setting error: OTP expired"),o("The password reset link has expired. Please request a new password reset.")):(console.log("🔍 Setting error: Auth error -",E.error_description||E.error),o(`Authentication error: ${E.error_description||E.error}`));return}const z=E.access_token,$=E.type;if(!z||typeof z!="string"){k("Invalid reset token format"),o("Invalid or malformed reset link. Please request a new password reset.");return}if(z.split(".").length!==3){k("Invalid token structure"),o("Invalid reset link format. Please request a new password reset.");return}if(z.length<50){k("Token too short"),o("Invalid reset link. Please request a new password reset.");return}if(!/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+$/.test(z)){k("Invalid token characters"),o("Invalid reset link. Please request a new password reset.");return}if($!=="recovery"){k("Invalid token type"),o("Invalid reset link type. Please request a new password reset.");return}m(z),p($),N(!0)},[]),b.useEffect(()=>{},[]),b.useEffect(()=>{f&&h==="recovery"&&o("")},[f,h]);const C=async M=>{if(!f||!j){o("Invalid reset token");return}if(S){o(S);return}try{o(""),d(!0),await y(f,M.password),c(!0),setTimeout(()=>{e("/login")},3e3)}catch(E){console.error("Reset password error:",E),o(E.message||"Failed to reset password")}finally{d(!1)}};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(_t,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Password reset successful"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Redirecting to login..."})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Reset your password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below"})]}),a.jsx("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:a.jsxs("form",{className:"space-y-6",onSubmit:g(C),children:[i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[a.jsx("div",{className:"font-bold",children:"Debug Error Display:"}),a.jsx("div",{children:i}),a.jsxs("div",{className:"text-xs mt-2",children:["Access Token: ",f?"Present":"Missing"," | Reset Type: ",h||"Missing"," | Hash: ",window.location.hash||"Empty"]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:t?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter your new password",...v("password",{required:"Password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:M=>{const E=QN(M);return E.isValid||E.error}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Confirm your new password",...v("confirmPassword",{required:"Please confirm your password",validate:M=>M===O||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!n),children:n?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),_.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:u||!f||!j||!!S,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lo,{}),a.jsx("span",{children:"Updating password..."})]}):"Update password"})]})})]})})}function Y0(){const{developerLog:e}=ge(),{user:t}=ge(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),[d,f]=b.useState(0),m=b.useCallback(async(y=!1)=>{if(!t){n(null),i([]),l(!1);return}const x=Date.now();if(!y&&x-d<5e3){e("🔄 Using cached subscription data");return}try{l(!0),u(null),e("🔄 Fetching subscription data from database...");const{data:v,error:g}=await V.from("stripe_customers").select("customer_id").eq("user_id",t.id).maybeSingle();g&&console.error("❌ Error checking stripe customer:",g),e("🔍 Stripe customer data:",(v==null?void 0:v.customer_id)||"No customer found");const{data:w,error:_}=await V.from("stripe_user_subscriptions").select("*").maybeSingle();e("🔍 Raw stripe_user_subscriptions data:",w),e("🔍 stripe_user_subscriptions error:",_),_?(console.error("❌ Error fetching subscription:",_),_.code==="42P01"||_.message.includes("does not exist")?(console.warn("⚠️ Stripe subscription view not accessible, user likely has no subscription"),n(null)):(u("Failed to load subscription data"),n(null))):(n(w||null),e("✅ Subscription data loaded:",w?`Found subscription with price_id: ${w.price_id}`:"No subscription"));const{data:j,error:N}=await V.from("stripe_user_orders").select("*").order("order_date",{ascending:!1}).limit(10);N?(console.error("❌ Error fetching orders:",N),i([])):(i(j||[]),e("✅ Orders data loaded:",(j==null?void 0:j.length)||0,"orders"));const{data:S,error:k}=await V.from("subscriptions").select("*").eq("user_id",t.id).maybeSingle();e("🔍 Raw main subscriptions table data:",S),e("🔍 Main subscriptions error:",k),k?console.error("❌ Error fetching main subscription:",k):(e("🔍 Main subscription data - Plan:",(S==null?void 0:S.plan)||"No plan found",(S==null?void 0:S.status)||"No status"),e("🔍 Full main subscription object:",S)),f(x)}catch(v){console.error("💥 Error fetching Stripe data:",v),u("Failed to load billing data"),n(null),i([])}finally{l(!1)}},[t,d,e]),h=b.useCallback(()=>(e("🔄 Force refreshing subscription data..."),m(!0)),[m,e]),p=b.useCallback(async()=>{if(!(r!=null&&r.subscription_id))return{success:!1,error:"No active subscription found"};try{e("🔄 Cancelling subscription:",r.subscription_id);const{data:y,error:x}=await V.functions.invoke("stripe-manage-subscription",{body:{action:"cancel",subscription_id:r.subscription_id}});return x?(console.error("❌ Error cancelling subscription:",x),{success:!1,error:x.message||"Failed to cancel subscription"}):y.success?(e("✅ Subscription cancelled successfully"),await h(),{success:!0}):(console.error("❌ Subscription cancellation failed:",y.error),{success:!1,error:y.error||"Failed to cancel subscription"})}catch(y){return console.error("💥 Error cancelling subscription:",y),{success:!1,error:y.message||"An unexpected error occurred"}}},[r,h,e]);return b.useEffect(()=>{m()},[m]),{subscription:r,orders:s,loading:o,error:c,refetch:m,forceRefresh:h,cancelCurrentSubscription:p}}function aI({toggleSidebar:e}){const{user:t,logout:r}=ge(),n=kt(),{subscription:s,loading:i}=Y0(),[o,l]=b.useState(0),c=ne.useMemo(()=>i||!(s!=null&&s.price_id)?null:zp.find(h=>h.priceId===s.price_id)||null,[s,i]);b.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{const{count:h,error:p}=await V.from("team_invitations").select("*",{count:"exact",head:!0}).eq("email",t.email).eq("status","pending").gt("expires_at",new Date().toISOString());if(p){console.error("Error loading invitations count:",p);return}l(h||0)}catch(h){console.error("Error loading invitations count:",h)}},d=()=>{r(),n("/login")},f=()=>i||!c?null:c.interval==="year"?a.jsx(fs,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Gi,{className:"h-4 w-4 text-blue-500"}),m=()=>i?"Loading...":c?c.name:"Free Plan";return a.jsx("header",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-4 ",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:e,className:"sm:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(gM,{className:"h-5 w-5"})}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:[a.jsx(aM,{className:"h-5 w-5"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:o>9?"9+":o})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[a.jsxs("div",{className:"hidden sm:flex flex-col text-right",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),qp.showBetaBadge,!i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[f(),a.jsx("span",{className:"text-xs text-gray-500",children:m()})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border border-gray-300 border-t-gray-600"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-all duration-200 cursor-pointer",children:a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-full flex items-center justify-center",children:a.jsx(Ip,{className:"h-4 w-4 text-white"})})}),a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[a.jsxs("button",{onClick:()=>n("/settings"),className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[a.jsx(Qa,{className:"h-4 w-4"}),a.jsx("span",{children:"Settings"})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:d,className:"flex items-center space-x-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Mp,{className:"h-4 w-4"}),a.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})})}function oI({isSidebarOpen:e,toggleSidebar:t}){const r=vs(),{user:n,logout:s}=ge(),[i,o]=b.useState(!1),l=(n==null?void 0:n.role)==="admin",c=(n==null?void 0:n.teamRole)==="owner"||(n==null?void 0:n.teamRole)==="admin",u=()=>{o(!i)},d=()=>{s()},f=[{name:"Dashboard",icon:dM,path:"/dashboard",show:!0},{name:"Quiz Center",icon:ke,path:"/quiz",show:!0},{name:"Study Schedule",icon:Yt,path:"/schedule",show:!0},{name:"Achievements",icon:pr,path:"/achievements",show:!0},{name:"Leaderboard",icon:St,path:"/leaderboard",show:!!(n!=null&&n.teamId)},{name:"Team",icon:He,path:"/team",show:c},{name:"Analytics",icon:sr,path:"/analytics",show:c},{name:"Billing",icon:id,path:"/billing",show:(n==null?void 0:n.teamRole)==="owner"}],m=[{name:"Admin Panel",icon:_M,path:"/admin",show:l},{name:"User Management",icon:He,path:"/admin/users",show:l},{name:"Question Management",icon:ke,path:"/admin/questions",show:l},{name:"Plan Management",icon:bS,path:"/admin/plans",show:l},{name:"Achievement Management",icon:pr,path:"/admin/achievements",show:l},{name:"Settings",icon:Qa,path:"/settings",show:l}],h=p=>r.pathname===p;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transition-transform duration-300 transform ${e?"translate-x-0":"-translate-x-full"} sm:hidden`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mt-8 mb-2 px-3",children:a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"})}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>{window.innerWidth<640&&t()},children:[a.jsx(p.icon,{className:"h-5 w-5"}),a.jsx("span",{children:p.name})]},p.path))})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("button",{onClick:d,className:"flex items-center space-x-3 px-3 py-2 w-full text-left rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(Mp,{className:"h-5 w-5"}),a.jsx("span",{children:"Sign Out"})]})})]})]}),a.jsxs("div",{className:`hidden sm:flex flex-col h-full ${i?"w-20":"w-64"} bg-white border-r border-gray-200 transition-all duration-300`,children:[a.jsxs("div",{className:`flex items-center ${i?"justify-center":"justify-between"} h-16 px-4 border-b border-gray-200`,children:[!i&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"PBE Journey"})]}),i&&a.jsx("div",{className:"h-8 w-8 bg-indigo-500 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-5 w-5 text-white"})}),a.jsx("button",{onClick:u,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",children:i?a.jsx(F0,{className:"h-5 w-5"}):a.jsx(vS,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[a.jsx("nav",{className:"space-y-1",children:f.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))}),l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`mt-8 mb-2 ${i?"text-center":"px-3"}`,children:[!i&&a.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Admin"}),i&&a.jsx("div",{className:"h-px bg-gray-200 my-2"})]}),a.jsx("nav",{className:"space-y-1",children:m.filter(p=>p.show).map(p=>a.jsxs(Bs,{to:p.path,className:`flex items-center rounded-lg transition-colors duration-200 ${h(p.path)?"bg-indigo-50 text-indigo-600":"text-gray-700 hover:bg-gray-100"} ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2"}`,title:i?p.name:"",children:[a.jsx(p.icon,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:p.name})]},p.path))})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("button",{onClick:d,className:`flex items-center rounded-lg text-red-600 hover:bg-red-50 transition-colors duration-200 ${i?"justify-center h-12 w-full":"space-x-3 px-3 py-2 w-full text-left"}`,title:i?"Sign Out":"",children:[a.jsx(Mp,{className:`${i?"h-7 w-7":"h-5 w-5"}`}),!i&&a.jsx("span",{children:"Sign Out"})]})})]})]})}function pe({children:e,hideHeaderAndSidebar:t=!1}){const[r,n]=b.useState(!1),s=()=>{n(!r)};return t?a.jsx("div",{className:"min-h-screen bg-gray-50",children:e}):a.jsxs("div",{className:"flex h-screen bg-gray-50",children:[a.jsx(oI,{isSidebarOpen:r,toggleSidebar:s}),r&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 sm:hidden",onClick:s}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(aI,{toggleSidebar:s}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:e})]})]})}function Ke({title:e,value:t,subtitle:r,icon:n,iconColor:s="text-indigo-600",trend:i,className:o=""}){const l=()=>{if(!i)return"";switch(i.type){case"positive":return"text-green-600";case"negative":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:`bg-white p-4 sm:p-6 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200 ${o}`,children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 sm:h-12 sm:w-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(n,{className:`h-5 w-5 sm:h-6 sm:w-6 ${s}`})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:e}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:t}),r&&a.jsx("p",{className:"text-xs text-gray-500",children:r})]})]}),i&&a.jsx("div",{className:"mt-3 sm:mt-4",children:a.jsx("span",{className:`text-xs sm:text-sm font-medium ${l()}`,children:i.value})})]})}function X0(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState(null),[s,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),m=b.useCallback(async()=>{if(!e){t("🔍 useGamificationData: No user authenticated, skipping data fetch"),n(null),i([]),l([]),u(!1);return}t("🔍 useGamificationData: Starting gamification data fetch for user:",e.id),u(!0),f(null);try{const{data:x,error:v}=await V.from("user_stats").select("*").eq("user_id",e.id).maybeSingle();if(v)throw v;t("✅ useGamificationData: User stats fetched (raw):",x);const{data:g,error:w}=await V.from("quiz_sessions").select("completed_at").eq("user_id",e.id).eq("status","completed").order("completed_at",{ascending:!1});if(w)throw w;const _=CS(g||[]),j=AS(g||[]);t("✅ useGamificationData: Calculated streaks:",{currentStreak:_,longestStreakComputed:j});const N={...x||{user_id:e.id,total_xp:0,current_level:1,longest_streak:0},longest_streak:Math.max((x==null?void 0:x.longest_streak)||0,j||0),current_streak:_};n(N),t("✅ useGamificationData: Final user stats:",N);const{data:S,error:k}=await V.from("user_achievements").select("*").eq("user_id",e.id);if(k)throw k;i(S||[]),t("✅ useGamificationData: User achievements fetched:",(S==null?void 0:S.length)||0);const{data:O,error:C}=await V.from("achievements").select("*");if(C)throw C;l(O||[]),t("✅ useGamificationData: All achievements fetched:",(O==null?void 0:O.length)||0)}catch(x){console.error("💥 useGamificationData: Error fetching gamification data:",x),f(x.message||"Failed to load gamification data"),n(null),i([]),l([])}finally{u(!1)}},[e,t]),h=b.useCallback(async x=>{try{t("📝 Creating new achievement...");const{data:v,error:g}=await V.from("achievements").insert([x]).select().single();if(g)throw t("❌ Error creating achievement:",g),g;return t("✅ Achievement created successfully:",v),l(w=>[...w,v]),v}catch(v){throw t("💥 Error creating achievement:",v),v}},[t]),p=b.useCallback(async(x,v)=>{try{t("📝 Updating achievement:",x);const{data:g,error:w}=await V.from("achievements").update(v).eq("id",x).select().single();if(w)throw t("❌ Error updating achievement:",w),w;return t("✅ Achievement updated successfully:",g),l(_=>_.map(j=>j.id===x?g:j)),g}catch(g){throw t("💥 Error updating achievement:",g),g}},[t]),y=b.useCallback(async x=>{try{t("🗑️ Deleting achievement:",x);const{error:v}=await V.from("achievements").delete().eq("id",x);if(v)throw t("❌ Error deleting achievement:",v),v;t("✅ Achievement deleted successfully"),l(g=>g.filter(w=>w.id!==x))}catch(v){throw t("💥 Error deleting achievement:",v),v}},[t]);return b.useEffect(()=>{m()},[m]),{userStats:r,userAchievements:s,achievements:o,loading:c,error:d,refreshGamificationData:m,createAchievement:h,updateAchievement:p,deleteAchievement:y}}function J0(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),d=g=>{t("🔧 ensureStudyItemsArray: Raw assignment from DB:",g);const w={...g,date:typeof g.date=="string"?ES(g.date):g.date,study_items:g.study_items||[]};return t("✅ ensureStudyItemsArray: Normalized assignment:",w),w},f=d,m=b.useCallback(async()=>{if(e!=null&&e.id)try{t("📥 Loading team members for user:",e.id);const{data:g,error:w}=await V.rpc("get_team_members_for_user",{p_user_id:e.id});if(w){console.error("❌ Error loading team members:",w),u("Failed to load team members");return}if(t("📊 Team members function result:",g),!(g!=null&&g.success)){console.error("❌ Team members function failed:",g==null?void 0:g.error),u("Failed to load team members");return}const _=g.team_members||[];t("✅ Team members loaded:",_),i(_)}catch(g){console.error("💥 Error loading team members:",g),u("Failed to load team members")}},[e==null?void 0:e.id,t]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{t("📥 Loading study assignments for team:",e.teamId);const{data:g,error:w}=await V.from("study_assignments").select("*").eq("team_id",e.teamId).order("date",{ascending:!0});if(w){console.error("❌ Error loading assignments:",w),u("Failed to load assignments");return}t("📊 Raw assignments data from DB:",g);const _=[];for(const j of g||[]){const N=d(j);if(t("🔍 Processing assignment:",{id:j.id,completed:j.completed,date:j.date,study_items:j.study_items}),j.completed)try{t("🔍 Fetching quiz session data for completed assignment:",j.id);const{data:S,error:k}=await V.from("quiz_sessions").select("id, total_points, max_points, questions, total_actual_time_spent_seconds").eq("assignment_id",j.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!k&&S?(t("✅ Found quiz session data for assignment:",j.id,S),N.quiz_session_id=S.id,N.total_points_earned=S.total_points,N.max_points_possible=S.max_points,N.total_questions_answered=Array.isArray(S.questions)?S.questions.length:0,N.total_time_spent_minutes=S.total_actual_time_spent_seconds?Math.round(S.total_actual_time_spent_seconds/60):0,t("✅ Assignment populated with quiz data:",{assignmentId:j.id,quiz_session_id:N.quiz_session_id,total_points_earned:N.total_points_earned,max_points_possible:N.max_points_possible,total_questions_answered:N.total_questions_answered,total_time_spent_minutes:N.total_time_spent_minutes})):t("⚠️ No quiz session found for completed assignment:",j.id,k)}catch(S){t("💥 Error fetching quiz session for assignment:",j.id,S)}else t("ℹ️ Assignment not completed, skipping quiz session fetch:",j.id);_.push(N)}t("✅ Transformed assignments:",_),n(_)}catch(g){console.error("💥 Error loading assignments:",g),u("Failed to load assignments")}},[e==null?void 0:e.teamId,t]),p=b.useCallback(async g=>{try{l(!0),u(null),t("💾 Saving assignment:",g);const w={id:g.id,user_id:g.user_id,team_id:g.team_id,date:PM(g.date),study_items:g.study_items,description:g.description,created_by:g.created_by||(e==null?void 0:e.id),completed:g.completed||!1,completed_at:g.completed_at},{data:_}=await V.from("study_assignments").select("id").eq("id",g.id).maybeSingle();if(_){t("📝 Updating existing assignment");const{error:j}=await V.from("study_assignments").update({study_items:w.study_items,description:w.description,completed:w.completed,completed_at:w.completed_at,updated_at:new Date().toISOString()}).eq("id",g.id);if(j)throw console.error("❌ Error updating assignment:",j),j;n(N=>N.map(S=>S.id===g.id?g:S))}else{t("➕ Creating new assignment");const{error:j}=await V.from("study_assignments").insert([w]);if(j)throw console.error("❌ Error creating assignment:",j),j;n(N=>[...N,g])}t("✅ Assignment saved successfully")}catch(w){throw console.error("💥 Error saving assignment:",w),u("Failed to save assignment"),w}finally{l(!1)}},[e==null?void 0:e.id,t]),y=b.useCallback(async g=>{try{l(!0),u(null),t("🗑️ Deleting assignment:",g);const{error:w}=await V.from("study_assignments").delete().eq("id",g);if(w)throw console.error("❌ Error deleting assignment:",w),w;n(_=>_.filter(j=>j.id!==g)),t("✅ Assignment deleted successfully")}catch(w){throw console.error("💥 Error deleting assignment:",w),u("Failed to delete assignment"),w}finally{l(!1)}},[t]),x=b.useCallback(async g=>{if(!(e!=null&&e.teamId)||!g)return null;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g))throw new Error("Invalid assignment ID format");try{t("📥 Loading assignment by ID:",g);const{data:_,error:j}=await V.from("study_assignments").select("*").eq("id",g).eq("team_id",e.teamId).maybeSingle();if(j)throw console.error("❌ Error loading assignment:",j),j;if(!_)return console.warn("⚠️ Assignment not found:",g),null;if(_.team_id!==e.teamId)throw new Error("Unauthorized access to assignment");if(!(_.user_id===e.id||e.teamRole==="owner"||e.teamRole==="admin"))throw new Error("Insufficient permissions to view assignment");return t("✅ Assignment loaded:",_),d(_)}catch(_){throw console.error("💥 Error loading assignment by ID:",_),_}},[e==null?void 0:e.teamId,t]),v=b.useCallback(async()=>{if(!(e!=null&&e.teamId)){i([]),n([]);return}try{l(!0),u(null),await Promise.all([m(),h()])}catch(g){console.error("💥 Error loading data:",g),u("Failed to load data")}finally{l(!1)}},[e==null?void 0:e.teamId,m,h]);return b.useEffect(()=>{v()},[v]),{assignments:r,teamMembers:s,loading:o,error:c,normalizeAssignment:f,saveAssignment:p,deleteAssignment:y,getAssignmentById:x,loadAssignments:v}}function sn({columns:e,data:t,emptyState:r,className:n="",loading:s=!1,onRowClick:i,getRowClassName:o}){const l=t||[],c=r==null?void 0:r.icon;return s?a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsxs("div",{className:"p-12 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:`bg-white rounded-xl shadow-sm overflow-hidden ${n}`,children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:e.map(u=>a.jsx("th",{className:`px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${u.headerClassName||""}`,style:u.width?{width:u.width}:void 0,children:u.header},u.key))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:e.length,className:"px-6 py-12 text-center",children:r?a.jsxs(a.Fragment,{children:[c&&a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),r.action]}):a.jsx("p",{className:"text-gray-500",children:"No data available"})})}):l.map((u,d)=>a.jsx("tr",{className:`hover:bg-gray-50 transition-colors duration-200 ${i?"cursor-pointer":""} ${o?o(u,d):""}`,onClick:()=>i==null?void 0:i(u,d),children:e.map(f=>a.jsx("td",{className:`px-4 sm:px-6 py-4 ${f.className||""}`,children:f.render?f.render(u,d):u[f.key]},f.key))},d))})]})})})}function FS({allAssignments:e,loading:t,user:r,questions:n,getSessionForAssignment:s,developerLog:i}){var f;const o=kt(),l=b.useMemo(()=>{const m=hr(new Date),h=new Date(m);h.setDate(m.getDate()-m.getDay());const p=new Date(h);return p.setDate(h.getDate()+6),e.filter(y=>{const x=hr(y.date);return x>=h&&x<=p}).sort((y,x)=>y.date.getTime()-x.date.getTime())},[e]),c=m=>{o(`/quiz/study-assignment/${m.id}`,{state:{selectedStudyItems:m.study_items}})},u=ne.useCallback(m=>{var h;return EM(m,n,((h=r==null?void 0:r.subscription)==null?void 0:h.plan)||"free",i)},[n,(f=r==null?void 0:r.subscription)==null?void 0:f.plan,i]),d=ne.useMemo(()=>[{key:"day",header:"Day",render:m=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:ao(m.date,{weekday:"long"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:ao(m.date,{month:"short",day:"numeric"})})]}),className:"whitespace-nowrap"},{key:"book_chapters",header:"Book and Chapters",render:m=>a.jsxs("div",{className:"text-sm text-gray-900 break-words",children:[oo(m.study_items,n)," (",u(m.study_items)," Qs)"]})},{key:"questions_count",header:"Questions",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_questions_answered!==void 0?(i==null||i("🔍 Completed assignment questions data:",{assignmentId:m.id,total_questions_answered:m.total_questions_answered,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:m.total_questions_answered})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:u(m.study_items)})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"score",header:"Score",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_points_earned!==void 0&&m.max_points_possible!==void 0?(()=>{i==null||i("🔍 Completed assignment score data:",{assignmentId:m.id,total_points_earned:m.total_points_earned,max_points_possible:m.max_points_possible,completed:m.completed});const h=m.max_points_possible>0?Math.round(m.total_points_earned/m.max_points_possible*100):0;return a.jsxs("div",{className:`font-bold text-lg ${h>=90?"text-green-600":h>=70?"text-blue-600":"text-red-600"}`,children:[h,"%"]})})():a.jsx("span",{className:"text-gray-400",children:"—"})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"time",header:"Time",render:m=>a.jsx("div",{className:"text-center",children:m.completed&&m.total_time_spent_minutes!==void 0?(i==null||i("🔍 Completed assignment time data:",{assignmentId:m.id,total_time_spent_minutes:m.total_time_spent_minutes,completed:m.completed}),a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[m.total_time_spent_minutes,"m"]})]})):a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-gray-400",children:"—"})]})}),className:"text-center hidden md:table-cell",headerClassName:"text-center hidden md:table-cell"},{key:"status",header:"Status",render:m=>a.jsx("div",{className:"flex items-center space-x-2",children:m.completed?a.jsxs(a.Fragment,{children:[a.jsx(_t,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Completed"}),m.total_points_earned!==void 0&&m.max_points_possible!==void 0&&a.jsxs("span",{className:"text-xs text-gray-500",children:["(",Math.round(m.total_points_earned/m.max_points_possible*100),"% score)"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"}),(()=>{const h=hr(new Date),y=hr(m.date).getTime()-h.getTime(),x=Math.ceil(y/(1e3*60*60*24));return x===0?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Today)"}):x===1?a.jsx("span",{className:"text-xs text-gray-500",children:"(Due Tomorrow)"}):x>1?a.jsxs("span",{className:"text-xs text-gray-500",children:["(Due in ",x," days)"]}):a.jsx("span",{className:"text-xs text-red-500",children:"(Overdue)"})})()]})}),className:"hidden md:table-cell",headerClassName:"hidden md:table-cell"},{key:"start",header:"Start",render:m=>a.jsx("div",{className:"text-center",children:m.completed?a.jsx("span",{className:"text-green-600 text-sm font-medium",children:"Completed"}):r?(()=>{const h=s(m.id,r.id);return h?a.jsx("button",{onClick:()=>o(`/quiz/runner/${h.id}`),className:"bg-blue-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-blue-700 transition-colors duration-200",children:"Resume"}):a.jsx("button",{onClick:()=>c(m),className:"bg-indigo-600 text-white px-3 py-1 rounded-lg text-sm hover:bg-indigo-700 transition-colors duration-200",children:"Start"})})():null}),className:"text-center",headerClassName:"text-center"}],[u,r,s,o,c,i]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Weekly Schedule"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Study assignments for this week"})]})]}),a.jsx(sn,{columns:d,data:l,loading:t,emptyState:{icon:Yt,title:"No Assignments This Week",description:"You don't have any study assignments scheduled for this week. Check your full schedule or contact your team admin."}})]})}function lI(){const{user:e,developerLog:t}=ge();ne.useEffect(()=>{var y,x;t("🔍 Dashboard: Component loaded with user:",e),t("🔍 Dashboard: User subscription plan:",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t("🔍 Dashboard: User plan settings:",e==null?void 0:e.planSettings),t("🔍 Dashboard: User question tier access:",(x=e==null?void 0:e.planSettings)==null?void 0:x.question_tier_access)},[e,t]);const{userStats:r,userAchievements:n,achievements:s,loading:i,error:o}=X0(),{assignments:l,loading:c}=J0(),{getSessionForAssignment:u}=di(),{questions:d,loading:f}=aa();ne.useEffect(()=>{if(t("🔍 Dashboard: Questions loaded from context:",d.length,"total questions"),t("🔍 Dashboard: Questions loading state:",f),d.length>0){const y=d.reduce((v,g)=>(v[g.tier]=(v[g.tier]||0)+1,v),{});t("🔍 Dashboard: Questions by tier:",y);const x=d.reduce((v,g)=>(v[g.book_of_bible]=(v[g.book_of_bible]||0)+1,v),{});t("🔍 Dashboard: Questions by book:",x)}},[d,f,t]);const m=kt();ne.useEffect(()=>{var y;t("*** Dashboard render: questions.length =",d.length),t("Dashboard render: questions.length =",d.length),t("Dashboard render: user subscription plan =",(y=e==null?void 0:e.subscription)==null?void 0:y.plan),t("Dashboard render: user plan settings =",e==null?void 0:e.planSettings)},[d,e,t]);const p=r?MM(r.total_xp,r.current_level):{current:0,needed:1e3,percentage:0};return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[f&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading questions..."})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your progress and recent activity."})]}),!f&&a.jsx("div",{className:"mb-8",children:a.jsx(FS,{allAssignments:l.filter(y=>y.user_id===(e==null?void 0:e.id)),loading:c,user:e,questions:d,getSessionForAssignment:u,developerLog:t})}),!i&&!o&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Progress"}),r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[a.jsx(Ke,{title:"Level",value:r.current_level,subtitle:`${r.total_xp.toLocaleString()} total XP`,icon:Gi,iconColor:"text-yellow-600"}),a.jsx(Ke,{title:"Longest Streak",value:`${r.longest_streak} days`,subtitle:"consecutive study days",icon:Pn,iconColor:"text-orange-600"}),a.jsx(Ke,{title:"Current Streak",value:`${r.current_streak||0} day${(r.current_streak||0)!==1?"s":""}`,subtitle:"consecutive study days",icon:no,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Achievements",value:n.length,subtitle:"unlocked",icon:pr,iconColor:"text-purple-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Level Progress"}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Level ",r.current_level," (",Math.round(p.percentage),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsxs("span",{children:[r.total_xp.toLocaleString()," XP"]}),a.jsxs("span",{children:[p.needed," XP to Level ",r.current_level+1]})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 text-center",children:[a.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progress Yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Complete your first quiz to start tracking your progress, XP, and study streak!"}),a.jsx("button",{onClick:()=>m("/quiz"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[!i&&!o&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Achievements"}),a.jsx("div",{className:"space-y-3",children:n.slice(0,5).map((y,x)=>{const v=s.find(g=>g.id===y.achievement_id);return a.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("div",{className:"h-10 w-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(St,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(v==null?void 0:v.name)||"Achievement Unlocked"}),(v==null?void 0:v.description)&&a.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.description}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(y.unlocked_at).toLocaleDateString()})]})]},`${y.user_id}-${y.achievement_id}`)})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Bs,{to:"/quiz",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Start Quiz"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Begin a new quiz session"})]}),a.jsx(pb,{className:"h-4 w-4 text-gray-400"})]})}),a.jsx(Bs,{to:"/schedule",className:"w-full text-left p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200 block",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"View Schedule"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Check your study assignments"})]}),a.jsx(pb,{className:"h-4 w-4 text-gray-400"})]})})]})]})]})]})})}function cI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function uI(e){return(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function dI(e){return(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin"}function fI(e){return(e==null?void 0:e.role)==="admin"}function hI(){const{user:e,updateUserProfile:t,updatePassword:r,loading:n,isDeveloperMode:s,toggleDeveloperMode:i}=ge(),[o,l]=b.useState("profile"),[c,u]=b.useState(!1),[d,f]=b.useState(!1),[m,h]=b.useState(null),[p,y]=b.useState(null),[x,v]=b.useState(null),[g,w]=b.useState(null),_=Yi({defaultValues:{name:(e==null?void 0:e.name)||"",email:(e==null?void 0:e.email)||""}});ne.useEffect(()=>{e&&_.reset({name:e.name,email:e.email})},[e,_]);const j=Yi(),N=async C=>{try{y(null),h(null),await t({name:C.name,email:C.email}),h("Profile updated successfully!"),setTimeout(()=>h(null),3e3)}catch(M){console.error("Error updating profile:",M),y(M.message||"Failed to update profile")}},S=async C=>{try{w(null),v(null),await r(C.newPassword),v("Password updated successfully!"),j.reset(),setTimeout(()=>v(null),3e3)}catch(M){console.error("Error updating password:",M),w(M.message||"Failed to update password")}},O=[{id:"profile",name:"Profile",icon:Ip},{id:"security",name:"Security",icon:_n},{id:"developer",name:"Developer",icon:Qa}].filter(C=>C.id==="developer"?fI(e):!0);return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Settings"}),a.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:O.map(C=>a.jsxs("button",{onClick:()=>l(C.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o===C.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(C.icon,{className:"h-4 w-4"}),a.jsx("span",{children:C.name})]},C.id))})}),a.jsxs("div",{className:"p-6",children:[o==="profile"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Profile Information"}),a.jsxs("form",{onSubmit:_.handleSubmit(N),className:"space-y-6",children:[m&&a.jsx(Fe,{type:"success",message:m,className:"mb-6"}),p&&a.jsx(Fe,{type:"error",message:p,className:"mb-6"}),a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsx("div",{className:"h-20 w-20 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(Ip,{className:"h-8 w-8 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Change Avatar"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"JPG, GIF or PNG. 1MB max."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("name",{required:"Name is required"})}),_.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nickname (Public Display Name)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("nickname"),placeholder:"Your public display name for leaderboards"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be shown on leaderboards instead of your full name. Leave empty to use your full name."}),_.formState.errors.nickname&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.nickname.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",..._.register("email",{required:"Email is required"})}),_.formState.errors.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.formState.errors.email.message})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Saving...":"Save Changes"})]})})]})]}),o==="security"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Security Settings"}),a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(_n,{className:"h-5 w-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Two-Factor Authentication"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Add an extra layer of security to your account"})]})]}),a.jsx("button",{className:"mt-3 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Enable 2FA"})]}),x&&a.jsx(Fe,{type:"success",message:x}),g&&a.jsx(Fe,{type:"error",message:g}),a.jsxs("form",{onSubmit:j.handleSubmit(S),className:"space-y-6",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Change Password"}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Password Security"}),a.jsx("p",{children:"Since you're already authenticated, you can directly set a new password without entering your current one."})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("newPassword",{required:"New password is required",minLength:{value:12,message:"Password must be at least 12 characters"},validate:C=>{const M=QN(C);return M.isValid||M.error}})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>u(!c),children:c?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.newPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.newPassword.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:d?"text":"password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...j.register("confirmPassword",{required:"Please confirm your password",validate:C=>C===j.watch("newPassword")||"The passwords do not match"})}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>f(!d),children:d?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),j.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:j.formState.errors.confirmPassword.message})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n&&a.jsx(lo,{}),a.jsx(wS,{className:"h-4 w-4"}),a.jsx("span",{children:n?"Updating...":"Update Password"})]})})]})]})]}),o==="developer"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Developer Settings"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:"Developer Mode"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enable detailed console logging for debugging purposes. This will show internal application logs in the browser console."})]}),a.jsx("button",{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 ${s?"bg-indigo-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 ${s?"translate-x-6":"translate-x-1"}`})})]}),s&&a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium",children:"Developer Mode Active"}),a.jsx("p",{children:"Console logging is now enabled. Open your browser's developer tools (F12) to view detailed logs."})]})]})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Qa,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"About Developer Mode"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Shows authentication flow logs"}),a.jsx("li",{children:"• Displays API request/response details"}),a.jsx("li",{children:"• Logs component state changes"}),a.jsx("li",{children:"• Helps troubleshoot application issues"}),a.jsx("li",{children:"• Setting persists across browser sessions"})]})]})]})})]})]})]})]})]})})}function mI(e){switch(e){case"owner":return"👑";case"admin":return"🛡️";default:return"👥"}}function pI(e){switch(e){case"owner":return fs;case"admin":return _n;default:return He}}function US(){const{user:e,logout:t,developerLog:r}=ge(),[n,s]=b.useState([]),[i,o]=b.useState([]),[l,c]=b.useState(!1),[u,d]=b.useState(null),f=b.useCallback(()=>cI(e),[e]),m=b.useCallback(async(j,N,S,k)=>{r("🔍 Processing member:",{memberId:j,userId:j,canViewDetails:k});try{const{data:O,error:C}=await V.rpc("get_team_member_profile",{p_user_id:j,p_team_id:N});if(C){console.warn("get_team_member_profile function not available, falling back to basic approach:",C);const{data:M,error:E}=await V.rpc("get_user_name_by_id",{p_user_id:j});return E&&console.warn(`Error getting name for user ${j}:`,E),j===(S==null?void 0:S.id)?{id:j,name:S.name||M||"Unknown User",email:S.email||"Email not available",lastActive:"Recently"}:{id:j,name:M||"Unknown User",email:k?"Run MANUAL_DB_FUNCTION.sql to enable email access":"Email restricted",lastActive:"Recently"}}else{if(O&&typeof O=="object"&&!O.error)return{id:O.id||j,name:O.name||"Unknown User",email:O.email||"Email not available",lastActive:"Recently"};{console.warn("get_team_member_profile returned error:",O);const{data:M,error:E}=await V.rpc("get_user_name_by_id",{p_user_id:j});return{id:j,name:j===(S==null?void 0:S.id)?S.name:M||"Unknown User",email:j===(S==null?void 0:S.id)?S.email:k?"Contact admin for email access":"Email restricted",lastActive:"Recently"}}}}catch{return{id:j,name:j===(S==null?void 0:S.id)?S.name:"Team Member",email:j===(S==null?void 0:S.id)?S.email:"Email restricted",lastActive:"Recently"}}},[r]),h=b.useCallback(async()=>{if(e!=null&&e.teamId)try{c(!0),d(null);const{data:j,error:N}=await V.from("team_members").select(`
          id,
          user_id,
          team_id,
          role,
          status,
          joined_at
        `).eq("team_id",e.teamId);if(N){console.error("Error loading team members:",N),d("Failed to load team members");return}r("🔍 Raw team members data:",{teamId:e.teamId,membersCount:(j==null?void 0:j.length)||0,membersData:j});const S=[];r("🔍 Starting member transformation. Processing",(j==null?void 0:j.length)||0,"members");for(const k of j||[]){const O=await m(k.user_id,e.teamId,e,f());S.push({id:k.id,userId:k.user_id,teamId:k.team_id,role:k.role,status:k.status,joinedAt:k.joined_at,user:O})}if(r("🔍 Final transformed members:",{originalCount:(j==null?void 0:j.length)||0,transformedCount:S.length,members:S.map(k=>({id:k.id,userId:k.userId,role:k.role,status:k.status,userName:k.user.name,userEmail:k.user.email}))}),s(S),f()){const{data:k,error:O}=await V.from("team_invitations").select("*").eq("team_id",e.teamId).eq("status","pending").gt("expires_at",new Date().toISOString());if(O)console.error("Error loading team invitations:",O);else{const C=(k||[]).map(M=>({id:M.id,teamId:M.team_id,email:M.email,role:M.role,invitedBy:M.invited_by,token:M.token,status:M.status,expiresAt:M.expires_at,createdAt:M.created_at}));o(C)}}else o([])}catch(j){console.error("Error loading team data:",j),d("Failed to load team data")}finally{c(!1)}},[e==null?void 0:e.teamId,e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.email,f,m,r]),p=b.useCallback(async j=>{try{c(!0),d(null),r("🚫 Suspending team member:",j);const N=n.find(k=>k.id===j);if(!N)return{success:!1,error:"Member not found"};if(N.role==="owner")return{success:!1,error:"Cannot suspend the team owner"};const{error:S}=await V.from("team_members").update({status:"suspended",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error("❌ Error suspending member:",S),{success:!1,error:"Failed to suspend member"}):(r("✅ Member suspended successfully"),N.userId===(e==null?void 0:e.id)&&(r("🚪 User suspended themselves, logging out..."),setTimeout(()=>{t()},1e3)),await h(),{success:!0})}catch(N){return console.error("💥 Error suspending member:",N),{success:!1,error:"Failed to suspend member"}}finally{c(!1)}},[n,e==null?void 0:e.id,t,h,r]),y=b.useCallback(async j=>{try{if(c(!0),d(null),r("✅ Reinstating team member:",j),!n.find(k=>k.id===j))return{success:!1,error:"Member not found"};const{error:S}=await V.from("team_members").update({status:"active",updated_at:new Date().toISOString()}).eq("id",j);return S?(console.error("❌ Error reinstating member:",S),{success:!1,error:"Failed to reinstate member"}):(r("✅ Member reinstated successfully"),await h(),{success:!0})}catch(N){return console.error("💥 Error reinstating member:",N),{success:!1,error:"Failed to reinstate member"}}finally{c(!1)}},[n,h,r]),x=b.useCallback(async(j,N)=>{if(!(e!=null&&e.teamId)||!j.trim())return{success:!1,error:"Please enter a valid email address"};try{c(!0),d(null);const{data:S,error:k}=await V.rpc("invite_team_member",{p_team_id:e.teamId,p_email:j.trim(),p_role:N});if(k)return console.error("Error calling invite_team_member function:",k),{success:!1,error:"Failed to send invitation. Please try again."};if(!S.success)return{success:!1,error:S.error||"Failed to send invitation"};r("✅ Invitation created successfully:",S);try{await V.functions.invoke("send-email-brevo",{body:{to:j.trim(),subject:`You're invited to join ${e.teamName||"a team"} on PBE Journey!`,htmlContent:`
              <p>Hello,</p>
              <p>You have been invited by ${e.name} to join their team on PBE Journey as a ${N}.</p>
              <p>Click the link below to accept your invitation:</p>
              <p><a href="${S.invitation_link}">${S.invitation_link}</a></p>
              <p>This link will expire in 7 days.</p>
              <p>Best regards,<br>The PBE Journey Team</p>
            `}})}catch(O){console.error("❌ Failed to send invitation email via Brevo:",O)}return await h(),{success:!0,invitationLink:S.invitation_link}}catch(S){return console.error("💥 Error inviting member:",S),{success:!1,error:"An unexpected error occurred. Please try again."}}finally{c(!1)}},[e==null?void 0:e.teamId,h,r]),v=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").update({expires_at:new Date(Date.now()+7*24*60*60*1e3).toISOString(),updated_at:new Date().toISOString()}).eq("id",j);return N?(console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error resending invitation:",N),{success:!1,error:"Failed to resend invitation"}}finally{c(!1)}},[h]),g=b.useCallback(async j=>{try{c(!0),d(null);const{error:N}=await V.from("team_invitations").delete().eq("id",j);return N?(console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}):(await h(),{success:!0})}catch(N){return console.error("Error canceling invitation:",N),{success:!1,error:"Failed to cancel invitation"}}finally{c(!1)}},[h]),w=b.useCallback(j=>`${window.location.origin}/invitations/accept?token=${j}`,[]),_={totalMembers:n.length,admins:n.filter(j=>j.role==="admin"||j.role==="owner").length,pendingInvites:i.length,activeMembers:n.filter(j=>j.status==="active").length};return b.useEffect(()=>{e!=null&&e.teamId?h():(s([]),o([]))},[e==null?void 0:e.teamId,h]),{teamMembers:n,teamInvitations:i,teamStats:_,loading:l,error:u,setError:d,inviteMember:x,suspendMember:p,reinstateMember:y,resendInvitation:v,cancelInvitation:g,generateInvitationLink:w,getRoleIcon:mI,loadTeamData:h}}function gI({teamId:e,userId:t,startDate:r,endDate:n}){const{developerLog:s}=ge(),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){s("🔍 useAnalyticsData: No teamId provided, skipping data fetch"),c(!1),o(null);return}s("🔍 useAnalyticsData: Starting data fetch with params:",{teamId:e,userId:t,startDate:r,endDate:n}),c(!0),d(null);try{let m=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed");if(t?(s("🔍 useAnalyticsData: Filtering by userId:",t),m=m.eq("user_id",t)):s("🔍 useAnalyticsData: Fetching data for all team members"),r&&(m=m.gte("completed_at",r.toISOString())),n){const E=new Date(n);E.setDate(E.getDate()+1),m=m.lt("completed_at",E.toISOString())}const{data:h,error:p}=await m;if(p)throw p;s("🔍 useAnalyticsData: Fetched sessions for analytics:",h),s("🔍 useAnalyticsData: Sessions fetched:",(h==null?void 0:h.length)||0,"sessions"),s("🔍 useAnalyticsData: Sessions data:",h);const y=(h==null?void 0:h.map(E=>E.id))||[];s("🔍 useAnalyticsData: Completed session IDs for analytics:",y),s("🔍 useAnalyticsData: Completed session IDs:",y);let x=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, answered_at");if(y.length>0)x=x.in("quiz_session_id",y);else{s("🔍 useAnalyticsData: No completed sessions found, returning empty data"),o({totalQuizzesCompleted:0,totalQuestionsAnswered:0,averageScore:0,totalTimeSpentMinutes:0,studyStreak:0,totalPointsEarned:0,totalPossiblePoints:0}),c(!1);return}if(t&&(x=x.eq("user_id",t)),r&&(x=x.gte("answered_at",r.toISOString())),n){const E=new Date(n);E.setDate(E.getDate()+1),x=x.lt("answered_at",E.toISOString())}const{data:v,error:g}=await x;if(g)throw g;s("🔍 useAnalyticsData: Fetched question logs for analytics:",v),s("🔍 useAnalyticsData: Question logs fetched:",(v==null?void 0:v.length)||0,"logs"),s("🔍 useAnalyticsData: Question logs data:",v);const w=(h==null?void 0:h.length)||0,_=(v==null?void 0:v.length)||0;let j=0,N=0;v==null||v.forEach(E=>{j+=E.points_earned,N+=E.total_points_possible});const S=N>0?j/N*100:0,k=(h==null?void 0:h.reduce((E,z)=>{const $=z.total_actual_time_spent_seconds?Math.round(z.total_actual_time_spent_seconds/60):0;return E+$},0))||0;s("🔍 useAnalyticsData: Study time from estimated_minutes:",k);const O=(h==null?void 0:h.map(E=>({completed_at:E.completed_at})))||[],C=V0(O),M={totalQuizzesCompleted:w,totalQuestionsAnswered:_,averageScore:S,totalTimeSpentMinutes:k,studyStreak:C,totalPointsEarned:j,totalPossiblePoints:N};s("🔍 useAnalyticsData: Calculated analytics data:",M),o(M)}catch(m){console.error("Error fetching analytics data:",m),d(m.message||"Failed to load analytics data"),o(null)}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function xI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useKnowledgeGapsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useKnowledgeGapsData: Starting knowledge gaps analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log("🔍 useKnowledgeGapsData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const j=new Date(n);j.setDate(j.getDate()+1),f=f.lt("completed_at",j.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log("🔍 useKnowledgeGapsData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(j=>j.id))||[];if(p.length===0){console.log("🔍 useKnowledgeGapsData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          points_earned,
          total_points_possible,
          is_correct,
          questions!inner (
            book_of_bible,
            chapter,
            tier
          )
        `).in("quiz_session_id",p);t&&(y=y.eq("user_id",t));const{data:x,error:v}=await y;if(v)throw v;if(console.log("🔍 useKnowledgeGapsData: Question logs fetched:",(x==null?void 0:x.length)||0),!x||x.length===0){i([]),l(!1);return}const g=new Map;x.forEach(j=>{const N=j.questions;if(!N)return;const S=`book:${N.book_of_bible}`;g.has(S)||g.set(S,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"book",book:N.book_of_bible});const k=g.get(S);k.totalAttempts++,k.totalPointsEarned+=j.points_earned,k.totalPointsPossible+=j.total_points_possible,j.is_correct&&k.correctAnswers++;const O=`chapter:${N.book_of_bible}:${N.chapter}`;g.has(O)||g.set(O,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"chapter",book:N.book_of_bible,chapter:N.chapter});const C=g.get(O);C.totalAttempts++,C.totalPointsEarned+=j.points_earned,C.totalPointsPossible+=j.total_points_possible,j.is_correct&&C.correctAnswers++;const M=`tier:${N.tier}`;g.has(M)||g.set(M,{totalQuestions:0,totalAttempts:0,correctAnswers:0,totalPointsEarned:0,totalPointsPossible:0,type:"tier",tier:N.tier});const E=g.get(M);E.totalAttempts++,E.totalPointsEarned+=j.points_earned,E.totalPointsPossible+=j.total_points_possible,j.is_correct&&E.correctAnswers++});const w=[];g.forEach((j,N)=>{var O,C;if(j.totalAttempts<3)return;const S=j.totalPointsPossible>0?j.totalPointsEarned/j.totalPointsPossible*100:0;if(S>=90)return;let k="";if(j.type==="book"?k=j.book:j.type==="chapter"?k=`${j.book} Chapter ${j.chapter}`:j.type==="tier"&&(k=`${(O=j.tier)==null?void 0:O.charAt(0).toUpperCase()}${(C=j.tier)==null?void 0:C.slice(1)} Questions`),r&&(y=y.gte("answered_at",r.toISOString())),n){const M=new Date(n);M.setDate(M.getDate()+1),y=y.lt("answered_at",M.toISOString())}w.push({topic:k,type:j.type,averageScore:S,totalQuestions:j.totalAttempts,totalAttempts:j.totalAttempts,correctAnswers:j.correctAnswers,incorrectAnswers:j.totalAttempts-j.correctAnswers,book:j.book,chapter:j.chapter,tier:j.tier})}),w.sort((j,N)=>j.averageScore-N.averageScore);const _=w.slice(0,10);console.log("✅ useKnowledgeGapsData: Knowledge gaps analysis complete:",_.length,"gaps found"),i(_)}catch(f){console.error("❌ Error fetching knowledge gaps data:",f),u(f.message||"Failed to load knowledge gaps data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function yI({teamId:e,userId:t,timeframe:r="weekly",startDate:n,endDate:s}){const[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{if(!e){console.log("🔍 useProgressionData: No teamId provided, skipping data fetch"),c(!1),o([]);return}console.log("🔍 useProgressionData: Starting progression analysis with params:",{teamId:e,userId:t,timeframe:r,startDate:n,endDate:s}),c(!0),d(null);try{const m=s||new Date,h=n||(()=>{const v=new Date(m);return r==="weekly"?v.setDate(v.getDate()-12*7):v.setMonth(v.getMonth()-12),v})(),p=[];let y=12;if(n&&s){const v=s.getTime()-n.getTime();r==="weekly"?y=Math.ceil(v/(7*24*60*60*1e3)):y=Math.ceil(v/(30*24*60*60*1e3)),y=Math.min(Math.max(y,1),24)}for(let v=y-1;v>=0;v--){let g,w,_;if(r==="weekly"){const j=new Date(m);j.setDate(m.getDate()-(m.getDay()+v*7)),j.setHours(0,0,0,0);const N=new Date(j);N.setDate(j.getDate()+6),N.setHours(23,59,59,999),g=j,w=N,_=`Week of ${j.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const j=new Date(m.getFullYear(),m.getMonth()-v,1),N=new Date(m.getFullYear(),m.getMonth()-v+1,0,23,59,59,999);g=j,w=N,_=j.toLocaleDateString("en-US",{month:"short",year:"numeric"})}n&&w<n||s&&g>s||p.push({start:g,end:w,label:_})}console.log("📅 useProgressionData: Analyzing",p.length,"periods within date range");const x=[];for(const v of p){console.log(`🔍 useProgressionData: Processing period: ${v.label}`);let g=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed").gte("completed_at",v.start.toISOString()).lte("completed_at",v.end.toISOString());t&&(g=g.eq("user_id",t));const{data:w,error:_}=await g;if(_)throw _;const j=(w==null?void 0:w.map(U=>U.id))||[];let N=[];if(j.length>0){let U=V.from("quiz_question_logs").select("points_earned, total_points_possible, time_spent, is_correct").gte("answered_at",v.start.toISOString()).lte("answered_at",v.end.toISOString()).in("quiz_session_id",j);t&&(U=U.eq("user_id",t));const{data:D,error:P}=await U;if(P)throw P;N=D||[]}const S=(w==null?void 0:w.length)||0,k=(N==null?void 0:N.length)||0;let O=0,C=0,M=0,E=0;N==null||N.forEach(U=>{O+=U.points_earned,C+=U.total_points_possible,U.is_correct?M++:E++});const z=C>0?O/C*100:0,$=(w==null?void 0:w.reduce((U,D)=>{const P=D.total_actual_time_spent_seconds?Math.round(D.total_actual_time_spent_seconds/60):0;return U+P},0))||0,q={period:v.label,periodStart:v.start,periodEnd:v.end,totalQuizzesCompleted:S,totalQuestionsAnswered:k,totalPointsEarned:O,totalPossiblePoints:C,averageScore:z,totalTimeSpentMinutes:$,correctAnswers:M,incorrectAnswers:E};x.push(q),console.log(`✅ useProgressionData: Period ${v.label} processed:`,q)}console.log("✅ useProgressionData: Progression analysis complete:",x.length,"data points"),o(x)}catch(m){console.error("❌ Error fetching progression data:",m),d(m.message||"Failed to load progression data"),o([])}finally{c(!1)}},[e,t,r,n,s]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function Fp({userId:e,startDate:t,endDate:r}){const[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{if(!e){s([]),o(!1),c(null);return}o(!0),c(null);try{console.log("🔍 useQuizHistoryData: Fetching quiz history for user:",e,"with date range:",t,r);let d=V.from("quiz_sessions_view").select(`
          id,
          title,
          type,
          completed_at,
          created_at,
          total_points,
          max_points,
          total_actual_time_spent_seconds,
          questions_count,
          approval_status
        `).eq("user_id",e).eq("status","completed");if(t&&(d=d.gte("completed_at",t.toISOString())),r){const h=new Date(r);h.setDate(h.getDate()+1),d=d.lt("completed_at",h.toISOString())}d=d.order("completed_at",{ascending:!1});const{data:f,error:m}=await d;if(m)throw console.error("❌ useQuizHistoryData: Error fetching quiz sessions:",m),m;console.log("✅ useQuizHistoryData: Fetched",(f==null?void 0:f.length)||0,"quiz history entries."),s(f||[])}catch(d){console.error("💥 useQuizHistoryData: Failed to fetch quiz history:",d),c(d.message||"Failed to load quiz history"),s([])}finally{o(!1)}},[e,t,r]);return b.useEffect(()=>{u()},[u]),{data:n,loading:i,error:l,refreshData:u}}function vI({userId:e,startDate:t,endDate:r}){const{data:n,loading:s,error:i,refreshData:o}=Fp({userId:e,startDate:t,endDate:r}),[l,c]=b.useState([]);b.useEffect(()=>{c(n)},[n]);const u=b.useCallback((d,f)=>{c(m=>m.map(h=>h.id===d?{...h,...f}:h))},[]);return{data:l,loading:s,error:i,refreshData:o,updateLocalQuizHistoryEntry:u}}function bI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useStudyScheduleAnalysisData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useStudyScheduleAnalysisData: Starting study schedule analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("study_assignments").select("*").eq("team_id",e);t&&(console.log("🔍 useStudyScheduleAnalysisData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("date",r.toISOString().split("T")[0])),n&&(f=f.lte("date",n.toISOString().split("T")[0])),f=f.order("date",{ascending:!1});const{data:m,error:h}=await f;if(h)throw console.error("❌ useStudyScheduleAnalysisData: Error fetching assignments:",h),h;console.log("✅ useStudyScheduleAnalysisData: Fetched assignments:",(m==null?void 0:m.length)||0);const p=[];for(const y of m||[]){const x={...y,date:typeof y.date=="string"?ES(y.date):y.date,study_items:y.study_items||[]};if(y.completed)try{const{data:v,error:g}=await V.from("quiz_sessions").select("id, total_points, max_points, questions, total_actual_time_spent_seconds").eq("assignment_id",y.id).eq("status","completed").order("completed_at",{ascending:!1}).limit(1).maybeSingle();!g&&v&&(x.quiz_session_id=v.id,x.total_points_earned=v.total_points,x.max_points_possible=v.max_points,x.total_questions_answered=Array.isArray(v.questions)?v.questions.length:0,x.total_time_spent_minutes=v.total_actual_time_spent_seconds?Math.round(v.total_actual_time_spent_seconds/60):0)}catch(v){console.warn("⚠️ Could not fetch quiz session data for assignment:",y.id,v)}p.push(x)}console.log("✅ useStudyScheduleAnalysisData: Transformed assignments:",p.length),i(p)}catch(f){console.error("❌ useStudyScheduleAnalysisData: Error fetching study schedule data:",f),u(f.message||"Failed to load study schedule data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function wI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useQuestionPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useQuestionPerformanceData: Starting question performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{let f=V.from("quiz_sessions").select("id").eq("team_id",e).eq("status","completed");if(t&&(console.log("🔍 useQuestionPerformanceData: Filtering by userId:",t),f=f.eq("user_id",t)),r&&(f=f.gte("completed_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),f=f.lt("completed_at",_.toISOString())}const{data:m,error:h}=await f;if(h)throw h;console.log("🔍 useQuestionPerformanceData: Found completed sessions:",(m==null?void 0:m.length)||0);const p=(m==null?void 0:m.map(_=>_.id))||[];if(p.length===0){console.log("🔍 useQuestionPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}let y=V.from("quiz_question_logs").select(`
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          questions!inner (
            id,
            question,
            answer,
            book_of_bible,
            chapter,
            tier,
            points
          )
        `).in("quiz_session_id",p);if(t&&(y=y.eq("user_id",t)),r&&(y=y.gte("answered_at",r.toISOString())),n){const _=new Date(n);_.setDate(_.getDate()+1),y=y.lt("answered_at",_.toISOString())}const{data:x,error:v}=await y;if(v)throw v;if(console.log("🔍 useQuestionPerformanceData: Question logs fetched:",(x==null?void 0:x.length)||0),!x||x.length===0){i([]),l(!1);return}const g=new Map;x.forEach(_=>{const j=_.question_id,N=_.questions;if(!N)return;g.has(j)||g.set(j,{question:N,totalAttempts:0,correctAttempts:0,totalTimeSpent:0,totalPointsEarned:0,totalPointsPossible:0});const S=g.get(j);S.totalAttempts++,S.totalTimeSpent+=_.time_spent,S.totalPointsEarned+=_.points_earned,S.totalPointsPossible+=_.total_points_possible,_.is_correct&&S.correctAttempts++});const w=[];g.forEach((_,j)=>{const N=_.totalAttempts>0?Math.round(_.correctAttempts/_.totalAttempts*100):0,S=_.totalAttempts>0?Math.round(_.totalTimeSpent/_.totalAttempts):0;w.push({question_id:j,question_text:_.question.question,answer_text:_.question.answer,book_of_bible:_.question.book_of_bible,chapter:_.question.chapter,tier:_.question.tier,points:_.question.points,total_attempts:_.totalAttempts,correct_attempts:_.correctAttempts,incorrect_attempts:_.totalAttempts-_.correctAttempts,accuracy_rate:N,average_time_spent:S,total_points_earned:_.totalPointsEarned,total_points_possible:_.totalPointsPossible})}),w.sort((_,j)=>_.accuracy_rate-j.accuracy_rate),console.log("✅ useQuestionPerformanceData: Question performance analysis complete:",w.length,"questions analyzed"),i(w)}catch(f){console.error("❌ Error fetching question performance data:",f),u(f.message||"Failed to load question performance data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function jI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useEngagementData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useEngagementData: Starting engagement analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=n||new Date,m=r||(()=>{const S=new Date(f);return S.setDate(S.getDate()-30),S})();let h=V.from("quiz_sessions").select("id, completed_at, total_actual_time_spent_seconds").eq("team_id",e).eq("status","completed").gte("completed_at",m.toISOString()).lte("completed_at",f.toISOString());t&&(console.log("🔍 useEngagementData: Filtering by userId:",t),h=h.eq("user_id",t));const{data:p,error:y}=await h;if(y)throw y;console.log("🔍 useEngagementData: Found completed sessions:",(p==null?void 0:p.length)||0);const x=(p==null?void 0:p.map(S=>S.id))||[];let v=[];if(x.length>0){let S=V.from("quiz_question_logs").select("answered_at, time_spent").in("quiz_session_id",x).gte("answered_at",m.toISOString()).lte("answered_at",f.toISOString());t&&(S=S.eq("user_id",t));const{data:k,error:O}=await S;if(O)throw O;v=k||[]}console.log("🔍 useEngagementData: Question logs fetched:",v.length);const g=new Map;p==null||p.forEach(S=>{const k=new Date(S.completed_at),O=k.toISOString().split("T")[0];g.has(O)||g.set(O,{date:O,dateObj:k,quizzesCompleted:0,questionsAnswered:0,timeSpentMinutes:0,sessionTimes:[]});const C=g.get(O);C.quizzesCompleted++;const M=S.total_actual_time_spent_seconds?Math.round(S.total_actual_time_spent_seconds/60):0;C.timeSpentMinutes+=M,C.sessionTimes.push(M)}),v.forEach(S=>{const O=new Date(S.answered_at).toISOString().split("T")[0];if(g.has(O)){const C=g.get(O);C.questionsAnswered++}});const w=[],_=Array.from(g.keys()).sort();let j=0,N=new Date(f);N.setDate(N.getDate()+1),_.forEach((S,k)=>{const O=g.get(S),C=O.sessionTimes.length>0?Math.round(O.sessionTimes.reduce((z,$)=>z+$,0)/O.sessionTimes.length):0,M=new Date(S),E=new Date(N);E.setDate(E.getDate()-1),O.quizzesCompleted>0?(M.toDateString()===E.toDateString()?j++:j=1,N=M):j=0,w.push({date:S,dateObj:O.dateObj,quizzesCompleted:O.quizzesCompleted,questionsAnswered:O.questionsAnswered,timeSpentMinutes:O.timeSpentMinutes,averageSessionTime:C,studyStreak:j})}),w.sort((S,k)=>k.dateObj.getTime()-S.dateObj.getTime()),console.log("✅ useEngagementData: Engagement analysis complete:",w.length,"data points"),i(w)}catch(f){console.error("❌ Error fetching engagement data:",f),u(f.message||"Failed to load engagement data"),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function _I(e,t,r,n=12){const s=r||new Date;t||(()=>{const l=new Date(s);return e==="weekly"?l.setDate(l.getDate()-n*7):l.setMonth(l.getMonth()-n),l})();const i=[];let o=n;if(t&&r){const l=r.getTime()-t.getTime();e==="weekly"?o=Math.ceil(l/(7*24*60*60*1e3)):o=Math.ceil(l/(30*24*60*60*1e3)),o=Math.min(Math.max(o,1),24)}for(let l=o-1;l>=0;l--){let c,u,d;if(e==="weekly"){const f=new Date(s);f.setDate(s.getDate()-(s.getDay()+l*7)),f.setHours(0,0,0,0);const m=new Date(f);m.setDate(f.getDate()+6),m.setHours(23,59,59,999),c=f,u=m,d=`Week of ${f.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}else{const f=new Date(s.getFullYear(),s.getMonth()-l,1),m=new Date(s.getFullYear(),s.getMonth()-l+1,0,23,59,59,999);c=f,u=m,d=f.toLocaleDateString("en-US",{month:"short",year:"numeric"})}t&&u<t||r&&c>r||i.push({start:c,end:u,label:d})}return i}async function BS(e){let t=V.from("quiz_sessions").select("id, total_points, max_points, completed_at, estimated_minutes, user_id").eq("team_id",e.teamId).eq("status","completed");if(e.userId&&(t=t.eq("user_id",e.userId)),e.startDate&&(t=t.gte("completed_at",e.startDate.toISOString())),e.endDate){const r=new Date(e.endDate);r.setDate(r.getDate()+1),t=t.lt("completed_at",r.toISOString())}return await t}async function QS(e,t,r=!1){if(e.length===0)return{data:[],error:null};const n=r?`points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id,
       questions!inner (book_of_bible, chapter, tier, question, answer, points)`:"points_earned, total_points_possible, time_spent, answered_at, is_correct, user_id";let s=V.from("quiz_question_logs").select(n).in("quiz_session_id",e);if(t.userId&&(s=s.eq("user_id",t.userId)),t.startDate&&(s=s.gte("answered_at",t.startDate.toISOString())),t.endDate){const i=new Date(t.endDate);i.setDate(i.getDate()+1),s=s.lt("answered_at",i.toISOString())}return await s}function NI(e,t){return t>0?e/t*100:0}function SI(e,t=[]){let r=Math.round(e/60);if(e<30&&t.length>0){const n=t.reduce((s,i)=>s+(i.total_actual_time_spent_seconds||0),0);r=Math.round(n/60)}return r}function Db(e){return new Set(e).size}function VS(e,t){return console.error(`❌ ${t}:`,e),e.message||`Failed to load ${t.toLowerCase()}`}function Wa(e,t,r){console.log(`🔍 ${e}:`,t)}function kI({teamId:e,timeframe:t="weekly",startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useTeamPerformanceTrendsData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useTeamPerformanceTrendsData: Starting team performance trends analysis with params:",{teamId:e,timeframe:t,startDate:r,endDate:n}),l(!0),u(null);try{const f=_I(t,r,n);Wa("useTeamPerformanceTrendsData: Analyzing periods",{periodsCount:f.length,timeframe:t});const m=[],h={teamId:e,startDate:r,endDate:n};for(const p of f){Wa(`Processing period: ${p.label}`,{period:p});const y={...h,startDate:p.start,endDate:p.end},{data:x,error:v}=await BS(y);if(v)throw v;const g=(x==null?void 0:x.map(q=>q.id))||[],{data:w,error:_}=await QS(g,y);if(_)throw _;const j=(x==null?void 0:x.length)||0,N=(w==null?void 0:w.length)||0;let S=0,k=0,O=0;(w||[]).forEach(q=>{S+=q.points_earned,k+=q.total_points_possible,O+=q.time_spent});const C=NI(S,k),M=SI(O,x||[]),E=Db((x||[]).map(q=>new Date(q.completed_at).toDateString())),z=Db((x||[]).map(q=>q.user_id)),$={period:p.label,periodStart:p.start,periodEnd:p.end,totalQuizzesCompleted:j,totalQuestionsAnswered:N,totalPointsEarned:S,totalPossiblePoints:k,averageScore:C,totalTimeSpentMinutes:M,activeDays:E,activeMembers:z};m.push($)}Wa("useTeamPerformanceTrendsData: Analysis complete",{dataPointsCount:m.length}),i(m)}catch(f){u(VS(f,"useTeamPerformanceTrendsData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}function PI({teamId:e,userId:t,startDate:r,endDate:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){console.log("🔍 useBookChapterPerformanceData: No teamId provided, skipping data fetch"),l(!1),i([]);return}console.log("🔍 useBookChapterPerformanceData: Starting book/chapter performance analysis with params:",{teamId:e,userId:t,startDate:r,endDate:n}),l(!0),u(null);try{const f={teamId:e,userId:t,startDate:r,endDate:n},{data:m,error:h}=await BS(f);if(h)throw h;Wa("useBookChapterPerformanceData: Sessions fetched",{sessionsCount:(m==null?void 0:m.length)||0});const p=(m==null?void 0:m.map(w=>w.id))||[];if(p.length===0){console.log("🔍 useBookChapterPerformanceData: No completed sessions found, returning empty data"),i([]),l(!1);return}const{data:y,error:x}=await QS(p,f,!0);if(x)throw x;if(Wa("useBookChapterPerformanceData: Question logs fetched",{logsCount:(y==null?void 0:y.length)||0}),!y||y.length===0){i([]),l(!1);return}const v=new Map;y.forEach(w=>{const _=w.questions;if(!_)return;const j=`${_.book_of_bible}:${_.chapter}`;v.has(j)||v.set(j,{book_of_bible:_.book_of_bible,chapter:_.chapter,total_attempts:0,correct_attempts:0,total_time_spent:0,total_points_earned:0,total_points_possible:0});const N=v.get(j);N.total_attempts++,N.total_time_spent+=w.time_spent,N.total_points_earned+=w.points_earned,N.total_points_possible+=w.total_points_possible,w.is_correct&&N.correct_attempts++});const g=[];v.forEach(w=>{const _=w.total_attempts>0?Math.round(w.correct_attempts/w.total_attempts*100):0,j=w.total_attempts>0?Math.round(w.total_time_spent/w.total_attempts):0,N=w.total_points_possible>0?Math.round(w.total_points_earned/w.total_points_possible*100):0;g.push({book_of_bible:w.book_of_bible,chapter:w.chapter,total_attempts:w.total_attempts,correct_attempts:w.correct_attempts,incorrect_attempts:w.total_attempts-w.correct_attempts,accuracy_rate:_,average_time_spent:j,total_points_earned:w.total_points_earned,total_points_possible:w.total_points_possible,points_efficiency:N})}),g.sort((w,_)=>w.accuracy_rate-_.accuracy_rate),Wa("useBookChapterPerformanceData: Analysis complete",{dataPointsCount:g.length}),i(g)}catch(f){u(VS(f,"useBookChapterPerformanceData")),i([])}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{d()},[d]),{data:s,loading:o,error:c,refreshData:d}}const WS=b.createContext(void 0);function EI({children:e,value:t}){return a.jsx(WS.Provider,{value:t,children:e})}function fi(){const e=b.useContext(WS);if(e===void 0)throw new Error("useAnalyticsContext must be used within an AnalyticsProvider");return e}function Up({teamMembers:e,selectedMemberId:t,onSelectMember:r,selectedMemberInfo:n,disabled:s=!1,includeAllTeamOption:i=!1}){var o,l;return e.length===0&&!i?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to manage study schedules."})]})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:s?`${n==null?void 0:n.user.name}'s Study Schedule`:"Viewing Performance For:"}),s?a.jsxs("div",{className:"px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-base font-medium text-gray-900 min-w-64 capitalize",children:[n==null?void 0:n.role," Access"]}):a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:t===void 0?"":t,onChange:c=>r(c.target.value===""?void 0:c.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-3 pr-10 text-base font-medium text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 w-full sm:min-w-64",disabled:s,children:[i&&a.jsx("option",{value:"",children:"All Team"}),t&&e.find(c=>c.userId===t)&&a.jsxs("option",{value:t,children:[(o=e.find(c=>c.userId===t))==null?void 0:o.user.name," (",(l=e.find(c=>c.userId===t))==null?void 0:l.role,")"]},t),e.filter(c=>c.role==="member"&&c.userId!==t).map(c=>a.jsxs("option",{value:c.userId,children:[c.user.name," (",c.role,")"]},c.userId))]}),a.jsx(oM,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]})})})}function KS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=KS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function _e(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=KS(e))&&(n&&(n+=" "),n+=t);return n}var vf={},HS={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(HS);var Z0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Z0);var ex={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(ex);var bf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const u=r[i];l?u==="\\"&&i+1<s?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(bf);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HS,r=Z0,n=ex,s=bf;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(vf);var CI=vf.get;const Xi=Qn(CI);var GS={exports:{}},ze={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx=Symbol.for("react.transitional.element"),rx=Symbol.for("react.portal"),wf=Symbol.for("react.fragment"),jf=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Nf=Symbol.for("react.consumer"),Sf=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Af=Symbol.for("react.lazy"),AI=Symbol.for("react.view_transition"),TI=Symbol.for("react.client.reference");function an(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tx:switch(e=e.type,e){case wf:case _f:case jf:case Pf:case Ef:case AI:return e;default:switch(e=e&&e.$$typeof,e){case Sf:case kf:case Af:case Cf:return e;case Nf:return e;default:return t}}case rx:return t}}}ze.ContextConsumer=Nf;ze.ContextProvider=Sf;ze.Element=tx;ze.ForwardRef=kf;ze.Fragment=wf;ze.Lazy=Af;ze.Memo=Cf;ze.Portal=rx;ze.Profiler=_f;ze.StrictMode=jf;ze.Suspense=Pf;ze.SuspenseList=Ef;ze.isContextConsumer=function(e){return an(e)===Nf};ze.isContextProvider=function(e){return an(e)===Sf};ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tx};ze.isForwardRef=function(e){return an(e)===kf};ze.isFragment=function(e){return an(e)===wf};ze.isLazy=function(e){return an(e)===Af};ze.isMemo=function(e){return an(e)===Cf};ze.isPortal=function(e){return an(e)===rx};ze.isProfiler=function(e){return an(e)===_f};ze.isStrictMode=function(e){return an(e)===jf};ze.isSuspense=function(e){return an(e)===Pf};ze.isSuspenseList=function(e){return an(e)===Ef};ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===wf||e===_f||e===jf||e===Pf||e===Ef||typeof e=="object"&&e!==null&&(e.$$typeof===Af||e.$$typeof===Cf||e.$$typeof===Sf||e.$$typeof===Nf||e.$$typeof===kf||e.$$typeof===TI||e.getModuleId!==void 0)};ze.typeOf=an;GS.exports=ze;var OI=GS.exports,gr=e=>e===0?0:e>0?1:-1,Mr=e=>typeof e=="number"&&e!=+e,Ti=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ae=e=>(typeof e=="number"||e instanceof Number)&&!Mr(e),Fn=e=>ae(e)||typeof e=="string",DI=0,co=e=>{var t=++DI;return"".concat(e||"").concat(t)},Sn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ae(t)&&typeof t!="string")return n;var i;if(Ti(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Mr(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},YS=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},pn=(e,t)=>ae(e)&&ae(t)?r=>e+r*(t-e):()=>t;function XS(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Xi(n,t))===r)}var $e=e=>e===null||typeof e>"u",bc=e=>$e(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),MI=["viewBox","children"],II=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Mb=["points","pathLength"],sm={svg:MI,polygon:Mb,polyline:Mb},nx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sx=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(b.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{nx.includes(s)&&(n[s]=i=>r[s](r,i))}),n},$I=(e,t,r)=>n=>(e(t,r,n),null),ix=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];nx.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=$I(i,t,r))}),n},Ib=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",$b=null,im=null,JS=e=>{if(e===$b&&Array.isArray(im))return im;var t=[];return b.Children.forEach(e,r=>{$e(r)||(OI.isFragment(r)?t=t.concat(JS(r.props.children)):t.push(r))}),im=t,$b=e,t};function ax(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>Ib(s)):n=[Ib(t)],JS(e).forEach(s=>{var i=Xi(s,"type.displayName")||Xi(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var ZS=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,zI=(e,t,r,n)=>{var s,i=(s=n&&(sm==null?void 0:sm[n]))!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||II.includes(t))||r&&nx.includes(t)},Pe=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(b.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;zI((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},LI=["children","width","height","viewBox","className","style","title","desc"];function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bp.apply(null,arguments)}function RI(e,t){if(e==null)return{};var r,n,s=qI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ek=b.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=RI(e,LI),f=i||{width:n,height:s,x:0,y:0},m=_e("recharts-surface",o);return b.createElement("svg",Bp({},Pe(d,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),b.createElement("title",null,c),b.createElement("desc",null,u),r)}),FI=["children","className"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qp.apply(null,arguments)}function UI(e,t){if(e==null)return{};var r,n,s=BI(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ir=b.forwardRef((e,t)=>{var{children:r,className:n}=e,s=UI(e,FI),i=_e("recharts-layer",n);return b.createElement("g",Qp({className:i},Pe(s,!0),{ref:t}),r)}),QI=b.createContext(null);function Re(e){return function(){return e}}const tk=Math.cos,cd=Math.sin,En=Math.sqrt,ud=Math.PI,Tf=2*ud,Vp=Math.PI,Wp=2*Vp,_i=1e-6,VI=Wp-_i;function rk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function WI(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rk;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class KI{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rk:WI(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>_i)if(!(Math.abs(f*c-u*d)>_i)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,p=s-l,y=c*c+u*u,x=h*h+p*p,v=Math.sqrt(y),g=Math.sqrt(m),w=i*Math.tan((Vp-Math.acos((y+m-x)/(2*v*g)))/2),_=w/g,j=w/v;Math.abs(_-1)>_i&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*h>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,f=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>_i||Math.abs(this._y1-d)>_i)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%Wp+Wp),m>VI?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>_i&&this._append`A${n},${n},0,${+(m>=Vp)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ox(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new KI(t)}function lx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nk(e){this._context=e}nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Of(e){return new nk(e)}function sk(e){return e[0]}function ik(e){return e[1]}function ak(e,t){var r=Re(!0),n=null,s=Of,i=null,o=ox(l);e=typeof e=="function"?e:e===void 0?sk:Re(e),t=typeof t=="function"?t:t===void 0?ik:Re(t);function l(c){var u,d=(c=lx(c)).length,f,m=!1,h;for(n==null&&(i=s(h=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(f,u,c),+t(f,u,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Re(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Re(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Re(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function ru(e,t,r){var n=null,s=Re(!0),i=null,o=Of,l=null,c=ox(u);e=typeof e=="function"?e:e===void 0?sk:Re(+e),t=typeof t=="function"?t:Re(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ik:Re(+r);function u(f){var m,h,p,y=(f=lx(f)).length,x,v=!1,g,w=new Array(y),_=new Array(y);for(i==null&&(l=o(g=c())),m=0;m<=y;++m){if(!(m<y&&s(x=f[m],m,f))===v)if(v=!v)h=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=m-1;p>=h;--p)l.point(w[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(w[m]=+e(x,m,f),_[m]=+t(x,m,f),l.point(n?+n(x,m,f):w[m],r?+r(x,m,f):_[m]))}if(g)return l=null,g+""||null}function d(){return ak().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Re(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Re(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Re(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Re(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Re(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Re(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Re(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class ok{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function HI(e){return new ok(e,!0)}function GI(e){return new ok(e,!1)}const cx={draw(e,t){const r=En(t/ud);e.moveTo(r,0),e.arc(0,0,r,0,Tf)}},YI={draw(e,t){const r=En(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},lk=En(1/3),XI=lk*2,JI={draw(e,t){const r=En(t/XI),n=r*lk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},ZI={draw(e,t){const r=En(t),n=-r/2;e.rect(n,n,r,r)}},e$=.8908130915292852,ck=cd(ud/10)/cd(7*ud/10),t$=cd(Tf/10)*ck,r$=-tk(Tf/10)*ck,n$={draw(e,t){const r=En(t*e$),n=t$*r,s=r$*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Tf*i/5,l=tk(o),c=cd(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},am=En(3),s$={draw(e,t){const r=-En(t/(am*3));e.moveTo(0,r*2),e.lineTo(-am*r,-r),e.lineTo(am*r,-r),e.closePath()}},Fr=-.5,Ur=En(3)/2,Kp=1/En(12),i$=(Kp/2+1)*3,a$={draw(e,t){const r=En(t/i$),n=r/2,s=r*Kp,i=n,o=r*Kp+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Fr*n-Ur*s,Ur*n+Fr*s),e.lineTo(Fr*i-Ur*o,Ur*i+Fr*o),e.lineTo(Fr*l-Ur*c,Ur*l+Fr*c),e.lineTo(Fr*n+Ur*s,Fr*s-Ur*n),e.lineTo(Fr*i+Ur*o,Fr*o-Ur*i),e.lineTo(Fr*l+Ur*c,Fr*c-Ur*l),e.closePath()}};function o$(e,t){let r=null,n=ox(s);e=typeof e=="function"?e:Re(e||cx),t=typeof t=="function"?t:Re(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Re(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Re(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function dd(){}function fd(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function uk(e){this._context=e}uk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l$(e){return new uk(e)}function dk(e){this._context=e}dk.prototype={areaStart:dd,areaEnd:dd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c$(e){return new dk(e)}function fk(e){this._context=e}fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:fd(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u$(e){return new fk(e)}function hk(e){this._context=e}hk.prototype={areaStart:dd,areaEnd:dd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function d$(e){return new hk(e)}function zb(e){return e<0?-1:1}function Lb(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(zb(i)+zb(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Rb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function om(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function hd(e){this._context=e}hd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:om(this,this._t0,Rb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,om(this,Rb(this,r=Lb(this,e,t)),r);break;default:om(this,this._t0,r=Lb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function mk(e){this._context=new pk(e)}(mk.prototype=Object.create(hd.prototype)).point=function(e,t){hd.prototype.point.call(this,t,e)};function pk(e){this._context=e}pk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function f$(e){return new hd(e)}function h$(e){return new mk(e)}function gk(e){this._context=e}gk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=qb(e),s=qb(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function qb(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function m$(e){return new gk(e)}function Df(e,t){this._context=e,this._t=t}Df.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function p$(e){return new Df(e,.5)}function g$(e){return new Df(e,0)}function x$(e){return new Df(e,1)}function uo(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Hp(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function y$(e,t){return e[t]}function v$(e){const t=[];return t.key=e,t}function b$(){var e=Re([]),t=Hp,r=uo,n=y$;function s(i){var o=Array.from(e.apply(this,arguments),v$),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=lx(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Re(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Re(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Hp:typeof i=="function"?i:Re(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??uo,s):r},s}function w$(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}uo(e,t)}}function j$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}uo(e,t)}}function _$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,h=(f-m)/2,p=0;p<l;++p){var y=e[t[p]],x=y[n][1]||0,v=y[n-1][1]||0;h+=x-v}c+=f,u+=h*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,uo(e,t)}}var N$=["type","size","sizeType"];function Gp(){return Gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gp.apply(null,arguments)}function Fb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ub(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fb(Object(r),!0).forEach(function(n){S$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S$(e,t,r){return(t=k$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k$(e){var t=P$(e,"string");return typeof t=="symbol"?t:t+""}function P$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E$(e,t){if(e==null)return{};var r,n,s=C$(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function C$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xk={symbolCircle:cx,symbolCross:YI,symbolDiamond:JI,symbolSquare:ZI,symbolStar:n$,symbolTriangle:s$,symbolWye:a$},A$=Math.PI/180,T$=e=>{var t="symbol".concat(bc(e));return xk[t]||cx},O$=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*A$;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},D$=(e,t)=>{xk["symbol".concat(bc(e))]=t},yk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=E$(e,N$),i=Ub(Ub({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var f=T$(t),m=o$().type(f).size(O$(r,n,t));return m()},{className:l,cx:c,cy:u}=i,d=Pe(i,!0);return c===+c&&u===+u&&r===+r?b.createElement("path",Gp({},d,{className:_e("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};yk.registerSymbol=D$;var vk={},bk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(bk);var ux={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(ux);var wk={},Mf={},jk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(jk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jk;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Mf);var _k={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(_k);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mf,r=_k;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(wk);var Nk={},Sk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vf;function r(n){return function(s){return t.get(s,n)}}e.property=r})(Sk);var kk={},lm={},cm={},dx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(dx);var fx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(fx);var If={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(If);var Bb;function M$(){return Bb||(Bb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx(),r=dx,n=fx,s=If;function i(f,m,h){return typeof h!="function"?t.isMatch(f,m):o(f,m,function p(y,x,v,g,w,_){const j=h(y,x,v,g,w,_);return j!==void 0?!!j:o(y,x,p,_)},new Map)}function o(f,m,h,p){if(m===f)return!0;switch(typeof m){case"object":return l(f,m,h,p);case"function":return Object.keys(m).length>0?o(f,{...m},h,p):s.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:s.eq(f,m)}}function l(f,m,h,p){if(m==null)return!0;if(Array.isArray(m))return u(f,m,h,p);if(m instanceof Map)return c(f,m,h,p);if(m instanceof Set)return d(f,m,h,p);const y=Object.keys(m);if(f==null)return y.length===0;if(y.length===0)return!0;if(p&&p.has(m))return p.get(m)===f;p&&p.set(m,f);try{for(let x=0;x<y.length;x++){const v=y[x];if(!n.isPrimitive(f)&&!(v in f)||m[v]===void 0&&f[v]!==void 0||m[v]===null&&f[v]!==null||!h(f[v],m[v],v,f,m,p))return!1}return!0}finally{p&&p.delete(m)}}function c(f,m,h,p){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,x]of m.entries()){const v=f.get(y);if(h(v,x,y,f,m,p)===!1)return!1}return!0}function u(f,m,h,p){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let x=0;x<m.length;x++){const v=m[x];let g=!1;for(let w=0;w<f.length;w++){if(y.has(w))continue;const _=f[w];let j=!1;if(h(_,v,x,f,m,p)&&(j=!0),j){y.add(w),g=!0;break}}if(!g)return!1}return!0}function d(f,m,h,p){return m.size===0?!0:f instanceof Set?u([...f],[...m],h,p):!1}e.isMatchWith=i,e.isSetMatch=d}(cm)),cm}var Qb;function hx(){return Qb||(Qb=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M$();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(lm)),lm}var Pk={},mx={},px={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(px);var $f={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})($f);var zf={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",h="[object Object]",p="[object Error]",y="[object DataView]",x="[object Uint8Array]",v="[object Uint8ClampedArray]",g="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",S="[object Int32Array]",k="[object BigInt64Array]",O="[object Float32Array]",C="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=k,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=y,e.dateTag=l,e.errorTag=p,e.float32ArrayTag=O,e.float64ArrayTag=C,e.functionTag=f,e.int16ArrayTag=N,e.int32ArrayTag=S,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=h,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=g,e.uint32ArrayTag=w,e.uint8ArrayTag=x,e.uint8ClampedArrayTag=v})(zf);var Ek={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Ek);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=px,r=$f,n=zf,s=fx,i=Ek;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,m,h=new Map,p=void 0){const y=p==null?void 0:p(d,f,m,h);if(y!=null)return y;if(s.isPrimitive(d))return d;if(h.has(d))return h.get(d);if(Array.isArray(d)){const x=new Array(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,m,h,p);return Object.hasOwn(d,"index")&&(x.index=d.index),Object.hasOwn(d,"input")&&(x.input=d.input),x}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const x=new RegExp(d.source,d.flags);return x.lastIndex=d.lastIndex,x}if(d instanceof Map){const x=new Map;h.set(d,x);for(const[v,g]of d)x.set(v,l(g,v,m,h,p));return x}if(d instanceof Set){const x=new Set;h.set(d,x);for(const v of d)x.add(l(v,void 0,m,h,p));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const x=new(Object.getPrototypeOf(d)).constructor(d.length);h.set(d,x);for(let v=0;v<d.length;v++)x[v]=l(d[v],v,m,h,p);return x}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const x=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return h.set(d,x),c(x,d,m,h,p),x}if(typeof File<"u"&&d instanceof File){const x=new File([d],d.name,{type:d.type});return h.set(d,x),c(x,d,m,h,p),x}if(d instanceof Blob){const x=new Blob([d],{type:d.type});return h.set(d,x),c(x,d,m,h,p),x}if(d instanceof Error){const x=new d.constructor;return h.set(d,x),x.message=d.message,x.name=d.name,x.stack=d.stack,x.cause=d.cause,c(x,d,m,h,p),x}if(typeof d=="object"&&u(d)){const x=Object.create(Object.getPrototypeOf(d));return h.set(d,x),c(x,d,m,h,p),x}return d}function c(d,f,m=d,h,p){const y=[...Object.keys(f),...t.getSymbols(f)];for(let x=0;x<y.length;x++){const v=y[x],g=Object.getOwnPropertyDescriptor(d,v);(g==null||g.writable)&&(d[v]=l(f[v],v,m,h,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(mx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Pk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx(),r=Pk;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(kk);var Ck={},Ak={},Tk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx,r=zf;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(Tk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Ak);var Ok={},gx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(gx);var Dk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$f;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Dk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z0,r=gx,n=Dk,s=bf;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(Ok);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hx(),r=ex,n=Ak,s=vf,i=Ok;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(Ck);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ux,r=Sk,n=kk,s=Ck;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Nk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bk,r=ux,n=wk,s=Nk;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(vk);var I$=vk.uniqBy;const Vb=Qn(I$);function $$(e,t,r){return t===!0?Vb(e,r):typeof t=="function"?Vb(e,t):e}var Mk={exports:{}},Ik={},$k={exports:{}},zk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=b;function z$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L$=typeof Object.is=="function"?Object.is:z$,R$=fo.useState,q$=fo.useEffect,F$=fo.useLayoutEffect,U$=fo.useDebugValue;function B$(e,t){var r=t(),n=R$({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return F$(function(){s.value=r,s.getSnapshot=t,um(s)&&i({inst:s})},[e,r,t]),q$(function(){return um(s)&&i({inst:s}),e(function(){um(s)&&i({inst:s})})},[e]),U$(r),r}function um(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!L$(e,r)}catch{return!0}}function Q$(e,t){return t()}var V$=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q$:B$;zk.useSyncExternalStore=fo.useSyncExternalStore!==void 0?fo.useSyncExternalStore:V$;$k.exports=zk;var W$=$k.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=b,K$=W$;function H$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var G$=typeof Object.is=="function"?Object.is:H$,Y$=K$.useSyncExternalStore,X$=Lf.useRef,J$=Lf.useEffect,Z$=Lf.useMemo,e3=Lf.useDebugValue;Ik.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=X$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Z$(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,G$(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=Y$(e,i[0],i[1]);return J$(function(){o.hasValue=!0,o.value=l},[l]),e3(l),l};Mk.exports=Ik;var t3=Mk.exports,xx=b.createContext(null),r3=e=>e,yt=()=>{var e=b.useContext(xx);return e?e.store.dispatch:r3},Au=()=>{},n3=()=>Au,s3=(e,t)=>e===t;function de(e){var t=b.useContext(xx);return t3.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:n3,t?t.store.getState:Au,t?t.store.getState:Au,t?e:Au,s3)}function i3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function a3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function o3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Wb=e=>Array.isArray(e)?e:[e];function l3(e){const t=Array.isArray(e[0])?e[0]:e;return o3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function c3(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var u3=class{constructor(e){this.value=e}deref(){return this.value}},d3=typeof WeakRef<"u"?WeakRef:u3,f3=0,Kb=1;function nu(){return{s:f3,v:void 0,o:null,p:null}}function Lk(e,t={}){let r=nu();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let m=0,h=c;m<h;m++){const p=arguments[m];if(typeof p=="function"||typeof p=="object"&&p!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const x=y.get(p);x===void 0?(l=nu(),y.set(p,l)):l=x}else{let y=l.p;y===null&&(l.p=y=new Map);const x=y.get(p);x===void 0?(l=nu(),y.set(p,l)):l=x}}const u=l;let d;if(l.s===Kb)d=l.v;else if(d=e.apply(null,arguments),i++,n){const m=((f=s==null?void 0:s.deref)==null?void 0:f.call(s))??s;m!=null&&n(m,d)&&(d=m,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new d3(d):d}return u.s=Kb,u.v=d,d}return o.clearCache=()=>{r=nu(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function h3(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),i3(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:h=Lk,argsMemoizeOptions:p=[],devModeChecks:y={}}=d,x=Wb(m),v=Wb(p),g=l3(s),w=f(function(){return i++,u.apply(null,arguments)},...x),_=h(function(){o++;const N=c3(g,arguments);return l=w.apply(null,N),l},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var K=h3(Lk),m3=Object.assign((e,t=K)=>{a3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>m3}),Rk={},qk={},Fk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(Fk);var Uk={},yx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(yx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yx,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(Uk);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fk,r=Uk,n=bf;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(h=>String(h));const u=(h,p)=>{let y=h;for(let x=0;x<p.length&&y!=null;++x)y=y[p[x]];return y},d=(h,p)=>p==null||h==null?p:typeof h=="object"&&"key"in h?Object.hasOwn(p,h.key)?p[h.key]:u(p,h.path):typeof h=="function"?h(p):Array.isArray(h)?u(p,h):typeof p=="object"?p[h]:p,f=o.map(h=>(Array.isArray(h)&&h.length===1&&(h=h[0]),h==null||typeof h=="function"||Array.isArray(h)||r.isKey(h)?h:{key:h,path:n.toPath(h)}));return i.map(h=>({original:h,criteria:f.map(p=>d(p,h))})).slice().sort((h,p)=>{for(let y=0;y<f.length;y++){const x=t.compareValues(h.criteria[y],p.criteria[y],l[y]);if(x!==0)return x}return 0}).map(h=>h.original)}e.orderBy=s})(qk);var Bk={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(Bk);var vx={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gx,r=Mf,n=dx,s=If;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(vx);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qk,r=Bk,n=vx;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(Rk);var p3=Rk.sortBy;const Rf=Qn(p3);var Qk=e=>e.legend.settings,g3=e=>e.legend.size,x3=e=>e.legend.payload;K([x3,Qk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Rf(n,r):n});var su=1;function y3(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=b.useState({height:0,left:0,top:0,width:0}),n=b.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>su||Math.abs(o.left-t.left)>su||Math.abs(o.top-t.top)>su||Math.abs(o.width-t.width)>su)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Tt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var v3=typeof Symbol=="function"&&Symbol.observable||"@@observable",Hb=v3,dm=()=>Math.random().toString(36).substring(7).split("").join("."),b3={INIT:`@@redux/INIT${dm()}`,REPLACE:`@@redux/REPLACE${dm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dm()}`},md=b3;function bx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Vk(e,t,r){if(typeof e!="function")throw new Error(Tt(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Tt(1));return r(Vk)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((x,v)=>{o.set(v,x)}))}function d(){if(c)throw new Error(Tt(3));return s}function f(x){if(typeof x!="function")throw new Error(Tt(4));if(c)throw new Error(Tt(5));let v=!0;u();const g=l++;return o.set(g,x),function(){if(v){if(c)throw new Error(Tt(6));v=!1,u(),o.delete(g),i=null}}}function m(x){if(!bx(x))throw new Error(Tt(7));if(typeof x.type>"u")throw new Error(Tt(8));if(typeof x.type!="string")throw new Error(Tt(17));if(c)throw new Error(Tt(9));try{c=!0,s=n(s,x)}finally{c=!1}return(i=o).forEach(g=>{g()}),x}function h(x){if(typeof x!="function")throw new Error(Tt(10));n=x,m({type:md.REPLACE})}function p(){const x=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Tt(11));function g(){const _=v;_.next&&_.next(d())}return g(),{unsubscribe:x(g)}},[Hb](){return this}}}return m({type:md.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:h,[Hb]:p}}function w3(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:md.INIT})>"u")throw new Error(Tt(12));if(typeof r(void 0,{type:md.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tt(13))})}function Wk(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{w3(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],h=o[f],p=m(h,l);if(typeof p>"u")throw l&&l.type,new Error(Tt(14));u[f]=p,c=c||p!==h}return c=c||n.length!==Object.keys(o).length,c?u:o}}function pd(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function j3(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Tt(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=pd(...l)(s.dispatch),{...s,dispatch:i}}}function Kk(e){return bx(e)&&"type"in e&&typeof e.type=="string"}var Hk=Symbol.for("immer-nothing"),Gb=Symbol.for("immer-draftable"),$r=Symbol.for("immer-state");function vn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ho=Object.getPrototypeOf;function Ji(e){return!!e&&!!e[$r]}function hs(e){var t;return e?Gk(e)||Array.isArray(e)||!!e[Gb]||!!((t=e.constructor)!=null&&t[Gb])||Ff(e)||Uf(e):!1}var _3=Object.prototype.constructor.toString();function Gk(e){if(!e||typeof e!="object")return!1;const t=ho(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===_3}function gd(e,t){qf(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function qf(e){const t=e[$r];return t?t.type_:Array.isArray(e)?1:Ff(e)?2:Uf(e)?3:0}function Yp(e,t){return qf(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yk(e,t,r){const n=qf(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function N3(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ff(e){return e instanceof Map}function Uf(e){return e instanceof Set}function Ni(e){return e.copy_||e.base_}function Xp(e,t){if(Ff(e))return new Map(e);if(Uf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Gk(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[$r];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ho(e),n)}else{const n=ho(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function wx(e,t=!1){return Bf(e)||Ji(e)||!hs(e)||(qf(e)>1&&(e.set=e.add=e.clear=e.delete=S3),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>wx(n,!0))),e}function S3(){vn(2)}function Bf(e){return Object.isFrozen(e)}var k3={};function Zi(e){const t=k3[e];return t||vn(0,e),t}var Xl;function Xk(){return Xl}function P3(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Yb(e,t){t&&(Zi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jp(e){Zp(e),e.drafts_.forEach(E3),e.drafts_=null}function Zp(e){e===Xl&&(Xl=e.parent_)}function Xb(e){return Xl=P3(Xl,e)}function E3(e){const t=e[$r];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[$r].modified_&&(Jp(t),vn(4)),hs(e)&&(e=xd(t,e),t.parent_||yd(t,e)),t.patches_&&Zi("Patches").generateReplacementPatches_(r[$r].base_,e,t.patches_,t.inversePatches_)):e=xd(t,r,[]),Jp(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Hk?e:void 0}function xd(e,t,r){if(Bf(t))return t;const n=t[$r];if(!n)return gd(t,(s,i)=>Zb(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return yd(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),gd(i,(l,c)=>Zb(e,n,s,l,c,r,o)),yd(e,s,!1),r&&e.patches_&&Zi("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Zb(e,t,r,n,s,i,o){if(Ji(s)){const l=i&&t&&t.type_!==3&&!Yp(t.assigned_,n)?i.concat(n):void 0,c=xd(e,s,l);if(Yk(r,n,c),Ji(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(hs(s)&&!Bf(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xd(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&yd(e,s)}}function yd(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wx(t,r)}function C3(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Xk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=jx;r&&(s=[n],i=Jl);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var jx={get(e,t){if(t===$r)return e;const r=Ni(e);if(!Yp(r,t))return A3(e,r,t);const n=r[t];return e.finalized_||!hs(n)?n:n===fm(e.base_,t)?(hm(e),e.copy_[t]=tg(n,e)):n},has(e,t){return t in Ni(e)},ownKeys(e){return Reflect.ownKeys(Ni(e))},set(e,t,r){const n=Jk(Ni(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=fm(Ni(e),t),i=s==null?void 0:s[$r];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(N3(r,s)&&(r!==void 0||Yp(e.base_,t)))return!0;hm(e),eg(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return fm(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,hm(e),eg(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ni(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){vn(11)},getPrototypeOf(e){return ho(e.base_)},setPrototypeOf(){vn(12)}},Jl={};gd(jx,(e,t)=>{Jl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jl.deleteProperty=function(e,t){return Jl.set.call(this,e,t,void 0)};Jl.set=function(e,t,r){return jx.set.call(this,e[0],t,r,e[0])};function fm(e,t){const r=e[$r];return(r?Ni(r):e)[t]}function A3(e,t,r){var s;const n=Jk(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function Jk(e,t){if(!(t in e))return;let r=ho(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ho(r)}}function eg(e){e.modified_||(e.modified_=!0,e.parent_&&eg(e.parent_))}function hm(e){e.copy_||(e.copy_=Xp(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var T3=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&vn(6),n!==void 0&&typeof n!="function"&&vn(7);let s;if(hs(t)){const i=Xb(this),o=tg(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Jp(i):Zp(i)}return Yb(i,n),Jb(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===Hk&&(s=void 0),this.autoFreeze_&&wx(s,!0),n){const i=[],o=[];Zi("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else vn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){hs(e)||vn(8),Ji(e)&&(e=as(e));const t=Xb(this),r=tg(e,void 0);return r[$r].isManual_=!0,Zp(t),r}finishDraft(e,t){const r=e&&e[$r];(!r||!r.isManual_)&&vn(9);const{scope_:n}=r;return Yb(n,t),Jb(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Zi("Patches").applyPatches_;return Ji(e)?n(e,t):this.produce(e,s=>n(s,t))}};function tg(e,t){const r=Ff(e)?Zi("MapSet").proxyMap_(e,t):Uf(e)?Zi("MapSet").proxySet_(e,t):C3(e,t);return(t?t.scope_:Xk()).drafts_.push(r),r}function as(e){return Ji(e)||vn(10,e),Zk(e)}function Zk(e){if(!hs(e)||Bf(e))return e;const t=e[$r];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Xp(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Xp(e,!0);return gd(r,(n,s)=>{Yk(r,n,Zk(s))}),t&&(t.finalized_=!1),r}var zr=new T3,e2=zr.produce;zr.produceWithPatches.bind(zr);zr.setAutoFreeze.bind(zr);zr.setUseStrictShallowCopy.bind(zr);zr.applyPatches.bind(zr);zr.createDraft.bind(zr);zr.finishDraft.bind(zr);function t2(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var O3=t2(),D3=t2,M3=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?pd:pd.apply(null,arguments)};function rn(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Or(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Kk(n)&&n.type===e,r}var r2=class cl extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,cl.prototype)}static get[Symbol.species](){return cl}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new cl(...t[0].concat(this)):new cl(...t.concat(this))}};function ew(e){return hs(e)?e2(e,()=>{}):e}function iu(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function I3(e){return typeof e=="boolean"}var $3=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new r2;return r&&(I3(r)?o.push(O3):o.push(D3(r.extraArgument))),o},z3="RTK_autoBatch",tw=e=>t=>{setTimeout(t,e)},L3=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tw(10):e.type==="callback"?e.queueNotification:tw(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),m=n.subscribe(f);return l.add(d),()=>{m(),l.delete(d)}},dispatch(d){var f;try{return s=!((f=d==null?void 0:d.meta)!=null&&f[z3]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},R3=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new r2(e);return n&&s.push(L3(typeof n=="object"?n:void 0)),s};function q3(e){const t=$3(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(bx(r))c=Wk(r);else throw new Error(Or(1));let u;typeof n=="function"?u=n(t):u=t();let d=pd;s&&(d=M3({trace:!1,...typeof s=="object"&&s}));const f=j3(...u),m=R3(f);let h=typeof l=="function"?l(m):m();const p=d(...h);return Vk(c,o,p)}function n2(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Or(28));if(l in t)throw new Error(Or(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function F3(e){return typeof e=="function"}function U3(e,t){let[r,n,s]=n2(t),i;if(F3(e))i=()=>ew(e());else{const l=ew(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Ji(d)){const h=f(d,c);return h===void 0?d:h}else{if(hs(d))return e2(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},l)}return o.getInitialState=i,o}var B3="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Q3=(e=21)=>{let t="",r=e;for(;r--;)t+=B3[Math.random()*64|0];return t},V3=Symbol.for("rtk-slice-createasyncthunk");function W3(e,t){return`${e}/${t}`}function K3({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[V3];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(Or(11));typeof process<"u";const l=(typeof s.reducers=="function"?s.reducers(G3()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(Or(12));if(N in u.sliceCaseReducersByType)throw new Error(Or(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:W3(i,_),createNotation:typeof s.reducers=="function"};X3(j)?Z3(N,j,d,t):Y3(N,j,d)});function f(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?n2(s.extraReducers):[s.extraReducers],S={..._,...u.sliceCaseReducersByType};return U3(s.initialState,k=>{for(let O in S)k.addCase(O,S[O]);for(let O of u.sliceMatchers)k.addMatcher(O.matcher,O.reducer);for(let O of j)k.addMatcher(O.matcher,O.reducer);N&&k.addDefaultCase(N)})}const m=_=>_,h=new Map,p=new WeakMap;let y;function x(_,j){return y||(y=f()),y(_,j)}function v(){return y||(y=f()),y.getInitialState()}function g(_,j=!1){function N(k){let O=k[_];return typeof O>"u"&&j&&(O=iu(p,N,v)),O}function S(k=m){const O=iu(h,j,()=>new WeakMap);return iu(O,k,()=>{const C={};for(const[M,E]of Object.entries(s.selectors??{}))C[M]=H3(E,k,()=>iu(p,k,v),j);return C})}return{reducerPath:_,getSelectors:S,get selectors(){return S(N)},selectSlice:N}}const w={name:i,reducer:x,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...g(o),injectInto(_,{reducerPath:j,...N}={}){const S=j??o;return _.inject({reducerPath:S,reducer:x},N),{...w,...g(S,!0)}}};return w}}function H3(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var on=K3();function G3(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Y3({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!J3(n))throw new Error(Or(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?rn(e,o):rn(e))}function X3(e){return e._reducerDefinitionType==="asyncThunk"}function J3(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Z3({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Or(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=s(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||au,pending:l||au,rejected:c||au,settled:u||au})}function au(){}var e5="task",s2="listener",i2="completed",_x="cancelled",t5=`task-${_x}`,r5=`task-${i2}`,rg=`${s2}-${_x}`,n5=`${s2}-${i2}`,Qf=class{constructor(e){wh(this,"name","TaskAbortError");wh(this,"message");this.code=e,this.message=`${e5} ${_x} (reason: ${e})`}},Nx=(e,t)=>{if(typeof e!="function")throw new TypeError(Or(32))},vd=()=>{},a2=(e,t=vd)=>(e.catch(t),e),o2=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Li=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ri=e=>{if(e.aborted){const{reason:t}=e;throw new Qf(t)}};function l2(e,t){let r=vd;return new Promise((n,s)=>{const i=()=>s(new Qf(e.reason));if(e.aborted){i();return}r=o2(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=vd})}var s5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Qf?"cancelled":"rejected",error:r}}finally{t==null||t()}},bd=e=>t=>a2(l2(e,t).then(r=>(Ri(e),r))),c2=e=>{const t=bd(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ka}=Object,rw={},Vf="listenerMiddleware",i5=(e,t)=>{const r=n=>o2(e,()=>Li(n,e.reason));return(n,s)=>{Nx(n);const i=new AbortController;r(i);const o=s5(async()=>{Ri(e),Ri(i.signal);const l=await n({pause:bd(i.signal),delay:c2(i.signal),signal:i.signal});return Ri(i.signal),l},()=>Li(i,r5));return s!=null&&s.autoJoin&&t.push(o.catch(vd)),{result:bd(e)(o),cancel(){Li(i,t5)}}}},a5=(e,t)=>{const r=async(n,s)=>{Ri(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await l2(t,Promise.race(l));return Ri(t),c}finally{i()}};return(n,s)=>a2(r(n,s))},u2=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=rn(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Or(21));return Nx(i),{predicate:s,type:t,effect:i}},d2=Ka(e=>{const{type:t,predicate:r,effect:n}=u2(e);return{id:Q3(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Or(22))}}},{withTypes:()=>d2}),nw=(e,t)=>{const{type:r,effect:n,predicate:s}=u2(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},ng=e=>{e.pending.forEach(t=>{Li(t,rg)})},o5=e=>()=>{e.forEach(ng),e.clear()},sw=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},f2=Ka(rn(`${Vf}/add`),{withTypes:()=>f2}),l5=rn(`${Vf}/removeAll`),h2=Ka(rn(`${Vf}/remove`),{withTypes:()=>h2}),c5=(...e)=>{console.error(`${Vf}/error`,...e)},wc=(e={})=>{const t=new Map,{extra:r,onError:n=c5}=e;Nx(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&ng(d)}),i=d=>{const f=nw(t,d)??d2(d);return s(f)};Ka(i,{withTypes:()=>i});const o=d=>{const f=nw(t,d);return f&&(f.unsubscribe(),d.cancelActive&&ng(f)),!!f};Ka(o,{withTypes:()=>o});const l=async(d,f,m,h)=>{const p=new AbortController,y=a5(i,p.signal),x=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,Ka({},m,{getOriginalState:h,condition:(v,g)=>y(v,g).then(Boolean),take:y,delay:c2(p.signal),pause:bd(p.signal),extra:r,signal:p.signal,fork:i5(p.signal,x),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((v,g,w)=>{v!==p&&(Li(v,rg),w.delete(v))})},cancel:()=>{Li(p,rg),d.pending.delete(p)},throwIfCancelled:()=>{Ri(p.signal)}})))}catch(v){v instanceof Qf||sw(n,v,{raisedBy:"effect"})}finally{await Promise.all(x),Li(p,n5),d.pending.delete(p)}},c=o5(t);return{middleware:d=>f=>m=>{if(!Kk(m))return f(m);if(f2.match(m))return i(m.payload);if(l5.match(m)){c();return}if(h2.match(m))return o(m.payload);let h=d.getState();const p=()=>{if(h===rw)throw new Error(Or(23));return h};let y;try{if(y=f(m),t.size>0){const x=d.getState(),v=Array.from(t.values());for(const g of v){let w=!1;try{w=g.predicate(m,x,h)}catch(_){w=!1,sw(n,_,{raisedBy:"predicate"})}w&&l(g,m,d,p)}}}finally{h=rw}return y},startListening:i,stopListening:o,clearListeners:c}};function Or(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var u5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},m2=on({name:"chartLayout",initialState:u5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:d5,setLayout:f5,setChartSize:h5,setScale:m5}=m2.actions,p5=m2.reducer;function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function aw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(r),!0).forEach(function(n){g5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g5(e,t,r){return(t=x5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x5(e){var t=y5(e,"string");return typeof t=="symbol"?t:t+""}function y5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wd=Math.PI/180,v5=e=>e*180/Math.PI,$t=(e,t,r,n)=>({x:e+Math.cos(-wd*n)*r,y:t+Math.sin(-wd*n)*r}),b5=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},w5=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},j5=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=w5({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:v5(c),angleInRadian:c}},_5=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},N5=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},S5=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=j5({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=_5(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?aw(aw({},t),{},{radius:s,angle:N5(d,t)}):null};function ow(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(r),!0).forEach(function(n){k5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ow(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k5(e,t,r){return(t=P5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P5(e){var t=E5(e,"string");return typeof t=="symbol"?t:t+""}function E5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ht(e,t,r){return $e(e)||$e(t)?r:Fn(t)?Xi(e,t,r):typeof t=="function"?t(e):r}var C5=(e,t,r,n,s)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,f=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(gr(d-u)!==gr(f-d)){var h=[];if(gr(f-d)===gr(s[1]-s[0])){m=f;var p=d+s[1]-s[0];h[0]=Math.min(p,(p+u)/2),h[1]=Math.max(p,(p+u)/2)}else{m=u;var y=f+s[1]-s[0];h[0]=Math.min(d,(y+d)/2),h[1]=Math.max(d,(y+d)/2)}var x=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>x[0]&&e<=x[1]||e>=h[0]&&e<=h[1]){({index:o}=r[c]);break}}else{var v=Math.min(u,f),g=Math.max(u,f);if(e>(v+d)/2&&e<=(g+d)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},A5=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ae(e[i]))return Wr(Wr({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ae(e[o]))return Wr(Wr({},e),{},{[o]:e[o]+(s||0)})}return e},hi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",p2=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},g2=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:h}=e;if(!o)return null;var p=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=s==="category"&&o.bandwidth?o.bandwidth()/p:0;if(y=h==="angleAxis"&&i&&i.length>=2?gr(i[0]-i[1])*2*y:y,f||m){var x=(f||m||[]).map((v,g)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+y,value:v,offset:y,index:g}});return x.filter(v=>!Mr(v.coordinate))}return c&&u?u.map((v,g)=>({coordinate:o(v)+y,value:v,index:g,offset:y})):o.ticks&&!r&&d!=null?o.ticks(d).map((v,g)=>({coordinate:o(v)+y,value:v,offset:y,index:g})):o.domain().map((v,g)=>({coordinate:o(v)+y,value:n?n[v]:v,index:g,offset:y}))},lw=1e-4,T5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-lw,i=Math.max(n[0],n[1])+lw,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},O5=(e,t)=>{if(!t||t.length!==2||!ae(t[0])||!ae(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ae(e[0])||e[0]<r)&&(s[0]=r),(!ae(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},D5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=Mr(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},M5=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=Mr(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},I5={sign:D5,expand:w$,none:uo,silhouette:j$,wiggle:_$,positive:M5},$5=(e,t,r)=>{var n=I5[r],s=b$().keys(t).value((i,o)=>+Ht(i,o,0)).order(Hp).offset(n);return s(e)};function x2(e){return e==null?void 0:String(e)}function cw(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!$e(s[t.dataKey])){var l=XS(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ht(s,$e(o)?t.dataKey:o);return $e(c)?null:t.scale(c)}var uw=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ht(i,t.dataKey,t.scale.domain()[o]);return $e(l)?null:t.scale(l)-s/2+n},z5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},L5=e=>{var t=e.flat(2).filter(ae);return[Math.min(...t),Math.max(...t)]},R5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],q5=(e,t,r)=>{if(e!=null)return R5(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,u)=>{var d=L5(u.slice(t,r+1));return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},dw=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fw=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zl=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Rf(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min((c.coordinate||0)-(u.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function hw(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Wr(Wr({},t),{},{dataKey:r,payload:n,value:s,name:i})}function Wf(e,t){if(e)return String(e);if(typeof t=="string")return t}function F5(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?S5({x:e,y:t},n):null}var U5=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Wr(Wr(Wr({},n),$t(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Wr(Wr(Wr({},n),$t(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},B5=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,bs=e=>e.layout.width,ws=e=>e.layout.height,Q5=e=>e.layout.scale,y2=e=>e.layout.margin,Sx=K(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),kx=K(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),V5="data-recharts-item-index",W5="data-recharts-item-data-key",Kf=60;function mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mw(Object(r),!0).forEach(function(n){K5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K5(e,t,r){return(t=H5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H5(e){var t=G5(e,"string");return typeof t=="symbol"?t:t+""}function G5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y5=e=>e.brush.height,Pt=K([bs,ws,y2,Y5,Sx,kx,Qk,g3],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((p,y)=>{var{orientation:x}=y;if(!y.mirror&&!y.hide){var v=typeof y.width=="number"?y.width:Kf;return Es(Es({},p),{},{[x]:p[x]+v})}return p},{left:r.left||0,right:r.right||0}),u=s.reduce((p,y)=>{var{orientation:x}=y;return!y.mirror&&!y.hide?Es(Es({},p),{},{[x]:Xi(p,"".concat(x))+y.height}):p},{top:r.top||0,bottom:r.bottom||0}),d=Es(Es({},u),c),f=d.bottom;d.bottom+=n,d=A5(d,o,l);var m=e-d.left-d.right,h=t-d.top-d.bottom;return Es(Es({brushBottom:f},d),{},{width:Math.max(m,0),height:Math.max(h,0)})}),X5=K(Pt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),v2=K(bs,ws,(e,t)=>({x:0,y:0,width:e,height:t})),J5=b.createContext(null),or=()=>b.useContext(J5)!=null,Hf=e=>e.brush,Gf=K([Hf,Pt,y2],(e,t,r)=>({height:e.height,x:ae(e.x)?e.x:t.left,y:ae(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ae(e.width)?e.width:t.width})),Px=()=>{var e,t=or(),r=de(X5),n=de(Gf),s=(e=de(Hf))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Z5={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},b2=()=>{var e;return(e=de(Pt))!==null&&e!==void 0?e:Z5},w2=()=>de(bs),j2=()=>de(ws),Te=e=>e.layout.layoutType,Yf=()=>de(Te),ez={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},_2=on({name:"legend",initialState:ez,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=as(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:MK,setLegendSettings:IK,addLegendPayload:tz,removeLegendPayload:rz}=_2.actions,nz=_2.reducer;function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sg.apply(null,arguments)}function pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(r),!0).forEach(function(n){sz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sz(e,t,r){return(t=iz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iz(e){var t=az(e,"string");return typeof t=="symbol"?t:t+""}function az(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e){return Array.isArray(e)&&Fn(e[0])&&Fn(e[1])?e.join(" ~ "):e}var lz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,h=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?Rf(i,l):i).map((S,k)=>{if(S.type==="none")return null;var O=S.formatter||o||oz,{value:C,name:M}=S,E=C,z=M;if(O){var $=O(C,M,S,k,i);if(Array.isArray($))[E,z]=$;else if($!=null)E=$;else return null}var q=mm({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return b.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:q},Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-name"},z):null,Fn(z)?b.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,b.createElement("span",{className:"recharts-tooltip-item-value"},E),b.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return b.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},p=mm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=mm({margin:0},s),x=!$e(d),v=x?d:"",g=_e("recharts-default-tooltip",c),w=_e("recharts-tooltip-label",u);x&&f&&i!==void 0&&i!==null&&(v=f(d,i));var _=m?{role:"status","aria-live":"assertive"}:{};return b.createElement("div",sg({className:g,style:p},_),b.createElement("p",{className:w,style:y},b.isValidElement(v)?v:"".concat(v)),h())},Yo="recharts-tooltip-wrapper",cz={visibility:"hidden"};function uz(e){var{coordinate:t,translateX:r,translateY:n}=e;return _e(Yo,{["".concat(Yo,"-right")]:ae(r)&&t&&ae(t.x)&&r>=t.x,["".concat(Yo,"-left")]:ae(r)&&t&&ae(t.x)&&r<t.x,["".concat(Yo,"-bottom")]:ae(n)&&t&&ae(t.y)&&n>=t.y,["".concat(Yo,"-top")]:ae(n)&&t&&ae(t.y)&&n<t.y})}function gw(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ae(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),f=r[n]+s;if(t[n])return o[n]?d:f;var m=c[n];if(m==null)return 0;if(o[n]){var h=d,p=m;return h<p?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var y=f+l,x=m+u;return y>x?Math.max(d,m):Math.max(f,m)}function dz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function fz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=gw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=gw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=dz({translateX:d,translateY:f,useTranslate3d:l})):u=cz,{cssProperties:u,cssClasses:uz({translateX:d,translateY:f,coordinate:r})}}function xw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ou(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xw(Object(r),!0).forEach(function(n){ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ig(e,t,r){return(t=hz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class pz extends b.PureComponent{constructor(){super(...arguments),ig(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ig(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:h,wrapperStyle:p,lastBoundingBox:y,innerRef:x,hasPortalFromProps:v}=this.props,{cssClasses:g,cssProperties:w}=fz({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:m,viewBox:h}),_=v?{}:ou(ou({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=ou(ou({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},p);return b.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:g,style:j,ref:x},i)}}var gz=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Po={isSsr:gz()},N2=()=>de(e=>e.rootProps.accessibilityLayer);function Lr(e){return Number.isFinite(e)}function jd(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function ag(){return ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ag.apply(null,arguments)}function yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yw(Object(r),!0).forEach(function(n){xz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xz(e,t,r){return(t=yz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bw={curveBasisClosed:c$,curveBasisOpen:u$,curveBasis:l$,curveBumpX:HI,curveBumpY:GI,curveLinearClosed:d$,curveLinear:Of,curveMonotoneX:f$,curveMonotoneY:h$,curveNatural:m$,curveStep:p$,curveStepAfter:x$,curveStepBefore:g$},lu=e=>Lr(e.x)&&Lr(e.y),Xo=e=>e.x,Jo=e=>e.y,bz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(bc(e));return(r==="curveMonotone"||r==="curveBump")&&t?bw["".concat(r).concat(t==="vertical"?"Y":"X")]:bw[r]||Of},wz=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=bz(t,s),l=i?r.filter(lu):r,c;if(Array.isArray(n)){var u=i?n.filter(f=>lu(f)):n,d=l.map((f,m)=>vw(vw({},f),{},{base:u[m]}));return s==="vertical"?c=ru().y(Jo).x1(Xo).x0(f=>f.base.x):c=ru().x(Xo).y1(Jo).y0(f=>f.base.y),c.defined(lu).curve(o),c(d)}return s==="vertical"&&ae(n)?c=ru().y(Jo).x1(Xo).x0(n):ae(n)?c=ru().x(Xo).y1(Jo).y0(n):c=ak().x(Xo).y(Jo),c.defined(lu).curve(o),c(l)},S2=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?wz(e):n;return b.createElement("path",ag({},Pe(e,!1),sx(e),{className:_e("recharts-curve",t),d:i===null?void 0:i,ref:s}))},jz=["x","y","top","left","width","height","className"];function og(){return og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},og.apply(null,arguments)}function ww(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ww(Object(r),!0).forEach(function(n){Nz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ww(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nz(e,t,r){return(t=Sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sz(e){var t=kz(e,"string");return typeof t=="symbol"?t:t+""}function kz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pz(e,t){if(e==null)return{};var r,n,s=Ez(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ez(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cz=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Az=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=Pz(e,jz),u=_z({x:t,y:r,top:n,left:s,width:i,height:o},c);return!ae(t)||!ae(r)||!ae(i)||!ae(o)||!ae(n)||!ae(s)?null:b.createElement("path",og({},Pe(u,!0),{className:_e("recharts-cross",l),d:Cz(t,r,i,o,n,s)}))};function Tz(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(r),!0).forEach(function(n){Dz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dz(e,t,r){return(t=Mz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mz(e){var t=Iz(e,"string");return typeof t=="symbol"?t:t+""}function Iz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function js(e,t){var r=Oz({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var k2={},P2={},E2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(E2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E2,r=px,n=$f,s=zf,i=If;function o(u,d,f){return l(u,d,void 0,void 0,void 0,void 0,f)}function l(u,d,f,m,h,p,y){const x=y(u,d,f,m,h,p);if(x!==void 0)return x;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,p,y)}return c(u,d,p,y)}function c(u,d,f,m){if(Object.is(u,d))return!0;let h=n.getTag(u),p=n.getTag(d);if(h===s.argumentsTag&&(h=s.objectTag),p===s.argumentsTag&&(p=s.objectTag),h!==p)return!1;switch(h){case s.stringTag:return u.toString()===d.toString();case s.numberTag:{const v=u.valueOf(),g=d.valueOf();return i.eq(v,g)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(u.valueOf(),d.valueOf());case s.regexpTag:return u.source===d.source&&u.flags===d.flags;case s.functionTag:return u===d}f=f??new Map;const y=f.get(u),x=f.get(d);if(y!=null&&x!=null)return y===d;f.set(u,d),f.set(d,u);try{switch(h){case s.mapTag:{if(u.size!==d.size)return!1;for(const[v,g]of u.entries())if(!d.has(v)||!l(g,d.get(v),v,u,d,f,m))return!1;return!0}case s.setTag:{if(u.size!==d.size)return!1;const v=Array.from(u.values()),g=Array.from(d.values());for(let w=0;w<v.length;w++){const _=v[w],j=g.findIndex(N=>l(_,N,void 0,u,d,f,m));if(j===-1)return!1;g.splice(j,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let v=0;v<u.length;v++)if(!l(u[v],d[v],v,u,d,f,m))return!1;return!0}case s.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,m);case s.errorTag:return u.name===d.name&&u.message===d.message;case s.objectTag:{if(!(c(u.constructor,d.constructor,f,m)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const g=[...Object.keys(u),...r.getSymbols(u)],w=[...Object.keys(d),...r.getSymbols(d)];if(g.length!==w.length)return!1;for(let _=0;_<g.length;_++){const j=g[_],N=u[j];if(!Object.hasOwn(d,j))return!1;const S=d[j];if(!l(N,S,j,u,d,f,m))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=o})(P2);var C2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(C2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P2,r=C2;function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n})(k2);var $z=k2.isEqual;const zz=Qn($z);function Lz(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var _d=1e-4,A2=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],T2=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),_w=(e,t)=>r=>{var n=A2(e,t);return T2(n,r)},Rz=(e,t)=>r=>{var n=A2(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return T2(s,r)},Nw=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else o.length===4&&([t,n,r,s]=o);var u=_w(t,r),d=_w(n,s),f=Rz(t,r),m=p=>p>1?1:p<0?0:p,h=p=>{for(var y=p>1?1:p,x=y,v=0;v<8;++v){var g=u(x)-y,w=f(x);if(Math.abs(g-y)<_d||w<_d)return d(x);x=m(x-g/w)}return d(x)};return h.isStepper=!1,h},qz=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<_d&&Math.abs(f)<_d?[l,0]:[m,f]};return i.isStepper=!0,i.dt=s,i},Fz=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Nw(e);case"spring":return qz();default:if(e.split("(")[0]==="cubic-bezier")return Nw(e)}return typeof e=="function"?e:null};function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){Uz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uz(e,t,r){return(t=Bz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bz(e){var t=Qz(e,"string");return typeof t=="symbol"?t:t+""}function Qz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vz=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Wz=(e,t,r)=>e.map(n=>"".concat(Vz(n)," ").concat(t,"ms ").concat(r)).join(","),Kz=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ec=(e,t)=>Object.keys(t).reduce((r,n)=>kw(kw({},r),{},{[n]:e(n,t[n])}),{});function Pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pw(Object(r),!0).forEach(function(n){Hz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hz(e,t,r){return(t=Gz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gz(e){var t=Yz(e,"string");return typeof t=="symbol"?t:t+""}function Yz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nd=(e,t,r)=>e+(t-e)*r,lg=e=>{var{from:t,to:r}=e;return t!==r},O2=(e,t,r)=>{var n=ec((s,i)=>{if(lg(i)){var[o,l]=e(i.from,i.to,i.velocity);return Dt(Dt({},i),{},{from:o,velocity:l})}return i},t);return r<1?ec((s,i)=>lg(i)?Dt(Dt({},i),{},{velocity:Nd(i.velocity,n[s].velocity,r),from:Nd(i.from,n[s].from,r)}):i,t):O2(e,n,r-1)};function Xz(e,t,r,n,s,i){var o,l=n.reduce((m,h)=>Dt(Dt({},m),{},{[h]:{from:e[h],velocity:0,to:t[h]}}),{}),c=()=>ec((m,h)=>h.from,l),u=()=>!Object.values(l).filter(lg).length,d=null,f=m=>{o||(o=m);var h=m-o,p=h/r.dt;l=O2(r,l,p),s(Dt(Dt(Dt({},e),t),c())),o=m,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{d()})}function Jz(e,t,r,n,s,i,o){var l=null,c=s.reduce((f,m)=>Dt(Dt({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,h=ec((y,x)=>Nd(...x,r(m)),c);if(i(Dt(Dt(Dt({},e),t),h)),m<1)l=o.setTimeout(d);else{var p=ec((y,x)=>Nd(...x,r(1)),c);i(Dt(Dt(Dt({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{l()})}const Zz=(e,t,r,n,s,i)=>{var o=Kz(e,t);return r.isStepper===!0?Xz(e,t,r,o,s,i):Jz(e,t,r,n,o,s,i)};class eL{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var tL=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(null,arguments)}function rL(e,t){if(e==null)return{};var r,n,s=nL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(r),!0).forEach(function(n){Oi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oi(e,t,r){return(t=sL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sL(e){var t=iL(e,"string");return typeof t=="symbol"?t:t+""}function iL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aL(){return Lz(new eL)}class Ex extends b.PureComponent{constructor(t,r){super(t,r),Oi(this,"mounted",!1),Oi(this,"manager",null),Oi(this,"stopJSAnimation",null),Oi(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(u);return}if(!(zz(t.to,o)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:f}:f};(s&&c[s]!==f||!s&&c!==f)&&this.setState(m)}this.runAnimation(Cs(Cs({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,u=Zz(r,n,Fz(i),s,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,o,d,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof u=="function"||o==="spring"){this.runJSAnimation(t);return}var d=s?{[s]:i}:i,f=Wz(Object.keys(d),n,o);this.manager.start([l,r,Cs(Cs({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:m,onAnimationReStart:h,animationManager:p}=t,y=rL(t,tL),x=b.Children.count(r),v=this.state.style;if(typeof r=="function")return r(v);if(!l||x===0||s<=0)return r;var g=w=>{var{style:_={},className:j}=w.props,N=b.cloneElement(w,Cs(Cs({},y),{},{style:Cs(Cs({},_),v),className:j}));return N};return x===1?g(b.Children.only(r)):b.createElement("div",null,b.Children.map(r,w=>g(w)))}}Oi(Ex,"displayName","Animate");Oi(Ex,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var oL=b.createContext(null);function ea(e){var t,r,n=b.useContext(oL);return b.createElement(Ex,cg({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:aL()}))}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sd.apply(null,arguments)}var Cw=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(i>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=s[f]>i?i:s[f];u="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),u+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*d[1])),u+="L ".concat(e+r,",").concat(t+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-l*d[2],",").concat(t+n)),u+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*d[3])),u+="Z"}else if(i>0&&s===+s&&s>0){var h=Math.min(i,s);u="M ".concat(e,",").concat(t+o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,`
            L `).concat(e+r-l*h,",").concat(t,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*h,`
            L `).concat(e+r,",").concat(t+n-o*h,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+r-l*h,",").concat(t+n,`
            L `).concat(e+l*h,",").concat(t+n,`
            A `).concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*h," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},lL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},D2=e=>{var t=js(e,lL),r=b.useRef(null),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&s(v)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isAnimationActive:p,isUpdateAnimationActive:y}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var x=_e("recharts-rectangle",d);return y?b.createElement(ea,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:f,isActive:y},v=>{var{width:g,height:w,x:_,y:j}=v;return b.createElement(ea,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,isActive:p,easing:f},b.createElement("path",Sd({},Pe(t,!0),{className:x,d:Cw(_,j,g,w,u),ref:r})))}):b.createElement("path",Sd({},Pe(t,!0),{className:x,d:Cw(i,o,l,c,u)}))};function M2(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=$t(t,r,n,s),l=$t(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function ug(){return ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ug.apply(null,arguments)}var cL=(e,t)=>{var r=gr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},cu=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/wd,f=c?s:s+i*d,m=$t(t,r,u,f),h=$t(t,r,n,f),p=c?s-i*d:s,y=$t(t,r,u*Math.cos(d*wd),p);return{center:m,circleTangency:h,lineTangency:y,theta:d}},I2=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=cL(i,o),c=i+l,u=$t(t,r,s,i),d=$t(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=$t(t,r,n,i),h=$t(t,r,n,c);f+="L ".concat(h.x,",").concat(h.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},uL=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=gr(u-c),{circleTangency:f,lineTangency:m,theta:h}=cu({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:p,lineTangency:y,theta:x}=cu({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-h-x;if(v<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):I2({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var g="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=cu({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:S,theta:k}=cu({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=l?Math.abs(c-u):Math.abs(c-u)-j-k;if(O<0&&i===0)return"".concat(g,"L").concat(t,",").concat(r,"Z");g+="L".concat(S.x,",").concat(S.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,"Z")}else g+="L".concat(t,",").concat(r,"Z");return g},dL={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$2=e=>{var t=js(e,dL),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<s||u===d)return null;var m=_e("recharts-sector",f),h=i-s,p=Sn(o,h,0,!0),y;return p>0&&Math.abs(u-d)<360?y=uL({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(p,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=I2({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),b.createElement("path",ug({},Pe(t,!0),{className:m,d:y}))};function fL(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=$t(l,c,u,f),h=$t(l,c,d,f);n=m.x,s=m.y,i=h.x,o=h.y}else return M2(t);return[{x:n,y:s},{x:i,y:o}]}var z2={},L2={},R2={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yx;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(R2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R2;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(L2);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vx,r=L2;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(z2);var hL=z2.range;const q2=Qn(hL);function ei(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mL(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cx(e){let t,r,n;e.length!==2?(t=ei,r=(l,c)=>ei(e(l),c),n=(l,c)=>e(l)-c):(t=e===ei||e===mL?e:pL,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function pL(){return 0}function F2(e){return e===null?NaN:+e}function*gL(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const xL=Cx(ei),jc=xL.right;Cx(F2).center;class Aw extends Map{constructor(t,r=bL){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Tw(this,t))}has(t){return super.has(Tw(this,t))}set(t,r){return super.set(yL(this,t),r)}delete(t){return super.delete(vL(this,t))}}function Tw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function yL({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function vL({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function bL(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wL(e=ei){if(e===ei)return U2;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function U2(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const jL=Math.sqrt(50),_L=Math.sqrt(10),NL=Math.sqrt(2);function kd(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=jL?10:i>=_L?5:i>=NL?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?kd(e,t,r*2):[l,c,u]}function dg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?kd(t,e,r):kd(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function fg(e,t,r){return t=+t,e=+e,r=+r,kd(e,t,r)[2]}function hg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?fg(t,e,r):fg(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Ow(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Dw(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function B2(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?U2:wL(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),h=Math.max(r,Math.floor(t-u*f/c+m)),p=Math.min(n,Math.floor(t+(c-u)*f/c+m));B2(e,t,h,p,s)}const i=e[t];let o=r,l=n;for(Zo(e,r,t),s(e[n],i)>0&&Zo(e,r,n);o<l;){for(Zo(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Zo(e,r,l):(++l,Zo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Zo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function SL(e,t,r){if(e=Float64Array.from(gL(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Dw(e);if(t>=1)return Ow(e);var n,s=(n-1)*t,i=Math.floor(s),o=Ow(B2(e,i).subarray(0,i+1)),l=Dw(e.subarray(i+1));return o+(l-o)*(s-i)}}function kL(e,t,r=F2){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function PL(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ln(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _s(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mg=Symbol("implicit");function Ax(){var e=new Aw,t=[],r=[],n=mg;function s(i){let o=e.get(i);if(o===void 0){if(n!==mg)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Aw;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Ax(t,r).unknown(n)},ln.apply(s,arguments),s}function Tx(){var e=Ax().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,h=s<n,p=h?s:n,y=h?n:s;i=(y-p)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),p+=(y-p-i*(m-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var x=PL(m).map(function(v){return p+i*v});return r(h?x.reverse():x)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return Tx(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ln.apply(f(),arguments)}function Q2(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Q2(t())},e}function EL(){return Q2(Tx.apply(null,arguments).paddingInner(1))}function Ox(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function V2(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _c(){}var tc=.7,Pd=1/tc,Ha="\\s*([+-]?\\d+)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CL=/^#([0-9a-f]{3,8})$/,AL=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),TL=new RegExp(`^rgb\\(${Rn},${Rn},${Rn}\\)$`),OL=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${rc}\\)$`),DL=new RegExp(`^rgba\\(${Rn},${Rn},${Rn},${rc}\\)$`),ML=new RegExp(`^hsl\\(${rc},${Rn},${Rn}\\)$`),IL=new RegExp(`^hsla\\(${rc},${Rn},${Rn},${rc}\\)$`),Mw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ox(_c,nc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Iw,formatHex:Iw,formatHex8:$L,formatHsl:zL,formatRgb:$w,toString:$w});function Iw(){return this.rgb().formatHex()}function $L(){return this.rgb().formatHex8()}function zL(){return W2(this).formatHsl()}function $w(){return this.rgb().formatRgb()}function nc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=CL.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?zw(t):r===3?new xr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?uu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?uu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AL.exec(e))?new xr(t[1],t[2],t[3],1):(t=TL.exec(e))?new xr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=OL.exec(e))?uu(t[1],t[2],t[3],t[4]):(t=DL.exec(e))?uu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ML.exec(e))?qw(t[1],t[2]/100,t[3]/100,1):(t=IL.exec(e))?qw(t[1],t[2]/100,t[3]/100,t[4]):Mw.hasOwnProperty(e)?zw(Mw[e]):e==="transparent"?new xr(NaN,NaN,NaN,0):null}function zw(e){return new xr(e>>16&255,e>>8&255,e&255,1)}function uu(e,t,r,n){return n<=0&&(e=t=r=NaN),new xr(e,t,r,n)}function LL(e){return e instanceof _c||(e=nc(e)),e?(e=e.rgb(),new xr(e.r,e.g,e.b,e.opacity)):new xr}function pg(e,t,r,n){return arguments.length===1?LL(e):new xr(e,t,r,n??1)}function xr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Ox(xr,pg,V2(_c,{brighter(e){return e=e==null?Pd:Math.pow(Pd,e),new xr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new xr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xr(qi(this.r),qi(this.g),qi(this.b),Ed(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lw,formatHex:Lw,formatHex8:RL,formatRgb:Rw,toString:Rw}));function Lw(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function RL(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rw(){const e=Ed(this.opacity);return`${e===1?"rgb(":"rgba("}${qi(this.r)}, ${qi(this.g)}, ${qi(this.b)}${e===1?")":`, ${e})`}`}function Ed(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Di(e){return e=qi(e),(e<16?"0":"")+e.toString(16)}function qw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new bn(e,t,r,n)}function W2(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof _c||(e=nc(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new bn(o,l,c,e.opacity)}function qL(e,t,r,n){return arguments.length===1?W2(e):new bn(e,t,r,n??1)}function bn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Ox(bn,qL,V2(_c,{brighter(e){return e=e==null?Pd:Math.pow(Pd,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tc:Math.pow(tc,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new xr(pm(e>=240?e-240:e+120,s,n),pm(e,s,n),pm(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new bn(Fw(this.h),du(this.s),du(this.l),Ed(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ed(this.opacity);return`${e===1?"hsl(":"hsla("}${Fw(this.h)}, ${du(this.s)*100}%, ${du(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fw(e){return e=(e||0)%360,e<0?e+360:e}function du(e){return Math.max(0,Math.min(1,e||0))}function pm(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Dx=e=>()=>e;function FL(e,t){return function(r){return e+r*t}}function UL(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function BL(e){return(e=+e)==1?K2:function(t,r){return r-t?UL(t,r,e):Dx(isNaN(t)?r:t)}}function K2(e,t){var r=t-e;return r?FL(e,r):Dx(isNaN(e)?t:e)}const Uw=function e(t){var r=BL(t);function n(s,i){var o=r((s=pg(s)).r,(i=pg(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=K2(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function QL(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function VL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function WL(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Eo(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function KL(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Cd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function HL(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Eo(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var gg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gm=new RegExp(gg.source,"g");function GL(e){return function(){return e}}function YL(e){return function(t){return e(t)+""}}function XL(e,t){var r=gg.lastIndex=gm.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=gg.exec(e))&&(s=gm.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:Cd(n,s)})),r=gm.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?YL(c[0].x):GL(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Eo(e,t){var r=typeof t,n;return t==null||r==="boolean"?Dx(t):(r==="number"?Cd:r==="string"?(n=nc(t))?(t=n,Uw):XL:t instanceof nc?Uw:t instanceof Date?KL:VL(t)?QL:Array.isArray(t)?WL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?HL:Cd)(e,t)}function Mx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function JL(e,t){t===void 0&&(t=e,e=Eo);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function ZL(e){return function(){return e}}function Ad(e){return+e}var Bw=[0,1];function rr(e){return e}function xg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ZL(isNaN(t)?NaN:.5)}function eR(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function tR(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=xg(s,n),i=r(o,i)):(n=xg(n,s),i=r(i,o)),function(l){return i(n(l))}}function rR(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=xg(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=jc(e,l,1,n)-1;return i[c](s[c](l))}}function Nc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xf(){var e=Bw,t=Bw,r=Eo,n,s,i,o=rr,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==rr&&(o=eR(e[0],e[m-1])),l=m>2?rR:tR,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(s((u||(u=l(t,e.map(n),Cd)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Ad),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=Mx,d()},f.clamp=function(m){return arguments.length?(o=m?!0:rr,d()):o!==rr},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(i=m,f):i},function(m,h){return n=m,s=h,d()}}function Ix(){return Xf()(rr,rr)}function nR(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Td(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function mo(e){return e=Td(Math.abs(e)),e?e[1]:NaN}function sR(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function iR(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var aR=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sc(e){if(!(t=aR.exec(e)))throw new Error("invalid format: "+e);var t;return new $x({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sc.prototype=$x.prototype;function $x(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$x.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oR(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var H2;function lR(e,t){var r=Td(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(H2=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Td(e,Math.max(0,t+i-1))[0]}function Qw(e,t){var r=Td(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Vw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:nR,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Qw(e*100,t),r:Qw,s:lR,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ww(e){return e}var Kw=Array.prototype.map,Hw=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cR(e){var t=e.grouping===void 0||e.thousands===void 0?Ww:sR(Kw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Ww:iR(Kw.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=sc(f);var m=f.fill,h=f.align,p=f.sign,y=f.symbol,x=f.zero,v=f.width,g=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(g=!0,j="g"):Vw[j]||(w===void 0&&(w=12),_=!0,j="g"),(x||m==="0"&&h==="=")&&(x=!0,m="0",h="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=y==="$"?n:/[%p]/.test(j)?o:"",k=Vw[j],O=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function C(M){var E=N,z=S,$,q,U;if(j==="c")z=k(M)+z,M="";else{M=+M;var D=M<0||1/M<0;if(M=isNaN(M)?c:k(Math.abs(M),w),_&&(M=oR(M)),D&&+M==0&&p!=="+"&&(D=!1),E=(D?p==="("?p:l:p==="-"||p==="("?"":p)+E,z=(j==="s"?Hw[8+H2/3]:"")+z+(D&&p==="("?")":""),O){for($=-1,q=M.length;++$<q;)if(U=M.charCodeAt($),48>U||U>57){z=(U===46?s+M.slice($+1):M.slice($))+z,M=M.slice(0,$);break}}}g&&!x&&(M=t(M,1/0));var P=E.length+M.length+z.length,A=P<v?new Array(v-P+1).join(m):"";switch(g&&x&&(M=t(A+M,A.length?v-z.length:1/0),A=""),h){case"<":M=E+M+z+A;break;case"=":M=E+A+M+z;break;case"^":M=A.slice(0,P=A.length>>1)+E+M+z+A.slice(P);break;default:M=A+E+M+z;break}return i(M)}return C.toString=function(){return f+""},C}function d(f,m){var h=u((f=sc(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mo(m)/3)))*3,y=Math.pow(10,-p),x=Hw[8+p/3];return function(v){return h(y*v)+x}}return{format:u,formatPrefix:d}}var fu,zx,G2;uR({thousands:",",grouping:[3],currency:["$",""]});function uR(e){return fu=cR(e),zx=fu.format,G2=fu.formatPrefix,fu}function dR(e){return Math.max(0,-mo(Math.abs(e)))}function fR(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mo(t)/3)))*3-mo(Math.abs(e)))}function hR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mo(t)-mo(e))+1}function Y2(e,t,r,n){var s=hg(e,t,r),i;switch(n=sc(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=fR(s,o))&&(n.precision=i),G2(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=hR(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=dR(s))&&(n.precision=i-(n.type==="%")*2);break}}return zx(n)}function mi(e){var t=e.domain;return e.ticks=function(r){var n=t();return dg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return Y2(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=fg(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function X2(){var e=Ix();return e.copy=function(){return Nc(e,X2())},ln.apply(e,arguments),mi(e)}function J2(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Ad),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return J2(e).unknown(t)},e=arguments.length?Array.from(e,Ad):[0,1],mi(r)}function Z2(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function Gw(e){return Math.log(e)}function Yw(e){return Math.exp(e)}function mR(e){return-Math.log(-e)}function pR(e){return-Math.exp(-e)}function gR(e){return isFinite(e)?+("1e"+e):e<0?0:e}function xR(e){return e===10?gR:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yR(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Xw(e){return(t,r)=>-e(-t,r)}function Lx(e){const t=e(Gw,Yw),r=t.domain;let n=10,s,i;function o(){return s=yR(n),i=xR(n),r()[0]<0?(s=Xw(s),i=Xw(i),e(mR,pR)):e(Gw,Yw),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),h=s(d),p,y;const x=l==null?10:+l;let v=[];if(!(n%1)&&h-m<x){if(m=Math.floor(m),h=Math.ceil(h),u>0){for(;m<=h;++m)for(p=1;p<n;++p)if(y=m<0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}}else for(;m<=h;++m)for(p=n-1;p>=1;--p)if(y=m>0?p/i(-m):p*i(m),!(y<u)){if(y>d)break;v.push(y)}v.length*2<x&&(v=dg(u,d,x))}else v=dg(m,h,Math.min(h-m,x)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sc(c)).precision==null&&(c.trim=!0),c=zx(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(Z2(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function eP(){const e=Lx(Xf()).domain([1,10]);return e.copy=()=>Nc(e,eP()).base(e.base()),ln.apply(e,arguments),e}function Jw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Rx(e){var t=1,r=e(Jw(t),Zw(t));return r.constant=function(n){return arguments.length?e(Jw(t=+n),Zw(t)):t},mi(r)}function tP(){var e=Rx(Xf());return e.copy=function(){return Nc(e,tP()).constant(e.constant())},ln.apply(e,arguments)}function ej(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vR(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bR(e){return e<0?-e*e:e*e}function qx(e){var t=e(rr,rr),r=1;function n(){return r===1?e(rr,rr):r===.5?e(vR,bR):e(ej(r),ej(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},mi(t)}function Fx(){var e=qx(Xf());return e.copy=function(){return Nc(e,Fx()).exponent(e.exponent())},ln.apply(e,arguments),e}function wR(){return Fx.apply(null,arguments).exponent(.5)}function tj(e){return Math.sign(e)*e*e}function jR(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function rP(){var e=Ix(),t=[0,1],r=!1,n;function s(i){var o=jR(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(tj(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ad)).map(tj)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return rP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ln.apply(s,arguments),mi(s)}function nP(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=kL(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[jc(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ei),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return nP().domain(e).range(t).unknown(n)},ln.apply(i,arguments)}function sP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[jc(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return sP().domain([e,t]).range(s).unknown(i)},ln.apply(mi(o),arguments)}function iP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[jc(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return iP().domain(e).range(t).unknown(r)},ln.apply(s,arguments)}const xm=new Date,ym=new Date;function vt(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>vt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(xm.setTime(+i),ym.setTime(+o),e(xm),e(ym),Math.floor(r(xm,ym))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const Od=vt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Od.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?vt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Od);Od.range;const ns=1e3,Hr=ns*60,ss=Hr*60,ms=ss*24,Ux=ms*7,rj=ms*30,vm=ms*365,Mi=vt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ns)},(e,t)=>(t-e)/ns,e=>e.getUTCSeconds());Mi.range;const Bx=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ns)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getMinutes());Bx.range;const Qx=vt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Hr)},(e,t)=>(t-e)/Hr,e=>e.getUTCMinutes());Qx.range;const Vx=vt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ns-e.getMinutes()*Hr)},(e,t)=>{e.setTime(+e+t*ss)},(e,t)=>(t-e)/ss,e=>e.getHours());Vx.range;const Wx=vt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ss)},(e,t)=>(t-e)/ss,e=>e.getUTCHours());Wx.range;const Sc=vt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Hr)/ms,e=>e.getDate()-1);Sc.range;const Jf=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ms,e=>e.getUTCDate()-1);Jf.range;const aP=vt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ms,e=>Math.floor(e/ms));aP.range;function oa(e){return vt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Ux)}const Zf=oa(0),Dd=oa(1),_R=oa(2),NR=oa(3),po=oa(4),SR=oa(5),kR=oa(6);Zf.range;Dd.range;_R.range;NR.range;po.range;SR.range;kR.range;function la(e){return vt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ux)}const eh=la(0),Md=la(1),PR=la(2),ER=la(3),go=la(4),CR=la(5),AR=la(6);eh.range;Md.range;PR.range;ER.range;go.range;CR.range;AR.range;const Kx=vt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Kx.range;const Hx=vt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hx.range;const ps=vt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ps.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ps.range;const gs=vt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:vt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});gs.range;function oP(e,t,r,n,s,i){const o=[[Mi,1,ns],[Mi,5,5*ns],[Mi,15,15*ns],[Mi,30,30*ns],[i,1,Hr],[i,5,5*Hr],[i,15,15*Hr],[i,30,30*Hr],[s,1,ss],[s,3,3*ss],[s,6,6*ss],[s,12,12*ss],[n,1,ms],[n,2,2*ms],[r,1,Ux],[t,1,rj],[t,3,3*rj],[e,1,vm]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const h=f&&typeof f.range=="function"?f:c(u,d,f),p=h?h.range(u,+d+1):[];return m?p.reverse():p}function c(u,d,f){const m=Math.abs(d-u)/f,h=Cx(([,,x])=>x).right(o,m);if(h===o.length)return e.every(hg(u/vm,d/vm,f));if(h===0)return Od.every(Math.max(hg(u,d,f),1));const[p,y]=o[m/o[h-1][2]<o[h][2]/m?h-1:h];return p.every(y)}return[l,c]}const[TR,OR]=oP(gs,Hx,eh,aP,Wx,Qx),[DR,MR]=oP(ps,Kx,Zf,Sc,Vx,Bx);function bm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function el(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function IR(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=tl(s),d=rl(s),f=tl(i),m=rl(i),h=tl(o),p=rl(o),y=tl(l),x=rl(l),v=tl(c),g=rl(c),w={a:D,A:P,b:A,B:T,c:null,d:lj,e:lj,f:sq,g:mq,G:gq,H:tq,I:rq,j:nq,L:lP,m:iq,M:aq,p:R,q:F,Q:dj,s:fj,S:oq,u:lq,U:cq,V:uq,w:dq,W:fq,x:null,X:null,y:hq,Y:pq,Z:xq,"%":uj},_={a:J,A:oe,b:fe,B:Z,c:null,d:cj,e:cj,f:wq,g:Tq,G:Dq,H:yq,I:vq,j:bq,L:uP,m:jq,M:_q,p:he,q:at,Q:dj,s:fj,S:Nq,u:Sq,U:kq,V:Pq,w:Eq,W:Cq,x:null,X:null,y:Aq,Y:Oq,Z:Mq,"%":uj},j={a:C,A:M,b:E,B:z,c:$,d:aj,e:aj,f:XR,g:ij,G:sj,H:oj,I:oj,j:KR,L:YR,m:WR,M:HR,p:O,q:VR,Q:ZR,s:eq,S:GR,u:qR,U:FR,V:UR,w:RR,W:BR,x:q,X:U,y:ij,Y:sj,Z:QR,"%":JR};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(B,ee){return function(ue){var H=[],et=-1,ye=0,Ee=B.length,Oe,ot,Ye;for(ue instanceof Date||(ue=new Date(+ue));++et<Ee;)B.charCodeAt(et)===37&&(H.push(B.slice(ye,et)),(ot=nj[Oe=B.charAt(++et)])!=null?Oe=B.charAt(++et):ot=Oe==="e"?" ":"0",(Ye=ee[Oe])&&(Oe=Ye(ue,ot)),H.push(Oe),ye=et+1);return H.push(B.slice(ye,et)),H.join("")}}function S(B,ee){return function(ue){var H=el(1900,void 0,1),et=k(H,B,ue+="",0),ye,Ee;if(et!=ue.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(ee&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(ye=wm(el(H.y,0,1)),Ee=ye.getUTCDay(),ye=Ee>4||Ee===0?Md.ceil(ye):Md(ye),ye=Jf.offset(ye,(H.V-1)*7),H.y=ye.getUTCFullYear(),H.m=ye.getUTCMonth(),H.d=ye.getUTCDate()+(H.w+6)%7):(ye=bm(el(H.y,0,1)),Ee=ye.getDay(),ye=Ee>4||Ee===0?Dd.ceil(ye):Dd(ye),ye=Sc.offset(ye,(H.V-1)*7),H.y=ye.getFullYear(),H.m=ye.getMonth(),H.d=ye.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Ee="Z"in H?wm(el(H.y,0,1)).getUTCDay():bm(el(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Ee+5)%7:H.w+H.U*7-(Ee+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,wm(H)):bm(H)}}function k(B,ee,ue,H){for(var et=0,ye=ee.length,Ee=ue.length,Oe,ot;et<ye;){if(H>=Ee)return-1;if(Oe=ee.charCodeAt(et++),Oe===37){if(Oe=ee.charAt(et++),ot=j[Oe in nj?ee.charAt(et++):Oe],!ot||(H=ot(B,ue,H))<0)return-1}else if(Oe!=ue.charCodeAt(H++))return-1}return H}function O(B,ee,ue){var H=u.exec(ee.slice(ue));return H?(B.p=d.get(H[0].toLowerCase()),ue+H[0].length):-1}function C(B,ee,ue){var H=h.exec(ee.slice(ue));return H?(B.w=p.get(H[0].toLowerCase()),ue+H[0].length):-1}function M(B,ee,ue){var H=f.exec(ee.slice(ue));return H?(B.w=m.get(H[0].toLowerCase()),ue+H[0].length):-1}function E(B,ee,ue){var H=v.exec(ee.slice(ue));return H?(B.m=g.get(H[0].toLowerCase()),ue+H[0].length):-1}function z(B,ee,ue){var H=y.exec(ee.slice(ue));return H?(B.m=x.get(H[0].toLowerCase()),ue+H[0].length):-1}function $(B,ee,ue){return k(B,t,ee,ue)}function q(B,ee,ue){return k(B,r,ee,ue)}function U(B,ee,ue){return k(B,n,ee,ue)}function D(B){return o[B.getDay()]}function P(B){return i[B.getDay()]}function A(B){return c[B.getMonth()]}function T(B){return l[B.getMonth()]}function R(B){return s[+(B.getHours()>=12)]}function F(B){return 1+~~(B.getMonth()/3)}function J(B){return o[B.getUTCDay()]}function oe(B){return i[B.getUTCDay()]}function fe(B){return c[B.getUTCMonth()]}function Z(B){return l[B.getUTCMonth()]}function he(B){return s[+(B.getUTCHours()>=12)]}function at(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var ee=N(B+="",w);return ee.toString=function(){return B},ee},parse:function(B){var ee=S(B+="",!1);return ee.toString=function(){return B},ee},utcFormat:function(B){var ee=N(B+="",_);return ee.toString=function(){return B},ee},utcParse:function(B){var ee=S(B+="",!0);return ee.toString=function(){return B},ee}}}var nj={"-":"",_:" ",0:"0"},Et=/^\s*\d+/,$R=/^%/,zR=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function LR(e){return e.replace(zR,"\\$&")}function tl(e){return new RegExp("^(?:"+e.map(LR).join("|")+")","i")}function rl(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function RR(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function qR(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function FR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function UR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function BR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sj(e,t,r){var n=Et.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ij(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function QR(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function VR(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function WR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function aj(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function KR(e,t,r){var n=Et.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function oj(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function HR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function GR(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function YR(e,t,r){var n=Et.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function XR(e,t,r){var n=Et.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function JR(e,t,r){var n=$R.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ZR(e,t,r){var n=Et.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function eq(e,t,r){var n=Et.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function lj(e,t){return Ne(e.getDate(),t,2)}function tq(e,t){return Ne(e.getHours(),t,2)}function rq(e,t){return Ne(e.getHours()%12||12,t,2)}function nq(e,t){return Ne(1+Sc.count(ps(e),e),t,3)}function lP(e,t){return Ne(e.getMilliseconds(),t,3)}function sq(e,t){return lP(e,t)+"000"}function iq(e,t){return Ne(e.getMonth()+1,t,2)}function aq(e,t){return Ne(e.getMinutes(),t,2)}function oq(e,t){return Ne(e.getSeconds(),t,2)}function lq(e){var t=e.getDay();return t===0?7:t}function cq(e,t){return Ne(Zf.count(ps(e)-1,e),t,2)}function cP(e){var t=e.getDay();return t>=4||t===0?po(e):po.ceil(e)}function uq(e,t){return e=cP(e),Ne(po.count(ps(e),e)+(ps(e).getDay()===4),t,2)}function dq(e){return e.getDay()}function fq(e,t){return Ne(Dd.count(ps(e)-1,e),t,2)}function hq(e,t){return Ne(e.getFullYear()%100,t,2)}function mq(e,t){return e=cP(e),Ne(e.getFullYear()%100,t,2)}function pq(e,t){return Ne(e.getFullYear()%1e4,t,4)}function gq(e,t){var r=e.getDay();return e=r>=4||r===0?po(e):po.ceil(e),Ne(e.getFullYear()%1e4,t,4)}function xq(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function cj(e,t){return Ne(e.getUTCDate(),t,2)}function yq(e,t){return Ne(e.getUTCHours(),t,2)}function vq(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function bq(e,t){return Ne(1+Jf.count(gs(e),e),t,3)}function uP(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function wq(e,t){return uP(e,t)+"000"}function jq(e,t){return Ne(e.getUTCMonth()+1,t,2)}function _q(e,t){return Ne(e.getUTCMinutes(),t,2)}function Nq(e,t){return Ne(e.getUTCSeconds(),t,2)}function Sq(e){var t=e.getUTCDay();return t===0?7:t}function kq(e,t){return Ne(eh.count(gs(e)-1,e),t,2)}function dP(e){var t=e.getUTCDay();return t>=4||t===0?go(e):go.ceil(e)}function Pq(e,t){return e=dP(e),Ne(go.count(gs(e),e)+(gs(e).getUTCDay()===4),t,2)}function Eq(e){return e.getUTCDay()}function Cq(e,t){return Ne(Md.count(gs(e)-1,e),t,2)}function Aq(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function Tq(e,t){return e=dP(e),Ne(e.getUTCFullYear()%100,t,2)}function Oq(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function Dq(e,t){var r=e.getUTCDay();return e=r>=4||r===0?go(e):go.ceil(e),Ne(e.getUTCFullYear()%1e4,t,4)}function Mq(){return"+0000"}function uj(){return"%"}function dj(e){return+e}function fj(e){return Math.floor(+e/1e3)}var va,fP,hP;Iq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Iq(e){return va=IR(e),fP=va.format,va.parse,hP=va.utcFormat,va.utcParse,va}function $q(e){return new Date(e)}function zq(e){return e instanceof Date?+e:+new Date(+e)}function Gx(e,t,r,n,s,i,o,l,c,u){var d=Ix(),f=d.invert,m=d.domain,h=u(".%L"),p=u(":%S"),y=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),g=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?h:l(N)<N?p:o(N)<N?y:i(N)<N?x:n(N)<N?s(N)<N?v:g:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?m(Array.from(N,zq)):m().map($q)},d.ticks=function(N){var S=m();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?j:u(S)},d.nice=function(N){var S=m();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?m(Z2(S,N)):d},d.copy=function(){return Nc(d,Gx(e,t,r,n,s,i,o,l,c,u))},d}function Lq(){return ln.apply(Gx(DR,MR,ps,Kx,Zf,Sc,Vx,Bx,Mi,fP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rq(){return ln.apply(Gx(TR,OR,gs,Hx,eh,Jf,Wx,Qx,Mi,hP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function th(){var e=0,t=1,r,n,s,i,o=rr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var h,p;return arguments.length?([h,p]=m,o=f(h,p),u):[o(0),o(1)]}}return u.range=d(Eo),u.rangeRound=d(Mx),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function pi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mP(){var e=mi(th()(rr));return e.copy=function(){return pi(e,mP())},_s.apply(e,arguments)}function pP(){var e=Lx(th()).domain([1,10]);return e.copy=function(){return pi(e,pP()).base(e.base())},_s.apply(e,arguments)}function gP(){var e=Rx(th());return e.copy=function(){return pi(e,gP()).constant(e.constant())},_s.apply(e,arguments)}function Yx(){var e=qx(th());return e.copy=function(){return pi(e,Yx()).exponent(e.exponent())},_s.apply(e,arguments)}function qq(){return Yx.apply(null,arguments).exponent(.5)}function xP(){var e=[],t=rr;function r(n){if(n!=null&&!isNaN(n=+n))return t((jc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ei),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>SL(e,i/n))},r.copy=function(){return xP(t).domain(e)},_s.apply(r,arguments)}function rh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=rr,d,f=!1,m;function h(y){return isNaN(y=+y)?m:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(f?Math.max(0,Math.min(1,y)):y))}h.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(y){return arguments.length?(f=!!y,h):f},h.interpolator=function(y){return arguments.length?(u=y,h):u};function p(y){return function(x){var v,g,w;return arguments.length?([v,g,w]=x,u=JL(y,[v,g,w]),h):[u(0),u(.5),u(1)]}}return h.range=p(Eo),h.rangeRound=p(Mx),h.unknown=function(y){return arguments.length?(m=y,h):m},function(y){return d=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function yP(){var e=mi(rh()(rr));return e.copy=function(){return pi(e,yP())},_s.apply(e,arguments)}function vP(){var e=Lx(rh()).domain([.1,1,10]);return e.copy=function(){return pi(e,vP()).base(e.base())},_s.apply(e,arguments)}function bP(){var e=Rx(rh());return e.copy=function(){return pi(e,bP()).constant(e.constant())},_s.apply(e,arguments)}function Xx(){var e=qx(rh());return e.copy=function(){return pi(e,Xx()).exponent(e.exponent())},_s.apply(e,arguments)}function Fq(){return Xx.apply(null,arguments).exponent(.5)}const ul=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Tx,scaleDiverging:yP,scaleDivergingLog:vP,scaleDivergingPow:Xx,scaleDivergingSqrt:Fq,scaleDivergingSymlog:bP,scaleIdentity:J2,scaleImplicit:mg,scaleLinear:X2,scaleLog:eP,scaleOrdinal:Ax,scalePoint:EL,scalePow:Fx,scaleQuantile:nP,scaleQuantize:sP,scaleRadial:rP,scaleSequential:mP,scaleSequentialLog:pP,scaleSequentialPow:Yx,scaleSequentialQuantile:xP,scaleSequentialSqrt:qq,scaleSequentialSymlog:gP,scaleSqrt:wR,scaleSymlog:tP,scaleThreshold:iP,scaleTime:Lq,scaleUtc:Rq,tickFormat:Y2},Symbol.toStringTag,{value:"Module"}));var ca=e=>e.chartData,Uq=K([ca],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jx=(e,t,r,n)=>n?Uq(e):ca(e);function xo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Lr(t)&&Lr(r))return!0}return!1}function hj(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Bq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(Lr(r))s=r;else if(typeof r=="function")return;if(Lr(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(xo(o))return o}}function Qq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xo(n))return hj(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ae(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&dw.test(s)){var c=dw.exec(s);if(c==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ae(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&fw.test(i)){var d=fw.exec(i);if(d==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var m=[o,l];if(xo(m))return t==null?m:hj(m,t,r)}}}var Co=1e9,Vq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ey,Ge=!0,nn="[DecimalError] ",Fi=nn+"Invalid argument: ",Zx=nn+"Exponent out of range: ",Ao=Math.floor,Si=Math.pow,Wq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cr,wt=1e7,Qe=7,wP=9007199254740991,Id=Ao(wP/Qe),se={};se.absoluteValue=se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};se.comparedTo=se.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};se.decimalPlaces=se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Qe;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};se.dividedBy=se.div=function(e){return os(this,new this.constructor(e))};se.dividedToIntegerBy=se.idiv=function(e){var t=this,r=t.constructor;return Me(os(t,new r(e),0,1),r.precision)};se.equals=se.eq=function(e){return!this.cmp(e)};se.exponent=function(){return ft(this)};se.greaterThan=se.gt=function(e){return this.cmp(e)>0};se.greaterThanOrEqualTo=se.gte=function(e){return this.cmp(e)>=0};se.isInteger=se.isint=function(){return this.e>this.d.length-2};se.isNegative=se.isneg=function(){return this.s<0};se.isPositive=se.ispos=function(){return this.s>0};se.isZero=function(){return this.s===0};se.lessThan=se.lt=function(e){return this.cmp(e)<0};se.lessThanOrEqualTo=se.lte=function(e){return this.cmp(e)<1};se.logarithm=se.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Cr))throw Error(nn+"NaN");if(r.s<1)throw Error(nn+(r.s?"NaN":"-Infinity"));return r.eq(Cr)?new n(0):(Ge=!1,t=os(ic(r,i),ic(e,i),i),Ge=!0,Me(t,s))};se.minus=se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?NP(t,e):jP(t,(e.s=-e.s,e))};se.modulo=se.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(nn+"NaN");return r.s?(Ge=!1,t=os(r,e,0,1).times(e),Ge=!0,r.minus(t)):Me(new n(r),s)};se.naturalExponential=se.exp=function(){return _P(this)};se.naturalLogarithm=se.ln=function(){return ic(this)};se.negated=se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};se.plus=se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jP(t,e):NP(t,(e.s=-e.s,e))};se.precision=se.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fi+e);if(t=ft(s)+1,n=s.d.length-1,r=n*Qe+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};se.squareRoot=se.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(nn+"NaN")}for(e=ft(l),Ge=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=In(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ao((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(os(l,i,o+2)).times(.5),In(i.d).slice(0,o)===(t=In(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Me(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ge=!0,Me(n,r)};se.times=se.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,f=d.constructor,m=d.d,h=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=h.length,c<u&&(i=m,m=h,h=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+h[n]*m[s-n-1]+t,i[s--]=l%wt|0,t=l/wt|0;i[s]=(i[s]+t)%wt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ge?Me(e,f.precision):e};se.toDecimalPlaces=se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Un(e,0,Co),t===void 0?t=n.rounding:Un(t,0,8),Me(r,e+ft(r)+1,t))};se.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ta(n,!0):(Un(e,0,Co),t===void 0?t=s.rounding:Un(t,0,8),n=Me(new s(n),e+1,t),r=ta(n,!0,e+1)),r};se.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?ta(s):(Un(e,0,Co),t===void 0?t=i.rounding:Un(t,0,8),n=Me(new i(s),e+ft(s)+1,t),r=ta(n.abs(),!1,e+ft(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};se.toInteger=se.toint=function(){var e=this,t=e.constructor;return Me(new t(e),ft(e)+1,t.rounding)};se.toNumber=function(){return+this};se.toPower=se.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Cr);if(l=new c(l),!l.s){if(e.s<1)throw Error(nn+"Infinity");return l}if(l.eq(Cr))return l;if(n=c.precision,e.eq(Cr))return Me(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=wP){for(s=new c(Cr),t=Math.ceil(n/Qe+4),Ge=!1;r%2&&(s=s.times(l),pj(s.d,t)),r=Ao(r/2),r!==0;)l=l.times(l),pj(l.d,t);return Ge=!0,e.s<0?new c(Cr).div(s):Me(s,n)}}else if(i<0)throw Error(nn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ge=!1,s=e.times(ic(l,n+u)),Ge=!0,s=_P(s),s.s=i,s};se.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ft(s),n=ta(s,r<=i.toExpNeg||r>=i.toExpPos)):(Un(e,1,Co),t===void 0?t=i.rounding:Un(t,0,8),s=Me(new i(s),e,t),r=ft(s),n=ta(s,e<=r||r<=i.toExpNeg,e)),n};se.toSignificantDigits=se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Un(e,1,Co),t===void 0?t=n.rounding:Un(t,0,8)),Me(new n(r),e,t)};se.toString=se.valueOf=se.val=se.toJSON=se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ft(e),r=e.constructor;return ta(e,t<=r.toExpNeg||t>=r.toExpPos)};function jP(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ge?Me(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/Qe),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/wt|0,c[i]%=wt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ge?Me(t,f):t}function Un(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Fi+e)}function In(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Qe-n.length,r&&(i+=Ms(r)),i+=n;o=e[t],n=o+"",r=Qe-n.length,r&&(i+=Ms(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var os=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%wt|0,o=i/wt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,f,m,h,p,y,x,v,g,w,_,j,N,S,k,O=n.constructor,C=n.s==s.s?1:-1,M=n.d,E=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(nn+"Division by zero");for(c=n.e-s.e,S=E.length,j=M.length,h=new O(C),p=h.d=[],u=0;E[u]==(M[u]||0);)++u;if(E[u]>(M[u]||0)&&--c,i==null?g=i=O.precision:o?g=i+(ft(n)-ft(s))+1:g=i,g<0)return new O(0);if(g=g/Qe+2|0,u=0,S==1)for(d=0,E=E[0],g++;(u<j||d)&&g--;u++)w=d*wt+(M[u]||0),p[u]=w/E|0,d=w%E|0;else{for(d=wt/(E[0]+1)|0,d>1&&(E=e(E,d),M=e(M,d),S=E.length,j=M.length),_=S,y=M.slice(0,S),x=y.length;x<S;)y[x++]=0;k=E.slice(),k.unshift(0),N=E[0],E[1]>=wt/2&&++N;do d=0,l=t(E,y,S,x),l<0?(v=y[0],S!=x&&(v=v*wt+(y[1]||0)),d=v/N|0,d>1?(d>=wt&&(d=wt-1),f=e(E,d),m=f.length,x=y.length,l=t(f,y,m,x),l==1&&(d--,r(f,S<m?k:E,m))):(d==0&&(l=d=1),f=E.slice()),m=f.length,m<x&&f.unshift(0),r(y,f,x),l==-1&&(x=y.length,l=t(E,y,S,x),l<1&&(d++,r(y,S<x?k:E,x))),x=y.length):l===0&&(d++,y=[0]),p[u++]=d,l&&y[0]?y[x++]=M[_]||0:(y=[M[_]],x=1);while((_++<j||y[0]!==void 0)&&g--)}return p[0]||p.shift(),h.e=c,Me(h,o?i+ft(h)+1:i)}}();function _P(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(ft(e)>16)throw Error(Zx+ft(e));if(!e.s)return new d(Cr);for(t==null?(Ge=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Si(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Cr),d.precision=l;;){if(s=Me(s.times(e),l),r=r.times(++c),o=i.plus(os(s,r,l)),In(o.d).slice(0,l)===In(i.d).slice(0,l)){for(;u--;)i=Me(i.times(i),l);return d.precision=f,t==null?(Ge=!0,Me(i,f)):i}i=o}}function ft(e){for(var t=e.e*Qe,r=e.d[0];r>=10;r/=10)t++;return t}function jm(e,t,r){if(t>e.LN10.sd())throw Ge=!0,r&&(e.precision=r),Error(nn+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function Ms(e){for(var t="";e--;)t+="0";return t}function ic(e,t){var r,n,s,i,o,l,c,u,d,f=1,m=10,h=e,p=h.d,y=h.constructor,x=y.precision;if(h.s<1)throw Error(nn+(h.s?"NaN":"-Infinity"));if(h.eq(Cr))return new y(0);if(t==null?(Ge=!1,u=x):u=t,h.eq(10))return t==null&&(Ge=!0),jm(y,u);if(u+=m,y.precision=u,r=In(p),n=r.charAt(0),i=ft(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=In(h.d),n=r.charAt(0),f++;i=ft(h),n>1?(h=new y("0."+r),i++):h=new y(n+"."+r.slice(1))}else return c=jm(y,u+2,x).times(i+""),h=ic(new y(n+"."+r.slice(1)),u-m).plus(c),y.precision=x,t==null?(Ge=!0,Me(h,x)):h;for(l=o=h=os(h.minus(Cr),h.plus(Cr),u),d=Me(h.times(h),u),s=3;;){if(o=Me(o.times(d),u),c=l.plus(os(o,new y(s),u)),In(c.d).slice(0,u)===In(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(jm(y,u+2,x).times(i+""))),l=os(l,new y(f),u),y.precision=x,t==null?(Ge=!0,Me(l,x)):l;l=c,s+=2}}function mj(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ao(r/Qe),e.d=[],n=(r+1)%Qe,r<0&&(n+=Qe),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Qe;n<s;)e.d.push(+t.slice(n,n+=Qe));t=t.slice(n),n=Qe-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ge&&(e.e>Id||e.e<-Id))throw Error(Zx+r)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,r){var n,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Qe,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Qe),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Qe,s=n-Qe+o}if(r!==void 0&&(i=Si(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Si(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=ft(e),f.length=1,t=t-i-1,f[0]=Si(10,(Qe-t%Qe)%Qe),e.e=Ao(-t/Qe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Si(10,Qe-n),f[d]=s>0?(u/Si(10,o-s)%Si(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==wt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=wt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ge&&(e.e>Id||e.e<-Id))throw Error(Zx+ft(e));return e}function NP(e,t){var r,n,s,i,o,l,c,u,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Ge?Me(t,h):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(h/Qe),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=wt-1;--c[i],c[s]+=wt}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ge?Me(t,h):t):new m(0)}function ta(e,t,r){var n,s=ft(e),i=In(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ms(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ms(-s-1)+i,r&&(n=r-o)>0&&(i+=Ms(n))):s>=o?(i+=Ms(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Ms(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Ms(n))),e.s<0?"-"+i:i}function pj(e,t){if(e.length>t)return e.length=t,!0}function SP(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Fi+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return mj(o,i.toString())}else if(typeof i!="string")throw Error(Fi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Wq.test(i))mj(o,i);else throw Error(Fi+i)}if(s.prototype=se,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=SP,s.config=s.set=Kq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Kq(e){if(!e||typeof e!="object")throw Error(nn+"Object expected");var t,r,n,s=["precision",1,Co,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ao(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Fi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Fi+r+": "+n);return this}var ey=SP(Vq);Cr=new ey(1);const Ce=ey;var Hq=e=>e,kP={"@@functional/placeholder":!0},PP=e=>e===kP,gj=e=>function t(){return arguments.length===0||arguments.length===1&&PP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},EP=(e,t)=>e===1?t:gj(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==kP).length;return i>=e?t(...n):EP(e-i,gj(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>PP(d)?l.shift():d);return t(...u,...l)}))}),nh=e=>EP(e.length,e),yg=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Gq=nh((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Yq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Hq;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},vg=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),CP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function AP(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function TP(e,t,r){for(var n=new Ce(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}nh((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});nh((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var OP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},DP=(e,t,r)=>{if(e.lte(0))return new Ce(0);var n=AP(e.toNumber()),s=new Ce(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ce(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new Ce(c.toNumber()):new Ce(Math.ceil(c.toNumber()))},Xq=(e,t,r)=>{var n=new Ce(1),s=new Ce(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ce(10).pow(AP(e)-1),s=new Ce(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ce(Math.floor(e)))}else e===0?s=new Ce(Math.floor((t-1)/2)):r||(s=new Ce(Math.floor(e)));var o=Math.floor((t-1)/2),l=Yq(Gq(c=>s.add(new Ce(c-o).mul(n)).toNumber()),yg);return l(0,t)},MP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var o=DP(new Ce(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new Ce(0):(l=new Ce(t).add(r).div(2),l=l.sub(new Ce(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Ce(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?MP(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Ce(c).mul(o)),tickMax:l.add(new Ce(u).mul(o))})};function Jq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=OP([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...yg(0,n-1).map(()=>1/0)]:[...yg(0,n-1).map(()=>-1/0),l];return t>r?vg(c):c}if(o===l)return Xq(o,n,s);var{step:u,tickMin:d,tickMax:f}=MP(o,l,i,s,0),m=TP(d,f.add(new Ce(.1).mul(u)),u);return t>r?vg(m):m}function Zq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=OP([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=DP(new Ce(o).sub(i).div(l-1),s,0),u=[...TP(new Ce(i),new Ce(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?vg(u):u}var eF=CP(Jq),tF=CP(Zq),IP=e=>e.rootProps.maxBarSize,rF=e=>e.rootProps.barGap,$P=e=>e.rootProps.barCategoryGap,nF=e=>e.rootProps.barSize,sh=e=>e.rootProps.stackOffset,ty=e=>e.options.chartName,ry=e=>e.rootProps.syncId,zP=e=>e.rootProps.syncMethod,ny=e=>e.options.eventEmitter,Jn={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Pr={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},ih=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},sF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jn.angleAxisId,includeHidden:!1,name:void 0,reversed:Jn.reversed,scale:Jn.scale,tick:Jn.tick,tickCount:void 0,ticks:void 0,type:Jn.type,unit:void 0},iF={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:Pr.type,unit:void 0},aF={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jn.scale,tick:Jn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oF={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:"category",unit:void 0},sy=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?aF:sF,iy=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?oF:iF,ah=e=>e.polarOptions,ay=K([bs,ws,Pt],b5),LP=K([ah,ay],(e,t)=>{if(e!=null)return Sn(e.innerRadius,t,0)}),RP=K([ah,ay],(e,t)=>{if(e!=null)return Sn(e.outerRadius,t,t*.8)}),lF=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},qP=K([ah],lF);K([sy,qP],ih);var FP=K([ay,LP,RP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});K([iy,FP],ih);var cF=K([Te,ah,LP,RP,bs,ws],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Sn(o,s,s/2),cy:Sn(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ct=(e,t)=>t,oh=(e,t,r)=>r;function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $d(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){uF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uF(e,t,r){return(t=dF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=fF(e,"string");return typeof t=="symbol"?t:t+""}function fF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bg=[0,"auto"],Nr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ns=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Nr},Sr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bg,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Kf},gi=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Sr},hF={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},oy=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??hF},_r=(e,t,r)=>{switch(t){case"xAxis":return Ns(e,r);case"yAxis":return gi(e,r);case"zAxis":return oy(e,r);case"angleAxis":return sy(e,r);case"radiusAxis":return iy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},mF=(e,t,r)=>{switch(t){case"xAxis":return Ns(e,r);case"yAxis":return gi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kc=(e,t,r)=>{switch(t){case"xAxis":return Ns(e,r);case"yAxis":return gi(e,r);case"angleAxis":return sy(e,r);case"radiusAxis":return iy(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},UP=e=>e.graphicalItems.countOfBars>0;function BP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var lh=e=>e.graphicalItems.cartesianItems,pF=K([Ct,oh],BP),QP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Pc=K([lh,_r,pF],QP),VP=e=>e.filter(t=>t.stackId===void 0),gF=K([Pc],VP),WP=e=>e.map(t=>t.data).filter(Boolean).flat(1),xF=K([Pc],WP),KP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},ch=K([xF,Jx],KP),HP=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ht(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ht(s,n)}))):e.map(n=>({value:n})),uh=K([ch,_r,Pc],HP);function GP(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ua(e){return e.filter(t=>Fn(t)||t instanceof Date).map(Number).filter(t=>Mr(t)===!1)}function yF(e,t,r){return!r||typeof t!="number"||Mr(t)?[]:r.length?ua(r.flatMap(n=>{var s=Ht(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!Lr(i)||!Lr(o)))return[t-i,t+o]})):[]}var YP=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(u=>u.dataKey);return[o,{stackedData:$5(e,c,r),graphicalItems:l}]}))},wg=K([ch,Pc,sh],YP),XP=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=q5(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},vF=K([wg,ca,Ct],XP),JP=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(d=>GP(n,d)),u=Ht(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:u,errorDomain:yF(s,u,c)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Ht(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),bF=K(ch,_r,gF,Ct,JP);function wF(e){var{value:t}=e;if(Fn(t)||t instanceof Date)return t}var jF=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ua(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},_F=(e,t,r)=>{var n=e.map(wF).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&YS(n))?q2(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},ly=e=>{var t;if(e==null||!("domain"in e))return bg;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ua(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bg},cy=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},ZP=e=>e.referenceElements.dots,To=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),NF=K([ZP,Ct,oh],To),eE=e=>e.referenceElements.areas,SF=K([eE,Ct,oh],To),tE=e=>e.referenceElements.lines,kF=K([tE,Ct,oh],To),rE=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},PF=K(NF,Ct,rE),nE=(e,t)=>{var r=ua(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},EF=K([SF,Ct],nE),sE=(e,t)=>{var r=ua(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},CF=K(kF,Ct,sE),AF=K(PF,CF,EF,(e,t,r)=>cy(e,r,t)),TF=K([_r],ly),iE=(e,t,r,n,s)=>{var i=Bq(t,e.allowDataOverflow);return i??Qq(t,cy(r,s,jF(n)),e.allowDataOverflow)},OF=K([_r,TF,vF,bF,AF],iE),DF=[0,1],aE=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,u=hi(t,i);return u&&l==null?q2(0,r.length):c==="category"?_F(n,e,u):s==="expand"?DF:o}},uy=K([_r,Te,ch,uh,sh,Ct,OF],aE),oE=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(bc(i));return l in ul?l:"point"}}},Ec=K([_r,Te,UP,ty,Ct],oE);function MF(e){if(e!=null){if(e in ul)return ul[e]();var t="scale".concat(bc(e));if(t in ul)return ul[t]()}}function dy(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=MF(t);if(s!=null){var i=s.domain(r).range(n);return T5(i),i}}}var lE=(e,t,r)=>{var n=ly(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xo(e))return eF(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xo(e))return tF(e,t.tickCount,t.allowDecimals)}},fy=K([uy,kc,Ec],lE),cE=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},IF=K([_r,uy,fy,Ct],cE),$F=K(uh,_r,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ua(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),uE=K($F,Te,$P,Pt,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!Lr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Sn(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),zF=(e,t)=>{var r=Ns(e,t);return r==null||typeof r.padding!="string"?0:uE(e,"xAxis",t,r.padding)},LF=(e,t)=>{var r=gi(e,t);return r==null||typeof r.padding!="string"?0:uE(e,"yAxis",t,r.padding)},RF=K(Ns,zF,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),qF=K(gi,LF,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),FF=K([Pt,RF,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),UF=K([Pt,Te,qF,Gf,Hf,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Cc=(e,t,r,n)=>{var s;switch(t){case"xAxis":return FF(e,r,n);case"yAxis":return UF(e,r,n);case"zAxis":return(s=oy(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return qP(e);case"radiusAxis":return FP(e,r);default:return}},dE=K([_r,Cc],ih),Oo=K([_r,Ec,IF,dE],dy);K(Pc,Ct,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>GP(t,r)));function fE(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var dh=(e,t)=>t,fh=(e,t,r)=>r,BF=K(Sx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(fE)),QF=K(kx,dh,fh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(fE)),hE=(e,t)=>({width:e.width,height:t.height}),VF=(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}},mE=K(Pt,Ns,hE),WF=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},KF=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},HF=K(ws,Pt,BF,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=hE(t,l);o==null&&(o=WF(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),GF=K(bs,Pt,QF,dh,fh,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=VF(t,l);o==null&&(o=KF(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),YF=(e,t)=>{var r=Pt(e),n=Ns(e,t);if(n!=null){var s=HF(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},XF=(e,t)=>{var r=Pt(e),n=gi(e,t);if(n!=null){var s=GF(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},pE=K(Pt,gi,(e,t)=>{var r=typeof t.width=="number"?t.width:Kf;return{width:r,height:e.height}}),yj=(e,t,r)=>{switch(t){case"xAxis":return mE(e,r).width;case"yAxis":return pE(e,r).height;default:return}},gE=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=hi(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&YS(c))return c}},hy=K([Te,uh,_r,Ct],gE),xE=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=hi(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},my=K([Te,uh,kc,Ct],xE),vj=K([Te,mF,Ec,Oo,hy,my,Cc,fy,Ct],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var u=hi(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}),JF=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=hi(e,c),{type:d,ticks:f,tickCount:m}=t,h=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/h:0;p=c==="angleAxis"&&i!=null&&i.length>=2?gr(i[0]-i[1])*2*p:p;var y=f||s;if(y){var x=y.map((v,g)=>{var w=o?o.indexOf(v):v;return{index:g,coordinate:n(w)+p,value:v,offset:p}});return x.filter(v=>!Mr(v.coordinate))}return u&&l?l.map((v,g)=>({coordinate:n(v)+p,value:v,index:g,offset:p})):n.ticks?n.ticks(m).map(v=>({coordinate:n(v)+p,value:v,offset:p})):n.domain().map((v,g)=>({coordinate:n(v)+p,value:o?o[v]:v,index:g,offset:p}))}},yE=K([Te,kc,Ec,Oo,fy,Cc,hy,my,Ct],JF),ZF=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=hi(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?gr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},ii=K([Te,kc,Oo,Cc,hy,my,Ct],ZF),Bn=K(_r,Oo,(e,t)=>{if(!(e==null||t==null))return $d($d({},e),{},{scale:t})}),e8=K([_r,Ec,uy,dE],dy);K((e,t,r)=>oy(e,r),e8,(e,t)=>{if(!(e==null||t==null))return $d($d({},e),{},{scale:t})});var t8=K([Te,Sx,kx],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),vE=e=>e.options.defaultTooltipEventType,bE=e=>e.options.validateTooltipEventTypes;function wE(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function py(e,t){var r=vE(e),n=bE(e);return wE(t,r,n)}function r8(e){return de(t=>py(t,e))}var jE=(e,t)=>{var r,n=Number(t);if(!(Mr(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},n8=e=>e.tooltip.settings,Rs={active:!1,index:null,dataKey:void 0,coordinate:void 0},s8={itemInteraction:{click:Rs,hover:Rs},axisInteraction:{click:Rs,hover:Rs},keyboardInteraction:Rs,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},_E=on({name:"tooltip",initialState:s8,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=as(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:i8,removeTooltipEntrySettings:a8,setTooltipSettingsState:o8,setActiveMouseOverItemIndex:NE,mouseLeaveItem:l8,mouseLeaveChart:SE,setActiveClickItemIndex:c8,setMouseOverAxisIndex:kE,setMouseClickAxisIndex:u8,setSyncInteraction:jg,setKeyboardInteraction:_g}=_E.actions,d8=_E.reducer;function bj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bj(Object(r),!0).forEach(function(n){f8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f8(e,t,r){return(t=h8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h8(e){var t=m8(e,"string");return typeof t=="symbol"?t:t+""}function m8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p8(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function g8(e){return e.index!=null}var PE=(e,t,r,n)=>{if(t==null)return Rs;var s=p8(e,t,r);if(s==null)return Rs;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(g8(s)){if(i)return hu(hu({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return hu(hu({},Rs),{},{coordinate:s.coordinate})},gy=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Lr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},EE=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},CE=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Ac=e=>e.options.tooltipPayloadSearcher,Do=e=>e.tooltip;function wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wj(Object(r),!0).forEach(function(n){x8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x8(e,t,r){return(t=y8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y8(e){var t=v8(e,"string");return typeof t=="symbol"?t:t+""}function v8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b8(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function w8(e,t){return e??t}var AE=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,h)=>{var p,{dataDefinedOnItem:y,settings:x}=h,v=w8(y,l),g=b8(v,u,d),w=(p=x==null?void 0:x.dataKey)!==null&&p!==void 0?p:n==null?void 0:n.dataKey,_=x==null?void 0:x.nameKey,j;if(n!=null&&n.dataKey&&Array.isArray(g)&&!Array.isArray(g[0])&&o==="axis"?j=XS(g,n.dataKey,s):j=i(g,t,c,_),Array.isArray(j))j.forEach(S=>{var k=jj(jj({},x),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});m.push(hw({tooltipEntrySettings:k,dataKey:S.dataKey,payload:S.payload,value:Ht(S.payload,S.dataKey),name:S.name}))});else{var N;m.push(hw({tooltipEntrySettings:x,dataKey:w,payload:j,value:Ht(j,w),name:(N=Ht(j,_))!==null&&N!==void 0?N:x==null?void 0:x.name}))}return m},f)}},At=e=>{var t=Te(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Mo=e=>e.tooltip.settings.axisId,qt=e=>{var t=At(e),r=Mo(e);return kc(e,t,r)},xy=K([qt,Te,UP,ty,At],oE),j8=K([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),_8=K([At,Mo],BP),hh=K([j8,qt,_8],QP),N8=K([hh],WP),da=K([N8,ca],KP),yy=K([da,qt,hh],HP),S8=K([qt],ly),k8=K([da,hh,sh],YP),P8=K([k8,ca,At],XP),E8=K([hh],VP),C8=K([da,qt,E8,At],JP),A8=K([ZP,At,Mo],To),T8=K([A8,At],rE),O8=K([eE,At,Mo],To),D8=K([O8,At],nE),M8=K([tE,At,Mo],To),I8=K([M8,At],sE),$8=K([T8,I8,D8],cy),z8=K([qt,S8,P8,C8,$8],iE),TE=K([qt,Te,da,yy,sh,At,z8],aE),L8=K([TE,qt,xy],lE),R8=K([qt,TE,L8,At],cE),OE=e=>{var t=At(e),r=Mo(e),n=!1;return Cc(e,t,r,n)},DE=K([qt,OE],ih),ME=K([qt,xy,R8,DE],dy),q8=K([Te,yy,qt,At],gE),F8=K([Te,yy,qt,At],xE),U8=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=hi(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?gr(s[0]-s[1])*2*f:f,u&&o?o.map((m,h)=>({coordinate:n(m)+f,value:m,index:h,offset:f})):n.domain().map((m,h)=>({coordinate:n(m)+f,value:i?i[m]:m,index:h,offset:f}))}}},Ss=K([Te,qt,xy,ME,OE,q8,F8,At],U8),vy=K([vE,bE,n8],(e,t,r)=>wE(r.shared,e,t)),IE=e=>e.tooltip.settings.trigger,by=e=>e.tooltip.settings.defaultIndex,mh=K([Do,vy,IE,by],PE),ra=K([mh,da],gy),$E=K([Ss,ra],jE),zE=K([mh],e=>{if(e)return e.dataKey}),LE=K([Do,vy,IE,by],CE),B8=K([bs,ws,Te,Pt,Ss,by,LE,Ac],EE),Q8=K([mh,B8],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),V8=K([mh],e=>e.active),W8=K([LE,ra,ca,qt,$E,Ac,vy],AE),K8=K([W8],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function _j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_j(Object(r),!0).forEach(function(n){H8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H8(e,t,r){return(t=G8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G8(e){var t=Y8(e,"string");return typeof t=="symbol"?t:t+""}function Y8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X8=()=>de(qt),J8=()=>{var e=X8(),t=de(Ss),r=de(ME);return Zl(Nj(Nj({},e),{},{scale:r}),t)},Z8=()=>de(ty),wy=(e,t)=>t,RE=(e,t,r)=>r,jy=(e,t,r,n)=>n,eU=K(Ss,e=>Rf(e,t=>t.coordinate)),_y=K([Do,wy,RE,jy],PE),qE=K([_y,da],gy),tU=(e,t,r)=>{if(t!=null){var n=Do(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},FE=K([Do,wy,RE,jy],CE),zd=K([bs,ws,Te,Pt,Ss,jy,FE,Ac],EE),rU=K([_y,zd],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),UE=K(Ss,qE,jE),nU=K([FE,qE,ca,qt,UE,Ac,wy],AE),sU=K([_y],e=>({isActive:e.active,activeIndex:e.index})),iU=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=F5(e.chartX,e.chartY,t,r,l);if(c){var u=B5(c,t),d=C5(u,o,i,n,s),f=U5(t,i,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ng.apply(null,arguments)}function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){aU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aU(e,t,r){return(t=oU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oU(e){var t=lU(e,"string");return typeof t=="symbol"?t:t+""}function lU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cU(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var h,p;if(u==="ScatterChart")h=d,p=Az;else if(u==="BarChart")h=Tz(o,d,s,i),p=D2;else if(o==="radial"){var{cx:y,cy:x,radius:v,startAngle:g,endAngle:w}=M2(d);h={cx:y,cy:x,startAngle:g,endAngle:w,innerRadius:v,outerRadius:v},p=$2}else h={points:fL(o,d,s)},p=S2;var _=typeof l=="object"&&"className"in l?l.className:void 0,j=mu(mu(mu(mu({stroke:"#ccc",pointerEvents:"none"},s),h),Pe(l,!1)),{},{payload:f,payloadIndex:m,className:_e("recharts-tooltip-cursor",_)});return b.isValidElement(l)?b.cloneElement(l,j):b.createElement(p,j)}function uU(e){var t=J8(),r=b2(),n=Yf(),s=Z8();return b.createElement(cU,Ng({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var BE=b.createContext(null),dU=()=>b.useContext(BE),QE={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var h=new s(d,f||c,m),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,h=f.length,p=new Array(h);m<h;m++)p[m]=f[m].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,h,p){var y=r?r+u:u;if(!this._events[y])return!1;var x=this._events[y],v=arguments.length,g,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,m),!0;case 5:return x.fn.call(x.context,d,f,m,h),!0;case 6:return x.fn.call(x.context,d,f,m,h,p),!0}for(w=1,g=new Array(v-1);w<v;w++)g[w-1]=arguments[w];x.fn.apply(x.context,g)}else{var _=x.length,j;for(w=0;w<_;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),v){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,d);break;case 3:x[w].fn.call(x[w].context,d,f);break;case 4:x[w].fn.call(x[w].context,d,f,m);break;default:if(!g)for(j=1,g=new Array(v-1);j<v;j++)g[j-1]=arguments[j];x[w].fn.apply(x[w].context,g)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var h=r?r+u:u;if(!this._events[h])return this;if(!d)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===d&&(!m||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var y=0,x=[],v=p.length;y<v;y++)(p[y].fn!==d||m&&!p[y].once||f&&p[y].context!==f)&&x.push(p[y]);x.length?this._events[h]=x.length===1?x[0]:x:o(this,h)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(QE);var fU=QE.exports;const hU=Qn(fU);var ac=new hU,Sg="recharts.syncEvent.tooltip",kj="recharts.syncEvent.brush";function VE(e,t){if(t){var r=Number.parseInt(t,10);if(!Mr(r))return e==null?void 0:e[r]}}var mU={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},WE=on({name:"options",initialState:mU,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),pU=WE.reducer,{createEventEmitter:gU}=WE.actions;function xU(e){return e.tooltip.syncInteraction}var yU={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KE=on({name:"chartData",initialState:yU,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Pj,setDataStartEndIndexes:vU,setComputedData:$K}=KE.actions,bU=KE.reducer,HE=()=>{};function wU(){var e=de(ry),t=de(ny),r=yt(),n=de(zP),s=de(Ss),i=Yf(),o=Px(),l=de(c=>c.rootProps.className);b.useEffect(()=>{if(e==null)return HE;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(s!=null){var m;if(typeof n=="function"){var h={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},p=n(s,h);m=s[p]}else n==="value"&&(m=s.find(N=>String(N.value)===d.payload.label));var{coordinate:y}=d.payload;if(m==null||d.payload.active===!1||y==null||o==null){r(jg({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x,y:v}=y,g=Math.min(x,o.x+o.width),w=Math.min(v,o.y+o.height),_={x:i==="horizontal"?m.coordinate:g,y:i==="horizontal"?w:m.coordinate},j=jg({active:d.payload.active,coordinate:_,dataKey:d.payload.dataKey,index:String(m.index),label:d.payload.label});r(j)}}};return ac.on(Sg,c),()=>{ac.off(Sg,c)}},[l,r,t,e,n,s,i,o])}function jU(){var e=de(ry),t=de(ny),r=yt();b.useEffect(()=>{if(e==null)return HE;var n=(s,i,o)=>{t!==o&&e===s&&r(vU(i))};return ac.on(kj,n),()=>{ac.off(kj,n)}},[r,t,e])}function _U(){var e=yt();b.useEffect(()=>{e(gU())},[e]),wU(),jU()}function NU(e,t,r,n,s,i){var o=de(m=>tU(m,e,t)),l=de(ny),c=de(ry),u=de(zP),d=de(xU),f=d==null?void 0:d.active;b.useEffect(()=>{if(!f&&c!=null&&l!=null){var m=jg({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ac.emit(Sg,c,m,l)}},[f,r,o,s,n,l,c,u,i])}function Ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ej(Object(r),!0).forEach(function(n){SU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ej(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SU(e,t,r){return(t=kU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kU(e){var t=PU(e,"string");return typeof t=="symbol"?t:t+""}function PU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EU(e){return e.dataKey}function CU(e,t){return b.isValidElement(e)?b.cloneElement(e,t):typeof e=="function"?b.createElement(e,t):b.createElement(lz,t)}var Aj=[],AU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Po.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kg(e){var t=js(e,AU),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:h,wrapperStyle:p,cursor:y,shared:x,trigger:v,defaultIndex:g,portal:w,axisId:_}=t,j=yt(),N=typeof g=="number"?String(g):g;b.useEffect(()=>{j(o8({shared:x,trigger:v,axisId:_,active:r,defaultIndex:N}))},[j,x,v,_,r,N]);var S=Px(),k=N2(),O=r8(x),{activeIndex:C,isActive:M}=de(fe=>sU(fe,O,v,N)),E=de(fe=>nU(fe,O,v,N)),z=de(fe=>UE(fe,O,v,N)),$=de(fe=>rU(fe,O,v,N)),q=E,U=dU(),D=r??M,[P,A]=y3([q,D]),T=O==="axis"?z:void 0;NU(O,v,$,T,C,D);var R=w??U;if(R==null)return null;var F=q??Aj;D||(F=Aj),l&&F.length&&(F=$$(q.filter(fe=>fe.value!=null&&(fe.hide!==!0||t.includeHidden)),d,EU));var J=F.length>0,oe=b.createElement(pz,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:D,coordinate:$,hasPayload:J,offset:u,position:f,reverseDirection:m,useTranslate3d:h,viewBox:S,wrapperStyle:p,lastBoundingBox:P,innerRef:A,hasPortalFromProps:!!w},CU(o,Cj(Cj({},t),{},{payload:F,label:T,active:D,coordinate:$,accessibilityLayer:k})));return b.createElement(b.Fragment,null,TN.createPortal(oe,R),D&&b.createElement(uU,{cursor:y,tooltipEventType:O,coordinate:$,payload:q,index:C}))}var GE={},YE={},XE={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),y()};let m=null;const h=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},p=()=>{m!==null&&(clearTimeout(m),m=null)},y=()=>{p(),o=void 0,l=null},x=()=>{d()},v=function(...g){if(s!=null&&s.aborted)return;o=this,l=g;const w=m==null;h(),c&&w&&d()};return v.schedule=h,v.cancel=y,v.flush=x,s==null||s.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(XE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const m=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),h=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,y),d)},p=()=>(m.flush(),d);return h.cancel=m.cancel,h.flush=p,h}e.debounce=r})(YE);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YE;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(GE);var TU=GE.throttle;const OU=Qn(TU);var kl=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function Tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tj(Object(r),!0).forEach(function(n){DU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DU(e,t,r){return(t=MU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MU(e){var t=IU(e,"string");return typeof t=="symbol"?t:t+""}function IU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pg=b.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:h,style:p={}}=e,y=b.useRef(null),x=b.useRef();x.current=h,b.useImperativeHandle(t,()=>y.current);var[v,g]=b.useState({containerWidth:n.width,containerHeight:n.height}),w=b.useCallback((j,N)=>{g(S=>{var k=Math.round(j),O=Math.round(N);return S.containerWidth===k&&S.containerHeight===O?S:{containerWidth:k,containerHeight:O}})},[]);b.useEffect(()=>{var j=O=>{var C,{width:M,height:E}=O[0].contentRect;w(M,E),(C=x.current)===null||C===void 0||C.call(x,M,E)};d>0&&(j=OU(j,d,{trailing:!0,leading:!1}));var N=new ResizeObserver(j),{width:S,height:k}=y.current.getBoundingClientRect();return w(S,k),N.observe(y.current),()=>{N.disconnect()}},[w,d]);var _=b.useMemo(()=>{var{containerWidth:j,containerHeight:N}=v;if(j<0||N<0)return null;kl(Ti(s)||Ti(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var S=Ti(s)?j:s,k=Ti(i)?N:i;return r&&r>0&&(S?k=S/r:k&&(S=k*r),c&&k>c&&(k=c)),kl(S>0||k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,S,k,s,i,o,l,r),b.Children.map(u,O=>b.cloneElement(O,{width:S,height:k,style:_m({width:S,height:k},O.props.style)}))},[r,u,i,c,l,o,v,s]);return b.createElement("div",{id:f?"".concat(f):void 0,className:_e("recharts-responsive-container",m),style:_m(_m({},p),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},b.createElement("div",{style:{width:0,height:0,overflow:"visible"}},_))}),JE=e=>null;JE.displayName="Cell";function Oj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oj(Object(r),!0).forEach(function(n){$U(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $U(e,t,r){return(t=zU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zU(e){var t=LU(e,"string");return typeof t=="symbol"?t:t+""}function LU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ba={widthCache:{},cacheCount:0},RU=2e3,qU={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Dj="recharts_measurement_span";function FU(e){var t=Eg({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Pl=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Po.isSsr)return{width:0,height:0};var n=FU(r),s=JSON.stringify({text:t,copyStyle:n});if(ba.widthCache[s])return ba.widthCache[s];try{var i=document.getElementById(Dj);i||(i=document.createElement("span"),i.setAttribute("id",Dj),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Eg(Eg({},qU),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return ba.widthCache[s]=c,++ba.cacheCount>RU&&(ba.cacheCount=0,ba.widthCache={}),c}catch{return{width:0,height:0}}},Mj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ij=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UU=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BU=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ZE={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QU=Object.keys(ZE),Ia="NaN";function VU(e,t){return e*ZE[t]}class ur{static parse(t){var r,[,n,s]=(r=BU.exec(t))!==null&&r!==void 0?r:[];return new ur(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Mr(t)&&(this.unit=""),r!==""&&!UU.test(r)&&(this.num=NaN,this.unit=""),QU.includes(r)&&(this.num=VU(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ur(NaN,""):new ur(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ur(NaN,""):new ur(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Mr(this.num)}}function eC(e){if(e.includes(Ia))return Ia;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Mj.exec(t))!==null&&r!==void 0?r:[],o=ur.parse(n??""),l=ur.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Ia;t=t.replace(Mj,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=Ij.exec(t))!==null&&u!==void 0?u:[],h=ur.parse(d??""),p=ur.parse(m??""),y=f==="+"?h.add(p):h.subtract(p);if(y.isNaN())return Ia;t=t.replace(Ij,y.toString())}return t}var $j=/\(([^()]*)\)/;function WU(e){for(var t=e,r;(r=$j.exec(t))!=null;){var[,n]=r;t=t.replace($j,eC(n))}return t}function KU(e){var t=e.replace(/\s+/g,"");return t=WU(t),t=eC(t),t}function HU(e){try{return KU(e)}catch{return Ia}}function Nm(e){var t=HU(e.slice(5,-1));return t===Ia?"":t}var GU=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],YU=["dx","dy","angle","className","breakAll"];function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(null,arguments)}function zj(e,t){if(e==null)return{};var r,n,s=XU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tC=/[ \f\n\r\t\v\u2028\u2029]+/,rC=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];$e(t)||(r?s=t.toString().split(""):s=t.toString().split(tC));var i=s.map(l=>({word:l,width:Pl(l,n).width})),o=r?0:Pl(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},JU=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ae(i),d=o,f=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce((E,z)=>{var{word:$,width:q}=z,U=E[E.length-1];if(U&&(n==null||s||U.width+q+r<Number(n)))U.words.push($),U.width+=q+r;else{var D={words:[$],width:q};E.push(D)}return E},[])},m=f(t),h=C=>C.reduce((M,E)=>M.width>E.width?M:E);if(!u||s)return m;var p=m.length>i||h(m).width>Number(n);if(!p)return m;for(var y="…",x=C=>{var M=d.slice(0,C),E=rC({breakAll:c,style:l,children:M+y}).wordsWithComputedWidth,z=f(E),$=z.length>i||h(z).width>Number(n);return[$,z]},v=0,g=d.length-1,w=0,_;v<=g&&w<=d.length-1;){var j=Math.floor((v+g)/2),N=j-1,[S,k]=x(N),[O]=x(j);if(!S&&!O&&(v=j+1),S&&O&&(g=j-1),!S&&O){_=k;break}w++}return _||m},Lj=e=>{var t=$e(e)?[]:e.toString().split(tC);return[{words:t}]},ZU=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!Po.isSsr){var l,c,u=rC({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return Lj(n);return JU({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return Lj(n)},Rj="#808080",Ny=b.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=Rj}=e,d=zj(e,GU),f=b.useMemo(()=>ZU({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:o,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,o,d.style,d.width]),{dx:m,dy:h,angle:p,className:y,breakAll:x}=d,v=zj(d,YU);if(!Fn(r)||!Fn(n))return null;var g=r+(ae(m)?m:0),w=n+(ae(h)?h:0),_;switch(c){case"start":_=Nm("calc(".concat(i,")"));break;case"middle":_=Nm("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:_=Nm("calc(".concat(f.length-1," * -").concat(s,")"));break}var j=[];if(o){var N=f[0].width,{width:S}=d;j.push("scale(".concat(ae(S)?S/N:1,")"))}return p&&j.push("rotate(".concat(p,", ").concat(g,", ").concat(w,")")),j.length&&(v.transform=j.join(" ")),b.createElement("text",Cg({},Pe(v,!0),{ref:t,x:g,y:w,className:_e("recharts-text",y),textAnchor:l,fill:u.includes("url")?Rj:u}),f.map((k,O)=>{var C=k.words.join(x?"":" ");return b.createElement("tspan",{x:g,dy:O===0?_:s,key:"".concat(C,"-").concat(O)},C)}))});Ny.displayName="Text";var eB=["offset"],tB=["labelRef"];function qj(e,t){if(e==null)return{};var r,n,s=rB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fj(Object(r),!0).forEach(function(n){nB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nB(e,t,r){return(t=sB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sB(e){var t=iB(e,"string");return typeof t=="symbol"?t:t+""}function iB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zn.apply(null,arguments)}var aB=e=>{var{value:t,formatter:r}=e,n=$e(e.children)?t:e.children;return typeof r=="function"?r(n):n},Sy=e=>e!=null&&typeof e=="function",oB=(e,t)=>{var r=gr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},lB=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:h}=s,p=(u+d)/2,y=oB(f,m),x=y>=0?1:-1,v,g;n==="insideStart"?(v=f+x*i,g=h):n==="insideEnd"?(v=m-x*i,g=!h):n==="end"&&(v=m+x*i,g=h),g=y<=0?g:!g;var w=$t(l,c,p,v),_=$t(l,c,p,v+(g?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(g?0:1,`,
    `).concat(_.x,",").concat(_.y),N=$e(e.id)?co("recharts-radial-line-"):e.id;return b.createElement("text",Zn({},r,{dominantBaseline:"central",className:_e("recharts-radial-bar-label",o)}),b.createElement("defs",null,b.createElement("path",{id:N,d:j})),b.createElement("textPath",{xlinkHref:"#".concat(N)},t))},cB=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if(n==="outside"){var{x:f,y:m}=$t(s,i,l+r,d);return{x:f,y:m,textAnchor:f>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(o+l)/2,{x:p,y}=$t(s,i,h,d);return{x:p,y,textAnchor:"middle",verticalAnchor:"middle"}},uB=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",m=u>0?"start":"end",h=l>=0?1:-1,p=h*n,y=h>0?"end":"start",x=h>0?"start":"end";if(s==="top"){var v={x:i+l/2,y:o-u*n,textAnchor:"middle",verticalAnchor:f};return lt(lt({},v),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var g={x:i+l/2,y:o+c+d,textAnchor:"middle",verticalAnchor:m};return lt(lt({},g),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"};return lt(lt({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var _={x:i+l+p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"};return lt(lt({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:c}:{})}var j=r?{width:l,height:c}:{};return s==="insideLeft"?lt({x:i+p,y:o+c/2,textAnchor:x,verticalAnchor:"middle"},j):s==="insideRight"?lt({x:i+l-p,y:o+c/2,textAnchor:y,verticalAnchor:"middle"},j):s==="insideTop"?lt({x:i+l/2,y:o+d,textAnchor:"middle",verticalAnchor:m},j):s==="insideBottom"?lt({x:i+l/2,y:o+c-d,textAnchor:"middle",verticalAnchor:f},j):s==="insideTopLeft"?lt({x:i+p,y:o+d,textAnchor:x,verticalAnchor:m},j):s==="insideTopRight"?lt({x:i+l-p,y:o+d,textAnchor:y,verticalAnchor:m},j):s==="insideBottomLeft"?lt({x:i+p,y:o+c-d,textAnchor:x,verticalAnchor:f},j):s==="insideBottomRight"?lt({x:i+l-p,y:o+c-d,textAnchor:y,verticalAnchor:f},j):s&&typeof s=="object"&&(ae(s.x)||Ti(s.x))&&(ae(s.y)||Ti(s.y))?lt({x:i+Sn(s.x,l),y:o+Sn(s.y,c),textAnchor:"end",verticalAnchor:"end"},j):lt({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)},dB=e=>"cx"in e&&ae(e.cx);function Er(e){var{offset:t=5}=e,r=qj(e,eB),n=lt({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:u="",textBreakAll:d,labelRef:f}=n,m=Px(),h=s||m;if(!h||$e(o)&&$e(l)&&!b.isValidElement(c)&&typeof c!="function")return null;if(b.isValidElement(c)){var p=qj(n,tB);return b.cloneElement(c,p)}var y;if(typeof c=="function"){if(y=b.createElement(c,n),b.isValidElement(y))return y}else y=aB(n);var x=dB(h),v=Pe(n,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return lB(n,y,v);var g=x?cB(n):uB(n,h);return b.createElement(Ny,Zn({ref:f,className:_e("recharts-label",u)},v,g,{breakAll:d}),y)}Er.displayName="Label";var nC=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:u,x:d,y:f,top:m,left:h,width:p,height:y,clockWise:x,labelViewBox:v}=e;if(v)return v;if(ae(p)&&ae(y)){if(ae(d)&&ae(f))return{x:d,y:f,width:p,height:y};if(ae(m)&&ae(h))return{x:m,y:h,width:p,height:y}}if(ae(d)&&ae(f))return{x:d,y:f,width:0,height:0};if(ae(t)&&ae(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:u||l||o||0,clockWise:x};if(e.viewBox)return e.viewBox},fB=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?b.createElement(Er,Zn({key:"label-implicit"},n)):Fn(e)?b.createElement(Er,Zn({key:"label-implicit",value:e},n)):b.isValidElement(e)?e.type===Er?b.cloneElement(e,lt({key:"label-implicit"},n)):b.createElement(Er,Zn({key:"label-implicit",content:e},n)):Sy(e)?b.createElement(Er,Zn({key:"label-implicit",content:e},n)):e&&typeof e=="object"?b.createElement(Er,Zn({},e,{key:"label-implicit"},n)):null},hB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=nC(t),l=ax(s,Er).map((u,d)=>b.cloneElement(u,{viewBox:r||o,key:"label-".concat(d)}));if(!n)return l;var c=fB(t.label,r||o,i);return[c,...l]};Er.parseViewBox=nC;Er.renderCallByParent=hB;var sC={},iC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(iC);var aC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(aC);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iC,r=aC,n=Mf;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(sC);var mB=sC.last;const pB=Qn(mB);var gB=["valueAccessor"],xB=["data","dataKey","clockWise","id","textBreakAll"];function Ld(){return Ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ld.apply(null,arguments)}function Uj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uj(Object(r),!0).forEach(function(n){yB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yB(e,t,r){return(t=vB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qj(e,t){if(e==null)return{};var r,n,s=wB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jB=e=>Array.isArray(e.value)?pB(e.value):e.value;function ti(e){var{valueAccessor:t=jB}=e,r=Qj(e,gB),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=Qj(r,xB);return!n||!n.length?null:b.createElement(Ir,{className:"recharts-label-list"},n.map((u,d)=>{var f=$e(s)?t(u,d):Ht(u&&u.payload,s),m=$e(o)?{}:{id:"".concat(o,"-").concat(d)};return b.createElement(Er,Ld({},Pe(u,!0),c,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:l,viewBox:Er.parseViewBox($e(i)?u:Bj(Bj({},u),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}ti.displayName="LabelList";function _B(e,t){return e?e===!0?b.createElement(ti,{key:"labelList-implicit",data:t}):b.isValidElement(e)||Sy(e)?b.createElement(ti,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?b.createElement(ti,Ld({data:t},e,{key:"labelList-implicit"})):null:null}function NB(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=ax(n,ti).map((o,l)=>b.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=_B(e.label,t);return[i,...s]}ti.renderCallByParent=NB;function Ag(){return Ag=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ag.apply(null,arguments)}var oC=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=_e("recharts-dot",s);return t===+t&&r===+r&&n===+n?b.createElement("circle",Ag({},Pe(e,!1),sx(e),{className:i,cx:t,cy:r,r:n})):null},SB={radiusAxis:{},angleAxis:{}},kB=on({name:"polarAxis",initialState:SB,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),PB=kB.reducer,EB={countOfBars:0,cartesianItems:[],polarItems:[]},lC=on({name:"graphicalItems",initialState:EB,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=as(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=as(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=as(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:CB,removeBar:AB,addCartesianGraphicalItem:TB,replaceCartesianGraphicalItem:OB,removeCartesianGraphicalItem:DB,addPolarGraphicalItem:zK,removePolarGraphicalItem:LK}=lC.actions,MB=lC.reducer;function Vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vj(Object(r),!0).forEach(function(n){IB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IB(e,t,r){return(t=$B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $B(e){var t=zB(e,"string");return typeof t=="symbol"?t:t+""}function zB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LB(e){var t=yt(),r=b.useRef(null);return b.useEffect(()=>{var n=Wj(Wj({},e),{},{stackId:x2(e.stackId)});r.current===null?t(TB(n)):r.current!==n&&t(OB({prev:r.current,next:n})),r.current=n},[t,e]),b.useEffect(()=>()=>{r.current&&(t(DB(r.current)),r.current=null)},[t]),null}var cC={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(cC);var RB=cC.isPlainObject;const qB=Qn(RB);function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rd.apply(null,arguments)}var Kj=(e,t,r,n,s)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+s),o+="L ".concat(e+r-i/2-n,",").concat(t+s),o+="L ".concat(e,",").concat(t," Z"),o},FB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UB=e=>{var t=js(e,FB),r=b.useRef(),[n,s]=b.useState(-1);b.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&s(x)}catch{}},[]);var{x:i,y:o,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:h,isUpdateAnimationActive:p}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||u!==+u||l===0&&c===0||u===0)return null;var y=_e("recharts-trapezoid",d);return p?b.createElement(ea,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:i,y:o},to:{upperWidth:l,lowerWidth:c,height:u,x:i,y:o},duration:m,animationEasing:f,isActive:p},x=>{var{upperWidth:v,lowerWidth:g,height:w,x:_,y:j}=x;return b.createElement(ea,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:h,duration:m,easing:f},b.createElement("path",Rd({},Pe(t,!0),{className:y,d:Kj(_,j,v,g,w),ref:r})))}):b.createElement("g",null,b.createElement("path",Rd({},Pe(t,!0),{className:y,d:Kj(i,o,l,c,u)})))},BB=["option","shapeType","propTransformer","activeClassName","isActive"];function QB(e,t){if(e==null)return{};var r,n,s=VB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){WB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=HB(e,"string");return typeof t=="symbol"?t:t+""}function HB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GB(e,t){return qd(qd({},t),e)}function YB(e,t){return e==="symbols"}function Gj(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return b.createElement(D2,r);case"trapezoid":return b.createElement(UB,r);case"sector":return b.createElement($2,r);case"symbols":if(YB(t))return b.createElement(yk,r);break;default:return null}}function XB(e){return b.isValidElement(e)?e.props:e}function JB(e){var{option:t,shapeType:r,propTransformer:n=GB,activeClassName:s="recharts-active-shape",isActive:i}=e,o=QB(e,BB),l;if(b.isValidElement(t))l=b.cloneElement(t,qd(qd({},o),XB(t)));else if(typeof t=="function")l=t(o);else if(qB(t)&&typeof t!="boolean"){var c=n(t,o);l=b.createElement(Gj,{shapeType:r,elementProps:c})}else{var u=o;l=b.createElement(Gj,{shapeType:r,elementProps:u})}return i?b.createElement(Ir,{className:s},l):l}var uC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(NE({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},dC=e=>{var t=yt();return(r,n)=>s=>{e==null||e(r,n,s),t(l8())}},fC=(e,t)=>{var r=yt();return(n,s)=>i=>{e==null||e(n,s,i),r(c8({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function hC(e){var{fn:t,args:r}=e,n=yt(),s=or();return b.useEffect(()=>{if(!s){var i=t(r);return n(i8(i)),()=>{n(a8(i))}}},[t,r,n,s]),null}var ZB=()=>{};function mC(e){var{legendPayload:t}=e,r=yt(),n=or();return b.useEffect(()=>n?ZB:(r(tz(t)),()=>{r(rz(t))}),[r,n,t]),null}function pC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=b.useRef(co(t)),n=b.useRef(e);return n.current!==e&&(r.current=co(t),n.current=e),r.current}var e9=K([Pt],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),t9=K([e9,bs,ws],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),r9=e=>{var t=or();return de(r=>Bn(r,"xAxis",e,t))},n9=e=>{var t=or();return de(r=>Bn(r,"yAxis",e,t))},ky=()=>de(t9),s9=()=>de(K8);function Yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(r),!0).forEach(function(n){i9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i9(e,t,r){return(t=a9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a9(e){var t=o9(e,"string");return typeof t=="symbol"?t:t+""}function o9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l9=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=Xj(Xj({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Pe(s,!1)),sx(s)),l;return b.isValidElement(s)?l=b.cloneElement(s,o):typeof s=="function"?l=s(o):l=b.createElement(oC,o),b.createElement(Ir,{className:"recharts-active-dot"},l)};function c9(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=de(ra),o=s9();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return $e(l)?null:l9({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var u9=()=>{var e=yt();return b.useEffect(()=>(e(CB()),()=>{e(AB())})),null},d9=["children"];function f9(e,t){if(e==null)return{};var r,n,s=h9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Jj=()=>{},gC=b.createContext({addErrorBar:Jj,removeErrorBar:Jj}),m9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},xC=b.createContext(m9);function yC(e){var{children:t}=e,r=f9(e,d9);return b.createElement(xC.Provider,{value:r},t)}var p9=()=>b.useContext(xC),vC=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:u,barSize:d}=e,[f,m]=b.useState([]),h=b.useCallback(x=>{m(v=>[...v,x])},[m]),p=b.useCallback(x=>{m(v=>v.filter(g=>g!==x))},[m]),y=or();return b.createElement(gC.Provider,{value:{addErrorBar:h,removeErrorBar:p}},b.createElement(LB,{type:u,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:f,stackId:l,hide:c,barSize:d,isPanorama:y}),t)};function g9(e){var{addErrorBar:t,removeErrorBar:r}=b.useContext(gC);return b.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var x9=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function bC(e,t,r){return(t=y9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function b9(e,t){if(e==null)return{};var r,n,s=w9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function w9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function j9(e){var{direction:t,width:r,dataKey:n,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:l}=e,c=b9(e,x9),u=Pe(c,!1),{data:d,dataPointFormatter:f,xAxisId:m,yAxisId:h,errorBarOffset:p}=p9(),y=r9(m),x=n9(h);if((y==null?void 0:y.scale)==null||(x==null?void 0:x.scale)==null||d==null||t==="x"&&y.type!=="number")return null;var v=d.map(g=>{var{x:w,y:_,value:j,errorVal:N}=f(g,n,t);if(!N)return null;var S=[],k,O;if(Array.isArray(N)?[k,O]=N:k=O=N,t==="x"){var{scale:C}=y,M=_+p,E=M+r,z=M-r,$=C(j-k),q=C(j+O);S.push({x1:q,y1:E,x2:q,y2:z}),S.push({x1:$,y1:M,x2:q,y2:M}),S.push({x1:$,y1:E,x2:$,y2:z})}else if(t==="y"){var{scale:U}=x,D=w+p,P=D-r,A=D+r,T=U(j-k),R=U(j+O);S.push({x1:P,y1:R,x2:A,y2:R}),S.push({x1:D,y1:T,x2:D,y2:R}),S.push({x1:P,y1:T,x2:A,y2:T})}var F="".concat(w+p,"px ").concat(_+p,"px");return b.createElement(Ir,oc({className:"recharts-errorBar",key:"bar-".concat(S.map(J=>"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)))},u),S.map(J=>{var oe=s?{transformOrigin:"".concat(J.x1-5,"px")}:void 0;return b.createElement(ea,{from:{transform:"scaleY(0)",transformOrigin:F},to:{transform:"scaleY(1)",transformOrigin:F},begin:i,easing:l,isActive:s,duration:o,key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2),style:{transformOrigin:F}},b.createElement("line",oc({},J,{style:oe})))}))});return b.createElement(Ir,{className:"recharts-errorBars"},v)}var wC=b.createContext(void 0);function _9(e){var t=b.useContext(wC);return e??t??"x"}function jC(e){var{direction:t,children:r}=e;return b.createElement(wC.Provider,{value:t},r)}var _C={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function N9(e){var t=_9(e.direction),{width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o}=js(e,_C);return b.createElement(b.Fragment,null,b.createElement(g9,{dataKey:e.dataKey,direction:t}),b.createElement(j9,oc({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:s,animationDuration:i,animationEasing:o})))}class NC extends b.Component{render(){return b.createElement(N9,this.props)}}bC(NC,"defaultProps",_C);bC(NC,"displayName","ErrorBar");var S9="Invariant failed";function k9(e,t){throw new Error(S9)}var P9=["x","y"];function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(null,arguments)}function Zj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zj(Object(r),!0).forEach(function(n){E9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E9(e,t,r){return(t=C9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C9(e){var t=A9(e,"string");return typeof t=="symbol"?t:t+""}function A9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T9(e,t){if(e==null)return{};var r,n,s=O9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function O9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function D9(e,t){var{x:r,y:n}=e,s=T9(e,P9),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),m=parseInt(f,10);return nl(nl(nl(nl(nl({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function SC(e){return b.createElement(JB,Tg({shapeType:"rectangle",propTransformer:D9,activeClassName:"recharts-active-bar"},e))}var M9=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ae(t))return t;var i=ae(n)||$e(n);return i?t(n,s):(i||k9(),r)}};function Py(e,t){var r,n,s=de(u=>Ns(u,e)),i=de(u=>gi(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Nr.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Sr.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function kC(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=ky(),{needClipX:i,needClipY:o,needClip:l}=Py(t,r);if(!l)return null;var{x:c,y:u,width:d,height:f}=s;return b.createElement("clipPath",{id:"clipPath-".concat(n)},b.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var I9=["onMouseEnter","onMouseLeave","onClick"],$9=["value","background","tooltipPosition"],z9=["onMouseEnter","onClick","onMouseLeave"];function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}function e1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e1(Object(r),!0).forEach(function(n){ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ph(e,t,r){return(t=L9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9(e){var t=R9(e,"string");return typeof t=="symbol"?t:t+""}function R9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Og(e,t){if(e==null)return{};var r,n,s=q9(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function q9(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F9=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function U9(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:Wf(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function B9(e){var t=de(ra),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=Og(i,I9),d=uC(o,n),f=dC(l),m=fC(c,n);if(!s||r==null)return null;var h=Pe(s,!1);return b.createElement(b.Fragment,null,r.map((p,y)=>{var{value:x,background:v,tooltipPosition:g}=p,w=Og(p,$9);if(!v)return null;var _=d(p,y),j=f(p,y),N=m(p,y),S=Wt(Wt(Wt(Wt(Wt({option:s,isActive:String(y)===t},w),{},{fill:"#eee"},v),h),ix(u,p,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return b.createElement(SC,lc({key:"background-bar-".concat(y)},S))}))}function PC(e){var{data:t,props:r,showLabels:n}=e,s=Pe(r,!1),{shape:i,dataKey:o,activeBar:l}=r,c=de(ra),u=de(zE),{onMouseEnter:d,onClick:f,onMouseLeave:m}=r,h=Og(r,z9),p=uC(d,o),y=dC(m),x=fC(f,o);return t?b.createElement(b.Fragment,null,t.map((v,g)=>{var w=l&&String(g)===c&&(u==null||o===u),_=w?l:i,j=Wt(Wt(Wt({},s),v),{},{isActive:w,option:_,index:g,dataKey:o});return b.createElement(Ir,lc({className:"recharts-bar-rectangle"},ix(h,v,g),{onMouseEnter:p(v,g),onMouseLeave:y(v,g),onClick:x(v,g),key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(g)}),b.createElement(SC,j))}),n&&ti.renderCallByParent(r,t)):null}function Q9(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,m=pC(t,"recharts-bar-"),[h,p]=b.useState(!1),y=b.useCallback(()=>{typeof u=="function"&&u(),p(!1)},[u]),x=b.useCallback(()=>{typeof d=="function"&&d(),p(!0)},[d]);return b.createElement(ea,{begin:o,duration:l,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:x,key:m},v=>{var{t:g}=v,w=g===1?n:n.map((_,j)=>{var N=f&&f[j];if(N){var S=pn(N.x,_.x),k=pn(N.y,_.y),O=pn(N.width,_.width),C=pn(N.height,_.height);return Wt(Wt({},_),{},{x:S(g),y:k(g),width:O(g),height:C(g)})}if(s==="horizontal"){var M=pn(0,_.height),E=M(g);return Wt(Wt({},_),{},{y:_.y+_.height-E,height:E})}var z=pn(0,_.width),$=z(g);return Wt(Wt({},_),{},{width:$})});return g>0&&(r.current=w),b.createElement(Ir,null,b.createElement(PC,{props:t,data:w,showLabels:!h}))})}function V9(e){var{data:t,isAnimationActive:r}=e,n=b.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?b.createElement(Q9,{previousRectanglesRef:n,props:e}):b.createElement(PC,{props:e,data:t,showLabels:!0})}var EC=0,W9=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ht(e,t)}};class K9 extends b.PureComponent{constructor(){super(...arguments),ph(this,"id",co("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u,layout:d}=this.props;if(t)return null;var f=_e("recharts-bar",s),m=$e(u)?this.id:u;return b.createElement(Ir,{className:f},l&&b.createElement("defs",null,b.createElement(kC,{clipPathId:m,xAxisId:i,yAxisId:o})),b.createElement(Ir,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(m,")"):null},b.createElement(B9,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),b.createElement(V9,this.props)),b.createElement(jC,{direction:d==="horizontal"?"y":"x"},this.props.children))}}var CC={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Po.isSsr,legendType:"rect",minPointSize:EC,xAxisId:0,yAxisId:0};function H9(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=js(e,CC),{needClip:f}=Py(t,r),m=Yf(),h=or(),p=b.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:i,stackId:x2(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,i,e.stackId]),y=ax(e.children,JE),x=de(w=>j7(w,t,r,h,p,y));if(m!=="vertical"&&m!=="horizontal")return null;var v,g=x==null?void 0:x[0];return g==null||g.height==null||g.width==null?v=0:v=m==="vertical"?g.height/2:g.width/2,b.createElement(yC,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:W9,errorBarOffset:v},b.createElement(K9,lc({},e,{layout:m,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function G9(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:m,cells:h}=e,p=t==="horizontal"?l:o,y=d?p.scale.domain():null,x=z5({numericAxis:p});return f.map((v,g)=>{var w,_,j,N,S,k;d?w=O5(d[g],y):(w=Ht(v,r),Array.isArray(w)||(w=[x,w]));var O=M9(n,EC)(w[1],g);if(t==="horizontal"){var C,[M,E]=[l.scale(w[0]),l.scale(w[1])];_=uw({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:v,index:g}),j=(C=E??M)!==null&&C!==void 0?C:void 0,N=s.size;var z=M-E;if(S=Mr(z)?0:z,k={x:_,y:m.top,width:N,height:m.height},Math.abs(O)>0&&Math.abs(S)<Math.abs(O)){var $=gr(S||O)*(Math.abs(O)-Math.abs(S));j-=$,S+=$}}else{var[q,U]=[o.scale(w[0]),o.scale(w[1])];if(_=q,j=uw({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:v,index:g}),N=U-q,S=s.size,k={x:m.left,y:j,width:m.width,height:S},Math.abs(O)>0&&Math.abs(N)<Math.abs(O)){var D=gr(N||O)*(Math.abs(O)-Math.abs(N));N+=D}}var P=Wt(Wt({},v),{},{x:_,y:j,width:N,height:S,value:d?w:w[1],payload:v,background:k,tooltipPosition:{x:_+N/2,y:j+S/2}},h&&h[g]&&h[g].props);return P})}class Fd extends b.PureComponent{render(){return b.createElement(vC,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},b.createElement(u9,null),b.createElement(mC,{legendPayload:F9(this.props)}),b.createElement(hC,{fn:U9,args:this.props}),b.createElement(H9,this.props))}}ph(Fd,"displayName","Bar");ph(Fd,"defaultProps",CC);function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(n){Y9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y9(e,t,r){return(t=X9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9(e){var t=J9(e,"string");return typeof t=="symbol"?t:t+""}function J9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z9=(e,t)=>t,e7=(e,t,r)=>r,t7=(e,t,r,n)=>n,Ey=(e,t,r,n,s)=>s,r7=(e,t,r,n,s)=>s.maxBarSize,n7=(e,t,r,n,s,i)=>i,r1=(e,t,r)=>{var n=r??e;if(!$e(n))return Sn(n,t,0)},s7=K([Te,lh,Z9,e7,t7],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),i7=(e,t,r,n)=>{var s=Te(e);return s==="horizontal"?wg(e,"yAxis",r,n):wg(e,"xAxis",t,n)},a7=(e,t,r)=>{var n=Te(e);return n==="horizontal"?yj(e,"xAxis",t):yj(e,"yAxis",r)};function o7(e){return e.stackId!=null&&e.dataKey!=null}var l7=(e,t,r)=>{var n={},s=e.filter(o7),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,m=f.map(p=>p.dataKey),h=r1(t,r,f[0].barSize);return{stackId:d,dataKeys:m,barSize:h}}),c=i.map(u=>{var d=[u.dataKey].filter(m=>m!=null),f=r1(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]},c7=K([s7,nF,a7],l7),u7=(e,t,r,n,s)=>{var i,o,l=Te(e),c=IP(e),{maxBarSize:u}=s,d=$e(u)?c:u,f,m;return l==="horizontal"?(f=Bn(e,"xAxis",t,n),m=ii(e,"xAxis",t,n)):(f=Bn(e,"yAxis",r,n),m=ii(e,"yAxis",r,n)),(i=(o=Zl(f,m,!0))!==null&&o!==void 0?o:d)!==null&&i!==void 0?i:0},AC=(e,t,r,n)=>{var s=Te(e),i,o;return s==="horizontal"?(i=Bn(e,"xAxis",t,n),o=ii(e,"xAxis",t,n)):(i=Bn(e,"yAxis",r,n),o=ii(e,"yAxis",r,n)),Zl(i,o)};function d7(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=Sn(e,r,0,!0),l,c=[];if(Lr(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((v,g)=>v+(g.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var m=(r-f)/2>>0,h={offset:m-o,size:0};l=n.reduce((v,g)=>{var w,_={stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:h.offset+h.size+o,size:u?d:(w=g.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return h=j[j.length-1].position,j},c)}else{var p=Sn(t,r,0,!0);r-2*p-(i-1)*o<=0&&(o=0);var y=(r-2*p-(i-1)*o)/i;y>1&&(y>>=0);var x=Lr(s)?Math.min(y,s):y;l=n.reduce((v,g,w)=>[...v,{stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:p+(y+o)*w+(y-x)/2,size:x}}],c)}return l}}var f7=(e,t,r,n,s,i,o)=>{var l=$e(o)?t:o,c=d7(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>pu(pu({},u),{},{position:pu(pu({},u.position),{},{offset:u.position.offset-s/2})}))),c},h7=K([c7,IP,rF,$P,u7,AC,r7],f7),m7=(e,t,r,n)=>Bn(e,"xAxis",t,n),p7=(e,t,r,n)=>Bn(e,"yAxis",r,n),g7=(e,t,r,n)=>ii(e,"xAxis",t,n),x7=(e,t,r,n)=>ii(e,"yAxis",r,n),y7=K([h7,Ey],(e,t)=>{if(e!=null){var r=e.find(n=>n.stackId===t.stackId&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),v7=(e,t)=>{if(!(!e||(t==null?void 0:t.dataKey)==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:s}=n;if(s){var i=s.find(o=>o.key===t.dataKey);return i}}}}},b7=K([lh,Ey],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),w7=K([i7,Ey],v7),j7=K([Pt,m7,p7,g7,x7,y7,Te,Jx,AC,w7,b7,n7],(e,t,r,n,s,i,o,l,c,u,d,f)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=l;if(!(d==null||i==null||o!=="horizontal"&&o!=="vertical"||t==null||r==null||n==null||s==null||c==null)){var{data:y}=d,x;if(y!=null&&y.length>0?x=y:x=m==null?void 0:m.slice(h,p+1),x!=null)return G9({layout:o,barSettings:d,pos:i,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,stackedData:u,displayedData:x,offset:e,cells:f})}}),_7=e=>{var{chartData:t}=e,r=yt(),n=or();return b.useEffect(()=>n?()=>{}:(r(Pj(t)),()=>{r(Pj(void 0))}),[t,r,n]),null},n1={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},N7=on({name:"brush",initialState:n1,reducers:{setBrushSettings(e,t){return t.payload==null?n1:t.payload}}}),S7=N7.reducer;function k7(e,t,r){return(t=P7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P7(e){var t=E7(e,"string");return typeof t=="symbol"?t:t+""}function E7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Cy{static create(t){return new Cy(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}k7(Cy,"EPS",1e-4);function C7(e){return(e%180+180)%180}var A7=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=C7(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},T7={dots:[],areas:[],lines:[]},O7=on({name:"referenceElements",initialState:T7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=as(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=as(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=as(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),D7=O7.reducer,M7=b.createContext(void 0),I7=e=>{var{children:t}=e,[r]=b.useState("".concat(co("recharts"),"-clip")),n=ky();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return b.createElement(M7.Provider,{value:r},b.createElement("defs",null,b.createElement("clipPath",{id:r},b.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function Sm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function TC(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function $7(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return A7(n,r)}function z7(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Ud(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function L7(e,t){return TC(e,t+1)}function R7(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var p=n==null?void 0:n[c];if(p===void 0)return{v:TC(n,u)};var y=c,x,v=()=>(x===void 0&&(x=r(p,y)),x),g=p.coordinate,w=c===0||Ud(e,g,v,d,l);w||(c=0,d=o,u+=1),w&&(d=g+e*(v()/2+s),c+=u)},m;u<=i.length;)if(m=f(),m)return m.v;return[]}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){q7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q7(e,t,r){return(t=F7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F7(e){var t=U7(e,"string");return typeof t=="symbol"?t:t+""}function U7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function B7(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(m){var h=i[m],p,y=()=>(p===void 0&&(p=r(h,m)),p);if(m===o-1){var x=e*(h.coordinate+e*y()/2-c);i[m]=h=Qt(Qt({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[m]=h=Qt(Qt({},h),{},{tickCoord:h.coordinate});var v=Ud(e,h.tickCoord,y,l,c);v&&(c=h.tickCoord-e*(y()/2+s),i[m]=Qt(Qt({},h),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Q7(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=Qt(Qt({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var h=Ud(e,d.tickCoord,()=>f,c,u);h&&(u=d.tickCoord-e*(f/2+s),o[l-1]=Qt(Qt({},d),{},{isShow:!0}))}for(var p=i?l-1:l,y=function(g){var w=o[g],_,j=()=>(_===void 0&&(_=r(w,g)),_);if(g===0){var N=e*(w.coordinate-e*j()/2-c);o[g]=w=Qt(Qt({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[g]=w=Qt(Qt({},w),{},{tickCoord:w.coordinate});var S=Ud(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+s),o[g]=Qt(Qt({},w),{},{isShow:!0}))},x=0;x<p;x++)y(x);return o}function Ay(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(ae(c)||Po.isSsr){var m;return(m=L7(s,ae(c)?c:0))!==null&&m!==void 0?m:[]}var h=[],p=l==="top"||l==="bottom"?"width":"height",y=d&&p==="width"?Pl(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return p==="width"?$7(Pl(j,{fontSize:t,letterSpacing:r}),y,f):Pl(j,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?gr(s[1].coordinate-s[0].coordinate):1,g=z7(i,v,p);return c==="equidistantPreserveStart"?R7(v,g,x,s,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Q7(v,g,x,s,o,c==="preserveStartEnd"):h=B7(v,g,x,s,o),h.filter(w=>w.isShow))}var V7=["viewBox"],W7=["viewBox"];function $a(){return $a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$a.apply(null,arguments)}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){Ty(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a1(e,t){if(e==null)return{};var r,n,s=K7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function K7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ty(e,t,r){return(t=H7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=G7(e,"string");return typeof t=="symbol"?t:t+""}function G7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xi extends b.Component{constructor(t){super(t),this.tickRefs=b.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=a1(t,V7),i=this.props,{viewBox:o}=i,l=a1(i,W7);return!Sm(n,o)||!Sm(s,l)||!Sm(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:u}=this.props,d,f,m,h,p,y,x=c?-1:1,v=t.tickSize||l,g=ae(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":d=f=t.coordinate,h=n+ +!c*i,m=h-x*v,y=m-x*u,p=g;break;case"left":m=h=t.coordinate,f=r+ +!c*s,d=f-x*v,p=d-x*u,y=g;break;case"right":m=h=t.coordinate,f=r+ +c*s,d=f+x*v,p=d+x*u,y=g;break;default:d=f=t.coordinate,h=n+ +c*i,m=h+x*v,y=m+x*u,p=g;break}return{line:{x1:d,y1:m,x2:f,y2:h},tick:{x:p,y}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=mt(mt(mt({},Pe(this.props,!1)),Pe(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=mt(mt({},c),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var d=+(i==="left"&&!o||i==="right"&&o);c=mt(mt({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+s})}return b.createElement("line",$a({},c,{className:_e("recharts-cartesian-axis-line",Xi(l,"className"))}))}static renderTickItem(t,r,n){var s,i=_e(r.className,"recharts-cartesian-axis-tick-value");if(b.isValidElement(t))s=b.cloneElement(t,mt(mt({},r),{},{className:i}));else if(typeof t=="function")s=t(mt(mt({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=_e(o,t.className)),s=b.createElement(Ny,$a({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,u=Ay(mt(mt({},this.props),{},{ticks:n}),t,r),d=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=Pe(this.props,!1),h=Pe(o,!1),p=mt(mt({},m),{},{fill:"none"},Pe(s,!1)),y=u.map((x,v)=>{var{line:g,tick:w}=this.getTickLineCoord(x),_=mt(mt(mt(mt({textAnchor:d,verticalAnchor:f},m),{},{stroke:"none",fill:i},h),w),{},{index:v,payload:x,visibleTicksCount:u.length,tickFormatter:l});return b.createElement(Ir,$a({className:"recharts-cartesian-axis-tick",key:"tick-".concat(x.value,"-").concat(x.coordinate,"-").concat(x.tickCoord)},ix(this.props,x,v)),s&&b.createElement("line",$a({},p,g,{className:_e("recharts-cartesian-axis-tick-line",Xi(s,"className"))})),o&&xi.renderTickItem(o,_,"".concat(typeof l=="function"?l(x.value,v):x.value).concat(c||"")))});return y.length>0?b.createElement("g",{className:"recharts-cartesian-axis-ticks"},y):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:b.createElement(Ir,{className:_e("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Er.renderCallByParent(this.props))}}Ty(xi,"displayName","CartesianAxis");Ty(xi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Y7=["x1","y1","x2","y2","key"],X7=["offset"],J7=["xAxisId","yAxisId"],Z7=["xAxisId","yAxisId"];function o1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(r),!0).forEach(function(n){eQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eQ(e,t,r){return(t=tQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=rQ(e,"string");return typeof t=="symbol"?t:t+""}function rQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ii(){return Ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ii.apply(null,arguments)}function Bd(e,t){if(e==null)return{};var r,n,s=nQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sQ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return b.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function OC(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=Bd(t,Y7),u=Pe(c,!1),d=Bd(u,X7);r=b.createElement("line",Ii({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function iQ(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Bd(e,J7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return OC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function aQ(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var i=Bd(e,Z7),o=s.map((l,c)=>{var u=Kt(Kt({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return OC(n,u)});return b.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function oQ(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%t.length;return b.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function lQ(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var h=!u[m+1],p=h?s+o-f:u[m+1]-f;if(p<=0)return null;var y=m%r.length;return b.createElement("rect",{key:"react-".concat(m),x:f,y:i,width:p,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return b.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var cQ=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return p2(Ay(Kt(Kt(Kt({},xi.defaultProps),r),{},{ticks:g2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},uQ=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return p2(Ay(Kt(Kt(Kt({},xi.defaultProps),r),{},{ticks:g2(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},dQ={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Qd(e){var t=w2(),r=j2(),n=b2(),s=Kt(Kt({},js(e,dQ)),{},{x:ae(e.x)?e.x:n.left,y:ae(e.y)?e.y:n.top,width:ae(e.width)?e.width:n.width,height:ae(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:h}=s,p=or(),y=de(O=>vj(O,"xAxis",i,p)),x=de(O=>vj(O,"yAxis",o,p));if(!ae(u)||u<=0||!ae(d)||d<=0||!ae(l)||l!==+l||!ae(c)||c!==+c)return null;var v=s.verticalCoordinatesGenerator||cQ,g=s.horizontalCoordinatesGenerator||uQ,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof g=="function"){var j=m&&m.length,N=g({yAxis:x?Kt(Kt({},x),{},{ticks:j?m:x.ticks}):void 0,width:t,height:r,offset:n},j?!0:f);kl(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var S=h&&h.length,k=v({xAxis:y?Kt(Kt({},y),{},{ticks:S?h:y.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);kl(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(_=k)}return b.createElement("g",{className:"recharts-cartesian-grid"},b.createElement(sQ,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),b.createElement(oQ,Ii({},s,{horizontalPoints:w})),b.createElement(lQ,Ii({},s,{verticalPoints:_})),b.createElement(iQ,Ii({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:x})),b.createElement(aQ,Ii({},s,{offset:n,verticalPoints:_,xAxis:y,yAxis:x})))}Qd.displayName="CartesianGrid";var DC=(e,t,r,n)=>Bn(e,"xAxis",t,n),MC=(e,t,r,n)=>ii(e,"xAxis",t,n),IC=(e,t,r,n)=>Bn(e,"yAxis",r,n),$C=(e,t,r,n)=>ii(e,"yAxis",r,n),fQ=K([Te,DC,IC,MC,$C],(e,t,r,n,s)=>hi(e,"xAxis")?Zl(t,n,!1):Zl(r,s,!1)),hQ=(e,t,r,n,s)=>s,mQ=K([lh,hQ],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),pQ=K([Te,DC,IC,MC,$C,mQ,fQ,Jx],(e,t,r,n,s,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||o==null)){var{dataKey:f,data:m}=i,h;if(m!=null&&m.length>0?h=m:h=c==null?void 0:c.slice(u,d+1),h!=null)return MQ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:h})}}),gQ=["type","layout","connectNulls","needClip"],xQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function zC(e,t){if(e==null)return{};var r,n,s=yQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){gh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gh(e,t,r){return(t=vQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vQ(e){var t=bQ(e,"string");return typeof t=="symbol"?t:t+""}function bQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}var wQ=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:Wf(r,t),payload:e}]};function jQ(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:Wf(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var LC=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function _Q(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var NQ=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return LC(t,e);for(var s=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[..._Q(r,s),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function SQ(e,t){var r;if(b.isValidElement(e))r=b.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=_e("recharts-line-dot",typeof e!="boolean"?e.className:"");r=b.createElement(oC,yo({},t,{className:n}))}return r}function kQ(e,t){return e==null?!1:t?!0:e.length===1}function PQ(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:i,needClip:o}=n;if(!kQ(r,s))return null;var l=ZS(s),c=Pe(n,!1),u=Pe(s,!0),d=r.map((m,h)=>{var p=gn(gn(gn({key:"dot-".concat(h),r:3},c),u),{},{index:h,cx:m.x,cy:m.y,dataKey:i,value:m.value,payload:m.payload,points:r});return SQ(s,p)}),f={clipPath:o?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return b.createElement(Ir,yo({className:"recharts-line-dots",key:"dots"},f),d)}function Dg(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:i,showLabels:o}=e,{type:l,layout:c,connectNulls:u,needClip:d}=i,f=zC(i,gQ),m=gn(gn({},Pe(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:n,type:l,layout:c,connectNulls:u,strokeDasharray:s??i.strokeDasharray});return b.createElement(b.Fragment,null,(n==null?void 0:n.length)>1&&b.createElement(S2,yo({},m,{pathRef:r})),b.createElement(PQ,{points:n,clipPathId:t,props:i}),o&&ti.renderCallByParent(i,n))}function EQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function CQ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:h,height:p,onAnimationEnd:y,onAnimationStart:x}=r,v=s.current,g=pC(r,"recharts-line-"),[w,_]=b.useState(!1),j=b.useCallback(()=>{typeof y=="function"&&y(),_(!1)},[y]),N=b.useCallback(()=>{typeof x=="function"&&x(),_(!0)},[x]),S=EQ(n.current),k=i.current;return b.createElement(ea,{begin:u,duration:d,isActive:c,easing:f,from:{t:0},to:{t:1},onAnimationEnd:j,onAnimationStart:N,key:g},O=>{var{t:C}=O,M=pn(k,S+k),E=Math.min(M(C),S),z;if(l){var $="".concat(l).split(/[,\s]+/gim).map(D=>parseFloat(D));z=NQ(E,S,$)}else z=LC(S,E);if(v){var q=v.length/o.length,U=C===1?o:o.map((D,P)=>{var A=Math.floor(P*q);if(v[A]){var T=v[A],R=pn(T.x,D.x),F=pn(T.y,D.y);return gn(gn({},D),{},{x:R(C),y:F(C)})}if(m){var J=pn(h*2,D.x),oe=pn(p/2,D.y);return gn(gn({},D),{},{x:J(C),y:oe(C)})}return gn(gn({},D),{},{x:D.x,y:D.y})});return s.current=U,b.createElement(Dg,{props:r,points:U,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})}return C>0&&S>0&&(s.current=o,i.current=E),b.createElement(Dg,{props:r,points:o,clipPathId:t,pathRef:n,showLabels:!w,strokeDasharray:z})})}function AQ(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:s}=r,i=b.useRef(null),o=b.useRef(0),l=b.useRef(null),c=i.current;return s&&n&&n.length&&c!==n?b.createElement(CQ,{props:r,clipPathId:t,previousPointsRef:i,longestAnimatedLengthRef:o,pathRef:l}):b.createElement(Dg,{props:r,points:n,clipPathId:t,pathRef:l,showLabels:!0})}var TQ=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Ht(e.payload,t)});class OQ extends b.Component{constructor(){super(...arguments),gh(this,"id",co("recharts-line-"))}render(){var t,{hide:r,dot:n,points:s,className:i,xAxisId:o,yAxisId:l,top:c,left:u,width:d,height:f,id:m,needClip:h,layout:p}=this.props;if(r)return null;var y=_e("recharts-line",i),x=$e(m)?this.id:m,{r:v=3,strokeWidth:g=2}=(t=Pe(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=ZS(n),_=v*2+g;return b.createElement(b.Fragment,null,b.createElement(Ir,{className:y},h&&b.createElement("defs",null,b.createElement(kC,{clipPathId:x,xAxisId:o,yAxisId:l}),!w&&b.createElement("clipPath",{id:"clipPath-dots-".concat(x)},b.createElement("rect",{x:u-_/2,y:c-_/2,width:d+_,height:f+_}))),b.createElement(AQ,{props:this.props,clipPathId:x}),b.createElement(jC,{direction:p==="horizontal"?"y":"x"},b.createElement(yC,{xAxisId:o,yAxisId:l,data:s,dataPointFormatter:TQ,errorBarOffset:0},this.props.children))),b.createElement(c9,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var RC={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Po.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function DQ(e){var t=js(e,RC),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:h,yAxisId:p}=t,y=zC(t,xQ),{needClip:x}=Py(h,p),{height:v,width:g,x:w,y:_}=ky(),j=Yf(),N=or(),S=b.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),k=de(O=>pQ(O,h,p,N,S));return j!=="horizontal"&&j!=="vertical"?null:b.createElement(OQ,yo({},y,{connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:h,yAxisId:p,points:k,layout:j,height:v,width:g,left:w,top:_,needClip:x}))}function MQ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=Ht(u,o);return t==="horizontal"?{x:cw({axis:r,ticks:s,bandSize:l,entry:u,index:d}),y:$e(f)?null:n.scale(f),value:f,payload:u}:{x:$e(f)?null:r.scale(f),y:cw({axis:n,ticks:i,bandSize:l,entry:u,index:d}),value:f,payload:u}})}class xh extends b.PureComponent{render(){return b.createElement(vC,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},b.createElement(mC,{legendPayload:wQ(this.props)}),b.createElement(hC,{fn:jQ,args:this.props}),b.createElement(DQ,this.props))}}gh(xh,"displayName","Line");gh(xh,"defaultProps",RC);function c1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function u1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(r),!0).forEach(function(n){IQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IQ(e,t,r){return(t=$Q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Q(e){var t=zQ(e,"string");return typeof t=="symbol"?t:t+""}function zQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LQ={xAxis:{},yAxis:{},zAxis:{}},qC=on({name:"cartesianAxis",initialState:LQ,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=u1(u1({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:RQ,removeXAxis:qQ,addYAxis:FQ,removeYAxis:UQ,addZAxis:RK,removeZAxis:qK,updateYAxisWidth:BQ}=qC.actions,QQ=qC.reducer,VQ=["children"],WQ=["dangerouslySetInnerHTML","ticks"];function FC(e,t,r){return(t=KQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KQ(e){var t=HQ(e,"string");return typeof t=="symbol"?t:t+""}function HQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mg.apply(null,arguments)}function UC(e,t){if(e==null)return{};var r,n,s=GQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function YQ(e){var t=yt(),r=b.useMemo(()=>{var i=UC(e,VQ);return i},[e]),n=de(i=>Ns(i,r.id)),s=r===n;return b.useEffect(()=>(t(RQ(r)),()=>{t(qQ(r))}),[r,t]),s?e.children:null}var XQ=e=>{var{xAxisId:t,className:r}=e,n=de(v2),s=or(),i="xAxis",o=de(f=>Oo(f,i,t,s)),l=de(f=>yE(f,i,t,s)),c=de(f=>mE(f,t)),u=de(f=>YF(f,t));if(c==null||u==null)return null;var d=UC(e,WQ);return b.createElement(xi,Mg({},d,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:_e("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},JQ=e=>{var t,r,n,s,i;return b.createElement(YQ,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},b.createElement(XQ,e))};class cc extends b.Component{render(){return b.createElement(JQ,this.props)}}FC(cc,"displayName","XAxis");FC(cc,"defaultProps",{allowDataOverflow:Nr.allowDataOverflow,allowDecimals:Nr.allowDecimals,allowDuplicatedCategory:Nr.allowDuplicatedCategory,height:Nr.height,hide:!1,mirror:Nr.mirror,orientation:Nr.orientation,padding:Nr.padding,reversed:Nr.reversed,scale:Nr.scale,tickCount:Nr.tickCount,type:Nr.type,xAxisId:0});var ZQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},eV=["dangerouslySetInnerHTML","ticks"];function BC(e,t,r){return(t=tV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tV(e){var t=rV(e,"string");return typeof t=="symbol"?t:t+""}function rV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ig(){return Ig=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ig.apply(null,arguments)}function nV(e,t){if(e==null)return{};var r,n,s=sV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iV(e){var t=yt();return b.useEffect(()=>(t(FQ(e)),()=>{t(UQ(e))}),[e,t]),null}var aV=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=b.useRef(null),l=b.useRef(null),c=de(v2),u=or(),d=yt(),f="yAxis",m=de(v=>Oo(v,f,r,u)),h=de(v=>pE(v,r)),p=de(v=>XF(v,r)),y=de(v=>yE(v,f,r,u));if(b.useLayoutEffect(()=>{var v;if(!(s!=="auto"||!h||Sy(i)||b.isValidElement(i))){var g=o.current,w=g==null||(v=g.tickRefs)===null||v===void 0?void 0:v.current,{tickSize:_,tickMargin:j}=g.props,N=ZQ({ticks:w,label:l.current,labelGapWithTick:5,tickSize:_,tickMargin:j});Math.round(h.width)!==Math.round(N)&&d(BQ({id:r,width:N}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,h==null?void 0:h.width,h,d,i,r,s]),h==null||p==null)return null;var x=nV(e,eV);return b.createElement(xi,Ig({},x,{ref:o,labelRef:l,scale:m,x:p.x,y:p.y,width:h.width,height:h.height,className:_e("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:y}))},oV=e=>{var t,r,n,s,i;return b.createElement(b.Fragment,null,b.createElement(iV,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),b.createElement(aV,e))},lV={allowDataOverflow:Sr.allowDataOverflow,allowDecimals:Sr.allowDecimals,allowDuplicatedCategory:Sr.allowDuplicatedCategory,hide:!1,mirror:Sr.mirror,orientation:Sr.orientation,padding:Sr.padding,reversed:Sr.reversed,scale:Sr.scale,tickCount:Sr.tickCount,type:Sr.type,width:Sr.width,yAxisId:0};class uc extends b.Component{render(){return b.createElement(oV,this.props)}}BC(uc,"displayName","YAxis");BC(uc,"defaultProps",lV);var cV={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=b;function uV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dV=typeof Object.is=="function"?Object.is:uV,fV=Tc.useSyncExternalStore,hV=Tc.useRef,mV=Tc.useEffect,pV=Tc.useMemo,gV=Tc.useDebugValue;cV.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=hV(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=pV(function(){function c(h){if(!u){if(u=!0,d=h,h=n(h),s!==void 0&&o.hasValue){var p=o.value;if(s(p,h))return f=p}return f=h}if(p=f,dV(d,h))return p;var y=n(h);return s!==void 0&&s(p,y)?(d=h,p):(d=h,f=y)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,n,s]);var l=fV(e,i[0],i[1]);return mV(function(){o.hasValue=!0,o.value=l},[l]),gV(l),l};function xV(e){e()}function yV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){xV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var d1={notify(){},get:()=>[]};function vV(e,t){let r,n=d1,s=0,i=!1;function o(y){d();const x=n.subscribe(y);let v=!1;return()=>{v||(v=!0,x(),f())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=yV())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=d1)}function m(){i||(i=!0,d())}function h(){i&&(i=!1,f())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:h,getListeners:()=>n};return p}var bV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wV=bV(),jV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_V=jV(),NV=()=>wV||_V?b.useLayoutEffect:b.useEffect,SV=NV(),km=Symbol.for("react-redux-context"),Pm=typeof globalThis<"u"?globalThis:{};function kV(){if(!b.createContext)return{};const e=Pm[km]??(Pm[km]=new Map);let t=e.get(b.createContext);return t||(t=b.createContext(null),e.set(b.createContext,t)),t}var PV=kV();function EV(e){const{children:t,context:r,serverState:n,store:s}=e,i=b.useMemo(()=>{const c=vV(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=b.useMemo(()=>s.getState(),[s]);SV(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||PV;return b.createElement(l.Provider,{value:i},t)}var CV=EV,AV=(e,t)=>t,Oy=K([AV,Te,cF,At,DE,Ss,eU,Pt],iU),Dy=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},QC=rn("mouseClick"),VC=wc();VC.startListening({actionCreator:QC,effect:(e,t)=>{var r=e.payload,n=Oy(t.getState(),Dy(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(u8({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var $g=rn("mouseMove"),WC=wc();WC.startListening({actionCreator:$g,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=py(n,n.tooltip.settings.shared),i=Oy(n,Dy(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(kE({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(SE()))}});function TV(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var f1={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},KC=on({name:"rootProps",initialState:f1,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:f1.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),OV=KC.reducer,{updateOptions:DV}=KC.actions,MV=on({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),IV=MV.reducer,HC=rn("keyDown"),GC=rn("focus"),My=wc();My.startListening({actionCreator:HC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(gy(s,da(r))),l=Ss(r);if(i==="Enter"){var c=zd(r,"axis","hover",String(s.index));t.dispatch(_g({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=t8(r),d=u==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=o+f*d;if(!(l==null||m>=l.length||m<0)){var h=zd(r,"axis","hover",String(m));t.dispatch(_g({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:h}))}}}}});My.startListening({actionCreator:GC,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=zd(r,"axis","hover",String(i));t.dispatch(_g({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Br=rn("externalEvent"),YC=wc();YC.startListening({actionCreator:Br,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Q8(r),activeDataKey:zE(r),activeIndex:ra(r),activeLabel:$E(r),activeTooltipIndex:ra(r),isTooltipActive:V8(r)};e.payload.handler(n,e.payload.reactEvent)}}});var $V=K([Do],e=>e.tooltipItemPayloads),zV=K([$V,Ac,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),XC=rn("touchMove"),JC=wc();JC.startListening({actionCreator:XC,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=py(n,n.tooltip.settings.shared);if(s==="axis"){var i=Oy(n,Dy({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(kE({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(V5),d=(o=c.getAttribute(W5))!==null&&o!==void 0?o:void 0,f=zV(t.getState(),u,d);t.dispatch(NE({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var LV=Wk({brush:S7,cartesianAxis:QQ,chartData:bU,graphicalItems:MB,layout:p5,legend:nz,options:pU,polarAxis:PB,polarOptions:IV,referenceElements:D7,rootProps:OV,tooltip:d8}),RV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return q3({reducer:LV,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([VC.middleware,WC.middleware,My.middleware,YC.middleware,JC.middleware]),devTools:{serialize:{replacer:TV},name:"recharts-".concat(r)}})};function qV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=or(),i=b.useRef(null);if(s)return r;i.current==null&&(i.current=RV(t,n));var o=xx;return b.createElement(CV,{context:o,store:i.current},r)}function FV(e){var{layout:t,width:r,height:n,margin:s}=e,i=yt(),o=or();return b.useEffect(()=>{o||(i(f5(t)),i(h5({width:r,height:n})),i(d5(s)))},[i,o,t,r,n,s]),null}function UV(e){var t=yt();return b.useEffect(()=>{t(DV(e))},[t,e]),null}var BV=["children"];function QV(e,t){if(e==null)return{};var r,n,s=VV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vd(){return Vd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vd.apply(null,arguments)}var WV={width:"100%",height:"100%"},KV=b.forwardRef((e,t)=>{var r=w2(),n=j2(),s=N2();if(!jd(r)||!jd(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0,b.createElement(ek,Vd({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:WV,ref:t}),i)}),HV=e=>{var{children:t}=e,r=de(Gf);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return b.createElement(ek,{width:n,height:s,x:o,y:i},t)},h1=b.forwardRef((e,t)=>{var{children:r}=e,n=QV(e,BV),s=or();return s?b.createElement(HV,null,r):b.createElement(KV,Vd({ref:t},n),r)});function GV(){var e=yt(),[t,r]=b.useState(null),n=de(Q5);return b.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Lr(i)&&i!==n&&e(m5(i))}},[t,e,n]),r}function m1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function YV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(r),!0).forEach(function(n){XV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XV(e,t,r){return(t=JV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JV(e){var t=ZV(e,"string");return typeof t=="symbol"?t:t+""}function ZV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eW=b.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:h,onTouchMove:p,onTouchStart:y,style:x,width:v}=e,g=yt(),[w,_]=b.useState(null),[j,N]=b.useState(null);_U();var S=GV(),k=b.useCallback(F=>{S(F),typeof t=="function"&&t(F),_(F),N(F)},[S,t,_,N]),O=b.useCallback(F=>{g(QC(F)),g(Br({handler:i,reactEvent:F}))},[g,i]),C=b.useCallback(F=>{g($g(F)),g(Br({handler:u,reactEvent:F}))},[g,u]),M=b.useCallback(F=>{g(SE()),g(Br({handler:d,reactEvent:F}))},[g,d]),E=b.useCallback(F=>{g($g(F)),g(Br({handler:f,reactEvent:F}))},[g,f]),z=b.useCallback(()=>{g(GC())},[g]),$=b.useCallback(F=>{g(HC(F.key))},[g]),q=b.useCallback(F=>{g(Br({handler:o,reactEvent:F}))},[g,o]),U=b.useCallback(F=>{g(Br({handler:l,reactEvent:F}))},[g,l]),D=b.useCallback(F=>{g(Br({handler:c,reactEvent:F}))},[g,c]),P=b.useCallback(F=>{g(Br({handler:m,reactEvent:F}))},[g,m]),A=b.useCallback(F=>{g(Br({handler:y,reactEvent:F}))},[g,y]),T=b.useCallback(F=>{g(XC(F)),g(Br({handler:p,reactEvent:F}))},[g,p]),R=b.useCallback(F=>{g(Br({handler:h,reactEvent:F}))},[g,h]);return b.createElement(BE.Provider,{value:w},b.createElement(QI.Provider,{value:j},b.createElement("div",{className:_e("recharts-wrapper",n),style:YV({position:"relative",cursor:"default",width:v,height:s},x),onClick:O,onContextMenu:q,onDoubleClick:U,onFocus:z,onKeyDown:$,onMouseDown:D,onMouseEnter:C,onMouseLeave:M,onMouseMove:E,onMouseUp:P,onTouchEnd:R,onTouchMove:T,onTouchStart:A,ref:k},r)))}),tW=["children","className","width","height","style","compact","title","desc"];function rW(e,t){if(e==null)return{};var r,n,s=nW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sW=b.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:u}=e,d=rW(e,tW),f=Pe(d,!1);return l?b.createElement(h1,{otherAttributes:f,title:c,desc:u},r):b.createElement(eW,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},b.createElement(h1,{otherAttributes:f,title:c,desc:u,ref:t},b.createElement(I7,null,r)))}),iW=["width","height"];function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zg.apply(null,arguments)}function aW(e,t){if(e==null)return{};var r,n,s=oW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lW={top:5,right:5,bottom:5,left:5},cW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:lW,reverseStackOrder:!1,syncMethod:"index"},ZC=b.forwardRef(function(t,r){var n,s=js(t.categoricalChartProps,cW),{width:i,height:o}=s,l=aW(s,iW);if(!jd(i)||!jd(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return b.createElement(qV,{preloadedState:{options:h},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},b.createElement(_7,{chartData:m.data}),b.createElement(FV,{width:i,height:o,layout:s.layout,margin:s.margin}),b.createElement(UV,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),b.createElement(sW,zg({},l,{width:i,height:o,ref:r})))}),uW=["axis"],eA=b.forwardRef((e,t)=>b.createElement(ZC,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:uW,tooltipPayloadSearcher:VE,categoricalChartProps:e,ref:t})),dW=["axis","item"],fW=b.forwardRef((e,t)=>b.createElement(ZC,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:dW,tooltipPayloadSearcher:VE,categoricalChartProps:e,ref:t}));function hW({data:e,loading:t,error:r,showIndividual:n,timeframe:s="weekly",onTimeframeChange:i}){const[o,l]=b.useState("score"),c=g=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const w=e.filter(O=>{switch(g){case"score":return O.totalPossiblePoints>0;case"quizzes":return O.totalQuizzesCompleted>0;case"time":return O.totalTimeSpentMinutes>0;default:return!1}});if(w.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const _=w[w.length-1],j=w[w.length-2];let N,S;switch(g){case"score":N=_.averageScore,S=j.averageScore;break;case"quizzes":N=_.totalQuizzesCompleted,S=j.totalQuizzesCompleted;break;case"time":N=_.totalTimeSpentMinutes,S=j.totalTimeSpentMinutes;break}if(S===0)return{direction:"stable",value:0,color:"text-gray-600"};const k=(N-S)/S*100;return Math.abs(k)<5?{direction:"stable",value:k,color:"text-gray-600"}:k>0?{direction:"up",value:k,color:"text-green-600"}:{direction:"down",value:k,color:"text-red-600"}},u=g=>{switch(g){case"up":return a.jsx(jr,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(jS,{className:"h-4 w-4"})}},d=({active:g,payload:w,label:_})=>{var j;if(g&&w&&w.length){const N=w[0].payload;return a.jsxs("div",{className:"bg-white p-4 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900 mb-2",children:_}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(j=N.averageScore)==null?void 0:j.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",N.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Questions: ",N.totalQuestionsAnswered]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Time: ",It(N.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Correct: ",N.correctAnswers," | Incorrect: ",N.incorrectAnswers]})]})]})}return null},m=(()=>{switch(o){case"score":return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]};case"quizzes":return{dataKey:"totalQuizzesCompleted",color:"#10b981",yAxisFormatter:g=>g.toString(),domain:[0,"dataMax"]};case"time":return{dataKey:"totalTimeSpentMinutes",color:"#8b5cf6",yAxisFormatter:g=>It(g),domain:[0,"dataMax"]};default:return{dataKey:"averageScore",color:"#3b82f6",yAxisFormatter:g=>`${g}%`,domain:[0,100]}}})(),h=e.reduce((g,w)=>g+w.totalQuizzesCompleted,0),p=e.reduce((g,w)=>g+w.totalQuestionsAnswered,0),y=e.reduce((g,w)=>g+w.totalTimeSpentMinutes,0),x=e.reduce((g,w)=>g+w.totalPossiblePoints,0)>0?e.reduce((g,w)=>g+w.totalPointsEarned,0)/e.reduce((g,w)=>g+w.totalPossiblePoints,0)*100:0,v=c(o);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Progression Report"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Progression"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance trends over time":"Team performance trends over time"})]})]}),i&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>i("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${s==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing progression data..."})]}):e.length===0||h===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Progression Data"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual needs to complete more quizzes to see progression trends.":"The team needs to complete more quizzes to see progression trends."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[x.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Overall Score"})]}),a.jsx(St,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:h}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(it,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(it,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:It(y)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ie,{className:"h-8 w-8 text-orange-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Average Score"}),a.jsx("button",{onClick:()=>l("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>l("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${v.color}`,children:[u(v.direction),a.jsx("span",{className:"font-medium",children:v.direction==="up"?"Improving":v.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[o==="score"&&"Average Score",o==="quizzes"&&"Quiz Activity",o==="time"&&"Study Time",Math.abs(v.value)>0&&a.jsxs("span",{className:v.color,children:[" ","(",v.value>0?"+":"",v.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[o==="score"&&"Average Score Trend",o==="quizzes"&&"Quiz Activity Trend",o==="time"&&"Study Time Trend"]}),e.length===0?a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"No Data Available"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Complete more quizzes to see progression trends"})]})}):a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(eA,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(Qd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280",angle:-45,textAnchor:"end",height:60}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:m.yAxisFormatter,domain:m.domain}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:m.dataKey,stroke:m.color,strokeWidth:3,dot:{fill:m.color,strokeWidth:2,r:5},activeDot:{r:7,stroke:m.color,strokeWidth:2},connectNulls:!1})]})})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((g,w)=>{const _=g.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${w>0?"border-t border-gray-100":""} ${_?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.periodStart.toLocaleDateString()," - ",g.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:_?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[g.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[g.totalQuizzesCompleted," quiz",g.totalQuizzesCompleted!==1?"es":"",", ",g.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[It(g.totalTimeSpentMinutes)," study time"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No activity"})})]})},g.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(jr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Progression Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Track your progress toward the 90% pass rate goal"}),a.jsx("li",{children:"• Identify periods of high activity and strong performance"}),a.jsx("li",{children:"• Use trends to adjust study schedules and focus areas"}),a.jsx("li",{children:"• Consistent practice leads to better retention and scores"})]})]})]})})]})})]})}function p1(){var m,h;const{selectedMemberId:e,progressionTimeframe:t,setProgressionTimeframe:r,analyticsData:n,analyticsLoading:s,analyticsError:i,progressionData:o,progressionLoading:l,progressionError:c}=fi();if(s)return a.jsx(Lt,{text:"Loading overview data...",className:"py-8"});if(i)return a.jsx(Fe,{type:"error",message:i});const u=[{name:"Quizzes Completed",value:((m=n==null?void 0:n.totalQuizzesCompleted)==null?void 0:m.toLocaleString())||"0",icon:ke,iconColor:"text-indigo-600"},{name:"Questions Answered",value:((h=n==null?void 0:n.totalQuestionsAnswered)==null?void 0:h.toLocaleString())||"0",icon:it,iconColor:"text-green-600"},{name:"Average Score",value:n!=null&&n.averageScore?`${n.averageScore.toFixed(1)}%`:"0%",icon:pr,iconColor:"text-blue-600"},{name:"Total Study Time",value:It((n==null?void 0:n.totalTimeSpentMinutes)||0),icon:Ie,iconColor:"text-purple-600"},{name:"Study Streak",value:n!=null&&n.studyStreak?`${n.studyStreak} day${n.studyStreak===1?"":"s"}`:"0 days",icon:St,iconColor:"text-yellow-600"}],d=({active:p,payload:y,label:x})=>{var v;if(p&&y&&y.length){const g=y[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-gray-900",children:x}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-blue-600",children:["Score: ",(v=g.averageScore)==null?void 0:v.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-green-600",children:["Quizzes: ",g.totalQuizzesCompleted]}),a.jsxs("p",{className:"text-sm text-purple-600",children:["Time: ",It(g.totalTimeSpentMinutes)]}),a.jsxs("p",{className:"text-sm text-orange-600",children:["Questions: ",g.totalQuestionsAnswered]})]})]})}return null},f=(p,y)=>{switch(y){case"averageScore":return`${p}%`;case"totalTimeSpentMinutes":return It(p);default:return p.toString()}};return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6",children:u.map(p=>a.jsx(Ke,{title:p.name,value:p.value,icon:p.icon,iconColor:p.iconColor},p.name))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:e===void 0?"Team Performance Trends":"Performance Overview"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading chart data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(jr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load chart data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(eA,{data:o,children:[a.jsx(Qd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:p=>f(p,"averageScore")}),a.jsx(kg,{content:a.jsx(d,{})}),a.jsx(xh,{type:"monotone",dataKey:"averageScore",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(jr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No progression data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see trends"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Activity Distribution"}),l?a.jsx("div",{className:"h-64 flex items-center justify-center",children:a.jsx(Lt,{text:"Loading activity data..."})}):c?a.jsx("div",{className:"h-64 bg-red-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("p",{className:"text-sm",children:"Failed to load activity data"})]})}):o&&o.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pg,{width:"100%",height:"100%",children:a.jsxs(fW,{data:o,children:[a.jsx(Qd,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),a.jsx(cc,{dataKey:"period",tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(uc,{tick:{fontSize:12},stroke:"#6b7280"}),a.jsx(kg,{formatter:(p,y)=>[y==="totalQuizzesCompleted"?`${p} quizzes`:`${p} questions`,y==="totalQuizzesCompleted"?"Quizzes Completed":"Questions Answered"],labelStyle:{color:"#374151"},contentStyle:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"8px"}}),a.jsx(Fd,{dataKey:"totalQuizzesCompleted",fill:"#10b981",name:"Quizzes",radius:[2,2,0,0]}),a.jsx(Fd,{dataKey:"totalQuestionsAnswered",fill:"#3b82f6",name:"Questions",radius:[2,2,0,0]})]})})}):a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No activity data available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Complete more quizzes to see activity distribution"})]})})]})]}),a.jsx(hW,{data:o,loading:l,error:c,showIndividual:e!==void 0,timeframe:t,onTimeframeChange:r})]})}function kn({isOpen:e,onClose:t,title:r,children:n,footer:s,maxWidth:i="md",themeClasses:o,isFullScreen:l=!1}){var m;if(!e)return null;const c={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","4xl":"max-w-4xl"},u=(o==null?void 0:o.card)==="bg-transparent"?(m=o==null?void 0:o.text)!=null&&m.includes("text-white")?"bg-gray-900":"bg-white":(o==null?void 0:o.card)||"bg-white",d=(o==null?void 0:o.text)||"text-gray-900",f=(o==null?void 0:o.border)||"border-gray-200";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:`${u} rounded-xl p-6 w-full ${c[i]} max-h-[90vh] overflow-y-auto ${l?"":"border "+f}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:`text-lg font-semibold ${d}`,children:r}),a.jsx("button",{onClick:t,className:`${(o==null?void 0:o.textSecondary)||"text-gray-400"} hover:${(o==null?void 0:o.text)||"text-gray-600"} transition-colors duration-200`,children:a.jsx(Ln,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:n}),s&&a.jsx("div",{className:"flex items-center justify-end space-x-3",children:s})]})})}function tA({isOpen:e,onClose:t,quizSessionId:r,quizTitle:n}){const[s,i]=b.useState([]),[o,l]=b.useState(!1),[c,u]=b.useState(null),[d,f]=b.useState("all");b.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{if(r){l(!0),u(null);try{console.log("🔍 Fetching question details for quiz session:",r);const{data:x,error:v}=await V.from("quiz_question_logs").select(`
          id,
          question_id,
          points_earned,
          total_points_possible,
          time_spent,
          is_correct,
          answered_at,
          questions!inner (
            book_of_bible,
            chapter,
            question,
            answer,
            points,
            tier
          )
        `).eq("quiz_session_id",r).order("answered_at",{ascending:!0});if(v)throw console.error("❌ Error fetching question details:",v),v;console.log("✅ Question details fetched:",(x==null?void 0:x.length)||0,"questions"),i(x||[])}catch(x){console.error("💥 Error fetching question details:",x),u(x.message||"Failed to load question details")}finally{l(!1)}}},h=s.filter(x=>{switch(d){case"correct":return x.is_correct;case"incorrect":return!x.is_correct;default:return!0}}),p={total:s.length,correct:s.filter(x=>x.is_correct).length,incorrect:s.filter(x=>!x.is_correct).length,totalPoints:s.reduce((x,v)=>x+v.points_earned,0),maxPoints:s.reduce((x,v)=>x+v.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((x,v)=>x+v.time_spent,0)/s.length):0},y=p.total>0?Math.round(p.correct/p.total*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:`Quiz Details${n?`: ${n}`:""}`,maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:o?a.jsx(Lt,{text:"Loading question details...",className:"py-8"}):c?a.jsx(Fe,{type:"error",message:c}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p.total}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[y,"%"]}),a.jsx("div",{className:"text-sm text-green-700",children:"Accuracy"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:p.totalPoints}),a.jsx("div",{className:"text-sm text-purple-700",children:"Points Earned"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:_l(p.averageTime)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Avg Time"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(U0,{className:"h-4 w-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"})]}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>f("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",p.total,")"]}),a.jsxs("button",{onClick:()=>f("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",p.correct,")"]}),a.jsxs("button",{onClick:()=>f("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${d==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",p.incorrect,")"]})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",h.length," of ",p.total," questions"]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(qn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Questions Found"}),a.jsx("p",{className:"text-gray-600",children:d==="all"?"No question details available for this quiz.":`No ${d} questions found.`})]}):h.map((x,v)=>a.jsxs("div",{className:`border rounded-lg p-4 ${x.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{children:x.question?a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[a.jsx(ke,{className:"h-4 w-4"}),a.jsxs("span",{children:[x.question.book_of_bible," Chapter ",x.question.chapter]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"capitalize",children:[x.question.tier," tier"]})]}):a.jsx("div",{className:"text-sm text-gray-500 italic",children:"Question details not available"})}),a.jsx("div",{children:x.is_correct?a.jsx(_t,{className:"h-5 w-5 text-green-600"}):a.jsx(Xn,{className:"h-5 w-5 text-red-600"})})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(pr,{className:"h-4 w-4 text-purple-600"}),a.jsxs("span",{className:"font-medium",children:[x.points_earned,"/",x.total_points_possible," pts"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{children:_l(x.time_spent)})]})]}),x.question?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Question:"}),a.jsx("div",{className:"text-gray-900",children:x.question.question})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Correct Answer:"}),a.jsx("div",{className:"text-gray-900",children:x.question.answer})]}),!x.is_correct&&a.jsxs("div",{className:"bg-red-100 border border-red-200 rounded p-2",children:[a.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Result:"}),a.jsxs("div",{className:"text-red-800",children:["Incorrect answer - ",x.points_earned," of ",x.total_points_possible," points earned"]})]})]}):a.jsx("div",{className:"bg-gray-100 border border-gray-200 rounded p-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Question details are not available for this entry. This may occur if the question was deleted after the quiz was completed."})})]},x.id))})]})})}function mW({data:e,loading:t,error:r,updateLocalQuizHistoryEntry:n,refreshData:s}){const[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(""),[f,m]=b.useState(null),[h,p]=b.useState(null),{updateQuizApprovalStatus:y,deleteQuizSession:x}=di(),{user:v}=ge(),g=S=>{c(S.id),d(S.title),o(!0)},w=async(S,k)=>{if(!v||v.role!=="admin"&&v.teamRole!=="owner"){alert("You do not have permission to change the approval status.");return}m(S);try{n(S,{approval_status:k}),await y(S,k)}catch(O){console.error("Failed to update quiz approval status:",O);const C=e.find(M=>M.id===S);C&&n(S,{approval_status:C.approval_status}),alert("Failed to update status. Please try again.")}finally{m(null)}},_=async(S,k)=>{if(!v||v.teamRole!=="owner"){alert("You do not have permission to delete quiz sessions.");return}if(window.confirm(`Are you sure you want to delete the quiz "${k}"?

This action will:
• Permanently delete the quiz session and all its data
• Recalculate the user's XP, level, and study streak
• Remove any achievements that are no longer valid

This action cannot be undone.`)){p(S);try{await x(S),s&&await s(),console.log("✅ Quiz session deleted successfully")}catch(C){console.error("Failed to delete quiz session:",C),alert("Failed to delete quiz session. Please try again.")}finally{p(null)}}},j=S=>{switch(S){case"approved":return"text-green-600 bg-green-50 border-green-200";case"rejected":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},N=[{key:"title",header:"Quiz Title",render:S=>a.jsx("div",{className:"font-medium text-gray-900",children:S.title})},{key:"type",header:"Type",render:S=>a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:PS(S.type)})})},{key:"start_time",header:"Start Time",render:S=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(S.created_at).toLocaleString()})},{key:"end_time",header:"End Time",render:S=>a.jsx("span",{className:"text-sm text-gray-600",children:new Date(S.completed_at).toLocaleString()})},{key:"score",header:"Score",render:S=>{const k=S.max_points>0?S.total_points/S.max_points*100:0,O=k>=90?"text-green-600":k>=70?"text-blue-600":"text-red-600";return a.jsxs("div",{className:`font-bold text-lg ${O}`,children:[k.toFixed(1),"%"]})},className:"text-center",headerClassName:"text-center"},{key:"questions_count",header:"Questions",render:S=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:S.questions_count})]})}),className:"text-center",headerClassName:"text-center"},{key:"estimated_minutes",header:"Time",render:S=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(Math.round(S.total_actual_time_spent_seconds/60))})]})}),className:"text-center",headerClassName:"text-center"},{key:"actions",header:"Actions",render:S=>{const k=v&&(v.role==="admin"||v.teamRole==="owner"),O=v&&v.teamRole==="owner",C=S.approval_status||"approved";return a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[k?a.jsxs("select",{value:C,onChange:M=>{M.stopPropagation(),w(S.id,M.target.value)},disabled:f===S.id,className:`px-3 py-1 rounded-lg text-sm font-medium border transition-colors duration-200 ${j(C)} ${f===S.id?"opacity-50 cursor-not-allowed":"cursor-pointer hover:opacity-80"}`,onClick:M=>M.stopPropagation(),children:[a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]}):a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(C)}`,children:[C==="approved"?a.jsx(_t,{className:"h-3 w-3 mr-1"}):a.jsx(Xn,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"capitalize",children:C})]}),O&&a.jsx("button",{onClick:M=>{M.stopPropagation(),_(S.id,S.title)},disabled:h===S.id,className:"text-red-600 hover:text-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete quiz session",children:h===S.id?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):a.jsx(si,{className:"h-4 w-4"})})]})},className:"whitespace-nowrap",headerClassName:"text-left"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Quiz History"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Completed Quizzes"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of quizzes completed by this team member."})]})]})}),a.jsx(sn,{columns:N,data:e,loading:t,onRowClick:g,emptyState:{icon:ke,title:"No Quizzes Completed",description:"This team member has not completed any quizzes in the selected date range."}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Showing latest completed quizzes. Click on a row to view detailed results."})}),a.jsx(tA,{isOpen:i,onClose:()=>{o(!1),c(null),d("")},quizSessionId:l,quizTitle:u})]})}function pW(){const{selectedMemberId:e,startDate:t,endDate:r}=fi(),{data:n,loading:s,error:i,refreshData:o,updateLocalQuizHistoryEntry:l}=vI({userId:e,startDate:t,endDate:r});return a.jsx(mW,{data:n,loading:s,error:i,updateLocalQuizHistoryEntry:l,refreshData:o})}function gW({data:e,loading:t,error:r}){const[n,s]=b.useState(!1),[i,o]=b.useState(null),[l,c]=b.useState(""),u=p=>{p.completed&&p.quiz_session_id&&(o(p.quiz_session_id),c(`Study Assignment - ${oo(p.study_items)}`),s(!0))},d=p=>{const y=m(p)?"bg-orange-50 border-l-4 border-orange-400":"";return p.completed&&p.quiz_session_id?`${y} cursor-pointer hover:bg-gray-50`.trim():y},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",m=p=>{if(!p.completed||!p.completed_at)return!1;const y=new Date(p.date);return y.setHours(23,59,59,999),new Date(p.completed_at)>y},h=[{key:"study_items",header:"Study Items",render:p=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900",children:oo(p.study_items)}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[p.study_items.length," item",p.study_items.length!==1?"s":""]})]})},{key:"date",header:"Date",render:p=>a.jsx("div",{className:"text-sm text-gray-900",children:ao(p.date,{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),className:"whitespace-nowrap"},{key:"completed_at",header:"Completed",render:p=>a.jsx("div",{className:"text-sm text-gray-600",children:p.completed_at?a.jsxs("div",{className:m(p)?"text-orange-700 font-medium":"",children:[ao(new Date(p.completed_at),{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),m(p)&&a.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"(Late completion)"})]}):a.jsx("span",{className:"text-gray-400",children:"—"})}),className:"whitespace-nowrap"},{key:"score",header:"Score",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_points_earned!==void 0&&p.max_points_possible!==void 0?a.jsx("div",{className:`font-bold text-lg ${f(p.max_points_possible>0?p.total_points_earned/p.max_points_possible*100:0)}`,children:p.max_points_possible>0?`${Math.round(p.total_points_earned/p.max_points_possible*100)}%`:"0%"}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"questions",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_questions_answered!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.total_questions_answered})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"time",header:"Time",render:p=>a.jsx("div",{className:"text-center",children:p.completed&&p.total_time_spent_minutes!==void 0?a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.total_time_spent_minutes,"m"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"—"})}),className:"text-center"},{key:"completed",header:"Status",render:p=>a.jsx("div",{className:"flex items-center space-x-2",children:p.completed?a.jsxs("div",{className:`flex items-center space-x-2 ${m(p)?"text-orange-700":""}`,children:[a.jsx(_t,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:`text-sm font-medium ${m(p)?"text-orange-700":"text-green-700"}`,children:m(p)?"Completed Late":"Completed"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ie,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Pending"})]})}),className:"whitespace-nowrap"}];return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Study Schedule"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Yt,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Study Schedule Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Detailed breakdown of study assignments and completion status."})]})]})}),a.jsx(sn,{columns:h,data:e,loading:t,onRowClick:u,getRowClassName:d,emptyState:{icon:Yt,title:"No Study Assignments",description:"No study assignments found for the selected date range. Study assignments are created through the Study Schedule feature."}}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Assignments"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(p=>p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(p=>!p.completed).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click on completed assignments to view detailed quiz results."})})]}),a.jsx(tA,{isOpen:n,onClose:()=>{s(!1),o(null),c("")},quizSessionId:i,quizTitle:l})]})}function xW(){const{studyScheduleData:e,studyScheduleLoading:t,studyScheduleError:r}=fi();return a.jsx(gW,{data:e,loading:t,error:r})}function yW({data:e,loading:t,error:r,showIndividual:n}){const s=l=>{switch(l){case"book":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"chapter":return a.jsx(it,{className:"h-4 w-4 text-green-600"});case"tier":return a.jsx(Dp,{className:"h-4 w-4 text-purple-600"});default:return a.jsx(qn,{className:"h-4 w-4 text-gray-600"})}},i=l=>l>=80?"text-yellow-600":l>=70?"text-orange-600":"text-red-600",o=l=>l>=80?"bg-yellow-50 border-yellow-200":l>=70?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200";return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Knowledge Gaps"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Q0,{className:"h-6 w-6 text-red-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Knowledge Gaps Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Topics where this individual struggles most (below 90% accuracy)":"Topics where the team struggles most (below 90% accuracy)"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing knowledge gaps..."})]}):e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(it,{className:"h-8 w-8 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Knowledge Gaps Found"}),a.jsx("p",{className:"text-gray-600",children:n?"This individual is performing well across all topics (90%+ accuracy)!":"The team is performing well across all topics (90%+ accuracy)!"})]}):a.jsxs("div",{className:"space-y-4",children:[e.map((l,c)=>a.jsxs("div",{className:`border rounded-lg p-4 transition-all duration-200 hover:shadow-md ${o(l.averageScore)}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-lg font-bold text-gray-500",children:["#",c+1]}),s(l.type)]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:l.topic}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[a.jsxs("span",{children:[l.totalAttempts," attempts"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[l.correctAnswers," correct"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[l.incorrectAnswers," incorrect"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-2xl font-bold ${i(l.averageScore)}`,children:[l.averageScore.toFixed(1),"%"]}),a.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Accuracy"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${l.averageScore>=80?"bg-yellow-500":l.averageScore>=70?"bg-orange-500":"bg-red-500"}`,style:{width:`${Math.max(l.averageScore,5)}%`}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"0%"}),a.jsx("span",{children:"100%"})]})]}),a.jsxs("div",{className:"mt-3 flex items-start space-x-2",children:[a.jsx(F0,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Recommendation:"})," Focus additional study time on ",l.topic.toLowerCase(),l.type==="chapter"&&l.book&&l.chapter?` by reviewing ${l.book} chapter ${l.chapter} content and practicing more questions from this section.`:l.type==="book"&&l.book?` by reviewing ${l.book} content and practicing more questions from this book.`:l.type==="tier"&&l.tier?` by practicing more ${l.tier} level questions to build confidence.`:" to improve performance in this area."]})]})]},`${l.type}-${l.topic}`)),e.length>0&&a.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Dp,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Study Tips:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Focus on the topics with the lowest scores first"}),a.jsx("li",{children:"• Create custom quizzes targeting these specific areas"}),a.jsx("li",{children:"• Review source material for chapters with low performance"}),a.jsx("li",{children:"• Practice regularly to improve retention and understanding"})]})]})]})})]})})]})}function vW(){const{selectedMemberId:e,knowledgeGapsData:t,knowledgeGapsLoading:r,knowledgeGapsError:n}=fi();return a.jsx(yW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function yr({type:e,value:t,showIcon:r=!1,size:n="sm"}){const s=()=>{switch(e){case"role":switch(t){case"admin":return"bg-purple-100 text-purple-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}case"status":switch(t){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}case"tier":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"plan":switch(t){case"free":return"bg-green-100 text-green-800";case"pro":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}case"teamRole":switch(t){case"owner":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";case"member":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}default:return"bg-gray-100 text-gray-800"}},i=()=>{if(!r)return null;switch(e){case"role":return t==="admin"?a.jsx(_n,{className:"h-3 w-3"}):a.jsx(He,{className:"h-3 w-3"});case"status":switch(t){case"active":return a.jsx(_t,{className:"h-3 w-3"});case"pending":return a.jsx(Ie,{className:"h-3 w-3"});case"suspended":return a.jsx(Xn,{className:"h-3 w-3"});default:return a.jsx(tn,{className:"h-3 w-3"})}case"tier":switch(t){case"enterprise":return a.jsx(fs,{className:"h-3 w-3"});case"pro":return a.jsx(Gi,{className:"h-3 w-3"});default:return null}case"teamRole":switch(t){case"owner":return a.jsx(fs,{className:"h-3 w-3"});case"admin":return a.jsx(_n,{className:"h-3 w-3"});default:return a.jsx(He,{className:"h-3 w-3"})}default:return null}},o=n==="md"?"px-3 py-1 text-sm":"px-2 py-1 text-xs",l=i();return a.jsxs("span",{className:`inline-flex items-center ${o} font-semibold rounded-full ${s()}`,children:[l&&a.jsx("span",{className:"mr-1",children:l}),a.jsx("span",{className:"capitalize",children:t})]})}function bW({isOpen:e,onClose:t,question:r,teamId:n}){const[s,i]=b.useState([]),[o,l]=b.useState("all"),c=async()=>{if(!(!r||!n))try{console.log("🔍 Fetching all attempts for question:",r.question_id,"in team:",n);const{data:y,error:x}=await V.rpc("get_question_attempts_with_user_details",{p_question_id:r.question_id,p_team_id:n});if(x){console.error("❌ Error fetching all attempts:",x),console.warn("⚠️ Team member attempt details not available, continuing without them"),i([]);return}console.log("✅ All attempts fetched:",(y==null?void 0:y.length)||0,"attempts"),i(y||[])}catch(y){console.error("💥 Error fetching all attempts:",y),i([])}};if(b.useEffect(()=>{e&&r&&n&&c()},[e,r,n]),!r)return null;const u=y=>y>=90?"text-green-600":y>=50?"text-yellow-600":"text-red-600",d=y=>y>=90?"bg-green-50 border-green-200":y>=50?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200",f=s.filter(y=>{switch(o){case"correct":return y.is_correct;case"incorrect":return!y.is_correct;default:return!0}}),m={total:s.length,correct:s.filter(y=>y.is_correct).length,incorrect:s.filter(y=>!y.is_correct).length,totalPoints:s.reduce((y,x)=>y+x.points_earned,0),maxPoints:s.reduce((y,x)=>y+x.total_points_possible,0),averageTime:s.length>0?Math.round(s.reduce((y,x)=>y+x.time_spent,0)/s.length):0},h=y=>y>=90?"Easy":y>=70?"Moderate":y>=50?"Challenging":"Difficult",p=r.total_points_possible>0?Math.round(r.total_points_earned/r.total_points_possible*100):0;return a.jsx(kn,{isOpen:e,onClose:t,title:"Question Performance Details",maxWidth:"4xl",footer:a.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:`border rounded-lg p-4 ${d(r.accuracy_rate)}`,children:a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[r.book_of_bible," Chapter ",r.chapter]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsx(yr,{type:"tier",value:r.tier,showIcon:!0}),a.jsx("span",{className:"text-sm text-gray-600",children:"•"}),a.jsxs("span",{className:"text-sm text-gray-600",children:[r.points," points"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:`text-3xl font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h(r.accuracy_rate)})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:r.total_attempts}),a.jsxs("div",{className:"text-sm text-blue-700 flex items-center justify-center space-x-1",children:[a.jsx(He,{className:"h-4 w-4"}),a.jsx("span",{children:"Total Attempts"})]})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:r.correct_attempts}),a.jsxs("div",{className:"text-sm text-green-700 flex items-center justify-center space-x-1",children:[a.jsx(_t,{className:"h-4 w-4"}),a.jsx("span",{children:"Correct"})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-900",children:r.incorrect_attempts}),a.jsxs("div",{className:"text-sm text-red-700 flex items-center justify-center space-x-1",children:[a.jsx(Xn,{className:"h-4 w-4"}),a.jsx("span",{children:"Incorrect"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:_l(r.average_time_spent)}),a.jsxs("div",{className:"text-sm text-purple-700 flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{children:"Avg Time"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(it,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{children:"Question"})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.question_text})})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center space-x-2",children:[a.jsx(_t,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{children:"Correct Answer"})]}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsx("p",{className:"text-gray-900",children:r.answer_text})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center space-x-2",children:[a.jsx(sr,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{children:"Performance Analysis"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Success Rate"}),a.jsxs("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:[r.accuracy_rate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Points Efficiency"}),a.jsxs("span",{className:`font-bold ${u(p)}`,children:[p,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Difficulty Level"}),a.jsx("span",{className:`font-bold ${u(r.accuracy_rate)}`,children:h(r.accuracy_rate)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Average Response Time"}),a.jsx("span",{className:"font-bold text-gray-900",children:_l(r.average_time_spent)})]})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("h5",{className:"font-medium text-blue-900 mb-2 flex items-center space-x-2",children:[a.jsx(jr,{className:"h-4 w-4"}),a.jsx("span",{children:"Recommendations"})]}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[r.accuracy_rate<50&&a.jsx("p",{children:"• Consider reviewing this question for clarity or difficulty"}),r.accuracy_rate>=50&&r.accuracy_rate<70&&a.jsx("p",{children:"• This question provides good challenge - consider similar difficulty"}),r.accuracy_rate>=90&&a.jsx("p",{children:"• This question may be too easy - consider increasing difficulty"}),r.average_time_spent>60&&a.jsx("p",{children:"• Users take longer than expected - question may need simplification"}),r.total_attempts<10&&a.jsx("p",{children:"• Limited data available - more attempts needed for reliable analysis"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Distribution"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:a.jsx("div",{className:"bg-green-500 h-4 rounded-l-full transition-all duration-300",style:{width:`${r.correct_attempts/r.total_attempts*100}%`}})}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[a.jsxs("span",{children:[r.correct_attempts," Correct"]}),a.jsxs("span",{children:[r.total_attempts," Total Attempts"]}),a.jsxs("span",{children:[r.incorrect_attempts," Incorrect"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center space-x-2",children:[a.jsx(He,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Team Member Attempts"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>l("all"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",m.total,")"]}),a.jsxs("button",{onClick:()=>l("correct"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="correct"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Correct (",m.correct,")"]}),a.jsxs("button",{onClick:()=>l("incorrect"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${o==="incorrect"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Incorrect (",m.incorrect,")"]})]})]}),s.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Attempts Found"}),a.jsx("p",{className:"text-gray-600",children:"No team member attempts available for this question."})]}):f.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["No ",o.charAt(0).toUpperCase()+o.slice(1)," Attempts"]}),a.jsxs("p",{className:"text-gray-600",children:["No ",o," attempts found for this question."]})]}):a.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:f.map((y,x)=>a.jsxs("div",{className:`border rounded-lg p-4 ${y.is_correct?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:y.user_name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.user_name}),a.jsx("div",{className:"text-sm text-gray-600",children:Lp(y.answered_at)})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-sm text-orange-600",children:_l(y.time_spent)})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.is_correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_correct?"Correct":"Incorrect"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Points: ",y.points_earned," / ",y.total_points_possible]})]},`${y.user_id}-${y.answered_at}`))})]})]})})}function wW({data:e,loading:t,error:r,showIndividual:n,user:s}){const[i,o]=b.useState("accuracy_rate"),[l,c]=b.useState("asc"),[u,d]=b.useState(!1),[f,m]=b.useState(null),h=ne.useMemo(()=>[...e].sort((_,j)=>{const N=_[i],S=j[i];return typeof N=="number"&&typeof S=="number"?l==="desc"?S-N:N-S:typeof N=="string"&&typeof S=="string"?l==="desc"?S.localeCompare(N):N.localeCompare(S):0}),[e,i,l]),p=_=>{i===_?c(l==="desc"?"asc":"desc"):(o(_),c(_==="accuracy_rate"?"asc":"desc"))},y=_=>{m(_),d(!0)},x=_=>_>=90?"text-green-600":_>=70?"text-blue-600":_>=50?"text-yellow-600":"text-red-600",v=_=>{if(_<60)return`${_}s`;const j=Math.floor(_/60),N=_%60;return`${j}:${N.toString().padStart(2,"0")}`},w=[{key:"question_text",header:"Question",render:_=>a.jsxs("div",{className:"max-w-xs",children:[a.jsx("div",{className:"font-medium text-gray-900 line-clamp-2 mb-1",children:_.question_text}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.points," point",_.points!==1?"s":""]})]})},{key:"book_chapter",header:"Book & Chapter",render:_=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:_.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",_.chapter]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:_=>a.jsx(yr,{type:"tier",value:_.tier,showIcon:!0}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:_=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${x(_.accuracy_rate)}`,children:[_.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.correct_attempts,"/",_.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:_.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:_=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:v(_.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:_=>{const j=_.total_points_possible>0?Math.round(_.total_points_earned/_.total_points_possible*100):0;return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${x(j)}`,children:[j,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[_.total_points_earned,"/",_.total_points_possible]})]})},className:"text-center",headerClassName:"text-center"}].map(_=>({..._,header:_.sortable?a.jsxs("button",{onClick:()=>p(_.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:_.header}),i===_.key&&a.jsx(jr,{className:`h-3 w-3 transition-transform duration-200 ${l==="desc"?"rotate-180":""}`})]}):_.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Question Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"h-6 w-6 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Question Performance Analysis"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual question performance and difficulty analysis":"Team-wide question performance and difficulty analysis"})]})]})}),a.jsx(sn,{columns:w,data:h,loading:t,onRowClick:y,emptyState:{icon:sr,title:"No Question Data",description:"No question performance data available yet. Complete some quizzes to see question analysis!"},getRowClassName:_=>_.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":_.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions Analyzed"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(_=>_.accuracy_rate<50).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Difficult (<50%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(_=>_.accuracy_rate>=50&&_.accuracy_rate<70).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Moderate (50-70%)"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(_=>_.accuracy_rate>=90).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Easy (>90%)"})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Questions with low accuracy rates may need review"})})]}),a.jsx(bW,{isOpen:u,onClose:()=>{d(!1),m(null)},question:f,teamId:s==null?void 0:s.teamId})]})}function jW(){const{selectedMemberId:e,user:t,questionPerformanceData:r,questionPerformanceLoading:n,questionPerformanceError:s}=fi();return a.jsx(wW,{data:r,loading:n,error:s,showIndividual:e!==void 0,user:t})}function _W({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("date"),[o,l]=b.useState("desc"),c=ne.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:_ instanceof Date&&j instanceof Date?o==="desc"?j.getTime()-_.getTime():_.getTime()-j.getTime():typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l("desc"))},d=(g,w)=>g===0?{level:"No Activity",color:"text-gray-500"}:g>=3||w>=50?{level:"High",color:"text-green-600"}:g>=2||w>=20?{level:"Medium",color:"text-blue-600"}:{level:"Low",color:"text-yellow-600"},m=[{key:"date",header:"Date",render:g=>a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.dateObj.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:g.dateObj.toLocaleDateString()})]}),className:"whitespace-nowrap",sortable:!0},{key:"quizzesCompleted",header:"Quizzes",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.quizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"questionsAnswered",header:"Questions",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.questionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"timeSpentMinutes",header:"Study Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(g.timeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageSessionTime",header:"Avg Session",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.averageSessionTime>0?It(g.averageSessionTime):"—"})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"activity_level",header:"Activity Level",render:g=>{const{level:w,color:_}=d(g.quizzesCompleted,g.questionsAnswered);return a.jsx("div",{className:"text-center",children:a.jsx("span",{className:`font-medium ${_}`,children:w})})},className:"text-center",headerClassName:"text-center"},{key:"studyStreak",header:"Streak",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.studyStreak>0?`${g.studyStreak}`:"—"})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(jr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),h=e.reduce((g,w)=>g+w.quizzesCompleted,0),p=e.reduce((g,w)=>g+w.questionsAnswered,0),y=e.reduce((g,w)=>g+w.timeSpentMinutes,0),x=e.filter(g=>g.quizzesCompleted>0).length,v=e.length>0?Math.max(...e.map(g=>g.studyStreak)):0;return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(qn,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Engagement Data"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(no,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Daily Activity & Engagement"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Daily study activity and engagement patterns for this individual":"Daily study activity and engagement patterns for the team"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:h}),a.jsx("div",{className:"text-sm text-blue-700",children:"Total Quizzes"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:p}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Questions"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:It(y)}),a.jsx("div",{className:"text-sm text-purple-700",children:"Total Time"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:x}),a.jsx("div",{className:"text-sm text-orange-700",children:"Active Days"})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:v}),a.jsx("div",{className:"text-sm text-yellow-700",children:"Best Streak"})]})]})}),a.jsx(sn,{columns:m,data:c,loading:t,emptyState:{icon:no,title:"No Activity Data",description:"No daily activity data available for the selected date range. Complete some quizzes to see engagement patterns!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Activity levels: High (3+ quizzes or 50+ questions), Medium (2+ quizzes or 20+ questions), Low (1+ quiz)"})})})]})}function NW(){const{selectedMemberId:e,engagementData:t,engagementLoading:r,engagementError:n}=fi();return a.jsx(_W,{data:t,loading:r,error:n,showIndividual:e!==void 0})}function SW({data:e,loading:t,error:r,timeframe:n="weekly",onTimeframeChange:s}){const[i,o]=b.useState("score"),l=y=>{if(e.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const x=e.filter(N=>{switch(y){case"score":return N.totalPossiblePoints>0;case"quizzes":return N.totalQuizzesCompleted>0;case"time":return N.totalTimeSpentMinutes>0;case"members":return N.activeMembers>0;default:return!1}});if(x.length<2)return{direction:"stable",value:0,color:"text-gray-600"};const v=x[x.length-1],g=x[x.length-2];let w,_;switch(y){case"score":w=v.averageScore,_=g.averageScore;break;case"quizzes":w=v.totalQuizzesCompleted,_=g.totalQuizzesCompleted;break;case"time":w=v.totalTimeSpentMinutes,_=g.totalTimeSpentMinutes;break;case"members":w=v.activeMembers,_=g.activeMembers;break}if(_===0)return{direction:"stable",value:0,color:"text-gray-600"};const j=(w-_)/_*100;return Math.abs(j)<5?{direction:"stable",value:j,color:"text-gray-600"}:j>0?{direction:"up",value:j,color:"text-green-600"}:{direction:"down",value:j,color:"text-red-600"}},c=y=>{switch(y){case"up":return a.jsx(jr,{className:"h-4 w-4"});case"down":return a.jsx(Q0,{className:"h-4 w-4"});default:return a.jsx(jS,{className:"h-4 w-4"})}},u=e.reduce((y,x)=>y+x.totalQuizzesCompleted,0),d=e.reduce((y,x)=>y+x.totalQuestionsAnswered,0),f=e.reduce((y,x)=>y+x.totalTimeSpentMinutes,0),m=e.reduce((y,x)=>y+x.totalPossiblePoints,0)>0?e.reduce((y,x)=>y+x.totalPointsEarned,0)/e.reduce((y,x)=>y+x.totalPossiblePoints,0)*100:0,h=e.length>0?Math.max(...e.map(y=>y.activeMembers)):0;e.reduce((y,x)=>y+x.activeDays,0);const p=l(i);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Team Performance Trends"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(He,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Performance Trends"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Track your team's collective performance and activity over time"})]})]}),s&&a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>s("weekly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="weekly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Weekly"}),a.jsx("button",{onClick:()=>s("monthly"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${n==="monthly"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"})]})]})}),a.jsx("div",{className:"p-6",children:t?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Analyzing team performance trends..."})]}):e.length===0||u===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yt,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Performance Data"}),a.jsx("p",{className:"text-gray-600",children:"Your team needs to complete more quizzes to see performance trends over time."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[m.toFixed(1),"%"]}),a.jsx("div",{className:"text-sm text-blue-700",children:"Team Average Score"})]}),a.jsx(St,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:u}),a.jsx("div",{className:"text-sm text-green-700",children:"Total Quizzes"})]}),a.jsx(it,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-purple-900",children:d}),a.jsx("div",{className:"text-sm text-purple-700",children:"Questions"})]}),a.jsx(it,{className:"h-8 w-8 text-purple-600"})]})}),a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:It(f)}),a.jsx("div",{className:"text-sm text-orange-700",children:"Study Time"})]}),a.jsx(Ie,{className:"h-8 w-8 text-orange-600"})]})}),a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-900",children:h}),a.jsx("div",{className:"text-sm text-indigo-700",children:"Active Members"})]}),a.jsx(He,{className:"h-8 w-8 text-indigo-600"})]})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"View trend for:"}),a.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>o("score"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="score"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Team Score"}),a.jsx("button",{onClick:()=>o("quizzes"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="quizzes"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Quiz Activity"}),a.jsx("button",{onClick:()=>o("time"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="time"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Study Time"}),a.jsx("button",{onClick:()=>o("members"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors duration-200 ${i==="members"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Active Members"})]})]}),a.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:`flex items-center space-x-2 ${p.color}`,children:[c(p.direction),a.jsx("span",{className:"font-medium",children:p.direction==="up"?"Improving":p.direction==="down"?"Declining":"Stable"})]}),a.jsxs("span",{className:"text-gray-600",children:[i==="score"&&"Team Average Score",i==="quizzes"&&"Quiz Activity",i==="time"&&"Study Time",i==="members"&&"Active Members",Math.abs(p.value)>0&&a.jsxs("span",{className:p.color,children:[" ","(",p.value>0?"+":"",p.value.toFixed(1),"%)"]})]})]})}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[i==="score"&&"Team Average Score Trend",i==="quizzes"&&"Team Quiz Activity Trend",i==="time"&&"Team Study Time Trend",i==="members"&&"Active Members Trend"]}),a.jsx("div",{className:"h-64 bg-gray-50 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Interactive Chart Would Go Here"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Integration with charting library (e.g., Chart.js, Recharts) needed"}),a.jsx("div",{className:"mt-4 text-xs text-gray-400",children:a.jsxs("p",{children:["Data points available: ",e.filter(y=>{switch(i){case"score":return y.totalPossiblePoints>0;case"quizzes":return y.totalQuizzesCompleted>0;case"time":return y.totalTimeSpentMinutes>0;case"members":return y.activeMembers>0;default:return!1}}).length," periods"]})})]})})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Period Breakdown"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:e.slice().reverse().map((y,x)=>{const v=y.totalQuizzesCompleted>0;return a.jsx("div",{className:`p-4 ${x>0?"border-t border-gray-100":""} ${v?"":"opacity-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:y.period}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.periodStart.toLocaleDateString()," - ",y.periodEnd.toLocaleDateString()]})]}),a.jsx("div",{className:"text-right",children:v?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[y.averageScore.toFixed(1),"%"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[y.totalQuizzesCompleted," quiz",y.totalQuizzesCompleted!==1?"es":"",", ",y.totalQuestionsAnswered," questions"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[It(y.totalTimeSpentMinutes)," study time, ",y.activeMembers," active members"]})]}):a.jsx("div",{className:"text-sm text-gray-400",children:"No team activity"})})]})},y.period)})})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(jr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Team Performance Insights:"}),a.jsxs("ul",{className:"space-y-1 text-blue-700",children:[a.jsx("li",{children:"• Monitor team engagement and collective learning progress"}),a.jsx("li",{children:"• Identify periods of high activity and strong team performance"}),a.jsx("li",{children:"• Use trends to motivate team members and celebrate achievements"}),a.jsx("li",{children:"• Track how many team members are actively participating"})]})]})]})})]})})]})}function kW(){const{progressionTimeframe:e,setProgressionTimeframe:t,teamTrendsData:r,teamTrendsLoading:n,teamTrendsError:s}=fi();return a.jsx(SW,{data:r,loading:n,error:s,timeframe:e,onTimeframeChange:t})}function PW({data:e,loading:t,error:r,showIndividual:n}){const[s,i]=b.useState("accuracy_rate"),[o,l]=b.useState("asc"),c=ne.useMemo(()=>[...e].sort((g,w)=>{const _=g[s],j=w[s];return typeof _=="number"&&typeof j=="number"?o==="desc"?j-_:_-j:typeof _=="string"&&typeof j=="string"?o==="desc"?j.localeCompare(_):_.localeCompare(j):0}),[e,s,o]),u=g=>{s===g?l(o==="desc"?"asc":"desc"):(i(g),l(g==="accuracy_rate"?"asc":"desc"))},d=g=>g>=90?"text-green-600":g>=70?"text-blue-600":g>=50?"text-yellow-600":"text-red-600",f=g=>{if(g<60)return`${g}s`;const w=Math.floor(g/60),_=g%60;return`${w}:${_.toString().padStart(2,"0")}`},h=[{key:"book_of_bible",header:"Book",render:g=>a.jsx("div",{className:"font-medium text-gray-900",children:g.book_of_bible}),sortable:!0},{key:"chapter",header:"Chapter",render:g=>a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-medium text-gray-900",children:g.chapter})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"accuracy_rate",header:"Accuracy",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`text-2xl font-bold ${d(g.accuracy_rate)}`,children:[g.accuracy_rate,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.correct_attempts,"/",g.total_attempts]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"total_attempts",header:"Attempts",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:g.total_attempts})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"average_time_spent",header:"Avg Time",render:g=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:f(g.average_time_spent)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"points_efficiency",header:"Points Efficiency",render:g=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`font-bold ${d(g.points_efficiency)}`,children:[g.points_efficiency,"%"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:[g.total_points_earned,"/",g.total_points_possible]})]}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(g=>({...g,header:g.sortable?a.jsxs("button",{onClick:()=>u(g.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:g.header}),s===g.key&&a.jsx(jr,{className:`h-3 w-3 transition-transform duration-200 ${o==="desc"?"rotate-180":""}`})]}):g.header})),p=new Set(e.map(g=>g.book_of_bible)).size,y=e.length,x=e.length>0?Math.round(e.reduce((g,w)=>g+w.accuracy_rate,0)/e.length):0,v=e.reduce((g,w)=>g+w.total_attempts,0);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(sr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Book/Chapter Performance"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Book & Chapter Performance"}),a.jsx("p",{className:"text-sm text-gray-600",children:n?"Individual performance breakdown by Bible book and chapter":"Team performance breakdown by Bible book and chapter"})]})]})}),a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-900",children:p}),a.jsx("div",{className:"text-sm text-blue-700",children:"Books Analyzed"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-900",children:y}),a.jsx("div",{className:"text-sm text-green-700",children:"Chapters Analyzed"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[x,"%"]}),a.jsx("div",{className:"text-sm text-purple-700",children:"Overall Accuracy"})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-900",children:v}),a.jsx("div",{className:"text-sm text-orange-700",children:"Total Attempts"})]})]})}),a.jsx(sn,{columns:h,data:c,loading:t,emptyState:{icon:ke,title:"No Book/Chapter Data",description:"No book and chapter performance data available yet. Complete some quizzes to see detailed analysis!"},getRowClassName:g=>g.accuracy_rate<50?"bg-red-50 border-l-4 border-red-400":g.accuracy_rate<70?"bg-yellow-50 border-l-4 border-yellow-400":""}),e.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 text-center mb-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:e.filter(g=>g.accuracy_rate<50).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Struggling (","<50%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:e.filter(g=>g.accuracy_rate>=50&&g.accuracy_rate<70).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Needs Work (","50-70%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-blue-600",children:e.filter(g=>g.accuracy_rate>=70&&g.accuracy_rate<90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Good (","70-90%",")"]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:e.filter(g=>g.accuracy_rate>=90).length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Excellent (",">90%",")"]})]})]}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Focus study time on chapters with low accuracy rates"})})]})]})}function EW(){const{selectedMemberId:e,bookChapterData:t,bookChapterLoading:r,bookChapterError:n}=fi();return a.jsx(PW,{data:t,loading:r,error:n,showIndividual:e!==void 0})}const CW=3,g1=[{id:"overview",name:"Overview",icon:sr},{id:"quiz-history",name:"Quiz History",icon:ke,requiresIndividualView:!0},{id:"study-schedule",name:"Study Schedule",icon:Yt,requiresIndividualView:!0},{id:"knowledge-gaps",name:"Knowledge Gaps",icon:Dp},{id:"question-performance",name:"Question Performance",icon:it},{id:"activity",name:"Daily Activity",icon:no},{id:"book-chapter-performance",name:"Book/Chapter",icon:ke},{id:"team-trends",name:"Team Trends",icon:jr,requiresTeamView:!0}];function AW(){var Y;const{user:e,refreshUser:t,developerLog:r}=ge(),n=kt(),s=b.useRef(!1),[i,o]=b.useState(void 0),[l,c]=b.useState("weekly"),[u,d]=b.useState("overview"),[f,m]=b.useState(()=>{const W=new Date;return W.setMonth(W.getMonth()-CW),W}),[h,p]=b.useState(new Date),{teamMembers:y,loading:x,error:v}=US(),{data:g,loading:w,error:_}=gI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:j,loading:N,error:S}=xI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:k,loading:O,error:C}=yI({teamId:e==null?void 0:e.teamId,userId:i,timeframe:l,startDate:f,endDate:h}),{data:M,loading:E,error:z}=Fp({userId:i,startDate:f,endDate:h}),{refreshData:$}=Fp({userId:i,startDate:f,endDate:h}),{data:q,loading:U,error:D}=bI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:P,loading:A,error:T}=wI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:R,loading:F,error:J}=jI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),{data:oe,loading:fe,error:Z}=kI({teamId:i===void 0?e==null?void 0:e.teamId:void 0,timeframe:l,startDate:f,endDate:h}),{data:he,loading:at,error:B}=PI({teamId:e==null?void 0:e.teamId,userId:i,startDate:f,endDate:h}),ee=b.useCallback(W=>{const G=new Date(W.target.value);G<=h&&m(G)},[h]),ue=b.useCallback(W=>{const G=new Date(W.target.value);G>=f&&p(G)},[f]),H=b.useCallback(W=>W.toISOString().split("T")[0],[]),et=b.useCallback(async()=>{try{await t()}catch(W){console.error("Failed to refresh data:",W)}},[t]),ye=b.useCallback(W=>{const G=i===void 0,ie=g1.find(we=>we.id===W);ie&&(ie.requiresIndividualView&&G||ie.requiresTeamView&&!G||d(W))},[i]),Ee=b.useMemo(()=>i?y.find(W=>W.userId===i):void 0,[i,y]),Oe=b.useMemo(()=>{const W=i===void 0;return g1.filter(G=>!(G.requiresIndividualView&&W||G.requiresTeamView&&!W))},[i]),ot=b.useMemo(()=>Math.ceil((h.getTime()-f.getTime())/(1e3*60*60*24)),[f,h]),Ye=b.useMemo(()=>({user:e,selectedMemberId:i,setSelectedMemberId:o,teamMembers:y,canSelectIndividuals:(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",startDate:f,setStartDate:m,endDate:h,setEndDate:p,progressionTimeframe:l,setProgressionTimeframe:c,analyticsData:g,analyticsLoading:w,analyticsError:_,knowledgeGapsData:j,knowledgeGapsLoading:N,knowledgeGapsError:S,progressionData:k,progressionLoading:O,progressionError:C,quizHistoryData:M,quizHistoryLoading:E,quizHistoryError:z,refreshQuizHistoryData:$,studyScheduleData:q,studyScheduleLoading:U,studyScheduleError:D,questionPerformanceData:P,questionPerformanceLoading:A,questionPerformanceError:T,engagementData:R,engagementLoading:F,engagementError:J,teamTrendsData:oe,teamTrendsLoading:fe,teamTrendsError:Z,bookChapterData:he,bookChapterLoading:at,bookChapterError:B,selectedMemberInfo:Ee}),[e,i,y,f,h,l,g,w,_,j,N,S,k,O,C,M,E,z,$,q,U,D,P,A,T,R,F,J,oe,fe,Z,he,at,B,Ee]);b.useEffect(()=>{e&&y.length>0&&!s.current&&(e.teamRole==="member"?o(e.id):o(void 0),s.current=!0)},[e,y]),b.useEffect(()=>{Oe.find(G=>G.id===u)||d("overview")},[Oe,u]);const le=((Y=e==null?void 0:e.planSettings)==null?void 0:Y.allow_analytics_access)??!1,I=w||N||O||E||U||A||F||fe||at,L=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin",Q=b.useCallback(()=>{try{switch(u){case"overview":return a.jsx(p1,{});case"quiz-history":return a.jsx(pW,{});case"study-schedule":return a.jsx(xW,{});case"knowledge-gaps":return a.jsx(vW,{});case"question-performance":return a.jsx(jW,{});case"activity":return a.jsx(NW,{});case"team-trends":return a.jsx(kW,{});case"book-chapter-performance":return a.jsx(EW,{});default:return a.jsx(p1,{})}}catch(W){return console.error("Error rendering tab content:",W),a.jsx("div",{className:"text-center py-8",children:a.jsx(Fe,{type:"error",message:"Failed to load tab content. Please try refreshing the page."})})}},[u]);return x?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading analytics data..."})}):v?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:v||"Failed to load data."})})}):le?a.jsx(pe,{children:a.jsx(EI,{value:Ye,children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analytics"}),a.jsx("p",{className:"text-gray-600",children:"Track performance and progress insights."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:et,disabled:I,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:I?"Loading...":"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(yS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter analytics data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:H(f),onChange:ee,max:H(h),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:H(h),onChange:ue,min:H(f),max:H(new Date),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[ot," days"]})]})]})}),a.jsx(Up,{teamMembers:y,selectedMemberId:i,onSelectMember:o,selectedMemberInfo:Ee,disabled:!L,includeAllTeamOption:!0}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6 overflow-x-auto",role:"tablist",children:Oe.map(W=>{const G=W.icon,ie=u===W.id;return a.jsxs("button",{onClick:()=>ye(W.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${ie?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,role:"tab","aria-selected":ie,"aria-controls":`${W.id}-panel`,children:[a.jsx(G,{className:"h-4 w-4"}),a.jsx("span",{children:W.name})]},W.id)})})}),a.jsx("div",{className:"p-6",role:"tabpanel",id:`${u}-panel`,"aria-labelledby":`${u}-tab`,children:Q()})]})]})})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-8 w-8 text-blue-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Analytics"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your current plan does not include access to Analytics. Upgrade your subscription to unlock this feature and gain valuable insights."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade Your Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Access detailed performance metrics, user engagement data, and more by upgrading to a higher tier."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>n("/billing"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>n("/dashboard"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Dashboard"})]})]})})})}function TW(){const[e,t]=b.useState(!1),[r,n]=b.useState(null);return{createCheckoutSession:async i=>{t(!0),n(null);try{const{priceId:o,mode:l,successUrl:c,cancelUrl:u}=i,d=`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,f=`${window.location.origin}/billing`,{data:m,error:h}=await V.functions.invoke("stripe-checkout",{body:{price_id:o,mode:l,success_url:c||`${window.location.origin}/billing/success?session_id={CHECKOUT_SESSION_ID}`,cancel_url:u||f}});return h?(console.error("Checkout error:",h),n(h.message||"Failed to create checkout session"),{error:h.message||"Failed to create checkout session"}):m!=null&&m.url?(console.log("✅ Checkout session created, redirecting to:",m.url),window.location.href=m.url,{sessionId:m.sessionId,url:m.url}):(n("No checkout URL received"),{error:"No checkout URL received"})}catch(o){console.error("Checkout error:",o);const l=o.message||"An unexpected error occurred";return n(l),{error:l}}finally{t(!1)}},loading:e,error:r}}function OW(){const{user:e,developerLog:t}=ge(),[r,n]=b.useState([]),[s,i]=b.useState([]),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{var f,m;if(!e){l(!1);return}l(!0),u(null);try{t("🔄 Fetching billing data for user:",e.id);const{data:h,error:p}=await V.functions.invoke("fetch-payment-methods",{headers:{Authorization:`Bearer ${(f=(await V.auth.getSession()).data.session)==null?void 0:f.access_token}`}});p?(console.error("❌ Error fetching payment methods:",p),console.warn("⚠️ Payment methods not available, continuing without them"),n([])):(t("✅ Payment methods fetched:",(h==null?void 0:h.length)||0),n(h||[]));const{data:y,error:x}=await V.functions.invoke("fetch-invoices",{headers:{Authorization:`Bearer ${(m=(await V.auth.getSession()).data.session)==null?void 0:m.access_token}`}});x?(console.error("❌ Error fetching invoices:",x),console.warn("⚠️ Invoices not available, continuing without them"),i([])):(t("✅ Invoices fetched:",(y==null?void 0:y.length)||0),i(y||[]))}catch(h){console.error("💥 Failed to fetch billing data:",h),u("Billing data temporarily unavailable"),n([]),i([])}finally{l(!1)}},[e,t]);return b.useEffect(()=>{d()},[d]),{paymentMethods:r,invoices:s,loading:o,error:c,refreshBillingData:d}}function DW(){var U;const{user:e}=ge(),{createCheckoutSession:t,loading:r}=TW(),{subscription:n,orders:s,loading:i,error:o,cancelCurrentSubscription:l}=Y0(),{invoices:c,paymentMethods:u,loading:d,error:f}=OW(),[m,h]=b.useState(null),[p,y]=b.useState(!1),[x,v]=b.useState(!1),[g,w]=b.useState(null),[_,j]=b.useState("month"),N=n!=null&&n.subscription_id?n:null,S=N==null?void 0:N.price_id,k=zp.find(D=>D.priceId===S);console.log("🔍 Billing Debug - Current subscription data:",{hasCurrentSubscription:!!N,subscriptionStatus:N==null?void 0:N.subscription_status,cancelAtPeriodEnd:N==null?void 0:N.cancel_at_period_end,subscriptionId:N==null?void 0:N.subscription_id,priceId:S,foundProduct:!!k}),console.log("🔍 Billing Debug - Billing data:",{invoicesCount:c.length,ordersCount:s.length,billingLoading:d,billingError:f,invoices:c.slice(0,2),paymentMethods:u.slice(0,1)});const O=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end);console.log("🔍 Billing Debug - Cancel button condition:",{statusIsActive:(N==null?void 0:N.status)==="active",notCancelAtPeriodEnd:!(N!=null&&N.cancel_at_period_end),shouldShowCancelButton:O});const C=zp.filter(D=>D.interval===_),M=!N||((U=e==null?void 0:e.subscription)==null?void 0:U.plan)==="free",E=(N==null?void 0:N.subscription_status)==="active"&&!(N!=null&&N.cancel_at_period_end),z=async D=>{h(D);try{await t({priceId:D,mode:"subscription"})}catch(P){console.error("Checkout error:",P)}finally{h(null)}},$=async()=>{v(!0),w(null);try{const D=await l();D.success?y(!1):w(D.error||"Failed to cancel subscription")}catch(D){w(D.message||"An unexpected error occurred")}finally{v(!1)}},q=[{key:"id",header:"Invoice",render:D=>a.jsxs("div",{className:"font-medium text-gray-900",children:["#",D.id.substring(0,8),"..."]})},{key:"created",header:"Date",render:D=>a.jsx("span",{className:"text-sm text-gray-900",children:xa(D.created)})},{key:"amount_due",header:"Amount",render:D=>a.jsx("span",{className:"font-medium text-gray-900",children:Ko(D.amount_due/100,D.currency)})},{key:"status",header:"Status",render:D=>a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.status==="paid"?"bg-green-100 text-green-800":D.status==="open"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:D.status.charAt(0).toUpperCase()+D.status.slice(1)})},{key:"actions",header:"",render:D=>a.jsx("div",{className:"flex justify-end",children:D.invoice_pdf&&a.jsx("a",{href:D.invoice_pdf,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Download Invoice",children:a.jsx(xb,{className:"h-4 w-4"})})}),className:"text-right"}];return i?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading billing information..."})}):o&&o.includes("does not exist")?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"warning",title:"Billing Setup Required",message:"Billing features are being set up. Please contact support if this persists.",className:"mb-6"})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),a.jsx("p",{className:"text-gray-600",children:"Manage your subscription and view billing history."})]}),o&&a.jsx(Fe,{type:"error",message:o,className:"mb-6"}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Current Subscription"}),N&&k?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:k.name}),k.interval==="year"?a.jsx(fs,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Gi,{className:"h-5 w-5 text-blue-500"})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:k.description}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3",children:[a.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[Ko(k.price,k.currency),a.jsxs("span",{className:"text-lg font-normal text-gray-600",children:["/",k.interval]})]}),N.current_period_end&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:N.cancel_at_period_end?`Ends on: ${xa(N.current_period_end)}`:`Next billing: ${xa(N.current_period_end)}`})]})]}),N.payment_method_last4&&a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 mt-2",children:[a.jsx(id,{className:"h-4 w-4"}),a.jsxs("span",{children:[N.payment_method_brand," •••• ",N.payment_method_last4]})]})]}),a.jsxs("div",{className:"text-right",children:[N.subscription_status==="active"&&N.cancel_at_period_end?a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(Ie,{className:"h-4 w-4 text-orange-500"}),a.jsxs("span",{className:"text-sm font-medium text-orange-600",children:["Ending ",xa(N.current_period_end)]})]}):a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("div",{className:`h-2 w-2 rounded-full ${N.subscription_status==="active"?"bg-green-500":"bg-yellow-500"}`}),a.jsx("span",{className:`text-sm font-medium capitalize ${N.subscription_status==="active"?"text-green-600":"text-yellow-600"}`,children:N.subscription_status})]}),N.subscription_status==="active"&&!N.cancel_at_period_end&&a.jsx("button",{onClick:()=>y(!0),className:"text-sm text-red-600 hover:text-red-700 transition-colors duration-200 mt-2",children:"Downgrade to Free"})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Pn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Subscription"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You're currently on the free plan. Upgrade to unlock premium features."})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pricing"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start for free. Upgrade as you go."}),a.jsxs("div",{className:"flex items-center justify-center space-x-1 bg-gray-100 rounded-lg p-1 w-fit mx-auto mb-4",children:[a.jsx("button",{onClick:()=>j("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>j("year"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${_==="year"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Yearly"})]}),_==="year"&&a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Save 17% on a yearly subscription"})]}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-6 max-w-5xl mx-auto",children:[a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${M?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[M&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Free"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:"£0"}),a.jsx("span",{className:"text-gray-600",children:"/month"})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Perfect for getting started"})]}),a.jsxs("ul",{className:"space-y-2 mb-6",children:[a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic quiz features"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Limited question access"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Basic progress tracking"})]}),a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Up to 5 team members"})]})]}),a.jsx("button",{onClick:()=>E?y(!0):void 0,disabled:M||!E,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${M?"bg-gray-100 text-gray-500 cursor-not-allowed":E?"bg-gray-600 text-white hover:bg-gray-700":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:M?a.jsx("span",{children:"Current Plan"}):E?a.jsx("span",{children:"Downgrade to Free"}):a.jsx("span",{children:"Already Downgrading"})})]}),C.map(D=>{const P=S===D.priceId,A=m===D.priceId,T=_==="year";return a.jsxs("div",{className:`relative rounded-lg border-2 p-6 ${P?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"} transition-colors duration-200 w-full md:w-80`,children:[T&&!P&&_==="year"&&a.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-indigo-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Best Value"})}),P&&a.jsx("div",{className:"absolute -top-3 right-4",children:a.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:"Current"})}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_==="year"?"Pro Yearly":"Pro"}),D.interval==="year"?a.jsx(fs,{className:"h-5 w-5 text-yellow-500"}):a.jsx(Gi,{className:"h-5 w-5 text-blue-500"}),T&&a.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs font-medium px-2 py-1 rounded-full",children:"POPULAR"})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"text-3xl font-bold text-gray-900",children:Ko(D.price,D.currency)}),a.jsxs("span",{className:"text-gray-600",children:["/",_==="year"?"year":"month"]}),_==="year"&&a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[Ko(D.price/12,D.currency)," per month"]})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:D.description})]}),a.jsx("ul",{className:"space-y-2 mb-6",children:D.features.map(R=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600",children:R})]},R))}),a.jsx("button",{onClick:()=>z(D.priceId),disabled:P||A||r,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2 ${P?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50"}`,children:A?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):P?a.jsx("span",{children:"Current Plan"}):a.jsxs("span",{children:["Upgrade to ",D.name]})})]},D.id)})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billing History"}),f&&a.jsx(Fe,{type:"warning",message:`${f}. Stripe billing functions may not be deployed yet.`,className:"mb-4"}),!1,c.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Invoices"}),a.jsx(sn,{columns:q,data:c,loading:d,emptyState:{title:"No Invoices",description:"No invoices found for your account."}})]}):s.length>0?a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Orders"}),a.jsx("div",{className:"space-y-3",children:s.map(D=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Order #",D.order_id]}),a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${D.payment_status==="paid"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.payment_status})]}),a.jsx("div",{className:"text-sm text-gray-600",children:new Date(D.order_date).toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"font-medium text-gray-900",children:Ko(D.amount_total/100,D.currency)}),a.jsx("button",{className:"text-indigo-600 hover:text-indigo-700",children:a.jsx(xb,{className:"h-4 w-4"})})]})]},D.order_id))})]}):d?a.jsx(Lt,{text:"Loading billing history...",className:"py-8"}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(id,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Billing History"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your invoices and billing history will appear here once you make a purchase."}),N&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Note:"})," You have an active subscription, but billing history may take a few minutes to appear. If you don't see invoices after 10 minutes, please contact support."]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-8",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-800",children:"Billing Information"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"All subscriptions are managed through Stripe. You can cancel or modify your subscription at any time. Changes will take effect at the end of your current billing period."})]})]})}),a.jsxs(kn,{isOpen:p,onClose:()=>{y(!1),w(null)},title:"Downgrade to Free Plan",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{y(!1),w(null)},disabled:x,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50",children:"Keep Subscription"}),a.jsx("button",{onClick:$,disabled:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 flex items-center space-x-2",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Downgrade to Free"})]})})]}),children:[g&&a.jsx(Fe,{type:"error",message:g,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(tn,{className:"h-6 w-6 text-yellow-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Are you sure you want to downgrade to the free plan?"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Your subscription will remain active until the end of your current billing period (",N!=null&&N.current_period_end?xa(N.current_period_end):"end of period","), after which you'll be moved to the free plan."]})]})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"You will lose access to:"}),a.jsx("ul",{className:"text-sm text-red-800 space-y-1",children:k==null?void 0:k.features.map(D=>a.jsxs("li",{className:"flex items-center space-x-2",children:[a.jsx(Ln,{className:"h-3 w-3 text-red-600"}),a.jsx("span",{children:D})]},D))})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"What happens next:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("li",{children:["• Your subscription will continue until ",N!=null&&N.current_period_end?xa(N.current_period_end):"the end of your billing period"]}),a.jsx("li",{children:"• You'll keep all premium features until then"}),a.jsx("li",{children:"• After that, you'll be automatically moved to the free plan"}),a.jsx("li",{children:"• You can resubscribe at any time to regain premium features"})]})]})]})]})]})})}class x1 extends ne.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("BillingSuccess Error:",t,r)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(_t,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Payment Completed!"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Your payment was processed successfully. Please check your dashboard for updated subscription details."}),a.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]})})}):this.props.children}}function MW({sessionId:e,onDashboardClick:t,onBillingClick:r,processingState:n}){return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:`h-16 w-16 rounded-full flex items-center justify-center mx-auto mb-6 ${n==="error"?"bg-yellow-100":"bg-green-100"}`,children:n==="error"?a.jsx(tn,{className:"h-8 w-8 text-yellow-600"}):a.jsx(_t,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n==="error"?"Payment Received!":"Payment Successful!"}),a.jsxs("p",{className:"text-gray-600 mb-8",children:[n==="processing"&&"Your payment is being processed. Subscription details will be available shortly.",n==="complete"&&"Thank you for your purchase! Your subscription has been activated and you now have access to all the premium features.",n==="error"&&"Your payment was successful, but subscription details are still being processed. If you don't see your subscription in a few minutes, please contact support."]}),e&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Session ID:"})," ",e.substring(0,20),"..."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center space-x-2 bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(uM,{className:"h-4 w-4"}),a.jsx("span",{children:"Go to Dashboard"})]}),a.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx("span",{children:"View Billing"}),a.jsx(xS,{className:"h-4 w-4"})]})]})]})})})}function IW(){return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Processing your payment..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your subscription."})]})})}function $W(){const[e]=BN(),t=kt(),{refreshUser:r,user:n}=ge(),{forceRefresh:s}=Y0(),[i,o]=b.useState(!0),[l,c]=b.useState("processing"),u=e.get("session_id");b.useEffect(()=>{let m=0;const h=3;let p=!1;const y=async()=>{if(!p){m++;try{console.log(`🔄 Attempt ${m}/${h}: Refreshing user data after payment`);const[v]=await Promise.all([r(),s()]);if(v){p=!0,c("complete"),o(!1),console.log("✅ User and subscription data refreshed successfully after payment");return}else console.warn("⚠️ User refresh returned null, but continuing...")}catch(v){console.error(`❌ Attempt ${m} failed:`,v)}if(m>=h)console.error("❌ Max attempts reached, subscription may still be processing"),p=!0,c("error"),o(!1);else{const v=Math.pow(2,m)*1e3;console.log(`⏱️ Retrying in ${v}ms...`),setTimeout(y,v)}}},x=setTimeout(y,2e3);return()=>{clearTimeout(x),p=!0}},[]),b.useEffect(()=>{u&&console.log("✅ Payment completed successfully, session ID:",u)},[u]);const d=()=>{console.log("🏠 Navigating to dashboard"),t("/dashboard")},f=()=>{console.log("💳 Navigating to billing"),t("/billing")};return i?a.jsx(x1,{children:a.jsx(IW,{})}):a.jsx(x1,{children:a.jsx(MW,{sessionId:u,onDashboardClick:d,onBillingClick:f,processingState:l})})}function zW(){ge();const{user:e}=ge(),{teamMembers:t,teamInvitations:r,teamStats:n,loading:s,error:i,setError:o,inviteMember:l,suspendMember:c,reinstateMember:u,resendInvitation:d,cancelInvitation:f,generateInvitationLink:m,getRoleIcon:h}=US(),[p,y]=b.useState(""),[x,v]=b.useState(!1),[g,w]=b.useState(!1),[_,j]=b.useState(""),[N,S]=b.useState("member"),[k,O]=b.useState(""),[C,M]=b.useState(null),[E,z]=b.useState("members"),[$,q]=b.useState(null),[U,D]=b.useState(null),P=ne.useMemo(()=>t.filter(B=>{const ee=B.user.name.toLowerCase().includes(p.toLowerCase()),ue=B.user.email!=="Email restricted"&&B.user.email.toLowerCase().includes(p.toLowerCase());return ee||ue}),[t,p]),A=ne.useMemo(()=>uI(e),[e]),T=ne.useMemo(()=>dI(e),[e]),R=ne.useCallback(async()=>{const B=await l(_,N);B.success&&B.invitationLink?(O(B.invitationLink),w(!0),j(""),S("member"),v(!1),o(null)):o(B.error||"Failed to send invitation")},[l,_,N,O,w,j,S,v,o]),F=ne.useCallback(async(B,ee)=>{if(!confirm(`Are you sure you want to suspend ${ee}? They will be logged out and unable to access the team.`))return;q(B);const ue=await c(B);ue.success||o(ue.error||"Failed to suspend member"),q(null)},[c,o]),J=ne.useCallback(async(B,ee)=>{if(!confirm(`Are you sure you want to reinstate ${ee}? They will regain access to the team.`))return;D(B);const ue=await u(B);ue.success||o(ue.error||"Failed to reinstate member"),D(null)},[u,o]),oe=ne.useCallback(async(B,ee)=>{try{await navigator.clipboard.writeText(B),M(ee),setTimeout(()=>M(null),2e3)}catch(ue){console.error("Failed to copy link:",ue);const H=document.createElement("textarea");H.value=B,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),M(ee),setTimeout(()=>M(null),2e3)}},[]),fe=ne.useCallback(async()=>{try{await navigator.clipboard.writeText(k),M("modal"),setTimeout(()=>M(null),2e3)}catch(B){console.error("Failed to copy link:",B);const ee=document.createElement("textarea");ee.value=k,document.body.appendChild(ee),ee.select(),document.execCommand("copy"),document.body.removeChild(ee),M("modal"),setTimeout(()=>M(null),2e3)}},[k]),Z=ne.useCallback(async B=>{const ee=await d(B);ee.success||o(ee.error||"Failed to resend invitation")},[d,o]),he=ne.useCallback(async B=>{const ee=await f(B);ee.success||o(ee.error||"Failed to cancel invitation")},[f,o]),at=(e==null?void 0:e.maxTeamMembers)||5;return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage your team members and invitations."})]}),A&&a.jsxs("button",{onClick:()=>v(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(kM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invite Member"})]})]}),i&&a.jsx(Fe,{type:"error",message:i,className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(Ke,{title:"Total Members",value:n.totalMembers,icon:He,iconColor:"text-indigo-600",subtitle:`of ${at} max`}),a.jsx(Ke,{title:"Admins",value:n.admins,icon:_n,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Pending Invites",value:n.pendingInvites,icon:Ie,iconColor:"text-yellow-600"}),a.jsx(Ke,{title:"Active Members",value:n.activeMembers,icon:Mt,iconColor:"text-green-600"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex space-x-8 px-6",children:[a.jsxs("button",{onClick:()=>z("members"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${E==="members"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Team Members (",t.length,")"]}),T&&a.jsxs("button",{onClick:()=>z("invitations"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${E==="invitations"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Pending Invitations (",r.length,")"]})]})}),a.jsxs("div",{className:"p-6",children:[E==="members"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:p,onChange:B=>y(B.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]})}),A?a.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(fs,{className:"h-5 w-5 text-green-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-green-800",children:[a.jsx("p",{className:"font-medium",children:"Enhanced Access"}),a.jsxs("p",{children:["As a team ",e==null?void 0:e.teamRole,", you can view and manage all team member details including names and email addresses."]})]})]})}):a.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(_n,{className:"h-5 w-5 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Limited View"}),a.jsx("p",{children:"As a team member, you can only see your own contact details. Team owners and admins can view all member information."})]})]})}),s?a.jsx(Lt,{text:"Loading team members...",className:"py-12"}):P.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Members"}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Your team doesn't have any members yet.":"No members match your search criteria."}),A&&t.length===0&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Invite Your First Member"})]}):a.jsx("div",{className:"space-y-4",children:P.map(B=>a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:B.user.name.split(" ").map(ee=>ee[0]).join("")})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:B.user.name}),B.role==="owner"&&a.jsx(fs,{className:"h-4 w-4 text-yellow-500",title:"Team Owner"})]}),a.jsx("p",{className:`text-sm truncate ${B.user.email==="Email restricted"?"text-gray-400 italic":"text-gray-600"}`,children:B.user.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Joined: ",new Date(B.joinedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end",children:[a.jsx(yr,{type:"teamRole",value:B.role,showIcon:!0}),a.jsx(yr,{type:"status",value:B.status}),A&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&B.status==="active"&&a.jsxs("button",{onClick:()=>F(B.id,B.user.name),disabled:$===B.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Suspend member",children:[$===B.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-red-600"}):a.jsx(NS,{className:"h-3 w-3"}),a.jsx("span",{children:"Suspend"})]}),A&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&B.status==="suspended"&&a.jsxs("button",{onClick:()=>J(B.id,B.user.name),disabled:U===B.id,className:"flex items-center space-x-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors duration-200 disabled:opacity-50",title:"Reinstate member",children:[U===B.id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b border-green-600"}):a.jsx(_S,{className:"h-3 w-3"}),a.jsx("span",{children:"Reinstate"})]}),A&&B.role!=="owner"&&B.userId!==(e==null?void 0:e.id)&&a.jsx("div",{className:"relative",children:a.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(vM,{className:"h-5 w-5"})})})]})]},B.id))})]}),E==="invitations"&&T&&a.jsx("div",{className:"space-y-4",children:s?a.jsx(Lt,{text:"Loading invitations...",className:"py-12"}):r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"There are no pending invitations for your team."}),A&&a.jsx("button",{onClick:()=>v(!0),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Send an Invitation"})]}):r.map(B=>{const ee=m(B.token),ue=C===B.id;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(Yl,{className:"h-6 w-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:B.email}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Invited ",new Date(B.createdAt).toLocaleDateString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expires ",new Date(B.expiresAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(yr,{type:"teamRole",value:B.role,showIcon:!0}),a.jsx(yr,{type:"status",value:"pending"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[a.jsx(fM,{className:"h-4 w-4"}),a.jsx("span",{children:"Invitation Link"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:ee,readOnly:!0,className:"flex-1 px-3 py-2 text-sm font-mono bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),a.jsx("button",{onClick:()=>oe(ee,B.id),className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${ue?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:ue?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(gb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with the invited team member. The link will expire in 7 days."})]}),A&&a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[a.jsxs("button",{onClick:()=>Z(B.id),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-indigo-50",disabled:s,children:[a.jsx(wM,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Extend"})]}),a.jsxs("button",{onClick:()=>he(B.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200 flex items-center space-x-1 px-3 py-1 rounded-lg hover:bg-red-50",disabled:s,children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]},B.id)})})]})]}),a.jsxs(kn,{isOpen:x,onClose:()=>{v(!1),o(null),j(""),S("member")},title:"Invite Team Member",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{v(!1),o(null),j(""),S("member")},className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",disabled:s,children:"Cancel"}),a.jsxs("button",{onClick:R,disabled:!_.trim()||s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[s&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Send Invitation"})]})]}),children:[i&&a.jsx(Fe,{type:"error",message:i,className:"mb-4"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:_,onChange:B=>j(B.target.value),placeholder:"colleague@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:N,onChange:B=>S(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"member",children:"Member"}),a.jsx("option",{value:"admin",children:"Admin"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N==="admin"?"Can manage team members and settings":"Can access team resources and collaborate"})]})]})]}),a.jsxs(kn,{isOpen:g,onClose:()=>{w(!1),O(""),M(null)},title:"Invitation Sent Successfully",maxWidth:"lg",footer:a.jsx("button",{onClick:()=>{w(!1),O(""),M(null)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"Close"}),children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-green-600 mb-3",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Invitation created successfully!"})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"You can share this invitation link with the team member. The link will expire in 7 days."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invitation Link"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:k,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),a.jsx("button",{onClick:fe,className:`px-3 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-1 ${C==="modal"?"bg-green-100 text-green-700 border border-green-300":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:C==="modal"?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copied!"})]}):a.jsxs(a.Fragment,{children:[a.jsx(gb,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:"Copy"})]})})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(cM,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Share this link"}),a.jsx("p",{children:"Send this link to the invited team member via email, chat, or any other communication method."})]})]})})]})]})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You are not currently a member of any team."})]})})})}function LW(){const{user:e}=ge(),t=kt(),[r,n]=b.useState([]),[s,i]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(null);b.useEffect(()=>{e&&d()},[e]);const d=async()=>{if(e)try{i(!0),l(null);const{data:h,error:p}=await V.from("team_invitations").select(`
          id,
          team_id,
          email,
          role,
          invited_by,
          status,
          expires_at,
          created_at,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("email",e.email).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(p){console.error("Error loading invitations:",p),l("Failed to load invitations");return}const y=[...new Set((h||[]).map(_=>_.invited_by))],{data:x,error:v}=await V.from("user_profiles").select("id, name").in("id",y);v&&console.error("Error loading inviter profiles:",v);const g=new Map((x||[]).map(_=>[_.id,_])),w=(h||[]).map(_=>{var j;return{id:_.id,teamId:_.team_id,email:_.email,role:_.role,invitedBy:_.invited_by,status:_.status,expiresAt:_.expires_at,createdAt:_.created_at,team:{id:_.teams.id,name:_.teams.name,description:_.teams.description},inviter:{name:((j=g.get(_.invited_by))==null?void 0:j.name)||"Unknown User"}}});n(w)}catch(h){console.error("Error loading invitations:",h),l("An unexpected error occurred")}finally{i(!1)}},f=async(h,p)=>{if(e)try{if(u(h),l(null),!r.find(x=>x.id===h)){l("Invitation not found");return}if(p==="accept"){const{data:x,error:v}=await V.rpc("accept_team_invitation",{p_invitation_id:h});if(v){console.error("Error accepting invitation:",v),l("Failed to accept invitation. Please try again.");return}if(!x.success){l(x.error||"Failed to accept invitation");return}alert("Successfully joined the team!"),window.location.reload()}else{const{error:x}=await V.from("team_invitations").update({status:"declined"}).eq("id",h);if(x){console.error("Error declining invitation:",x),l("Failed to decline invitation. Please try again.");return}n(v=>v.filter(g=>g.id!==h))}}catch(y){console.error("Error processing invitation:",y),l("An unexpected error occurred")}finally{u(null)}},m=h=>{const p=new Date,x=new Date(h).getTime()-p.getTime(),v=Math.ceil(x/(1e3*60*60*24));return v<=0?"Expired":v===1?"1 day remaining":`${v} days remaining`};return s?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitations..."})]})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Invitations"}),a.jsx("p",{className:"text-gray-600",children:"Manage your pending team invitations."})]}),o&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-red-600"}),a.jsx("span",{className:"text-red-700",children:o})]})}),r.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(Yl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Pending Invitations"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any pending team invitations at the moment."}),a.jsx("button",{onClick:()=>t("/dashboard"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Dashboard"})]}):a.jsx("div",{className:"space-y-6",children:r.map(h=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.team.name}),a.jsx(yr,{type:"plan",value:h.team.plan})]}),a.jsxs("p",{className:"text-gray-600 mb-3",children:[a.jsx("strong",{children:h.inviter.name})," invited you to join their team as ",a.jsx(yr,{type:"teamRole",value:h.role}),"."]}),h.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-3",children:h.team.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[ne.createElement(pI(h.role),{className:"h-4 w-4 text-gray-500"}),a.jsx(yr,{type:"teamRole",value:h.role})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsxs("span",{children:["Invited ",new Date(h.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{className:m(h.expiresAt).includes("Expired")?"text-red-600":"",children:m(h.expiresAt)})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>f(h.id,"decline"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ln,{className:"h-4 w-4"}),a.jsx("span",{children:"Decline"})]}),a.jsx("button",{onClick:()=>f(h.id,"accept"),disabled:c===h.id,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:c===h.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Mt,{className:"h-4 w-4"}),a.jsx("span",{children:"Accept"})]})})]})]})},h.id))})]})})}function RW(){const[e]=BN(),t=kt(),{user:r,login:n,signup:s,signupForInvitation:i,refreshUser:o,loading:l,developerLog:c}=ge(),[u,d]=b.useState(null),[f,m]=b.useState(!0),[h,p]=b.useState(null),[y,x]=b.useState("signup"),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(!1),[S,k]=b.useState(!1),[O,C]=b.useState(!1),M=e.get("token"),E=Yi(),z=Yi(),$=E.watch("password");b.useEffect(()=>{if(c("🔍 InvitationAccept: Component mounted with token:",M),!M){c("❌ InvitationAccept: No token provided in URL"),p("Invalid invitation link"),m(!1);return}q()},[M]),b.useEffect(()=>{c("🔄 InvitationAccept: State change detected"),c("👤 User state:",r?{id:r.id,email:r.email,name:r.name}:"null"),c("📧 Invitation state:",u?{id:u.id,email:u.email,teamName:u.team.name}:"null"),c("⚙️ Processing state:",j),c("🔐 Auth loading state:",l),r&&u&&!j&&!l&&!S?(c("✅ InvitationAccept: Conditions met for auto-acceptance - calling handleAcceptInvitation"),k(!0),U()):c("⏳ InvitationAccept: Auto-acceptance conditions not met:",{hasUser:!!r,hasInvitation:!!u,isProcessing:j,isAuthLoading:l,acceptanceAttempted:S})},[r,u,j,l,S]);const q=async()=>{if(M)try{c("📥 InvitationAccept: Loading invitation with token:",M),m(!0),p(null);const{data:A,error:T}=await V.from("team_invitations").select(`
          id,
          email,
          role,
          status,
          expires_at,
          invited_by,
          team_id,
          teams:team_id (
            id,
            name,
            description
          )
        `).eq("token",M).eq("status","pending").gt("expires_at",new Date().toISOString()).maybeSingle();if(T){c("❌ InvitationAccept: Error loading invitation:",T),p("Failed to load invitation details");return}if(!A){c("⚠️ InvitationAccept: No invitation found for token:",M),p("Invitation not found or has expired");return}c("📧 InvitationAccept: Invitation data loaded:",A),c("🔍 InvitationAccept: Raw team data from join:",A.teams),c("🔍 InvitationAccept: Raw team_id:",A.team_id);let R=A.teams;if(!R&&A.team_id){c("🔄 InvitationAccept: Loading team data separately for:",A.team_id);const{data:oe,error:fe}=await V.from("teams").select("id, name, description").eq("id",A.team_id).single();!fe&&oe?(R=oe,c("✅ InvitationAccept: Team data loaded separately:",R)):c("❌ InvitationAccept: Failed to load team data:",fe)}if(!R){c("⚠️ InvitationAccept: Team data missing from invitation"),p("The team associated with this invitation no longer exists");return}let F="Unknown User";if(A.invited_by){c("👤 InvitationAccept: Loading inviter profile for:",A.invited_by);const{data:oe,error:fe}=await V.rpc("get_user_name_by_id",{p_user_id:A.invited_by});!fe&&oe?(F=oe,c("✅ InvitationAccept: Inviter profile loaded:",F)):c("⚠️ InvitationAccept: Could not load inviter name:",fe)}const J={id:A.id,email:A.email,role:A.role,status:A.status,expiresAt:A.expires_at,team:{id:R.id,name:R.name,description:R.description},inviter:{name:F}};c("✅ InvitationAccept: Complete invitation data prepared:",J),d(J),x("signup")}catch(A){c("💥 InvitationAccept: Unexpected error loading invitation:",A),p("An unexpected error occurred")}finally{m(!1)}},U=async()=>{if(c("🎯 InvitationAccept: handleAcceptInvitation called"),c("👤 Current user:",r?{id:r.id,email:r.email}:"null"),c("📧 Current invitation:",u?{id:u.id,email:u.email}:"null"),!u||!r){c("⚠️ InvitationAccept: Cannot accept invitation - missing data:",{hasInvitation:!!u,hasUser:!!r});return}try{if(c("🚀 InvitationAccept: Starting invitation acceptance process"),N(!0),p(null),c("🔍 InvitationAccept: Verifying email match"),c("📧 Invitation email:",u.email.toLowerCase()),c("👤 User email:",r.email.toLowerCase()),u.email.toLowerCase()!==r.email.toLowerCase()){c("❌ InvitationAccept: Email mismatch"),p("This invitation is for a different email address. Please log in with the correct account or contact the team administrator.");return}c("✅ InvitationAccept: Email verification passed"),c("🔍 InvitationAccept: Skipping client-side team capacity check - will be handled by database function"),c("📞 InvitationAccept: Calling accept_team_invitation function with ID:",u.id);const{data:A,error:T}=await V.rpc("accept_team_invitation",{p_invitation_id:u.id});if(T){c("❌ InvitationAccept: Database function error:",T),p("Failed to accept invitation. Please try again.");return}if(c("📊 InvitationAccept: Database function response:",A),!A.success){c("❌ InvitationAccept: Database function returned failure:",A.error),A.error&&A.error.includes("maximum capacity")?(C(!0),p("This team has reached its maximum capacity. Please contact the team owner to increase the team size or remove inactive members.")):p(A.error||"Failed to accept invitation");return}c("🎉 InvitationAccept: Invitation accepted successfully!"),c("🔄 InvitationAccept: Refreshing user profile to get updated team info");try{await o(),c("✅ InvitationAccept: User profile refreshed after invitation acceptance")}catch(R){c("⚠️ Could not refresh user profile after invitation acceptance:",R)}x("processing"),c("🔄 InvitationAccept: Setting redirect timer"),setTimeout(()=>{c("🏠 InvitationAccept: Redirecting to dashboard"),t("/dashboard",{replace:!0})},2e3)}catch(A){c("💥 InvitationAccept: Unexpected error accepting invitation:",A),p("An unexpected error occurred")}finally{N(!1)}},D=async A=>{if(u){if(c("📝 InvitationAccept: Signup form submitted"),c("📧 Signup email:",u.email),c("👤 Signup name:",A.name),O){p("Cannot create account - the team has reached maximum capacity. Please contact the team owner.");return}try{p(null),c("🚀 InvitationAccept: Calling signupForInvitation function"),await i(u.email,A.password,A.name),c("✅ InvitationAccept: Signup completed successfully")}catch(T){c("❌ InvitationAccept: Signup error:",T),T.message&&T.message.toLowerCase().includes("user already registered")?(c("🔄 InvitationAccept: User already exists, switching to login mode"),p("An account with this email already exists. Please sign in instead."),x("login")):p(T.message||"Failed to create account")}}},P=async A=>{if(u){c("🔐 InvitationAccept: Login form submitted"),c("📧 Login email:",u.email);try{p(null),c("🚀 InvitationAccept: Calling login function"),await n(u.email,A.password),c("✅ InvitationAccept: Login completed successfully")}catch(T){c("❌ InvitationAccept: Login error:",T),T.message&&(T.message.toLowerCase().includes("invalid")||T.message.toLowerCase().includes("not found"))?(c("🔄 InvitationAccept: Invalid credentials, switching to signup mode"),p("Invalid credentials. If you don't have an account, please create one."),x("signup")):p(T.message||"Invalid password")}}};return f?(c("⏳ InvitationAccept: Rendering loading state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading invitation..."})]})})):h&&!u?(c("❌ InvitationAccept: Rendering error state (no invitation)"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(tn,{className:"h-7 w-7 text-red-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Invalid Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:h})]}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>t("/"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go to Home"})})]})})):y==="processing"?(c("🎉 InvitationAccept: Rendering success/processing state"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(_t,{className:"h-7 w-7 text-green-600"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Welcome to the Team!"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["You have successfully joined ",a.jsx("strong",{children:u==null?void 0:u.team.name}),". Redirecting you to the dashboard..."]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"})})]})})):u?(c("📋 InvitationAccept: Rendering main form in mode:",y),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"h-12 w-12 bg-indigo-500 rounded-xl flex items-center justify-center",children:a.jsx(Pn,{className:"h-7 w-7 text-white"})})}),a.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Team Invitation"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"You've been invited to join a team"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("div",{className:"h-12 w-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Gl,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-1",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.team.name})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:u.inviter.name})," invited you to join as"," ",a.jsx(yr,{type:"teamRole",value:u.role,showIcon:!0})]})]})]}),u.team.description&&a.jsx("p",{className:"text-sm text-gray-500 mb-4",children:u.team.description}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Invitation expires: ",new Date(u.expiresAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-xl",children:[h&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{children:h}),O&&a.jsx("div",{className:"mt-3",children:a.jsx("button",{onClick:()=>{p(null),C(!1),k(!1),r&&u&&U()},className:"bg-red-100 hover:bg-red-200 text-red-700 px-3 py-1 rounded text-sm font-medium transition-colors",children:"Try Again"})})]})]})}),y==="signup"&&!O?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Create Your Account"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Complete your account setup to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:E.handleSubmit(D),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full name"}),a.jsx("input",{id:"name",type:"text",autoComplete:"name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...E.register("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}})}),E.formState.errors.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.formState.errors.name.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...E.register("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),E.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.formState.errors.password.message})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",type:w?"text":"password",autoComplete:"new-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...E.register("confirmPassword",{required:"Please confirm your password",validate:A=>A===$||"The passwords do not match"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>_(!w),children:w?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),E.formState.errors.confirmPassword&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.formState.errors.confirmPassword.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Creating account..."})]}):"Create Account & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx("button",{onClick:()=>x("login"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Sign in instead"})]})})]}):O?a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-yellow-800 mb-4",children:[a.jsx(He,{className:"h-6 w-6"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Team at Capacity"})]}),a.jsxs("p",{className:"text-yellow-700 mb-4",children:["The team ",a.jsx("strong",{children:u.team.name})," has reached its maximum member limit."]}),a.jsx("p",{className:"text-sm text-yellow-600",children:'Please contact the team owner to increase the team capacity or remove inactive members, then use the "Try Again" button above.'})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign In to Join"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Sign in to your account to join ",a.jsx("strong",{children:u.team.name})]})]}),a.jsxs("form",{className:"space-y-6",onSubmit:z.handleSubmit(P),children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),a.jsx("input",{id:"email",type:"email",value:u.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:v?"text":"password",autoComplete:"current-password",className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",...z.register("password",{required:"Password is required"})}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!v),children:v?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]}),z.formState.errors.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:z.formState.errors.password.message})]}),a.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Signing in..."})]}):"Sign In & Join Team"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>x("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200",children:"Create one now"})]})})]})]})]})})):(c("⚠️ InvitationAccept: No invitation data available"),null)}function qW({userId:e,startDate:t,endDate:r}){const{developerLog:n}=ge(),[s,i]=b.useState(null),[o,l]=b.useState(!0),[c,u]=b.useState(null),d=b.useCallback(async()=>{if(!e){n("🔍 useUserAnalytics: No userId provided, skipping data fetch"),l(!1),i(null);return}n("🔍 useUserAnalytics: Starting user analytics fetch for user:",e,"with date range:",t,r),l(!0),u(null);try{n("🔍 useUserAnalytics: Using secure function to fetch user analytics data");const{data:f,error:m}=await V.rpc("get_user_analytics_data",{p_user_id:e,p_start_date:t==null?void 0:t.toISOString(),p_end_date:r==null?void 0:r.toISOString()});if(m)throw console.error("❌ Error fetching user analytics data:",m),m;n("✅ useUserAnalytics: Raw RPC response:",f),n("🔍 useUserAnalytics: RPC response type:",typeof f),n("🔍 useUserAnalytics: RPC response keys:",f?Object.keys(f):"null");let h=null;Array.isArray(f)&&f.length>0?(h=f[0],n("✅ useUserAnalytics: Extracted data from array:",h)):f&&!Array.isArray(f)?(h=f,n("✅ useUserAnalytics: Using data directly (not array):",h)):n("⚠️ useUserAnalytics: No valid data found in RPC response");const p={totalQuizzesCompleted:Number((h==null?void 0:h.total_quizzes_completed)||0),totalQuestionsAnswered:Number((h==null?void 0:h.total_questions_answered)||0),averageScore:Number((h==null?void 0:h.average_score)||0),totalTimeSpentMinutes:Number((h==null?void 0:h.total_time_spent_minutes)||0),studyStreak:Number((h==null?void 0:h.study_streak)||0),totalPointsEarned:Number((h==null?void 0:h.total_points_earned)||0),totalPossiblePoints:Number((h==null?void 0:h.total_possible_points)||0)};n("✅ useUserAnalytics: Transformed analytics data:",p),n("🔍 useUserAnalytics: Individual field transformations:",{totalQuizzesCompleted:`${h==null?void 0:h.total_quizzes_completed} -> ${p.totalQuizzesCompleted}`,averageScore:`${h==null?void 0:h.average_score} -> ${p.averageScore}`,totalTimeSpentMinutes:`${h==null?void 0:h.total_time_spent_minutes} -> ${p.totalTimeSpentMinutes}`,studyStreak:`${h==null?void 0:h.study_streak} -> ${p.studyStreak}`}),i(p)}catch(f){console.error("❌ useUserAnalytics: Error fetching user analytics data:",f),n("❌ useUserAnalytics: Error details:",{message:f.message,code:f.code,details:f.details,hint:f.hint}),u(f.message||"Failed to load user analytics data"),i(null)}finally{l(!1)}},[e,t,r,n]);return b.useEffect(()=>{const f=setTimeout(()=>{d()},100);return()=>clearTimeout(f)},[d]),{data:s,loading:o,error:c,refreshData:d}}function FW(){var z,$,q,U,D,P,A;const{developerLog:e}=ge(),t=kt(),{user:r}=ge(),{questions:n}=aa(),{getActiveSessionsForUser:s,deleteQuizSession:i}=di(),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,f]=b.useState(null),[m,h]=b.useState(!1),[p,y]=b.useState(null),x=r?s(r.id):[],v=b.useMemo(()=>({startDate:new Date(Date.now()-30*24*60*60*1e3),endDate:new Date}),[]),{data:g,loading:w,error:_}=qW({userId:r==null?void 0:r.id,startDate:v.startDate,endDate:v.endDate});ne.useEffect(()=>{e("🔍 Quiz Center: Analytics data received:",{userAnalytics:g,analyticsLoading:w,analyticsError:_,userId:r==null?void 0:r.id,dateRange:v})},[g,w,_,r==null?void 0:r.id,v,e]);const j=ne.useCallback((T,R)=>R===0?0:Math.round(T/R*100),[]),N=ne.useCallback((T,R)=>R===0?0:Math.round(T/R*100),[]),S=ne.useCallback(T=>{y(T),h(!0)},[]),k=async()=>{if(r)try{u(!0),f(null),e("📥 Loading recent quiz activities for user:",r.id);const{data:T,error:R}=await V.from("quiz_sessions").select("id, title, total_points, max_points, completed_at, total_actual_time_spent_seconds, type").eq("user_id",r.id).eq("status","completed").not("completed_at","is",null).order("completed_at",{ascending:!1}).limit(10);if(R)throw console.error("❌ Error loading recent activities:",R),R;e("✅ Recent activities loaded:",(T==null?void 0:T.length)||0,"activities"),e("🔍 Quiz Center: Recent activities data:",T),l(T||[])}catch(T){console.error("💥 Error loading recent activities:",T),f("Failed to load recent quiz activities")}finally{u(!1)}},O=ne.useCallback(async()=>{if(p)try{await i(p),await k(),h(!1),y(null)}catch(T){console.error("Error deleting quiz session:",T)}},[p,i,k]),C=ne.useCallback(T=>{t(`/quiz/runner/${T}`)},[t]);b.useEffect(()=>{r?k():u(!1)},[r]);const M=[{id:"quick-start",title:"Quick Start",description:"Jump into a random quiz with questions from your subscription tier. Perfect for quick practice sessions.",icon:Pn,color:"bg-green-500",bgColor:"bg-green-50",borderColor:"border-green-200",hoverColor:"hover:bg-green-100",features:["Random questions from your tier","90 questions per session","Instant feedback","Mock PBE test experience"],action:"Start Quiz",onClick:()=>t("/quiz/quick-start"),disabled:!((z=r==null?void 0:r.planSettings)!=null&&z.allow_quick_start_quiz),tooltip:($=r==null?void 0:r.planSettings)!=null&&$.allow_quick_start_quiz?"":"Not available on your current plan"},{id:"create-your-own",title:"Create Your Own",description:"Build custom quizzes by selecting specific books, chapters, and difficulty levels. Tailor your study experience.",icon:ko,color:"bg-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",hoverColor:"hover:bg-blue-100",features:["Choose specific Bible books","Select chapter ranges","Set difficulty level","Customize question count"],action:"Create Quiz",onClick:()=>t("/quiz/create-own"),disabled:!((q=r==null?void 0:r.planSettings)!=null&&q.allow_create_own_quiz),tooltip:(U=r==null?void 0:r.planSettings)!=null&&U.allow_create_own_quiz?"":"Not available on your current plan"},{id:"study-schedule",title:"Study Schedule",description:"Follow a structured study plan with progressive difficulty and comprehensive coverage of the material.",icon:Yt,color:"bg-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",hoverColor:"hover:bg-purple-100",features:["Structured learning path","Progressive difficulty","Track your progress","Daily study goals"],action:"View Schedule",onClick:()=>t("/schedule"),disabled:!((D=r==null?void 0:r.planSettings)!=null&&D.allow_study_schedule_quiz),tooltip:(P=r==null?void 0:r.planSettings)!=null&&P.allow_study_schedule_quiz?"":"Upgrade to Pro plan to access Study Schedule"}],E=b.useMemo(()=>{const T=n.length,R=(g==null?void 0:g.averageScore)||0,F=(g==null?void 0:g.studyStreak)||0,J=(g==null?void 0:g.totalTimeSpentMinutes)||0;let oe=0;if(o.length>0){const at=o.reduce((ee,ue)=>ee+ue.total_points,0),B=o.reduce((ee,ue)=>ee+ue.max_points,0);oe=B>0?Math.round(at/B*100):0}const fe=V0(o),Z=o.reduce((at,B)=>at+(B.estimated_minutes||0),0),he=_||!g;return e("🔍 Quiz Center: Stats calculation debug:",{userAnalytics:g,analyticsError:_,useFallback:he,recentActivitiesCount:o.length,fallbackAverageScore:oe,fallbackStudyStreak:fe,fallbackTimeMinutes:Z,finalValues:{averageScore:he?oe:R,studyStreak:he?fe:F,totalStudyTime:he?Z:J}}),[{label:"Questions Available",value:T>0?`${T}`:"0",icon:ke},{label:"Average Score",value:`${he?oe:R}%`,icon:it},{label:"Study Streak",value:(he?fe:F)>0?`${he?fe:F} day${(he?fe:F)!==1?"s":""}`:"0 days",icon:St},{label:"Study Time",value:he?It(Z)||"0m":It(J)||"0m",icon:Ie}]},[n.length,o,g,_,e]);return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Quiz Center"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Practice your Pathfinder Bible Experience knowledge with interactive quizzes."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"📊 Stats show your performance over the last 30 days"})]}),a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:E.map(T=>a.jsx(Ke,{title:T.label,value:w&&T.label==="Study Time"&&!_?"Loading...":T.value,icon:T.icon,iconColor:"text-indigo-600"},T.label))}),x.length>0&&a.jsxs("div",{className:"mb-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[a.jsx(Hi,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"Resume Quiz Sessions"})]}),a.jsx("div",{className:"space-y-4",children:x.map(T=>{const R=N(T.current_question_index,T.questions.length),F=T.results.length,J=T.questions.length;return x.find(oe=>oe.id===p),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors duration-200 space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:ne.createElement(bb(T.type),{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:T.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:PS(T.type)}),a.jsx("span",{children:"•"}),T.type==="study-assignment"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"min-w-0 max-w-full truncate",children:oo(T.study_items||[])}),a.jsx("span",{children:"•"})]}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Question ",T.current_question_index+1," of ",J]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[T.total_points," points earned"]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${R}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[R,"% complete (",F,"/",J," answered)"]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3 w-full sm:w-auto justify-end flex-shrink-0",children:[a.jsxs("div",{className:"text-right text-sm text-gray-600 flex-shrink-0",children:[a.jsx("div",{children:"Started"}),a.jsx("div",{children:Lp(T.created_at)})]}),a.jsx("button",{onClick:()=>S(T.id),className:"flex items-center space-x-2 bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(si,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:()=>C(T.id),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Resume"})]})]})]},T.id)})})]}),a.jsx(kn,{isOpen:m,onClose:()=>{h(!1),y(null)},title:"Delete Quiz Session",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{h(!1),y(null)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsx("button",{onClick:O,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",children:"Delete Session"})]}),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(qn,{className:"h-6 w-6 text-red-600 flex-shrink-0 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 mb-2",children:"Are you sure you want to delete this quiz session?"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. All progress and results for this session will be permanently lost."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8",children:M.map(T=>a.jsxs("div",{className:`relative bg-white rounded-xl shadow-sm border-2 ${T.borderColor} transition-all duration-200 group ${T.disabled?"opacity-60 cursor-not-allowed":`${T.hoverColor} hover:shadow-md cursor-pointer`}`,children:[T.disabled&&T.tooltip&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 rounded-xl z-10",children:a.jsx("span",{className:"text-white text-center p-4 font-semibold text-sm",children:T.tooltip})}),a.jsxs("div",{className:"p-6 sm:p-8",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:`h-12 w-12 ${T.color} rounded-lg flex items-center justify-center`,children:a.jsx(T.icon,{className:"h-6 w-6 text-white"})}),a.jsx("div",{className:"ml-4",children:a.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:T.title})})]}),a.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:T.description}),a.jsx("div",{className:"space-y-2 mb-6",children:T.features.map((R,F)=>a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"h-1.5 w-1.5 bg-gray-400 rounded-full mr-3 flex-shrink-0"}),a.jsx("span",{children:R})]},F))}),a.jsxs("button",{onClick:T.onClick,disabled:T.disabled,className:`w-full flex items-center justify-center space-x-2 py-3 px-4 ${T.color} text-white rounded-lg transition-all duration-200 ${T.disabled?"opacity-50 cursor-not-allowed":"hover:opacity-90 group-hover:shadow-lg"}`,children:[a.jsx(io,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:T.action}),a.jsx(xS,{className:"h-4 w-4"})]})]})]},T.id))}),a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Quiz Activity"}),c&&a.jsx(Lt,{text:"Loading recent activities...",className:"py-8"}),d&&a.jsx(Fe,{type:"error",message:d,className:"mb-4"}),!c&&!d&&a.jsx("div",{className:"space-y-4",children:o.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Recent Activity"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You haven't completed any quizzes yet. Start your first quiz to see your activity here!"}),((A=r==null?void 0:r.planSettings)==null?void 0:A.allow_quick_start_quiz)&&a.jsx("button",{onClick:()=>t("/quiz/quick-start"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Start Your First Quiz"})]}):o.map(T=>{const R=j(T.total_points,T.max_points),F=Lp(T.completed_at),J=bb(T.type);return a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:a.jsx(J,{className:"h-5 w-5 text-gray-600"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:T.title}),a.jsxs("div",{className:"flex flex-wrap gap-x-2 text-sm text-gray-600",children:[a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:["Completed with ",R,"% accuracy"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[T.total_points,"/",T.max_points," points"]}),T.total_actual_time_spent_seconds>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{className:"min-w-0 max-w-full truncate",children:[Math.round(T.total_actual_time_spent_seconds/60)," min"]})]})]})]})]}),a.jsx("span",{className:"text-sm text-gray-500 whitespace-nowrap flex-shrink-0",children:F})]},T.id)})})]})]})})}function UW({initialTime:e,onTimeExpired:t,onTimeUpdate:r}){const[n,s]=b.useState(e),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(!1);b.useEffect(()=>{let x;return i&&(x=setInterval(()=>{s(v=>{const g=v-1;return r(g),g<=0&&(o(!1),d(!0),t()),Math.max(0,g)})},1e3)),()=>{x&&clearInterval(x)}},[i,t,r]);const f=b.useCallback(()=>{!l&&!u&&(o(!0),c(!0))},[l,u]),m=b.useCallback(x=>{s(x),o(!1),c(!1),d(!1)},[]),h=b.useCallback(()=>{o(!1)},[]),p=b.useCallback(x=>{o(x)},[]),y=b.useCallback(x=>{c(x)},[]);return{timeLeft:n,timerActive:i,timerStarted:l,hasTimeExpired:u,startTimer:f,resetTimer:m,stopTimer:h,setHasTimeExpired:d,setTimerActiveState:p,setTimerStartedState:y}}function BW(e){const[t,r]=b.useState(!0),n=b.useMemo(()=>e?t?{background:"bg-gradient-to-b from-[#1a255b] to-[#0e132f]",card:"bg-transparent",text:"text-white",textSecondary:"text-white/80",border:"border-white/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm",progressBar:"bg-white"}:{background:"bg-[#FAFAFA]",card:"bg-transparent",text:"text-[#1a255b]",textSecondary:"text-[#1a255b]/80",border:"border-[#1a255b]/20",button:"bg-[#1a255b] hover:bg-[#1a255b]/90 text-white",timerButton:"bg-[#1a255b]/20 hover:bg-[#1a255b]/30 text-[#1a255b] backdrop-blur-sm",progressBar:"bg-[#1a255b]"}:{background:"bg-gray-50",card:"bg-white",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-200",button:"bg-indigo-600 hover:bg-indigo-700",timerButton:"bg-indigo-100 hover:bg-indigo-200 text-indigo-700",progressBar:"bg-green-600"},[e,t]);return{isDarkMode:t,themeClasses:n,toggleDarkMode:()=>{r(!t)}}}function QW({isFullScreen:e,isDarkMode:t,currentQuestionIndex:r,totalQuestions:n,progressPercentage:s,timeLeft:i,timerStarted:o,showAnswer:l,themeClasses:c,onBack:u,onToggleFullScreen:d,onToggleDarkMode:f,onStartTimer:m,formatTime:h}){return e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"/PBE-logo_600px.png",alt:"Pathfinder Bible Experience",className:"h-24 sm:h-32 md:h-40 w-auto"})}),a.jsxs("div",{className:`text-center ${c.text} hidden sm:block`,children:[a.jsxs("div",{className:"text-sm sm:text-lg font-semibold",children:["Question ",r+1," of ",n]}),a.jsxs("div",{className:"text-xs sm:text-sm opacity-75",children:[s,"% correct so far"]}),a.jsx("div",{className:`w-32 sm:w-64 ${c.timerButton} rounded-full h-2 mt-2 mx-auto`,children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ie,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:`font-mono text-sm sm:text-lg ${i<=10?"text-red-300":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:`p-2 ${c.text} hover:bg-white/10 rounded-lg transition-all duration-200 backdrop-blur-sm`,title:"Exit full screen",children:a.jsx(xM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]})}),a.jsx("div",{className:"absolute bottom-4 sm:bottom-6 left-4 sm:left-6 z-30",children:a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:f,className:`p-2 sm:p-3 rounded-full ${t?"bg-gray-700 text-yellow-400":"bg-gray-600 text-white"} backdrop-blur-sm transition-all duration-200 hover:scale-110`,title:t?"Switch to light mode":"Switch to dark mode",children:t?a.jsx(NM,{className:"h-4 w-4 sm:h-5 sm:w-5"}):a.jsx(yM,{className:"h-4 w-4 sm:h-5 sm:w-5"})})})})]}):a.jsxs("div",{className:`${c.card} rounded-xl shadow-sm p-6 mb-6`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{children:a.jsxs("h1",{className:`text-lg font-semibold ${c.text}`,children:["Question ",r+1," of ",n]})})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{onClick:m,disabled:o||l,className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-all duration-200 ${c.timerButton}`,children:[a.jsx(Ie,{className:"h-4 w-4"}),a.jsx("span",{className:`font-mono text-lg ${i<=10?"text-red-600":""}`,children:h(i)})]}),window.innerWidth>=640&&a.jsx("button",{onClick:d,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200",title:"Enter full screen",children:a.jsx(mM,{className:"h-5 w-5"})})]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${c.progressBar} h-2 rounded-full transition-all duration-300`,style:{width:`${(r+1)/n*100}%`}})}),a.jsx("div",{className:"text-center mt-4",children:a.jsxs("div",{className:`text-sm ${c.textSecondary}`,children:[s,"% correct so far"]})})]})}function VW({question:e,hasTimeExpired:t,isFullScreen:r,isDarkMode:n,themeClasses:s}){return a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 sm:mb-4 ${r?n?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${r?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("h2",{className:`font-semibold ${s.text} leading-relaxed ${r?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.question})]}),t&&a.jsxs("div",{className:`mb-6 p-4 border-2 ${r?"border-red-300 bg-red-500/20":"border-red-200 bg-red-50"} rounded-lg`,children:[a.jsxs("div",{className:`flex items-center justify-center space-x-2 ${r?"text-red-300":"text-red-700"}`,children:[a.jsx(qn,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold text-lg",children:"Time's Up!"})]}),a.jsx("p",{className:`${r?"text-red-200":"text-red-600"} text-sm mt-1`,children:'Click "Show Answer" to reveal the answer and mark your response'})]})]})}const WW=b.memo(VW);function KW({question:e,isFullScreen:t,isDarkMode:r,themeClasses:n}){return a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsxs("div",{className:`font-medium mb-2 ${t?r?"text-blue-300":"text-[#1a255b]":"text-indigo-600"} ${t?"text-[2.5vw]":"text-lg"}`,children:[e.points," points"]}),a.jsx("div",{className:`text-sm ${n.textSecondary} mb-2`,children:"Answer:"}),a.jsx("div",{className:`font-semibold p-4 rounded-lg ${n.text} ${t?"text-[3.5vw]":"text-lg sm:text-2xl"}`,children:e.answer})]})})}const HW=b.memo(KW);function GW({isFullScreen:e,showAnswer:t,hasTimeExpired:r,themeClasses:n,onShowAnswer:s,onShowQuestion:i,onCorrect:o,onIncorrect:l}){return e?a.jsx("div",{className:"fixed bottom-4 sm:bottom-6 left-0 right-0 z-20 px-4 sm:px-6",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sm:hidden flex flex-col items-center space-y-3",children:[a.jsxs("button",{onClick:i,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Yr,{className:"h-5 w-5"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex space-x-3 w-full max-w-xs",children:[a.jsx("button",{onClick:o,className:"bg-[#58c16c] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Mt,{className:"h-5 w-5"})}),a.jsx("button",{onClick:l,className:"bg-[#F93F54] text-white px-6 py-3 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center justify-center text-lg flex-1",children:a.jsx(Ln,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"hidden sm:flex items-center justify-center space-x-8",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Mt,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Correct"})]}),a.jsxs("button",{onClick:i,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Yr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-4 rounded-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]",children:[a.jsx(Ln,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:"Incorrect"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"sm:hidden flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-6 py-3 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-lg w-full max-w-xs justify-center`,children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})}),a.jsx("div",{className:"hidden sm:flex justify-center",children:a.jsxs("button",{onClick:s,className:`${n.button} px-8 py-4 rounded-lg transition-colors duration-200 flex items-center space-x-2 text-[2.5vw]`,children:[a.jsx(Xr,{className:"h-[2vw] w-[2vw]"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})]})}):a.jsx("div",{className:"flex justify-center mt-6",children:t?a.jsxs("div",{className:"space-y-4 w-full max-w-md",children:[a.jsxs("button",{onClick:i,className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center space-x-2 mx-auto mb-6",children:[a.jsx(Yr,{className:"h-4 w-4"}),a.jsx("span",{children:"Show Question"})]}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsxs("button",{onClick:o,className:"bg-[#58c16c] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#4a9f5a] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Mt,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Correct"})]}),a.jsxs("button",{onClick:l,className:"bg-[#F93F54] text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-[#e6394c] transition-colors duration-200 flex items-center space-x-2 justify-center flex-1",children:[a.jsx(Ln,{className:"h-5 w-5"}),a.jsx("span",{className:"hidden sm:inline",children:"Incorrect"})]})]})]}):a.jsxs("button",{onClick:s,className:"bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-medium hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(Xr,{className:"h-5 w-5"}),a.jsx("span",{children:r?"Show Answer to Mark":"Show Answer"})]})})}function YW({title:e,stats:t,bonusXp:r,isFullScreen:n,themeClasses:s,onRestart:i,onBack:o,formatTime:l}){const c=t.totalPointsEarned+r;return a.jsx("div",{className:`min-h-screen ${s.background}`,children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:`${s.card} rounded-xl shadow-sm p-8 text-center border ${s.border}`,children:[a.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(St,{className:"h-8 w-8 text-green-600"})}),a.jsx("h1",{className:`text-2xl font-bold ${s.text} mb-4`,children:"Quiz Completed!"}),a.jsxs("p",{className:`${s.textSecondary} mb-8`,children:["Great job! Here's how you performed on your ",e.toLowerCase(),"."]}),a.jsxs("div",{className:`mb-8 p-6 rounded-lg ${n?"bg-white/10":"bg-gradient-to-r from-blue-50 to-indigo-50"} border-2 border-indigo-200`,children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[a.jsx(St,{className:"h-6 w-6 text-indigo-600"}),a.jsx("h2",{className:`text-xl font-bold ${n?"text-white":"text-indigo-900"}`,children:"Experience Points Earned"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-indigo-700"}`,children:"Quiz Points:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-indigo-900"}`,children:["+",t.totalPointsEarned," XP"]})]}),r>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`text-sm ${n?"text-white/80":"text-green-700"}`,children:"On-Time Bonus:"}),a.jsxs("span",{className:`font-bold text-lg ${n?"text-white":"text-green-700"}`,children:["+",r," XP"]})]}),a.jsx("div",{className:`border-t pt-3 ${n?"border-white/20":"border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`font-semibold ${n?"text-white":"text-indigo-900"}`,children:"Total XP Earned:"}),a.jsxs("span",{className:`font-bold text-2xl ${n?"text-white":"text-indigo-900"}`,children:["+",c," XP"]})]})})]}),r>0&&a.jsx("div",{className:`mt-4 p-3 rounded-lg ${n?"bg-white/10":"bg-green-100"} border ${n?"border-white/20":"border-green-200"}`,children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:"🎉"}),a.jsx("span",{className:`text-sm font-medium ${n?"text-white":"text-green-800"}`,children:"Congratulations! You completed your study assignment on time!"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[t.accuracy,"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Accuracy"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:[t.correctAnswers," of ",t.totalQuestions," correct"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.totalPointsEarned}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Points Earned"}),a.jsxs("div",{className:`text-xs ${s.textSecondary} mt-1`,children:["of ",t.totalPossiblePoints," possible"]})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:l(t.averageTime)}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Avg Time"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"per question"})]}),a.jsxs("div",{className:`bg-gray-50 ${n?"bg-white/10":""} p-6 rounded-lg`,children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:[Math.round(t.totalPointsEarned/t.totalPossiblePoints*100),"%"]}),a.jsx("div",{className:`text-sm ${s.textSecondary}`,children:"Score"}),a.jsx("div",{className:`text-xs ${s.textSecondary} mt-1`,children:"overall performance"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{onClick:i,className:"flex items-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:[a.jsx(Hi,{className:"h-4 w-4"}),a.jsx("span",{children:"Take Another Quiz"})]}),a.jsxs("button",{onClick:o,className:"flex items-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})]})]})})})})}function XW({isOpen:e,questionPoints:t,selectedPoints:r,onPointsChange:n,onConfirm:s,onCancel:i,themeClasses:o,isFullScreen:l}){return a.jsxs(kn,{isOpen:e,onClose:i,title:"Partial Credit",themeClasses:o,isFullScreen:l,footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:i,className:`flex-1 px-4 py-2 border ${o.border} ${l&&window.innerWidth<640?"text-gray-900":o.text} rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200`,children:"Cancel"}),a.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Confirm"})]}),children:[a.jsxs("p",{className:`${o.textSecondary||"text-gray-600"} mb-6`,children:["This question is worth ",t," points. How many points did you earn?"]}),a.jsx("div",{className:"grid grid-cols-5 gap-2",children:Array.from({length:t},(c,u)=>a.jsx("button",{onClick:()=>n(u),className:`p-2 rounded-lg border-2 transition-colors duration-200 ${r===u?"border-indigo-500 bg-indigo-50 text-indigo-600 dark:bg-indigo-900 dark:text-indigo-200":"border-gray-200 hover:border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray dark:hover:border-gray-500"}`,children:u},u))})]})}function yh({quizSessionId:e,backUrl:t,onSessionDeleted:r}){const n=kt(),s=RN(),{user:i,developerLog:o}=ge(),{loadQuizSession:l,updateQuizSession:c,deleteQuizSession:u}=di(),d=b.useRef(null),f=s.quizSessionId||e,m=t||"/quiz",[h,p]=b.useState(null),[y,x]=b.useState(!0),[v,g]=b.useState(!1),[w,_]=b.useState(!1),[j,N]=b.useState(0),[S,k]=b.useState(!1),[O,C]=b.useState(!1);b.useState(!1);const{isDarkMode:M,themeClasses:E,toggleDarkMode:z}=BW(O),{timeLeft:$,timerActive:q,timerStarted:U,hasTimeExpired:D,startTimer:P,resetTimer:A,stopTimer:T,setHasTimeExpired:R,setTimerActiveState:F,setTimerStartedState:J}=UW({initialTime:30,onTimeExpired:()=>{oe({timer_active:!1,has_time_expired:!0})},onTimeUpdate:ne.useCallback(le=>{f&&c(f,{time_left:le})},[f,c])});b.useEffect(()=>{if(!f){console.error("No quiz session ID provided"),n("/quiz");return}try{const le=l(f);if(!le){console.error("Quiz session not found"),setTimeout(()=>{n(m)},2e3);return}p(le),le.status==="completed"?g(!0):(_(le.show_answer),A(le.time_left),R(le.has_time_expired),F(le.timer_active),J(le.timer_started),le.show_answer||(d.current=Date.now()))}catch(le){console.error("Error loading quiz session:",le),setTimeout(()=>{n(m)},2e3)}finally{x(!1)}},[f,l,n,m,A,R,F,J]);const oe=le=>{if(!h)return;const I={...h,...le};p(I),c(f,le)},fe=async(le,I,L,Q,Y)=>{if(!(!i||!h))try{o("📝 Logging question result to database:",{quiz_session_id:h.id,user_id:i.id,question_id:le,points_earned:I,total_points_possible:L,time_spent:Q,is_correct:Y});const{error:W}=await V.from("quiz_question_logs").insert([{quiz_session_id:h.id,user_id:i.id,question_id:le,points_earned:I,total_points_possible:L,time_spent:Q,answered_at:new Date().toISOString(),is_correct:Y}]);W?o("❌ Error logging question result:",W):o("✅ Question result logged successfully")}catch(W){o("💥 Unexpected error logging question result:",W)}},Z=()=>{_(!0),T(),R(!1),oe({show_answer:!0,timer_active:!1,has_time_expired:!1})},he=()=>{if(!h)return;const le=h.questions[h.current_question_index];_(!1);const I=(le==null?void 0:le.time_to_answer)||30;A(I),R(!1),oe({show_answer:!1,time_left:I,timer_active:!1,timer_started:!1,has_time_expired:!1})},at=async()=>{if(!h)return;const le=d.current?(Date.now()-d.current)/1e3:0,I=le>0&&le<1?1:Math.floor(le),L=h.questions[h.current_question_index],Q=Number(L.points)||0,Y={questionId:L.id,pointsEarned:Q,totalPoints:Q,timeSpent:I,answeredAt:new Date().toISOString()};o("✅ QuizRunner: Correct answer - creating result:",{questionId:L.id,questionPoints:L.points,actualPoints:Q,pointsEarned:Y.pointsEarned,totalPoints:Y.totalPoints,timeSpent:Y.timeSpent});const W=[...h.results,Y];await fe(L.id,Q,Q,I,!0),o("📊 QuizRunner: Updated results array:",{previousResultsLength:h.results.length,newResultsLength:W.length,newResult:Y,allResults:W}),oe({results:W}),ue()},B=async()=>{if(!h)return;const le=d.current?(Date.now()-d.current)/1e3:0,I=le>0&&le<1?1:Math.floor(le),L=h.questions[h.current_question_index],Q=Number(L.points)||0;if(Q>1)k(!0);else{const Y={questionId:L.id,pointsEarned:0,totalPoints:Q,timeSpent:I,answeredAt:new Date().toISOString()};o("❌ QuizRunner: Incorrect answer - creating result:",{questionId:L.id,questionPoints:L.points,actualPoints:Q,pointsEarned:Y.pointsEarned,totalPoints:Y.totalPoints,timeSpent:Y.timeSpent}),await fe(L.id,0,Q,I,!1);const W=[...h.results,Y];o("📊 QuizRunner: Updated results array (incorrect):",{previousResultsLength:h.results.length,newResultsLength:W.length,newResult:Y,allResults:W}),oe({results:W}),ue()}},ee=async()=>{if(!h)return;const le=h.questions[h.current_question_index],I=d.current?Math.floor((Date.now()-d.current)/1e3):0,L=Number(le.points)||0,Q=Number(j)||0,Y={questionId:le.id,pointsEarned:Q,totalPoints:L,timeSpent:I,answeredAt:new Date().toISOString()};o("🔄 QuizRunner: Partial points - creating result:",{questionId:le.id,questionPoints:le.points,actualPoints:L,partialPoints:j,actualPartialPoints:Q,pointsEarned:Y.pointsEarned,totalPoints:Y.totalPoints,timeSpent:Y.timeSpent}),await fe(le.id,Q,L,I,!1);const W=[...h.results,Y];o("📊 QuizRunner: Updated results array (partial):",{previousResultsLength:h.results.length,newResultsLength:W.length,newResult:Y,allResults:W}),oe({results:W}),k(!1),N(0),ue()},ue=()=>{if(h)if(h.current_question_index<h.questions.length-1){const le=h.current_question_index+1,I=h.questions[le],L=(I==null?void 0:I.time_to_answer)||30;_(!1),R(!1),A(L),d.current=Date.now(),oe({current_question_index:le,show_answer:!1,has_time_expired:!1,time_left:L,timer_active:!1,timer_started:!1})}else{const le=h.results,I=le.reduce((L,Q)=>L+(Number(Q.pointsEarned)||0),0);o("🏁 QuizRunner: Quiz completion - final calculations:",{finalResultsLength:le.length,finalResults:le,finalTotalPoints:I,sessionTotalPoints:h.total_points}),g(!0),T(),oe({status:"completed",completed_at:new Date().toISOString(),timer_active:!1,total_points:I})}},H=()=>{if(!h)return{totalPointsEarned:0,totalPossiblePoints:0,accuracy:0,correctAnswers:0,totalQuestions:0,averageTime:0};const le=h.results.reduce((W,G)=>W+G.pointsEarned,0),I=h.results.reduce((W,G)=>W+G.totalPoints,0),L=h.results.filter(W=>W.pointsEarned===W.totalPoints).length,Q=h.results.length>0?Math.round(L/h.results.length*100):0,Y=h.results.length>0?Math.round(h.results.reduce((W,G)=>W+G.timeSpent,0)/h.results.length):0;return{totalPointsEarned:le,totalPossiblePoints:I,accuracy:Q,correctAnswers:L,totalQuestions:h.results.length,averageTime:Y}},et=()=>{r?(u(f),r()):n(m)},ye=()=>{window.innerWidth<640||C(!O)},Ee=le=>{const I=Math.floor(le/60),L=le%60;return`${I}:${L.toString().padStart(2,"0")}`};if(y)return a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading quiz session..."})]})})});if(!h)return a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(qn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Quiz Session Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The quiz session could not be loaded. You will be redirected shortly."}),a.jsx("button",{onClick:()=>n(m),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Go Back Now"})]})})});const Oe=h.questions[h.current_question_index],ot=H(),Ye=h.results.length>0?Math.round(ot.correctAnswers/h.results.length*100):0;return v?a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsx(YW,{title:h.title,stats:ot,bonusXp:h.bonus_xp||0,isFullScreen:O,themeClasses:E,onRestart:et,onBack:()=>n(m),formatTime:Ee})}):a.jsx(pe,{hideHeaderAndSidebar:O,children:a.jsxs("div",{className:`min-h-screen ${E.background} relative overflow-x-hidden`,children:[a.jsx(QW,{isFullScreen:O,isDarkMode:M,currentQuestionIndex:h.current_question_index,totalQuestions:h.questions.length,progressPercentage:Ye,timeLeft:$,timerStarted:U,showAnswer:w,themeClasses:E,onBack:()=>n(m),onToggleFullScreen:ye,onToggleDarkMode:z,onStartTimer:P,formatTime:Ee}),a.jsx("div",{className:`${O?"pt-28 sm:pt-40 px-4 sm:px-6 pb-32 sm:pb-32":"p-4 sm:p-6"}`,children:a.jsx("div",{className:`${O?"w-full max-w-none":"max-w-4xl mx-auto"}`,children:a.jsx("div",{className:`${E.card} rounded-xl shadow-sm p-4 sm:p-8 ${O?"w-full":"mx-auto max-w-3xl"} ${O?"":"border "+E.border}`,children:w?a.jsx(HW,{question:Oe,isFullScreen:O,isDarkMode:M,themeClasses:E}):a.jsx(WW,{question:Oe,hasTimeExpired:D,isFullScreen:O,isDarkMode:M,themeClasses:E})})})}),a.jsx(GW,{isFullScreen:O,showAnswer:w,hasTimeExpired:D,themeClasses:E,onShowAnswer:Z,onShowQuestion:he,onCorrect:at,onIncorrect:B}),a.jsx(XW,{isOpen:S,questionPoints:(Oe==null?void 0:Oe.points)||0,selectedPoints:j,onPointsChange:N,onConfirm:ee,onCancel:()=>k(!1),themeClasses:E,isFullScreen:O})]})})}function JW(){const e=kt(),{user:t,developerLog:r}=ge(),{questions:n,fetchQuestions:s}=aa(),{createQuizSession:i,getActiveSessionsForUser:o}=di(),[l,c]=b.useState(null),[u,d]=b.useState(!0),[f,m]=b.useState(null),h=b.useRef(!1);b.useEffect(()=>{s()},[s]),b.useEffect(()=>{if(h.current){d(!1);return}if(!t){m("User not authenticated"),d(!1);return}if(l){d(!1);return}if(n.length===0)return;(async()=>{var x,v;h.current=!0,d(!0);try{r("🔍 Checking for existing active quick-start sessions...");const w=o(t.id).find(M=>M.type==="quick-start"&&(M.status==="active"||M.status==="paused"));if(w){r("✅ Found existing quick-start session, resuming:",w.id),e(`/quiz/runner/${w.id}`);return}r("🆕 No existing quick-start session found, creating new one..."),r("🎯 Initializing quiz session with",n.length,"total questions");const _=((x=t==null?void 0:t.planSettings)==null?void 0:x.question_tier_access)||["free"];r("👤 User accessible tiers:",_);const j=n.filter(M=>_.includes(M.tier));if(r("✅ Accessible questions:",j.length),j.length===0){m("No questions available for your subscription tier"),d(!1);return}const N=[...j].sort(()=>.5-Math.random()),S=N.slice(0,Math.min(90,N.length));r("🎲 Selected questions for quiz:",S.length);const k=S.reduce((M,E)=>M+E.points,0),O=S.reduce((M,E)=>M+E.time_to_answer,0);r("📊 Quiz metadata - Points:",k,"Minutes:",estimatedMinutes);const C=await i({type:"quick-start",title:"Quick Start Quiz",description:"Test your Pathfinder Bible Experience knowledge with random questions. Each question has a time limit and point value based on difficulty.",user_id:t.id,team_id:t.teamId,questions:S,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((v=S[0])==null?void 0:v.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:k,total_actual_time_spent_seconds:0});r("🎉 Quiz session created with ID:",C),c(C),e(`/quiz/runner/${C}`)}catch(g){r("💥 Error initializing quiz session:",g),m(g instanceof Error?g.message:"Failed to create quiz session"),h.current=!1,d(!1)}})()},[t,n,i,o,e]);const p=()=>{c(null),window.location.href="/quiz"};return u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Preparing your quiz..."})]})}):f?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-red-600 text-xl",children:"⚠"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Unable to Start Quiz"}),a.jsx("p",{className:"text-gray-600 mb-4",children:f}),a.jsx("button",{onClick:()=>window.location.href="/quiz",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Back to Quiz Center"})]})}):l?a.jsx(yh,{quizSessionId:l,backUrl:"/quiz",onSessionDeleted:p}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Starting quiz session..."})]})})}function ZW(){var q,U,D;const e=kt(),{user:t}=ge(),{questions:r,loading:n,fetchQuestions:s}=aa(),{createQuizSession:i}=di(),[o,l]=b.useState(null);b.useEffect(()=>{t&&t.planSettings&&!t.planSettings.allow_create_own_quiz&&e("/quiz",{replace:!0})},[t,e]);const[c,u]=b.useState([]),[d,f]=b.useState({}),[m,h]=b.useState(20);b.useEffect(()=>{s()},[s]);const p=ne.useMemo(()=>kS(r),[r]),y=ne.useCallback(()=>{var T;if(c.length===0)return[];let P=[];return c.forEach(R=>{const F=d[R]||[];if(F.length>0){const J=r.filter(oe=>oe.book_of_bible===R&&F.includes(oe.chapter));P=[...P,...J]}}),P=Ma(P,((T=t==null?void 0:t.subscription)==null?void 0:T.plan)||"free"),[...P].sort(()=>.5-Math.random()).slice(0,Math.min(m,P.length))},[c,d,r,(q=t==null?void 0:t.subscription)==null?void 0:q.plan,m]),x=ne.useCallback(()=>{if(c.length===0)return 0;let P=0;return c.forEach(A=>{var R;const T=d[A]||[];if(T.length>0){const F=r.filter(J=>J.book_of_bible===A&&T.includes(J.chapter));P+=Ma(F,((R=t==null?void 0:t.subscription)==null?void 0:R.plan)||"free").length}}),P},[c,d,r,(U=t==null?void 0:t.subscription)==null?void 0:U.plan]),v=ne.useCallback(()=>c.length===0?"Custom Quiz":c.length===1?`${c[0]} Quiz`:c.length===2?`${c[0]} & ${c[1]} Quiz`:`Multi-Book Quiz (${c.length} books)`,[c]),g=y(),w=ne.useCallback(()=>{if(c.length===0)return"Custom quiz";const P=Object.values(d).reduce((T,R)=>T+R.length,0);return`Custom quiz covering ${c.length<=2?c.join(" & "):`${c.slice(0,2).join(", ")} and ${c.length-2} more`} with ${P} chapters and ${g.length} questions.`},[c,d,g.length]),j=(()=>{var P;return((P=t==null?void 0:t.planSettings)==null?void 0:P.max_questions_custom_quiz)||20})(),N=((D=t==null?void 0:t.subscription)==null?void 0:D.plan)||"free",S=ne.useCallback(P=>{u(A=>{const T=A.includes(P)?A.filter(R=>R!==P):[...A,P];return T.includes(P)||f(R=>{const F={...R};return delete F[P],F}),T})},[]),k=ne.useCallback((P,A)=>{f(T=>{const R=T[P]||[],F=R.includes(A)?R.filter(J=>J!==A):[...R,A];return{...T,[P]:F}})},[]),O=ne.useCallback(P=>{const A=Va(P,r),R=(d[P]||[]).length===A.length;f(F=>({...F,[P]:R?[]:A}))},[r,d]),C=x(),M=ne.useCallback(async()=>{var R;if(g.length===0||!t)return;const P=g.reduce((F,J)=>F+J.points,0);g.reduce((F,J)=>F+J.time_to_answer,0);const A=v(),T=w();try{const F=await i({type:"custom",title:A,description:T,user_id:t.id,team_id:t.teamId,questions:g,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((R=g[0])==null?void 0:R.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:P,total_actual_time_spent_seconds:0});l(F)}catch(F){console.error("Error creating quiz session:",F)}},[g,t,v,w,i]),E=Math.round(g.reduce((P,A)=>P+A.time_to_answer,0)/60),z=g.reduce((P,A)=>P+A.points,0),$=()=>{l(null)};return o?a.jsx(yh,{quizSessionId:o,backUrl:"/quiz",onSessionDeleted:$}):n?a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 text-center",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-6",children:a.jsx(hM,{className:"h-6 w-6 text-blue-600 animate-spin"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading Questions..."}),a.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the available questions."})]})]})})})}):a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>e("/quiz"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Quiz Center"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Qa,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Your Own Quiz"}),a.jsx("p",{className:"text-gray-600",children:"Customize your study experience by selecting specific books and chapters."})]})]}),r.length===0&&!n&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tn,{className:"h-5 w-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-900",children:"No Questions Available"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"No questions were found in the database. Please check if questions have been added to the system."})]})]})}),p.length===0&&r.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{className:"h-5 w-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Loading Books"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Analyzing available Bible books from the question database..."})]})]})}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[N==="enterprise"?a.jsx(fs,{className:"h-5 w-5 text-purple-600"}):N==="pro"?a.jsx(Gi,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900 capitalize",children:[N," Plan"]}),a.jsx("div",{className:"text-sm text-gray-600",children:N==="enterprise"?"Unlimited questions per quiz":`Up to ${j} questions per quiz`})]})]}),N==="free"&&a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Upgrade Plan"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Bible Books"}),p.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No books available"}),a.jsx("p",{className:"text-sm",children:"Questions need to be added to the system"})]}):a.jsx("div",{className:"grid grid-cols-1 gap-2",children:p.map(P=>{var T;const A=Ma(r.filter(R=>R.book_of_bible===P),((T=t==null?void 0:t.subscription)==null?void 0:T.plan)||"free").length;return a.jsx("button",{onClick:()=>S(P),className:`p-4 rounded-lg border-2 text-left transition-all duration-200 ${c.includes(P)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:P}),a.jsxs("div",{className:"text-sm text-gray-500",children:[A," questions available"]})]}),c.includes(P)&&a.jsx(Mt,{className:"h-5 w-5 text-blue-600"})]})},P)})}),c.length>0&&a.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[c.length," book",c.length!==1?"s":""," selected"]})]}),c.map(P=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[P," Chapters"]}),a.jsx("button",{onClick:()=>O(P),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:(d[P]||[]).length===Va(P,r).length?"Deselect All":"Select All"})]}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2 mb-4",children:Va(P,r).map(A=>{var F;const T=Ma(r.filter(J=>J.book_of_bible===P&&J.chapter===A),((F=t==null?void 0:t.subscription)==null?void 0:F.plan)||"free").length,R=(d[P]||[]).includes(A);return a.jsxs("button",{onClick:()=>k(P,A),className:`p-3 rounded-lg border-2 text-center transition-all duration-200 ${R?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,title:`${P} Chapter ${A} - ${T} questions`,children:[a.jsx("div",{className:"font-medium",children:A}),a.jsxs("div",{className:"text-xs text-gray-500",children:[T,"q"]})]},`${P}-${A}`)})})]},P)),C>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Maximum Questions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"range",min:"1",max:Math.min(j,C),value:Math.min(m,C),onChange:P=>h(parseInt(P.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[Math.min(m,C)," question",Math.min(m,C)!==1?"s":""]}),a.jsxs("span",{className:"text-gray-500",children:[C," available"]})]}),m>C&&a.jsxs("div",{className:"flex items-center space-x-2 text-amber-600 text-sm",children:[a.jsx(tn,{className:"h-4 w-4"}),a.jsxs("span",{children:["Not enough questions available. Maximum: ",C]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quiz Preview"}),g.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["~",E]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:z}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.length}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Book",c.length!==1?"s":""]})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Coverage"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Books:"})," ",c.join(", ")]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Total Chapters:"})," ",Object.values(d).reduce((P,A)=>P+A.length,0)]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Difficulty:"})," Mixed levels"]})]})]}),a.jsxs("button",{onClick:M,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Custom Quiz"})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Select books and chapters to see your quiz preview"})]})]})]})]})]})})})})}function eK(){var U;const{assignmentId:e}=RN(),t=vs(),r=kt(),{user:n}=ge(),{questions:s}=aa(),{getAssignmentById:i}=J0(),{createQuizSession:o,loadQuizSession:l,getSessionForAssignment:c,updateQuizSession:u}=di(),[d,f]=b.useState(null),[m,h]=b.useState(null),[p,y]=b.useState(!0),[x,v]=b.useState(null),[g,w]=b.useState("random"),_=t.state,j=ne.useCallback(()=>{var A;if(!d)return[];const D=(_==null?void 0:_.selectedStudyItems)||d.study_items;let P=SS(s,D);return P=Ma(P,((A=n==null?void 0:n.subscription)==null?void 0:A.plan)||"free"),g==="verse"?[...P].sort((T,R)=>{if(T.book_of_bible!==R.book_of_bible)return T.book_of_bible.localeCompare(R.book_of_bible);if(T.chapter!==R.chapter)return T.chapter-R.chapter;const F=T.verse||1,J=R.verse||1;return F-J}):[...P].sort(()=>.5-Math.random())},[d,_==null?void 0:_.selectedStudyItems,s,(U=n==null?void 0:n.subscription)==null?void 0:U.plan,g]),N=ne.useCallback(D=>!D||D.length===0?"":D.map(P=>{if(P.verses&&P.verses.length>0){const A=S(P.verses);return P.chapters.length===1?`${P.book} ${P.chapters[0]}:${A}`:`${P.book} (Ch. ${P.chapters.join(", ")}, Verses: ${A})`}else return P.chapters.length===1?`${P.book} Chapter ${P.chapters[0]}`:`${P.book} (Ch. ${P.chapters.join(", ")})`}).join(", "),[]),S=ne.useCallback(D=>{if(!D||D.length===0)return"";const P=[...D].sort((F,J)=>F-J),A=[];let T=P[0],R=P[0];for(let F=1;F<P.length;F++)P[F]===R+1?R=P[F]:(A.push(T===R?`${T}`:`${T}-${R}`),T=R=P[F]);return A.push(T===R?`${T}`:`${T}-${R}`),A.join(", ")},[]),k=ne.useCallback(async()=>{var F;if(!d||!n)return;const D=j();if(D.length===0){v("No questions available for this assignment");return}const P=D.reduce((J,oe)=>J+oe.points,0);D.reduce((J,oe)=>J+oe.time_to_answer,0);const A=(_==null?void 0:_.selectedStudyItems)||d.study_items,T=A.length===1?`${A[0].book} Study Quiz`:"Multi-Book Study Quiz",R=`Study quiz for assignment: ${d.description||"Study assignment"}`;try{const J=await o({type:"study-assignment",title:T,description:R,user_id:n.id,team_id:n.teamId,assignment_id:d.id,questions:D,current_question_index:0,results:[],status:"active",show_answer:!1,time_left:((F=D[0])==null?void 0:F.time_to_answer)||30,timer_active:!1,timer_started:!1,has_time_expired:!1,total_points:0,max_points:P,total_actual_time_spent_seconds:0});h(J)}catch(J){console.error("Error creating quiz session:",J),v("Failed to create quiz session")}},[d,n,j,_==null?void 0:_.selectedStudyItems,o]),O=ne.useCallback(()=>{const D=c(e,n.id);D&&h(D.id)},[e,n,c]),C=ne.useCallback(()=>{h(null)},[]);if(ne.useCallback(D=>{if(D.length===0)return"";if(D.length===1){const P=D[0];return`${P.book} (Ch. ${P.chapters.join(", ")})`}return`${D.length} books`},[]),b.useEffect(()=>{n&&n.planSettings&&!n.planSettings.allow_study_schedule_quiz&&r("/quiz",{replace:!0})},[n,r]),b.useEffect(()=>{if(!e||!n){v("Assignment not found"),y(!1);return}(async()=>{try{console.log("📥 Loading assignment:",e);const P=await i(e);if(!P){v("Assignment not found"),y(!1);return}if(!(P.user_id===n.id||n.teamRole&&["owner","admin"].includes(n.teamRole))){v("You do not have access to this assignment"),y(!1);return}console.log("✅ Assignment loaded successfully:",P),f(P);const T=c(e,n.id);T&&h(T.id),y(!1)}catch(P){console.error("💥 Error loading assignment:",P),v("Failed to load assignment"),y(!1)}})()},[e,n,c,i]),p)return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading assignment..."})]})})});if(x)return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(tn,{className:"h-8 w-8 text-red-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),a.jsx("p",{className:"text-gray-600 mb-6",children:x}),a.jsx("button",{onClick:()=>r("/schedule"),className:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:"Return to Schedule"})]})]})})})});if(m)return a.jsx(yh,{quizSessionId:m,backUrl:"/schedule",onSessionDeleted:C});if(!d)return null;const M=(_==null?void 0:_.selectedStudyItems)||d.study_items,E=j(),z=c(e,n.id),$=E.reduce((D,P)=>D+P.points,0),q=Math.round(E.reduce((D,P)=>D+P.time_to_answer,0)/60);return a.jsx(pe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"flex items-center mb-6",children:a.jsxs("button",{onClick:()=>r("/schedule"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors duration-200",children:[a.jsx(so,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Schedule"})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 sm:p-8 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(ke,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Study Assignment Quiz"}),a.jsx("p",{className:"text-gray-600",children:d.description||"Complete your study assignment"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Assignment Details"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Date:"})," ",new Date(d.date).toLocaleDateString()]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Study Items:"})," ",N(M)]}),(_==null?void 0:_.selectedStudyItems)&&a.jsx("div",{className:"text-blue-600 text-xs mt-2",children:"✓ Custom selection applied"})]})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-medium text-purple-900 mb-3",children:"Question Order"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"verse",checked:g==="verse",onChange:D=>w(D.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"By Verse Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in biblical sequence)"})]}),a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"questionOrder",value:"random",checked:g==="random",onChange:D=>w(D.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),a.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Random Order"}),a.jsx("span",{className:"text-xs text-purple-700",children:"(Questions appear in mixed order)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Questions"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["~",q]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Minutes"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:$}),a.jsx("div",{className:"text-sm text-gray-600",children:"Max Points"})]})]}),E.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No questions available"}),a.jsx("p",{className:"text-sm text-gray-400",children:"There are no questions available for the selected study items with your current subscription tier."})]}):a.jsx("div",{className:"space-y-4",children:z?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800",children:[a.jsx(Ie,{className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Quiz in Progress"})]}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"You have an active quiz session for this assignment. You can resume where you left off."}),a.jsxs("div",{className:"mt-3 text-sm text-yellow-700",children:[a.jsxs("div",{children:["Progress: ",z.results.length," of ",z.questions.length," questions"]}),a.jsxs("div",{children:["Current Score: ",z.total_points," points"]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:O,className:"flex items-center justify-center space-x-2 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200 flex-1",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Resume Quiz"})]}),a.jsxs("button",{onClick:k,className:"flex items-center justify-center space-x-2 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200 flex-1",children:[a.jsx(Hi,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Over"})]})]})]}):a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:[a.jsx(io,{className:"h-5 w-5"}),a.jsx("span",{children:"Start Study Quiz"})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Study Items"}),a.jsx("div",{className:"space-y-3",children:M.map((D,P)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:D.book}),a.jsx("div",{className:"text-sm text-gray-600",children:D.verses&&D.verses.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:["Chapters: ",D.chapters.join(", ")]}),a.jsxs("div",{className:"text-purple-600 font-medium",children:["Verses: ",S(D.verses)]})]}):a.jsxs("div",{children:["Chapters: ",D.chapters.join(", ")," (All verses)"]})})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[(()=>{let A=s.filter(T=>T.book_of_bible===D.book&&D.chapters.includes(T.chapter));return D.verses&&D.verses.length>0&&(A=A.filter(T=>{const R=T.verse||1;return D.verses.includes(R)})),A.length})()," question",(()=>{let A=s.filter(R=>R.book_of_bible===D.book&&D.chapters.includes(R.chapter));return D.verses&&D.verses.length>0&&(A=A.filter(R=>{const F=R.verse||1;return D.verses.includes(F)})),A.length!==1?"s":""})()]})]},P))})]})]})})})})}function tK(){const{userAchievements:e,achievements:t,loading:r,error:n}=X0();if(r)return a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})});if(n)return a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:n,className:"mb-6"})})});const s=new Map(e.map(i=>[i.achievement_id,i]));return a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Achievements"}),a.jsx("p",{className:"text-gray-600",children:"Track your progress and unlock new milestones!"})]}),t.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[a.jsx(St,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Achievements Defined"}),a.jsx("p",{className:"text-gray-600",children:"It looks like there are no achievements configured in the system yet."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>{var c;const o=s.has(i.id),l=o?(c=s.get(i.id))==null?void 0:c.unlocked_at:null;return a.jsxs("div",{className:_e("bg-white rounded-xl shadow-sm p-6 flex items-center space-x-4",o?"border-2 border-green-200":"opacity-70 grayscale"),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:_e("h-16 w-16 rounded-full flex items-center justify-center",o?"bg-green-100":"bg-gray-100"),children:i.badge_icon_url?a.jsx("img",{src:i.badge_icon_url,alt:i.name,className:"h-10 w-10"}):a.jsx(St,{className:_e("h-8 w-8",o?"text-green-600":"text-gray-400")})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:_e("text-lg font-semibold",o?"text-gray-900":"text-gray-600"),children:i.name}),a.jsx("p",{className:_e("text-sm",o?"text-gray-600":"text-gray-500"),children:i.description}),o?a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-green-600 mt-1",children:[a.jsx(_t,{className:"h-3 w-3"}),a.jsxs("span",{children:["Unlocked on ",new Date(l).toLocaleDateString()]})]}):a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 mt-1",children:[a.jsx(wS,{className:"h-3 w-3"}),a.jsx("span",{children:"Locked"})]})]})]},i.id)})})]})})}function rK(e){const[t,r]=b.useState(new Date),n=b.useMemo(()=>{const l=t.getFullYear(),c=t.getMonth(),u=hr(new Date),d=hr(new Date(l,c,1));hr(new Date(l,c+1,0));const f=hr(new Date(d));f.setDate(f.getDate()-d.getDay());const m=[],h=hr(new Date(f));for(let p=0;p<42;p++){const y=e.find(x=>$p(x.date,h));m.push({date:new Date(h),isCurrentMonth:h.getMonth()===c,isToday:$p(h,u),assignment:y}),h.setDate(h.getDate()+1)}return m},[t,e]);return{currentDate:t,setCurrentDate:r,calendarDays:n,navigateMonth:l=>{const c=new Date(t);c.setMonth(c.getMonth()+(l==="next"?1:-1)),r(c)},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}}function nK(e){const[t,r]=b.useState([]),[n,s]=b.useState(""),[i,o]=b.useState([]),[l,c]=b.useState([]),[u,d]=b.useState(""),[f,m]=b.useState(""),[h,p]=b.useState(""),y=b.useCallback($=>{const q=e.filter(D=>D.book_of_bible===$);return q.length===0?1:Math.max(...q.map(D=>D.chapter))},[e]),x=b.useCallback(($,q)=>tm($,q,e),[e]),v=b.useCallback($=>{o(q=>q.includes($)?q.filter(U=>U!==$):[...q,$].sort((U,D)=>U-D)),c([])},[]),g=b.useCallback(()=>{if(!n)return;const $=Va(n,e);o($),c([])},[n,e]),w=b.useCallback(()=>{o([]),c([])},[]),_=b.useCallback($=>{c(q=>q.includes($)?q.filter(U=>U!==$):[...q,$].sort((U,D)=>U-D))},[]),j=b.useCallback(()=>{if(!n||i.length!==1)return;const $=tm(n,i[0],e);c($)},[n,i,e]),N=b.useCallback(()=>{c([]),d(""),m("")},[]),S=b.useCallback(()=>{if(!n||i.length!==1)return;const $=parseInt(u),q=parseInt(f);if(isNaN($)||isNaN(q)||$>q||$<1)return;const U=tm(n,i[0],e),D=Math.max(...U);if(q>D)return;const P=[];for(let A=$;A<=q;A++)U.includes(A)&&P.push(A);c(P)},[n,i,u,f,e]),k=b.useCallback($=>{d($)},[]),O=b.useCallback($=>{m($)},[]),C=b.useCallback(()=>{if(!n||i.length===0)return;const $={book:n,chapters:[...i],verses:l.length>0?[...l]:void 0};r(q=>[...q,$]),s(""),o([]),c([]),d(""),m("")},[n,i,l]),M=b.useCallback($=>{r(q=>q.filter((U,D)=>D!==$))},[]),E=b.useCallback(()=>{r([]),s(""),o([]),c([]),d(""),m(""),p("")},[]),z=b.useCallback(($,q="")=>{r($),p(q),s(""),o([]),c([]),d(""),m("")},[]);return{studyItems:t,currentBook:n,currentChapters:i,currentVerses:l,startVerseInput:u,endVerseInput:f,description:h,setCurrentBook:s,setDescription:p,toggleChapter:v,selectAllChapters:g,clearChapters:w,toggleVerse:_,selectAllVerses:j,clearVerses:N,selectVerseRange:S,updateStartVerseInput:k,updateEndVerseInput:O,addStudyItem:C,removeStudyItem:M,resetForm:E,initializeForm:z,getMaxChapters:y,getVersesForBookChapter:x}}function sK({currentDate:e,calendarDays:t,dayNames:r,monthNames:n,onNavigateMonth:s,onDateClick:i,onToday:o,formatStudyItems:l,normalizeAssignment:c,getSessionForAssignment:u,onStartQuiz:d,onResumeQuiz:f,user:m,canManageSchedules:h=!1,questions:p=[]}){const{developerLog:y}=ge();return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:[n[e.getMonth()]," ",e.getFullYear()]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>s("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(vS,{className:"h-5 w-5 text-gray-600"})}),a.jsx("button",{onClick:o,className:"px-3 py-2 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",children:"Today"}),a.jsx("button",{onClick:()=>s("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200",children:a.jsx(F0,{className:"h-5 w-5 text-gray-600"})})]})]}),a.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[r.map(x=>a.jsx("div",{className:"p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:x},x)),t.map((x,v)=>{var _,j,N,S;const g=x.assignment&&m&&u&&u(x.assignment.id,m.id);x.assignment&&y("🗓️ Calendar Day Debug:",{date:x.date.toDateString(),assignmentId:(_=x.assignment)==null?void 0:_.id,assignmentUserId:(j=x.assignment)==null?void 0:j.user_id,currentUserId:m==null?void 0:m.id,hasActiveSession:!!g,activeSessionId:g==null?void 0:g.id,assignmentCompleted:(N=x.assignment)==null?void 0:N.completed,isUserAssignment:((S=x.assignment)==null?void 0:S.user_id)===(m==null?void 0:m.id),onStartQuizExists:!!d,onResumeQuizExists:!!f});const w=x.isCurrentMonth&&(h||x.assignment&&x.assignment.user_id===(m==null?void 0:m.id));return a.jsxs("button",{onClick:()=>w?i(x):void 0,onClick:k=>{const O=k.target,C=O.closest(".quiz-action-button");y("🖱️ Calendar day clicked:",{date:x.date.toDateString(),isClickable:w,isQuizButtonClick:!!C,targetElement:O.tagName,targetClasses:O.className}),!C&&w&&i(x)},className:`
                relative p-2 sm:p-3 h-20 sm:h-24 text-left rounded-lg transition-all duration-200
                ${x.isCurrentMonth?w?"hover:bg-gray-50 cursor-pointer":"cursor-default":"text-gray-300 cursor-default"}
                ${x.isToday?"bg-indigo-50 border-2 border-indigo-200":"border border-gray-100"}
                ${x.assignment?x.assignment.completed?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200":""}
              `,children:[a.jsx("div",{className:`text-xs sm:text-sm font-medium ${x.isToday?"text-indigo-600":x.isCurrentMonth?"text-gray-900":"text-gray-300"}`,children:x.date.getDate()}),x.assignment&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:`text-xs font-medium truncate hidden sm:block ${x.assignment.completed?"text-green-700":"text-yellow-700"}`,children:l(c(x.assignment).study_items)}),a.jsx("div",{className:"flex items-center justify-between mt-1",children:x.assignment.completed?a.jsx("span",{className:"text-xs text-green-600 hidden sm:inline",children:"✓ Completed"}):x.assignment.user_id===(m==null?void 0:m.id)&&d&&f?a.jsxs("button",{className:"quiz-action-button flex items-center space-x-1 px-2 py-1 rounded text-xs font-medium transition-all duration-200 bg-green-600 text-white hover:bg-green-700",onClick:k=>{k.stopPropagation(),y("🎯 Calendar Quiz Button Clicked:",{date:x.date.toDateString(),assignmentId:x.assignment.id,hasActiveSession:!!g,activeSessionId:g==null?void 0:g.id,action:g?"resume":"start"}),g?(f(x.assignment),y("🔄 Calling onResumeQuiz with assignment:",x.assignment.id)):(d(x.assignment),y("▶️ Calling onStartQuiz with assignment:",x.assignment.id))},title:g?"Resume Quiz":"Start Quiz",children:[g?a.jsx(Hi,{className:"h-3 w-3 sm:h-4 sm:w-4"}):a.jsx(io,{className:"h-3 w-3 sm:h-4 sm:w-4"}),a.jsx("span",{className:"hidden sm:inline",children:g?"Resume":"Start"})]}):g?a.jsx("span",{className:"text-xs text-blue-600 hidden sm:inline",children:"Active"}):a.jsx("span",{className:"text-xs text-yellow-600 hidden sm:inline",children:"Pending"})})]})]},v)})]})]})}function iK({stats:e}){return a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-indigo-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Assignments"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.totalAssignments})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(it,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"This Month"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.thisMonth})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Completed"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.completed})]})]})}),a.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ke,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"}),a.jsxs("div",{className:"ml-3 sm:ml-4",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Books Scheduled"}),a.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:e.booksScheduled})]})]})})]})}function aK({isOpen:e,onClose:t,selectedDate:r,teamMembers:n,isNewAssignment:s,initialSelectedMembers:i,editingAssignment:o,studyItems:l,currentBook:c,currentChapters:u,currentVerses:d,description:f,onBookChange:m,onDescriptionChange:h,onToggleChapter:p,onSelectAllChapters:y,onClearChapters:x,onToggleVerse:v,onSelectAllVerses:g,onClearVerses:w,selectVerseRange:_,startVerseInput:j,endVerseInput:N,updateStartVerseInput:S,updateEndVerseInput:k,onAddStudyItem:O,onRemoveStudyItem:C,onSave:M,onDelete:E,getMaxChapters:z,getVersesForBookChapter:$,questions:q,currentUserId:U}){const[D,P]=ne.useState(i);if(ne.useEffect(()=>{P(i)},[i]),!r)return null;const A=Z=>{P(he=>he.includes(Z)?he.filter(at=>at!==Z):[...he,Z])},T=()=>{P(n.map(Z=>Z.userId))},R=()=>{P([])},F=()=>{if(D.length===0)return"No members selected";if(D.length===1){const Z=n.find(he=>he.userId===D[0]);return(Z==null?void 0:Z.user.name)||"Unknown member"}return`${D.length} members selected`},J=ne.useMemo(()=>kS(q),[q]),oe=c&&u.length===1,fe=oe?$(c,u[0]):[];return a.jsxs(kn,{isOpen:e,onClose:t,title:o?"Edit Assignment":"Add Study Assignment",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{children:o&&a.jsxs("button",{onClick:E,className:"flex items-center space-x-2 px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors duration-200",children:[a.jsx(si,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete"})]})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:()=>M(D,l,f),disabled:l.length===0||D.length===0,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsxs("span",{children:[o?"Update":"Save"," Assignment"]})]})]})]}),children:[a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"text-sm font-medium text-blue-900",children:["Assignment for: ",F()]}),a.jsx("div",{className:"text-sm text-blue-700",children:ao(r,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),s&&a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-900 flex items-center space-x-2",children:[a.jsx(He,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{children:"Select Team Members"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:T,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Select All"}),a.jsx("button",{type:"button",onClick:R,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-48 overflow-y-auto",children:n.map(Z=>a.jsxs("button",{type:"button",onClick:()=>A(Z.userId),className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all duration-200 text-left ${D.includes(Z.userId)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:Z.user.name.split(" ").map(he=>he[0]).join("")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-medium text-gray-900 truncate",children:Z.user.name}),a.jsxs("div",{className:"text-sm text-gray-500 capitalize",children:[Z.role,U&&Z.userId===U&&a.jsx("span",{className:"text-indigo-600 font-medium",children:" (You)"})]})]}),D.includes(Z.userId)&&a.jsx(Mt,{className:"h-5 w-5 text-indigo-600 flex-shrink-0"})]},Z.userId))}),D.length>0&&a.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[D.length," member",D.length!==1?"s":""," selected"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Add Study Item"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bible Book"}),a.jsxs("select",{value:c,onChange:Z=>m(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"",children:"Select a book"}),J.map(Z=>a.jsx("option",{value:Z,children:Z},Z))]}),J.length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"No books available. Questions need to be added to the system."})]}),c&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Chapters"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:y,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:x,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),a.jsx("div",{className:"grid grid-cols-6 gap-2 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:Va(c,q).map(Z=>a.jsx("button",{type:"button",onClick:()=>p(Z),className:`p-2 text-sm rounded transition-colors duration-200 ${u.includes(Z)?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Z},Z))}),Va(c,q).length===0&&a.jsxs("p",{className:"text-sm text-gray-500",children:["No chapters available for ",c,". Questions need to be added for this book."]}),u.length>0&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Selected: ",u.join(", ")," (",u.length," chapter",u.length!==1?"s":"",")"]})]}),oe&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Verses (Optional)"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",onClick:g,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Select All"}),a.jsx("button",{type:"button",onClick:w,className:"text-xs text-gray-600 hover:text-gray-700",children:"Clear"})]})]}),fe.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[a.jsx("div",{className:"text-sm font-medium text-purple-900 mb-2",children:"Quick Range Selection"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"number",min:"1",max:Math.max(...fe),value:j,onChange:Z=>S(Z.target.value),placeholder:"Start",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("span",{className:"text-purple-700 font-medium",children:"to"}),a.jsx("input",{type:"number",min:"1",max:Math.max(...fe),value:N,onChange:Z=>k(Z.target.value),placeholder:"End",className:"w-20 px-2 py-1 text-sm border border-purple-300 rounded focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"}),a.jsx("button",{type:"button",onClick:_,disabled:!j||!N,className:"px-3 py-1 bg-purple-600 text-white text-sm rounded hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:"Select Range"})]}),a.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Example: Enter 1 to 15 to select verses 1-15"})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1 max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-3",children:fe.map(Z=>a.jsx("button",{type:"button",onClick:()=>v(Z),className:`p-1 text-xs rounded transition-colors duration-200 ${d.includes(Z)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Z},Z))}),d.length>0&&a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["Selected verses: ",d.join(", ")," (",d.length," verse",d.length!==1?"s":"",")"]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Leave empty to include all verses in ",c," Chapter ",u[0]]}),a.jsxs("div",{className:"text-xs text-purple-600 mt-2 p-2 bg-purple-50 rounded",children:["💡 ",a.jsx("strong",{children:"Tip:"})," Use the range selector above for consecutive verses (e.g., 1-15), or click individual verses below for specific selections"]})]}):a.jsxs("div",{className:"text-sm text-gray-500 p-3 bg-gray-50 rounded-lg",children:["No verses available for ",c," Chapter ",u[0],". Questions need to be added for this chapter."]})]}),c&&u.length>1&&a.jsx("div",{className:"text-xs text-gray-500 p-2 bg-blue-50 rounded-lg",children:"💡 Select exactly one chapter to enable verse-specific selection"}),a.jsxs("button",{type:"button",onClick:O,disabled:!c||u.length===0||J.length===0,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add to Assignment"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Assignment Items"}),l.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ke,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{children:"No study items added yet"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map((Z,he)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:Z.book}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Chapters: ",Z.chapters.join(", ")," (",Z.chapters.length," chapter",Z.chapters.length!==1?"s":"",")",Z.verses&&Z.verses.length>0&&a.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Verses: ",Z.verses.join(", ")," (",Z.verses.length," verse",Z.verses.length!==1?"s":"",")"]})]})]}),a.jsx("button",{type:"button",onClick:()=>C(he),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(si,{className:"h-4 w-4"})})]},he))}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Study Notes (Optional)"}),a.jsx("textarea",{value:f,onChange:Z=>h(Z.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Add study focus, themes, or special instructions..."})]})]})]})]})}function oK({memberAssignments:e,selectedMember:t,user:r,getSessionForAssignment:n,onResumeQuiz:s,onStartQuiz:i,onEditAssignment:o,normalizeAssignment:l,canManageSchedules:c=!1,onDeleteQuizSession:u,questions:d}){const f=hr(new Date),m=e.filter(h=>h.date.getTime()>=f.getTime()).sort((h,p)=>h.date.getTime()-p.date.getTime()).slice(0,5);return a.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Upcoming Assignments ",t?`for ${t.user.name}`:""]}),a.jsxs("div",{className:"space-y-3",children:[m.map(h=>{const p=l(h),y=r&&n&&n(h.id,r.id),x=h.user_id===(r==null?void 0:r.id);return a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`h-10 w-10 rounded-lg flex items-center justify-center ${h.completed?"bg-green-100":y?"bg-blue-100":"bg-yellow-100"}`,children:h.completed?a.jsx(Mt,{className:"h-5 w-5 text-green-600"}):y?a.jsx(Hi,{className:"h-5 w-5 text-blue-600"}):a.jsx(ke,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:oo(p.study_items)}),a.jsxs("div",{className:"text-sm text-gray-600",children:[ao(h.date,{weekday:"long",month:"short",day:"numeric"}),h.completed&&a.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"✓ Completed"}),y&&!h.completed&&a.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:"• Quiz Active"})]}),h.description&&a.jsx("div",{className:"text-sm text-gray-500 mt-1",children:h.description})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[!h.completed&&x&&a.jsxs("div",{className:"flex items-center space-x-2",children:[y&&u&&a.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this quiz session? All progress will be lost.")&&u(y.id)},className:"flex items-center space-x-1 px-2 py-1 rounded-lg text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 transition-colors duration-200",title:"Delete quiz session",children:a.jsx(si,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>{y?s(h):i(h)},className:`flex items-center space-x-1 px-3 py-1 rounded-lg text-sm font-medium transition-colors duration-200 ${y?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:y?a.jsxs(a.Fragment,{children:[a.jsx(Hi,{className:"h-3 w-3"}),a.jsx("span",{children:"Resume"})]}):a.jsxs(a.Fragment,{children:[a.jsx(io,{className:"h-3 w-3"}),a.jsx("span",{children:"Quiz"})]})})]}),c&&a.jsx("button",{onClick:()=>o(h),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})})]})]},h.id)}),m.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No upcoming assignments ",t?`for ${t.user.name}`:""]}),a.jsx("p",{className:"text-sm text-gray-400",children:c?"Click on a calendar date to add an assignment":"Your team admin will assign study schedules"})]})]})]})}function lK(){var Oc,zo;const{user:e,refreshUser:t}=ge(),{developerLog:r}=ge(),{questions:n,fetchQuestions:s}=aa(),{getSessionForAssignment:i,deleteQuizSession:o}=di(),l=kt(),{assignments:c,teamMembers:u,loading:d,error:f,normalizeAssignment:m,saveAssignment:h,deleteAssignment:p}=J0(),[y,x]=b.useState(""),[v,g]=b.useState([]);b.useEffect(()=>{u.length>0&&!y&&e&&x(e.id)},[u,y,e]);const w=c.filter(xe=>xe.user_id===y),{currentDate:_,setCurrentDate:j,calendarDays:N,navigateMonth:S,monthNames:k,dayNames:O}=rK(w),{studyItems:C,currentBook:M,currentChapters:E,currentVerses:z,startVerseInput:$,endVerseInput:q,description:U,setCurrentBook:D,setDescription:P,toggleChapter:A,selectAllChapters:T,clearChapters:R,toggleVerse:F,selectAllVerses:J,clearVerses:oe,selectVerseRange:fe,updateStartVerseInput:Z,updateEndVerseInput:he,addStudyItem:at,removeStudyItem:B,resetForm:ee,initializeForm:ue,getMaxChapters:H,getVersesForBookChapter:et}=nK(n);b.useEffect(()=>{s()},[s]);const[ye,Ee]=b.useState(null),[Oe,ot]=b.useState(!1),[Ye,le]=b.useState(null),[I,L]=b.useState(!1),Q=u.find(xe=>xe.userId===y),Y=(e==null?void 0:e.teamRole)==="owner"||(e==null?void 0:e.teamRole)==="admin";if(r("🔍 Schedule: Current user:",e),r("🔍 Schedule: User team info:",{teamId:e==null?void 0:e.teamId,teamRole:e==null?void 0:e.teamRole}),r("🔍 Schedule: Plan settings:",e==null?void 0:e.planSettings),r("🔍 Schedule: Schedule access:",(Oc=e==null?void 0:e.planSettings)==null?void 0:Oc.allow_study_schedule_quiz),!(((zo=e==null?void 0:e.planSettings)==null?void 0:zo.allow_study_schedule_quiz)??!1))return a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[a.jsx("div",{className:"h-16 w-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yt,{className:"h-8 w-8 text-purple-600"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Study Schedule"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Study Schedule is a premium feature that helps you organize and track your Bible study progress with structured assignments."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Upgrade to Pro Plan"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Get access to Study Schedule and other premium features by upgrading your subscription."})]}),a.jsxs("div",{className:"flex justify-center space-x-4",children:[a.jsx("button",{onClick:async()=>{r("🔄 Schedule: Manually refreshing user profile..."),await t()},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors duration-200",children:"Refresh Permissions"}),a.jsx("button",{onClick:()=>l("/billing"),className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors duration-200",children:"Upgrade Plan"}),a.jsx("button",{onClick:()=>l("/quiz"),className:"border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Back to Quiz Center"})]})]})})});r("Schedule: All assignments:",c),r("Schedule: Selected viewing member ID:",y),r("Schedule: Filtered member assignments:",w);const G={totalAssignments:w.length,thisMonth:w.filter(xe=>xe.date.getMonth()===_.getMonth()&&xe.date.getFullYear()===_.getFullYear()).length,completed:w.filter(xe=>xe.completed).length,booksScheduled:new Set(w.flatMap(xe=>m(xe).study_items.map(ks=>ks.book))).size},ie=xe=>{if(!(!xe.isCurrentMonth||!y||!Y)){if(Ee(xe.date),xe.assignment){const Jt=m(xe.assignment);le(Jt),ue(Jt.study_items,Jt.description||""),g([Jt.user_id]),L(!1)}else le(null),ee(),g(y?[y]:[]),L(!0);ot(!0)}},we=async(xe,Jt,ks)=>{if(!(!ye||Jt.length===0||xe.length===0||!e))try{for(const bh of xe){const rA={id:(Ye==null?void 0:Ye.id)||crypto.randomUUID(),user_id:bh,team_id:e.teamId||"",date:ye,study_items:[...Jt],description:ks.trim()||void 0,created_by:e.id,created_at:(Ye==null?void 0:Ye.created_at)||new Date().toISOString(),completed:(Ye==null?void 0:Ye.completed)||!1,completed_at:Ye==null?void 0:Ye.completed_at};await h(rA)}ot(!1),ee(),Ee(null),le(null),g([]),L(!1)}catch(bh){console.error("Error saving assignment:",bh)}},De=async()=>{if(Ye)try{await p(Ye.id),ot(!1),ee(),Ee(null),le(null),g([]),L(!1)}catch(xe){console.error("Error deleting assignment:",xe)}},Xt=xe=>{l(`/quiz/study-assignment/${xe.id}`,{state:{selectedStudyItems:xe.study_items}})},yi=xe=>{l(`/quiz/study-assignment/${xe.id}`)},Cn=xe=>{if(!Y)return;const Jt=new Date(xe.date);Ee(Jt);const ks=m(xe);le(ks),ue(ks.study_items,ks.description||""),g([ks.user_id]),L(!1),ot(!0)},vh=async xe=>{try{await o(xe)}catch(Jt){console.error("Error deleting quiz session:",Jt)}},Io=xe=>{D(xe),R()},$o=xe=>{Y&&x(xe)};return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Study Schedule"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:Y?"Plan and manage individual study assignments for your team members.":"View your personal study assignments and start quizzes."})]}),a.jsx(Up,{teamMembers:u,selectedMemberId:y,onSelectMember:$o,selectedMemberInfo:Q,disabled:!Y}),a.jsx(iK,{stats:G}),a.jsx("div",{className:"mb-8",children:a.jsx(FS,{allAssignments:w,loading:d,user:e,questions:n,getSessionForAssignment:i,developerLog:r})}),a.jsx(sK,{currentDate:_,calendarDays:N,dayNames:O,monthNames:k,onNavigateMonth:S,onDateClick:ie,onToday:()=>j(new Date),formatStudyItems:xe=>oo(xe),normalizeAssignment:m,getSessionForAssignment:i,onStartQuiz:Xt,onResumeQuiz:yi,user:e,canManageSchedules:Y}),a.jsx(oK,{memberAssignments:w,selectedMember:Q,user:e,getSessionForAssignment:i,onResumeQuiz:yi,onStartQuiz:Xt,onEditAssignment:Cn,normalizeAssignment:m,canManageSchedules:Y,onDeleteQuizSession:vh,questions:n}),Oe&&Y&&a.jsx(aK,{isOpen:Oe,onClose:()=>{ot(!1),ee(),Ee(null),le(null),g([]),L(!1)},selectedDate:ye,teamMembers:u,isNewAssignment:I,initialSelectedMembers:v,editingAssignment:Ye,studyItems:C,currentBook:M,currentChapters:E,currentVerses:z,description:U,onBookChange:Io,onDescriptionChange:P,onToggleChapter:A,onSelectAllChapters:T,onClearChapters:R,onToggleVerse:F,onSelectAllVerses:J,onClearVerses:oe,selectVerseRange:fe,startVerseInput:$,endVerseInput:q,updateStartVerseInput:Z,updateEndVerseInput:he,onAddStudyItem:at,onRemoveStudyItem:B,onSave:we,onDelete:De,getMaxChapters:H,getVersesForBookChapter:et,questions:n,currentUserId:e==null?void 0:e.id})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Up,{teamMembers:[],selectedMemberId:"",onSelectMember:()=>{},disabled:!0})})})}function cK({teamId:e,startDate:t,endDate:r}){const{developerLog:n,refreshUser:s}=ge(),[i,o]=b.useState([]),[l,c]=b.useState(!0),[u,d]=b.useState(null),f=b.useCallback(async()=>{var m,h;if(!e){n("🔍 useTeamLeaderboardData: No teamId provided, skipping data fetch"),c(!1),o([]);return}n("🔍 useTeamLeaderboardData: Starting team leaderboard data fetch for team:",e,"with date range:",t,r),c(!0),d(null);try{n("🔍 useTeamLeaderboardData: Using secure function to fetch team leaderboard data");let p,y;try{const g=await V.rpc("get_team_leaderboard_data",{p_team_id:e,p_start_date:t?t.toISOString():null,p_end_date:r?r.toISOString():null});p=g.data,y=g.error}catch(g){if(n("❌ useTeamLeaderboardData: RPC call failed with error:",g),(m=g==null?void 0:g.message)!=null&&m.includes("Team with ID")&&((h=g==null?void 0:g.message)!=null&&h.includes("does not exist"))){n("🔄 useTeamLeaderboardData: Team does not exist, refreshing user profile to clear invalid team data");try{await s(),n("✅ useTeamLeaderboardData: User profile refreshed, clearing data")}catch(w){n("❌ useTeamLeaderboardData: Failed to refresh user profile:",w)}}p=[],y=null}let x;try{Array.isArray(p)?x=p:p&&typeof p=="object"?x=[p]:x=[]}catch(g){n("❌ useTeamLeaderboardData: Error processing leaderboard data:",g),x=[]}n("✅ useTeamLeaderboardData: Fetched leaderboard data:",x.length,"members");const v=x.map(g=>({userId:g.user_id,userName:g.user_name,role:g.role,totalQuizzesCompleted:Number(g.total_quizzes_completed),totalQuestionsAnswered:Number(g.total_questions_answered),averageScore:Number(g.average_score),totalTimeSpentMinutes:Number(g.total_quizzes_completed)===0?0:Number(g.total_time_spent_minutes),studyStreak:Number(g.study_streak),totalPointsEarned:Number(g.total_points_earned),totalPossiblePoints:Number(g.total_possible_points)}));n("✅ useTeamLeaderboardData: Transformed leaderboard data:",v),o(v)}catch(p){console.error("❌ useTeamLeaderboardData: Error fetching team leaderboard data:",p),d(p.message||"Failed to load team leaderboard data"),o([])}finally{c(!1)}},[e,t,r,n]);return b.useEffect(()=>{f()},[f]),{data:i,loading:l,error:u,refreshData:f}}function uK({data:e,loading:t,error:r}){const[n,s]=b.useState("totalPointsEarned"),[i,o]=b.useState("desc"),l=e.filter(p=>p.role==="member"),c=ne.useMemo(()=>[...l].sort((p,y)=>{const x=p[n],v=y[n];return typeof x=="number"&&typeof v=="number"?i==="desc"?v-x:x-v:typeof x=="string"&&typeof v=="string"?i==="desc"?v.localeCompare(x):x.localeCompare(v):0}),[l,n,i]),u=p=>{n===p?o(i==="desc"?"asc":"desc"):(s(p),o("desc"))},d=p=>{switch(p){case 0:return a.jsx(St,{className:"h-5 w-5 text-yellow-500"});case 1:return a.jsx(pM,{className:"h-5 w-5 text-gray-400"});case 2:return a.jsx(pr,{className:"h-5 w-5 text-amber-600"});default:return a.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",p+1]})}},f=p=>p>=90?"text-green-600":p>=80?"text-blue-600":p>=70?"text-yellow-600":"text-red-600",h=[{key:"rank",header:a.jsx("div",{className:"text-center",children:"Rank"}),render:(p,y)=>a.jsx("div",{className:"flex items-center justify-center",children:d(y)}),className:"text-center w-16",headerClassName:"text-center"},{key:"userName",header:"Team Member",render:p=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-indigo-600",children:p.userName.split(" ").map(y=>y[0]).join("")})}),a.jsx("div",{children:a.jsx("div",{className:"font-medium text-gray-900",children:p.userName})})]})},{key:"totalPointsEarned",header:"XP",render:p=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[p.totalPointsEarned.toLocaleString()," XP"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["of ",p.totalPossiblePoints.toLocaleString()]})]}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"averageScore",header:"Average Score",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:`font-bold text-lg ${f(p.averageScore)}`,children:[p.averageScore.toFixed(1),"%"]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuizzesCompleted",header:"Quizzes",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(ke,{className:"h-4 w-4 text-indigo-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuizzesCompleted})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalQuestionsAnswered",header:"Questions",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(it,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:p.totalQuestionsAnswered})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"totalTimeSpentMinutes",header:"Study Time",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Ie,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:It(p.totalTimeSpentMinutes)})]})}),className:"text-center",headerClassName:"text-center",sortable:!0},{key:"studyStreak",header:"Streak",render:p=>a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[a.jsx(Pn,{className:"h-4 w-4 text-yellow-600"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[p.studyStreak," day",p.studyStreak!==1?"s":""]})]})}),className:"text-center",headerClassName:"text-center",sortable:!0}].map(p=>({...p,header:p.sortable?a.jsxs("button",{onClick:()=>u(p.key),className:"flex items-center justify-center space-x-1 hover:text-indigo-600 transition-colors duration-200 w-full",children:[a.jsx("span",{children:p.header}),n===p.key&&a.jsx(jr,{className:`h-3 w-3 transition-transform duration-200 ${i==="desc"?"rotate-180":""}`})]}):p.header}));return r?a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:a.jsxs("div",{className:"text-red-600 mb-4",children:[a.jsx(jr,{className:"h-12 w-12 mx-auto mb-2"}),a.jsx("h3",{className:"text-lg font-semibold",children:"Error Loading Leaderboard"}),a.jsx("p",{className:"text-sm",children:r})]})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(St,{className:"h-6 w-6 text-yellow-500"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Team Leaderboard"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Team performance ranked by total points earned"})]})]})}),a.jsx(sn,{columns:h,data:c,loading:t,emptyState:{icon:St,title:"No Team Data",description:"No team member analytics data available yet. Complete some quizzes to see the leaderboard!"}}),e.length>0&&a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200 text-center",children:a.jsx("p",{className:"text-sm text-gray-600",children:"Click column headers to sort • Rankings based on total points earned"})})]})}function dK(){const{user:e}=ge(),[t,r]=b.useState(()=>{const h=new Date;return h.setDate(h.getDate()-30),h}),[n,s]=b.useState(new Date),{data:i,loading:o,error:l,refreshData:c}=cK({teamId:e==null?void 0:e.teamId,startDate:t,endDate:n}),u=h=>{const p=new Date(h.target.value);r(p)},d=h=>{const p=new Date(h.target.value);s(p)},f=h=>h.toISOString().split("T")[0],m=ne.useMemo(()=>{const h=i.filter(j=>j.role==="member");if(!h||h.length===0)return{totalMembers:0,totalQuizzes:0,totalQuestions:0,totalTime:0,averageScore:0,topPerformer:null};const p=h.reduce((j,N)=>j+N.totalQuizzesCompleted,0),y=h.reduce((j,N)=>j+N.totalQuestionsAnswered,0),x=h.reduce((j,N)=>j+N.totalTimeSpentMinutes,0),v=h.reduce((j,N)=>j+N.totalPointsEarned,0),g=h.reduce((j,N)=>j+N.totalPossiblePoints,0),w=g>0?v/g*100:0,_=h.length>0?h[0]:null;return{totalMembers:h.length,totalQuizzes:p,totalQuestions:y,totalTime:x,averageScore:w,topPerformer:_}},[i]);return e!=null&&e.teamId?a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Leaderboard"}),a.jsx("p",{className:"text-gray-600",children:"Track your team's performance and see how members rank against each other."})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200",children:[a.jsx(jr,{className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(yS,{className:"h-5 w-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Date Range"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Filter leaderboard data by date range"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"From:"}),a.jsx("input",{id:"startDate",type:"date",value:f(t),onChange:u,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"To:"}),a.jsx("input",{id:"endDate",type:"date",value:f(n),onChange:d,className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Math.ceil((n.getTime()-t.getTime())/(1e3*60*60*24))," days"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[a.jsx(Ke,{title:"Team Members",value:m.totalMembers,icon:He,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"Total Quizzes",value:m.totalQuizzes.toLocaleString(),icon:it,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Team Average",value:`${m.averageScore.toFixed(1)}%`,icon:pr,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Total Study Time",value:It(m.totalTime),icon:Ie,iconColor:"text-purple-600"})]}),m.topPerformer&&a.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 bg-yellow-100 rounded-full flex items-center justify-center",children:a.jsx(St,{className:"h-8 w-8 text-yellow-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["🏆 Top Performer: ",m.topPerformer.userName]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[a.jsxs("span",{children:[m.topPerformer.totalPointsEarned.toLocaleString()," points"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[m.topPerformer.averageScore.toFixed(1),"% average score"]}),a.jsx("span",{children:"•"}),a.jsxs("span",{children:[m.topPerformer.totalQuizzesCompleted," quizzes completed"]})]})]})]})}),l&&a.jsx(Fe,{type:"error",message:l,className:"mb-6"}),o&&a.jsx(Lt,{text:"Loading team leaderboard...",className:"py-8"}),!o&&a.jsx(uK,{data:i,loading:o,error:l})]})}):a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(He,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Team Found"}),a.jsx("p",{className:"text-gray-600",children:"You need to be part of a team to view the leaderboard."})]})})})}function fK(){const{developerLog:e}=ge(),[t,r]=b.useState({totalUsers:0,freeUsers:0,proUsers:0,enterpriseUsers:0,totalTeams:0,newUsersLast30Days:0,newUsersPrev30Days:0,subscriptionsCancelledLast30Days:0,activeUsers:0,activeTeams:0}),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e("📊 Loading admin statistics...");const d=new Date,f=new Date(d.getTime()-30*24*60*60*1e3),m=new Date(d.getTime()-60*24*60*60*1e3),{data:h,error:p}=await V.from("user_profiles").select("id, created_at");if(p)throw console.error("❌ Error loading user profiles:",p),p;const{data:y,error:x}=await V.from("subscriptions").select("user_id, plan, status, cancelled_at, created_at").order("created_at",{ascending:!1});if(x)throw console.error("❌ Error loading subscriptions:",x),x;const{data:v,error:g}=await V.from("teams").select("id, created_at");if(g)throw console.error("❌ Error loading teams:",g),g;const{data:w,error:_}=await V.from("team_members").select("team_id, status, joined_at").eq("status","active");if(_)throw console.error("❌ Error loading team members:",_),_;const j=new Map,N=new Map;(y||[]).forEach(T=>{N.has(T.user_id)||N.set(T.user_id,[]),N.get(T.user_id).push(T),T.status==="active"&&!j.has(T.user_id)&&j.set(T.user_id,T)});const S=Array.from(j.values()),k=(h==null?void 0:h.length)||0,O=S.filter(T=>T.plan==="free").length,C=S.filter(T=>T.plan==="pro").length,M=S.filter(T=>T.plan==="enterprise").length,E=(h==null?void 0:h.filter(T=>new Date(T.created_at)>=f).length)||0,z=(h==null?void 0:h.filter(T=>{const R=new Date(T.created_at);return R>=m&&R<f}).length)||0,$=(y||[]).filter(T=>T.cancelled_at&&new Date(T.cancelled_at)>=f).length,q=S.length,D=new Set((w==null?void 0:w.map(T=>T.team_id))||[]).size,P={totalUsers:k,freeUsers:O,proUsers:C,enterpriseUsers:M,totalTeams:(v==null?void 0:v.length)||0,newUsersLast30Days:E,newUsersPrev30Days:z,subscriptionsCancelledLast30Days:$,activeUsers:q,activeTeams:D};e("✅ Admin statistics calculated:",P),r(P);const A=[{id:1,type:"user_signup",message:`${E} new users registered in the last 30 days`,timestamp:"2 hours ago",severity:"info"},{id:2,type:"subscription",message:`${C+M} users have active paid subscriptions`,timestamp:"4 hours ago",severity:"success"},{id:3,type:"teams",message:`${D} teams are currently active`,timestamp:"6 hours ago",severity:"info"},{id:4,type:"cancellation",message:`${$} subscription cancellations in the last 30 days`,timestamp:"8 hours ago",severity:$>5?"warning":"info"}];s(A)}catch(d){console.error("💥 Error loading admin statistics:",d),c("Failed to load admin statistics")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{stats:t,recentActivities:n,loading:i,error:l,refreshStats:u}}function hK(){const{stats:e,recentActivities:t,loading:r,error:n}=fK(),s=e.proUsers+e.enterpriseUsers,i=e.totalUsers>0?Math.round(e.freeUsers/e.totalUsers*100):0,o=e.totalUsers>0?Math.round(s/e.totalUsers*100):0,l=e.totalTeams>0?Math.round(e.totalUsers/e.totalTeams):0,c=e.newUsersPrev30Days>0?Math.round((e.newUsersLast30Days-e.newUsersPrev30Days)/e.newUsersPrev30Days*100):0,u=e.totalUsers>0?Math.round(e.activeUsers/e.totalUsers*100):0,d=e.totalTeams>0?Math.round(e.activeTeams/e.totalTeams*100):0,f=[{name:"Total Users",value:e.totalUsers.toLocaleString(),change:`${i}% free, ${o}% paid`,changeType:"neutral",icon:He},{name:"Total Teams",value:e.totalTeams.toLocaleString(),change:`${l} avg members`,changeType:"neutral",icon:Gl},{name:"New Users (30D)",value:e.newUsersLast30Days.toLocaleString(),change:`${c>=0?"+":""}${c}%`,changeType:c>=0?"positive":"negative",icon:_S},{name:"Cancellations (30D)",value:e.subscriptionsCancelledLast30Days.toLocaleString(),change:`${e.totalUsers>0?Math.round(e.subscriptionsCancelledLast30Days/e.totalUsers*100):0}% of total`,changeType:e.subscriptionsCancelledLast30Days>0?"negative":"positive",icon:NS},{name:"Active Users",value:`${u}%`,change:`${e.activeUsers} users`,changeType:u>=90?"positive":u>=70?"neutral":"negative",icon:no},{name:"Active Teams",value:`${d}%`,change:`${e.activeTeams} teams`,changeType:d>=90?"positive":d>=70?"neutral":"negative",icon:_n},{name:"Free Plans",value:e.freeUsers.toLocaleString(),change:`${i}% of users`,changeType:"neutral",icon:He},{name:"Paid Plans",value:s.toLocaleString(),change:`${o}% of users`,changeType:"positive",icon:id}],m=[{name:"CPU Usage",value:45,status:"good"},{name:"Memory Usage",value:67,status:"warning"},{name:"Disk Usage",value:23,status:"good"},{name:"Network I/O",value:89,status:"critical"}],h=[{plan:"Free",count:e.freeUsers,color:"bg-gray-500"},{plan:"Pro",count:e.proUsers,color:"bg-blue-500"},{plan:"Enterprise",count:e.enterpriseUsers,color:"bg-purple-500"}],p=x=>{switch(x){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},y=x=>{switch(x){case"success":return"bg-green-50 text-green-700 border-green-200";case"warning":return"bg-yellow-50 text-yellow-700 border-yellow-200";case"error":return"bg-red-50 text-red-700 border-red-200";default:return"bg-blue-50 text-blue-700 border-blue-200"}};return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading admin data..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 sm:mb-8",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Monitor system performance and manage your application."})]}),n&&a.jsx(Fe,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:f.map(x=>a.jsx(Ke,{title:x.name,value:x.value,icon:x.icon,trend:{value:x.change,type:x.changeType}},x.name))}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(jM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"System Metrics"})]}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:m.map(x=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 min-w-0 flex-1 truncate pr-3",children:x.name}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[a.jsx("div",{className:"w-20 sm:w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${p(x.status)}`,style:{width:`${x.value}%`}})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900 w-8 text-right",children:[x.value,"%"]})]})]},x.name))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4 sm:mb-6",children:[a.jsx(bM,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Subscription Breakdown"})]}),a.jsx("div",{className:"space-y-4",children:h.map(x=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${x.color}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.plan})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900",children:x.count}),a.jsxs("div",{className:"text-xs text-gray-500",children:[e.totalUsers>0?Math.round(x.count/e.totalUsers*100):0,"%"]})]})]},x.plan))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(lM,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Backup Database"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(_n,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Security Scan"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(He,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"Manage Users"})]}),a.jsxs("button",{className:"flex flex-col items-center p-3 sm:p-4 border border-gray-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50 transition-all duration-200",children:[a.jsx(no,{className:"h-5 w-5 sm:h-6 sm:w-6 text-indigo-600 mb-2"}),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-900 text-center leading-tight",children:"View Logs"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4 sm:mb-6",children:"Recent Activities"}),a.jsx("div",{className:"space-y-3 sm:space-y-4",children:t.slice(0,8).map(x=>a.jsx("div",{className:`p-3 sm:p-4 rounded-lg border ${y(x.severity)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium break-words",children:x.message}),a.jsx("p",{className:"text-xs mt-1 opacity-75",children:x.timestamp})]}),a.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ml-3 flex-shrink-0 ${x.severity==="success"?"bg-green-100 text-green-800":x.severity==="warning"?"bg-yellow-100 text-yellow-800":x.severity==="error"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:x.type.replace("_"," ")})]})},x.id))})]})]})})}function mK(){const{developerLog:e}=ge(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{try{o(!0),c(null),e("👥 Loading users for admin panel...");const{data:m,error:h}=await V.from("user_profiles").select(`
          id,
          name,
          email,
          role,
          team_id,
          team_role,
          created_at,
          teams:team_id (
            id,
            name
          )
        `);if(h)throw console.error("❌ Error loading user profiles:",h),h;const{data:p,error:y}=await V.from("subscriptions").select("user_id, plan, status, created_at").eq("status","active").order("created_at",{ascending:!1});y&&console.error("❌ Error loading subscriptions:",y);const x=new Map;(p||[]).forEach(j=>{x.has(j.user_id)||x.set(j.user_id,j)});const{data:v,error:g}=await V.from("team_members").select("user_id, status");g&&console.error("❌ Error loading team members:",g);const w=new Map((v||[]).map(j=>[j.user_id,j])),_=(m||[]).map(j=>{var k;const N=x.get(j.id),S=w.get(j.id);return{id:j.id,name:j.name,email:j.email,role:j.role,status:(S==null?void 0:S.status)||"active",subscription:(N==null?void 0:N.plan)||"free",joinDate:j.created_at,lastActive:"Recently",teamId:j.team_id,teamRole:j.team_role,teamName:(k=j.teams)==null?void 0:k.name}});e("✅ Users loaded successfully:",_.length),r(_)}catch(m){console.error("💥 Error loading users:",m),c("Failed to load users")}finally{o(!1)}},[e]),d=b.useCallback(async()=>{try{e("🏢 Loading teams for admin panel...");const{data:m,error:h}=await V.from("teams").select("id, name, member_count");if(h)throw console.error("❌ Error loading teams:",h),h;const p=(m||[]).map(y=>({id:y.id,name:y.name,memberCount:y.member_count}));e("✅ Teams loaded successfully:",p.length),s(p)}catch(m){console.error("💥 Error loading teams:",m)}},[e]),f=b.useCallback(async()=>{await Promise.all([u(),d()])},[u,d]);return b.useEffect(()=>{f()},[f]),{users:t,teams:n,loading:i,error:l,refreshData:f}}function pK(){const{users:e,teams:t,loading:r,error:n}=mK(),[s,i]=b.useState(""),[o,l]=b.useState("all"),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[m,h]=b.useState(!1),p=[{key:"user",header:"User",render:x=>a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 sm:h-10 sm:w-10 bg-indigo-100 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-xs sm:text-sm font-medium text-indigo-600",children:x.name.split(" ").map(v=>v[0]).join("")})}),a.jsxs("div",{className:"ml-3 sm:ml-4 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:x.name}),a.jsx("div",{className:"text-sm text-gray-500 truncate",children:x.email})]})]})},{key:"team",header:"Team",render:x=>a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Gl,{className:"h-3 w-3 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 truncate max-w-32",children:x.teamName||"No Team"})]}),x.teamRole&&a.jsx(yr,{type:"teamRole",value:x.teamRole})]})},{key:"role",header:"Role",render:x=>a.jsx(yr,{type:"role",value:x.role}),className:"whitespace-nowrap"},{key:"status",header:"Status",render:x=>a.jsx(yr,{type:"status",value:x.status}),className:"whitespace-nowrap"},{key:"subscription",header:"Subscription",render:x=>a.jsx("span",{className:"text-sm text-gray-900 capitalize",children:x.subscription}),className:"whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell",headerClassName:"hidden sm:table-cell"},{key:"joinDate",header:"Join Date",render:x=>a.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.joinDate).toLocaleDateString()}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"},{key:"lastActive",header:"Last Active",render:x=>a.jsx("span",{className:"text-sm text-gray-500",children:x.lastActive}),className:"whitespace-nowrap text-sm text-gray-500 hidden lg:table-cell",headerClassName:"hidden lg:table-cell"}],y=e.filter(x=>{const v=x.name.toLowerCase().includes(s.toLowerCase())||x.email.toLowerCase().includes(s.toLowerCase())||(x.teamName||"No Team").toLowerCase().includes(s.toLowerCase()),g=o==="all"||x.role===o,w=c==="all"||x.status===c,_=d==="all"||x.teamId===d;return v&&g&&w&&_});return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading user data..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"User Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage user accounts, roles, and permissions across all teams."})]}),a.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]}),n&&a.jsx(Fe,{type:"error",title:"Error Loading Data",message:n,className:"mb-6"}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search users by name, email, or team...",value:s,onChange:x=>i(x.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"System Admin"}),a.jsx("option",{value:"user",children:"User"})]}),a.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"suspended",children:"Suspended"})]}),a.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Teams"}),a.jsx("option",{value:"",children:"No Team"}),t.map(x=>a.jsx("option",{value:x.id,children:x.name},x.id))]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[y.length," of ",e.length," users"]})]})]})]})}),a.jsx(sn,{columns:p,data:y,loading:r,emptyState:{icon:He,title:"No Users Found",description:e.length===0?"No users found in the system.":"No users match your search criteria."}}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mt-6 sm:mt-8",children:[a.jsx(Ke,{title:"Total Users",value:e.length,icon:He,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"System Admins",value:e.filter(x=>x.role==="admin").length,icon:_n,iconColor:"text-purple-600"}),a.jsx(Ke,{title:"Teams",value:t.length,icon:Gl,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Active Users",value:e.filter(x=>x.status==="active").length,icon:Yl,iconColor:"text-blue-600"})]})]})})}const gK=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function xK(){const{questions:e,loading:t,fetchQuestions:r,createQuestion:n,updateQuestion:s,deleteQuestion:i}=aa(),[o,l]=b.useState(""),[c,u]=b.useState("all"),[d,f]=b.useState("all"),[m,h]=b.useState(!1),[p,y]=b.useState(null),[x,v]=b.useState({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"});b.useEffect(()=>{r()},[r]);const g=e.filter(C=>{const M=C.question.toLowerCase().includes(o.toLowerCase())||C.answer.toLowerCase().includes(o.toLowerCase())||C.book_of_bible.toLowerCase().includes(o.toLowerCase()),E=c==="all"||C.book_of_bible===c,z=d==="all"||C.tier===d;return M&&E&&z}),w=Array.from(new Set(e.map(C=>C.book_of_bible))).sort(),_=[{key:"question",header:"Question",render:C=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:C.question})})},{key:"book_chapter",header:"Book & Chapter",render:C=>a.jsxs("div",{className:"text-sm text-gray-900",children:[a.jsx("div",{className:"font-medium",children:C.book_of_bible}),a.jsxs("div",{className:"text-gray-500",children:["Chapter ",C.chapter]})]}),className:"whitespace-nowrap"},{key:"answer",header:"Answer",render:C=>a.jsx("div",{className:"max-w-xs",children:a.jsx("p",{className:"text-sm text-gray-900 line-clamp-2",children:C.answer})})},{key:"points",header:"Points",render:C=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(pr,{className:"h-4 w-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:C.points})]}),className:"whitespace-nowrap"},{key:"time_to_answer",header:"Time",render:C=>a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ie,{className:"h-4 w-4 text-gray-500 mr-1"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[C.time_to_answer,"s"]})]}),className:"whitespace-nowrap"},{key:"tier",header:"Tier",render:C=>a.jsx(yr,{type:"tier",value:C.tier,showIcon:!0}),className:"whitespace-nowrap"},{key:"actions",header:"",render:C=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>N(C),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>k(C.id),className:"text-red-600 hover:text-red-700 transition-colors duration-200",children:a.jsx(si,{className:"h-4 w-4"})})]}),className:"whitespace-nowrap text-right text-sm font-medium",headerClassName:"relative"}],j=()=>{y(null),v({book_of_bible:"",chapter:1,question:"",answer:"",points:10,time_to_answer:30,tier:"free"}),h(!0)},N=C=>{y(C),v({book_of_bible:C.book_of_bible,chapter:C.chapter,question:C.question,answer:C.answer,points:C.points,time_to_answer:C.time_to_answer,tier:C.tier}),h(!0)},S=async()=>{try{p?await s(p.id,x):await n(x),h(!1)}catch(C){console.error("Error saving question:",C)}},k=async C=>{if(confirm("Are you sure you want to delete this question?"))try{await i(C)}catch(M){console.error("Error deleting question:",M)}},O={total:e.length,free:e.filter(C=>C.tier==="free").length,pro:e.filter(C=>C.tier==="pro").length,enterprise:e.filter(C=>C.tier==="enterprise").length,books:w.length};return t?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading questions..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Question Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage quiz questions for the Pathfinder Bible Experience."})]}),a.jsxs("button",{onClick:j,className:"flex items-center space-x-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 self-start sm:self-auto",children:[a.jsx(Ki,{className:"h-4 w-4"}),a.jsx("span",{children:"Add Question"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsx(Ke,{title:"Total Questions",value:O.total,icon:ke,iconColor:"text-indigo-600"}),a.jsx(Ke,{title:"Free",value:O.free,icon:SM,iconColor:"text-green-600"}),a.jsx(Ke,{title:"Pro",value:O.pro,icon:pr,iconColor:"text-blue-600"}),a.jsx(Ke,{title:"Enterprise",value:O.enterprise,icon:pr,iconColor:"text-purple-600"}),a.jsx(Ke,{title:"Bible Books",value:O.books,icon:ke,iconColor:"text-gray-600"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(xf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search questions by text, answer, or book...",value:o,onChange:C=>l(C.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Books"}),w.map(C=>a.jsx("option",{value:C,children:C},C))]}),a.jsxs("select",{value:d,onChange:C=>f(C.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Tiers"}),a.jsx("option",{value:"free",children:"Free"}),a.jsx("option",{value:"pro",children:"Pro"}),a.jsx("option",{value:"enterprise",children:"Enterprise"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(U0,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[g.length," of ",e.length," questions"]})]})]})]})}),a.jsx(sn,{columns:_,data:g,loading:t,emptyState:{icon:ke,title:"No Questions Found",description:"No questions found matching your criteria"}}),a.jsx(kn,{isOpen:m,onClose:()=>h(!1),title:p?"Edit Question":"Add New Question",maxWidth:"2xl",footer:a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"Cancel"}),a.jsxs("button",{onClick:S,disabled:!x.book_of_bible||!x.question||!x.answer,className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(B0,{className:"h-4 w-4"}),a.jsx("span",{children:p?"Update Question":"Add Question"})]})]}),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Book of the Bible"}),a.jsxs("select",{value:x.book_of_bible,onChange:C=>v({...x,book_of_bible:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select a book"}),gK.map(C=>a.jsx("option",{value:C,children:C},C))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chapter"}),a.jsx("input",{type:"number",min:"1",max:"150",value:x.chapter,onChange:C=>v({...x,chapter:parseInt(C.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question"}),a.jsx("textarea",{value:x.question,onChange:C=>v({...x,question:C.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the quiz question...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer"}),a.jsx("textarea",{value:x.answer,onChange:C=>v({...x,answer:C.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",placeholder:"Enter the correct answer...",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Points"}),a.jsx("input",{type:"number",min:"1",max:"100",value:x.points,onChange:C=>v({...x,points:parseInt(C.target.value)||10}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time (seconds)"}),a.jsx("input",{type:"number",min:"10",max:"300",value:x.time_to_answer,onChange:C=>v({...x,time_to_answer:parseInt(C.target.value)||30}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tier"}),a.jsxs("select",{value:x.tier,onChange:C=>v({...x,tier:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200",required:!0,children:[a.jsx("option",{value:"free",children:"🆓 Free"}),a.jsx("option",{value:"pro",children:"⭐ Pro"}),a.jsx("option",{value:"enterprise",children:"👑 Enterprise"})]})]})]})]})})]})})}function yK(){const{developerLog:e}=ge(),[t,r]=b.useState([]),[n,s]=b.useState([]),[i,o]=b.useState(!0),[l,c]=b.useState(null),u=b.useCallback(async()=>{o(!0),c(null);try{e("📊 Fetching plan data from Supabase...");const{data:d,error:f}=await V.from("plans").select("*").order("name",{ascending:!0});if(f)throw console.error("❌ Error fetching plans:",f),f;const{data:m,error:h}=await V.from("plan_settings").select("*");if(h)throw console.error("❌ Error fetching plan settings:",h),h;const{data:p,error:y}=await V.from("plan_prices").select("*");if(y)throw console.error("❌ Error fetching plan prices:",y),y;const x=(d||[]).map(v=>{const w=(p||[]).filter(_=>_.plan_id===v.id);return{...v,prices:w}});e("✅ Plans fetched successfully:",x.length,"plans"),e("DEBUG: plansWithPrices before setting state:",JSON.stringify(x,null,2)),e("DEBUG: Raw prices data from DB:",JSON.stringify(p,null,2)),r(x),e("✅ Plan settings fetched successfully:",(m==null?void 0:m.length)||0,"settings"),s(m||[])}catch(d){console.error("💥 Error fetching plan data:",d),c("Failed to load plan data.")}finally{o(!1)}},[e]);return b.useEffect(()=>{u()},[u]),{plans:t,planSettings:n,loading:i,error:l,fetchPlanData:u}}function ct(e){const[t,r]=ne.useState(!1),n=`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all duration-200 ${e.error?"border-red-300 focus:ring-red-500":""} ${e.disabled?"bg-gray-50 text-gray-500 cursor-not-allowed":""}`,s=()=>{switch(e.type){case"password":return a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:e.id,type:t?"text":"password",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:`${n} ${e.showToggle!==!1?"pr-10":""}`}),e.showToggle!==!1&&a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!t),disabled:e.disabled,children:t?a.jsx(Yr,{className:"h-4 w-4 text-gray-400"}):a.jsx(Xr,{className:"h-4 w-4 text-gray-400"})})]});case"textarea":return a.jsx("textarea",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,rows:e.rows||3,disabled:e.disabled,className:n});case"select":return a.jsxs("select",{id:e.id,value:e.value,onChange:i=>e.onChange(i.target.value),disabled:e.disabled,className:n,children:[e.placeholder&&a.jsx("option",{value:"",children:e.placeholder}),e.options.map(i=>a.jsx("option",{value:i.value,children:i.label},i.value))]});case"number":return a.jsx("input",{id:e.id,type:"number",value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,min:e.min,max:e.max,disabled:e.disabled,className:n});default:return a.jsx("input",{id:e.id,type:e.type,value:e.value,onChange:i=>e.onChange(i.target.value),placeholder:e.placeholder,autoComplete:e.autoComplete,disabled:e.disabled,className:n})}};return a.jsxs("div",{className:e.className,children:[a.jsxs("label",{htmlFor:e.id,className:"block text-sm font-medium text-gray-700 mb-2",children:[e.label,e.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s(),e.helpText&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.helpText}),e.error&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:e.error})]})}function es({variant:e="primary",size:t="md",icon:r,iconPosition:n="left",loading:s=!1,disabled:i=!1,fullWidth:o=!1,children:l,onClick:c,type:u="button",className:d=""}){const f=()=>{switch(e){case"primary":return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500";case"secondary":return"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500";case"danger":return"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500";case"success":return"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500";case"warning":return"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500";case"ghost":return"text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:ring-gray-500";default:return"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500"}},m=()=>{switch(t){case"sm":return"px-3 py-1.5 text-sm";case"md":return"px-4 py-2 text-sm";case"lg":return"px-6 py-3 text-base";default:return"px-4 py-2 text-sm"}},h=`
    inline-flex items-center justify-center font-medium rounded-lg
    focus:outline-none focus:ring-2 focus:ring-offset-2
    disabled:opacity-50 disabled:cursor-not-allowed
    transition-all duration-200
  `,p=f(),y=m(),x=o?"w-full":"",v=i||s;return a.jsx("button",{type:u,onClick:c,disabled:v,className:`${h} ${p} ${y} ${x} ${d}`.trim(),children:s?a.jsxs(a.Fragment,{children:[a.jsx(lo,{className:"mr-2"}),a.jsx("span",{children:"Loading..."})]}):a.jsxs(a.Fragment,{children:[r&&n==="left"&&a.jsx(r,{className:`h-4 w-4 ${l?"mr-2":""}`}),l,r&&n==="right"&&a.jsx(r,{className:`h-4 w-4 ${l?"ml-2":""}`})]})})}function vK(){var E,z,$,q,U,D;const{plans:e,planSettings:t,loading:r,error:n,fetchPlanData:s}=yK(),[i,o]=b.useState(!1),[l,c]=b.useState(null),[u,d]=b.useState(null),[f,m]=b.useState({}),[h,p]=b.useState({}),[y,x]=b.useState([]),[v,g]=b.useState(null),[w,_]=b.useState(!1),j=P=>{c(P),m(P);const A=t.find(T=>T.plan_id===P.id);d(A||null),p(A||{plan_id:P.id,max_questions_custom_quiz:0,max_team_members:0,question_tier_access:[],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),x(P.prices||[]),g(null),o(!0)},N=()=>{c(null),m({id:"",name:"",is_enabled:!0,description:""}),p({max_questions_custom_quiz:20,max_team_members:5,question_tier_access:["free"],allow_quick_start_quiz:!0,allow_create_own_quiz:!0,allow_study_schedule_quiz:!1,allow_analytics_access:!1}),x([]),g(null),o(!0)},S=()=>{const P={plan_id:f.id||"",currency:"USD",interval:"monthly",amount:0};x(A=>[...A,P])},k=(P,A)=>{x(T=>T.map((R,F)=>F===P?{...R,...A}:R))},O=P=>{x(A=>A.filter((T,R)=>R!==P))},C=async()=>{if(g(null),_(!0),!f.name||!f.id||h.max_questions_custom_quiz===void 0||h.max_team_members===void 0||h.allow_quick_start_quiz===void 0||h.allow_create_own_quiz===void 0||h.allow_study_schedule_quiz===void 0||h.allow_analytics_access===void 0){g("Please fill in all required fields."),_(!1);return}for(const A of y)if(!A.currency||!A.interval||A.amount===void 0||A.amount<0){g("Please ensure all price entries have valid currency, interval, and amount."),_(!1);return}const P=new Set;for(const A of y){const T=`${A.currency}-${A.interval}`;if(P.has(T)){g(`Duplicate price entry found for ${A.currency} (${A.interval}). Each plan can only have one price per currency and interval combination.`),_(!1);return}P.add(T)}try{if(l){const{error:A}=await V.from("plans").update({name:f.name,is_enabled:f.is_enabled,description:f.description,updated_at:new Date().toISOString()}).eq("id",f.id);if(A)throw A;const{error:T}=await V.from("plan_settings").update({max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access,updated_at:new Date().toISOString()}).eq("plan_id",f.id);if(T)throw T;const{error:R}=await V.from("plan_prices").delete().eq("plan_id",f.id);if(R)throw R;if(y.length>0){const{error:F}=await V.from("plan_prices").insert(y.map(J=>({plan_id:f.id,currency:J.currency,interval:J.interval,amount:J.amount,stripe_price_id:J.stripe_price_id})));if(F)throw F}console.log("✅ Plan updated successfully")}else{const{error:A}=await V.from("plans").insert([{id:f.id,name:f.name,is_enabled:f.is_enabled,description:f.description}]);if(A)throw A;const{error:T}=await V.from("plan_settings").insert([{plan_id:f.id,max_questions_custom_quiz:h.max_questions_custom_quiz,max_team_members:h.max_team_members,question_tier_access:h.question_tier_access,allow_quick_start_quiz:h.allow_quick_start_quiz,allow_create_own_quiz:h.allow_create_own_quiz,allow_study_schedule_quiz:h.allow_study_schedule_quiz,allow_analytics_access:h.allow_analytics_access}]);if(T)throw T;if(y.length>0){const{error:R}=await V.from("plan_prices").insert(y.map(F=>({plan_id:f.id,currency:F.currency,interval:F.interval,amount:F.amount,stripe_price_id:F.stripe_price_id})));if(R)throw R}console.log("✅ Plan created successfully")}o(!1),await s()}catch(A){console.error("Error saving plan:",A),g(A.message||"Failed to save plan.")}finally{_(!1)}},M=[{key:"name",header:"Plan Name",render:P=>a.jsx("div",{className:"font-medium text-gray-900",children:P.name})},{key:"prices",header:"Pricing",render:P=>a.jsx("div",{className:"text-sm text-gray-900",children:P.prices&&P.prices.length>0?a.jsx("div",{className:"space-y-1",children:P.prices.map((A,T)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"font-medium",children:["$",A.amount.toFixed(2)," ",A.currency]}),a.jsxs("span",{className:"text-gray-500",children:["/",A.interval]})]},T))}):a.jsx("span",{className:"text-gray-500 italic",children:"No pricing set"})})},{key:"is_enabled",header:"Enabled",render:P=>P.is_enabled?a.jsx(_t,{className:"h-5 w-5 text-green-500"}):a.jsx(Xn,{className:"h-5 w-5 text-red-500"}),className:"text-center"},{key:"max_questions_custom_quiz",header:"Max Custom Quiz Qs",render:P=>{const A=t.find(T=>T.plan_id===P.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(A==null?void 0:A.max_questions_custom_quiz)||"N/A"})},className:"text-center"},{key:"max_team_members",header:"Max Team Members",render:P=>{const A=t.find(T=>T.plan_id===P.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(A==null?void 0:A.max_team_members)||"N/A"})},className:"text-center"},{key:"question_tier_access",header:"Question Tiers",render:P=>{var T;const A=t.find(R=>R.plan_id===P.id);return a.jsx("div",{className:"text-sm text-gray-900",children:(T=A==null?void 0:A.question_tier_access)==null?void 0:T.map(R=>a.jsx("span",{className:"inline-block bg-gray-100 rounded-full px-2 py-0.5 text-xs font-medium text-gray-600 mr-1 mb-1 capitalize",children:R},R))})}},{key:"feature_access",header:"Feature Access",render:P=>{const A=t.find(T=>T.plan_id===P.id);return a.jsxs("div",{className:"text-sm text-gray-900 flex flex-col space-y-1",children:[a.jsxs("span",{className:"flex items-center",children:[A!=null&&A.allow_quick_start_quiz?a.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Xn,{className:"h-4 w-4 text-red-500 mr-1"})," Quick Start Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[A!=null&&A.allow_create_own_quiz?a.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Xn,{className:"h-4 w-4 text-red-500 mr-1"})," Custom Quiz"]}),a.jsxs("span",{className:"flex items-center",children:[A!=null&&A.allow_study_schedule_quiz?a.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Xn,{className:"h-4 w-4 text-red-500 mr-1"})," Study Schedule"]}),a.jsxs("span",{className:"flex items-center",children:[A!=null&&A.allow_analytics_access?a.jsx(_t,{className:"h-4 w-4 text-green-500 mr-1"}):a.jsx(Xn,{className:"h-4 w-4 text-red-500 mr-1"})," Analytics Access"]})]})}},{key:"actions",header:"",render:P=>a.jsx("button",{onClick:()=>j(P),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",children:a.jsx(ko,{className:"h-4 w-4"})}),className:"text-right"}];return r?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading plans..."})}):n?a.jsx(pe,{children:a.jsx("div",{className:"p-6",children:a.jsx(Fe,{type:"error",message:n,className:"mb-6"})})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Plan Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Manage subscription plans and their associated settings."})]}),a.jsx(es,{variant:"primary",icon:Ki,onClick:N,children:"Add New Plan"})]}),a.jsx(sn,{columns:M,data:e,emptyState:{title:"No Plans Found",description:"No subscription plans are configured in the system."}}),a.jsxs(kn,{isOpen:i,onClose:()=>o(!1),title:l?`Edit Plan: ${l.name}`:"Add New Plan",maxWidth:"4xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(es,{variant:"secondary",onClick:()=>o(!1),disabled:w,children:"Cancel"}),a.jsx(es,{variant:"primary",onClick:C,loading:w,children:"Save Changes"})]}),children:[v&&a.jsx(Fe,{type:"error",message:v,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Plan Details"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Plan ID",id:"planId",type:"text",value:f.id||"",onChange:P=>m({...f,id:P}),required:!0,disabled:!!l,helpText:l?void 0:"Unique identifier for the plan (e.g., 'free', 'pro')"}),a.jsx(ct,{label:"Plan Name",id:"planName",type:"text",value:f.name||"",onChange:P=>m({...f,name:P}),required:!0}),a.jsx(ct,{label:"Is Enabled",id:"planEnabled",type:"select",value:((E=f.is_enabled)==null?void 0:E.toString())||"true",onChange:P=>m({...f,is_enabled:P==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]}),a.jsx(ct,{label:"Description",id:"planDescription",type:"textarea",value:f.description||"",onChange:P=>m({...f,description:P})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pricing"}),a.jsx(es,{variant:"secondary",icon:Ki,size:"sm",onClick:S,children:"Add Price"})]}),y.length===0?a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[a.jsx(bS,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500",children:"No pricing configured"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add pricing options for this plan"})]}):a.jsx("div",{className:"space-y-4",children:y.map((P,A)=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Price Option ",A+1]}),a.jsx(es,{variant:"danger",size:"sm",icon:si,onClick:()=>O(A),children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ct,{label:"Currency",id:`currency-${A}`,type:"select",value:P.currency,onChange:T=>k(A,{currency:T}),options:[{value:"USD",label:"USD ($)"},{value:"GBP",label:"GBP (£)"},{value:"AUD",label:"AUD (A$)"},{value:"CAD",label:"CAD (C$)"}],required:!0}),a.jsx(ct,{label:"Billing Interval",id:`interval-${A}`,type:"select",value:P.interval,onChange:T=>k(A,{interval:T}),options:[{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}],required:!0}),a.jsx(ct,{label:"Amount",id:`amount-${A}`,type:"number",value:P.amount,onChange:T=>k(A,{amount:parseFloat(T)||0}),min:0,required:!0})]}),a.jsx("div",{className:"mt-4",children:a.jsx(ct,{label:"Stripe Price ID (Optional)",id:`stripe-${A}`,type:"text",value:P.stripe_price_id||"",onChange:T=>k(A,{stripe_price_id:T}),helpText:"Will be populated automatically when synced with Stripe"})})]},A))})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Plan Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Max Questions Custom Quiz",id:"maxQuestionsCustomQuiz",type:"number",value:h.max_questions_custom_quiz||0,onChange:P=>p({...h,max_questions_custom_quiz:parseInt(P)}),min:0,required:!0}),a.jsx(ct,{label:"Max Team Members",id:"maxTeamMembers",type:"number",value:h.max_team_members||0,onChange:P=>p({...h,max_team_members:parseInt(P)}),min:0,required:!0}),a.jsx(ct,{label:"Question Tier Access (comma-separated)",id:"questionTierAccess",type:"text",value:((z=h.question_tier_access)==null?void 0:z.join(", "))||"",onChange:P=>p({...h,question_tier_access:P.split(",").map(A=>A.trim())}),helpText:"e.g., free, pro, enterprise"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Feature Access"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[a.jsx(ct,{label:"Allow Quick Start Quiz",id:"allowQuickStartQuiz",type:"select",value:(($=h.allow_quick_start_quiz)==null?void 0:$.toString())||"true",onChange:P=>p({...h,allow_quick_start_quiz:P==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Create Own Quiz",id:"allowCreateOwnQuiz",type:"select",value:((q=h.allow_create_own_quiz)==null?void 0:q.toString())||"true",onChange:P=>p({...h,allow_create_own_quiz:P==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Study Schedule Quiz",id:"allowStudyScheduleQuiz",type:"select",value:((U=h.allow_study_schedule_quiz)==null?void 0:U.toString())||"false",onChange:P=>p({...h,allow_study_schedule_quiz:P==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]}),a.jsx(ct,{label:"Allow Analytics Access",id:"allowAnalyticsAccess",type:"select",value:((D=h.allow_analytics_access)==null?void 0:D.toString())||"false",onChange:P=>p({...h,allow_analytics_access:P==="true"}),options:[{value:"true",label:"Yes"},{value:"false",label:"No"}]})]})]})]})]})]})]})]})})}const y1=[{value:"total_quizzes_completed",label:"Total Quizzes Completed"},{value:"total_points_earned",label:"Total Points Earned"},{value:"longest_streak",label:"Longest Study Streak"},{value:"total_questions_answered",label:"Total Questions Answered"},{value:"perfect_quiz",label:"Perfect Quiz Score"},{value:"speed_demon",label:"Speed Demon (Fast Completion)"},{value:"accuracy_book_ruth",label:"Ruth Book Accuracy"},{value:"accuracy_book_esther",label:"Esther Book Accuracy"},{value:"accuracy_book_daniel",label:"Daniel Book Accuracy"},{value:"accuracy_chapter",label:"Chapter Accuracy"},{value:"accuracy_tier_free",label:"Free Tier Accuracy"},{value:"accuracy_tier_pro",label:"Pro Tier Accuracy"},{value:"accuracy_tier_enterprise",label:"Enterprise Tier Accuracy"}];function bK(){const{achievements:e,loading:t,error:r,refreshGamificationData:n}=X0(),[s,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),[d,f]=b.useState(null),[m,h]=b.useState(!1),p=()=>{l(null),u({name:"",description:"",criteria_type:"total_quizzes_completed",criteria_value:1,badge_icon_url:""}),f(null),i(!0)},y=j=>{l(j),u({name:j.name,description:j.description,criteria_type:j.criteria_type,criteria_value:j.criteria_value,badge_icon_url:j.badge_icon_url}),f(null),i(!0)},x=async()=>{if(f(null),h(!0),!c.name.trim()||!c.description.trim()||c.criteria_value<=0){f("Please fill in all required fields with valid values."),h(!1);return}try{if(o){const{error:j}=await V.from("achievements").update({name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}).eq("id",o.id);if(j)throw j;console.log("✅ Achievement updated successfully")}else{const{error:j}=await V.from("achievements").insert([{name:c.name.trim(),description:c.description.trim(),criteria_type:c.criteria_type,criteria_value:c.criteria_value,badge_icon_url:c.badge_icon_url.trim()||"/vite.svg"}]);if(j)throw j;console.log("✅ Achievement created successfully")}i(!1),await n()}catch(j){console.error("Error saving achievement:",j),f(j.message||"Failed to save achievement.")}finally{h(!1)}},v=async(j,N)=>{if(confirm(`Are you sure you want to delete the achievement "${N}"? This action cannot be undone.`))try{h(!0);const{error:S}=await V.from("user_achievements").delete().eq("achievement_id",j);S&&console.warn("Warning: Could not delete user achievements:",S);const{error:k}=await V.from("achievements").delete().eq("id",j);if(k)throw k;console.log("✅ Achievement deleted successfully"),await n()}catch(S){console.error("Error deleting achievement:",S),f(S.message||"Failed to delete achievement.")}finally{h(!1)}},g=j=>{switch(j){case"total_quizzes_completed":return a.jsx(ke,{className:"h-4 w-4 text-blue-600"});case"total_points_earned":return a.jsx(St,{className:"h-4 w-4 text-yellow-600"});case"longest_streak":return a.jsx(Pn,{className:"h-4 w-4 text-orange-600"});case"total_questions_answered":return a.jsx(it,{className:"h-4 w-4 text-green-600"});case"perfect_quiz":return a.jsx(Gi,{className:"h-4 w-4 text-purple-600"});case"speed_demon":return a.jsx(Ie,{className:"h-4 w-4 text-red-600"});default:return a.jsx(pr,{className:"h-4 w-4 text-gray-600"})}},w=j=>{const N=y1.find(S=>S.value===j);return(N==null?void 0:N.label)||j},_=[{key:"badge",header:"Badge",render:j=>a.jsxs("div",{className:"flex items-center justify-center",children:[j.badge_icon_url?a.jsx("img",{src:j.badge_icon_url,alt:j.name,className:"h-8 w-8 rounded-full",onError:N=>{var S;N.currentTarget.style.display="none",(S=N.currentTarget.nextElementSibling)==null||S.classList.remove("hidden")}}):null,a.jsx("div",{className:`h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center ${j.badge_icon_url?"hidden":""}`,children:a.jsx(pr,{className:"h-5 w-5 text-gray-600"})})]}),className:"text-center w-16"},{key:"name",header:"Achievement Name",render:j=>a.jsx("div",{className:"font-medium text-gray-900",children:j.name})},{key:"description",header:"Description",render:j=>a.jsx("div",{className:"text-sm text-gray-600 max-w-xs line-clamp-2",children:j.description})},{key:"criteria",header:"Criteria",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[g(j.criteria_type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w(j.criteria_type)}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",j.criteria_value]})]})]})},{key:"actions",header:"",render:j=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>y(j),className:"text-indigo-600 hover:text-indigo-700 transition-colors duration-200",title:"Edit achievement",children:a.jsx(ko,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>v(j.id,j.name),className:"text-red-600 hover:text-red-700 transition-colors duration-200",title:"Delete achievement",children:a.jsx(si,{className:"h-4 w-4"})})]}),className:"text-right"}];return t?a.jsx(pe,{children:a.jsx(Lt,{fullScreen:!0,text:"Loading achievements..."})}):a.jsx(pe,{children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 space-y-4 sm:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Achievement Management"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Create and manage achievements that users can unlock through their quiz activities."})]}),a.jsx(es,{variant:"primary",icon:Ki,onClick:p,children:"Add New Achievement"})]}),r&&a.jsx(Fe,{type:"error",message:r,className:"mb-6"}),d&&a.jsx(Fe,{type:"error",message:d,className:"mb-6",dismissible:!0,onDismiss:()=>f(null)}),a.jsx(sn,{columns:_,data:e,loading:t,emptyState:{icon:pr,title:"No Achievements Found",description:"No achievements are configured in the system. Create your first achievement to get started.",action:a.jsx(es,{variant:"primary",icon:Ki,onClick:p,children:"Create First Achievement"})}}),a.jsxs(kn,{isOpen:s,onClose:()=>{i(!1),f(null)},title:o?`Edit Achievement: ${o.name}`:"Add New Achievement",maxWidth:"2xl",footer:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx(es,{variant:"secondary",onClick:()=>{i(!1),f(null)},disabled:m,children:"Cancel"}),a.jsx(es,{variant:"primary",onClick:x,loading:m,disabled:!c.name.trim()||!c.description.trim()||c.criteria_value<=0,children:o?"Update Achievement":"Create Achievement"})]}),children:[d&&a.jsx(Fe,{type:"error",message:d,className:"mb-4"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Achievement Name",id:"achievementName",type:"text",value:c.name,onChange:j=>u({...c,name:j}),placeholder:"e.g., Quiz Master",required:!0}),a.jsx(ct,{label:"Badge Icon URL",id:"badgeIconUrl",type:"text",value:c.badge_icon_url,onChange:j=>u({...c,badge_icon_url:j}),placeholder:"https://example.com/badge.png (optional)",helpText:"Leave empty to use default icon"})]}),a.jsx(ct,{label:"Description",id:"achievementDescription",type:"textarea",value:c.description,onChange:j=>u({...c,description:j}),placeholder:"Describe what the user needs to do to unlock this achievement...",rows:3,required:!0}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ct,{label:"Criteria Type",id:"criteriaType",type:"select",value:c.criteria_type,onChange:j=>u({...c,criteria_type:j}),options:y1,required:!0}),a.jsx(ct,{label:"Target Value",id:"criteriaValue",type:"number",value:c.criteria_value,onChange:j=>u({...c,criteria_value:parseInt(j)||1}),min:1,required:!0,helpText:"The target value the user must reach to unlock this achievement"})]}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Preview"}),a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"h-12 w-12 bg-gray-100 rounded-full flex items-center justify-center",children:[c.badge_icon_url?a.jsx("img",{src:c.badge_icon_url,alt:"Badge preview",className:"h-10 w-10 rounded-full",onError:j=>{var N;j.currentTarget.style.display="none",(N=j.currentTarget.nextElementSibling)==null||N.classList.remove("hidden")}}):null,a.jsx(pr,{className:`h-6 w-6 text-gray-600 ${c.badge_icon_url?"hidden":""}`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:c.name||"Achievement Name"}),a.jsx("p",{className:"text-sm text-gray-600",children:c.description||"Achievement description will appear here..."}),a.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[g(c.criteria_type),a.jsxs("span",{className:"text-xs text-gray-500",children:[w(c.criteria_type),": ",c.criteria_value]})]})]})]})]})]})]})]})})}function wK(){return a.jsx(z4,{children:a.jsx(rM,{children:a.jsx(nM,{children:a.jsx(CM,{children:a.jsx(IM,{children:a.jsx(C4,{children:a.jsxs(w4,{children:[a.jsx(Se,{path:"/",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/documentation",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/features",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/login",element:a.jsx(nI,{})}),a.jsx(Se,{path:"/signup",element:a.jsx(Yn,{to:"/login",replace:!0})}),a.jsx(Se,{path:"/forgot-password",element:a.jsx(sI,{})}),a.jsx(Se,{path:"/reset-password",element:a.jsx(iI,{})}),a.jsx(Se,{path:"/invitations/accept",element:a.jsx(RW,{})}),a.jsx(Se,{path:"/dashboard",element:a.jsx(ht,{children:a.jsx(lI,{})})}),a.jsx(Se,{path:"/invitations",element:a.jsx(ht,{children:a.jsx(LW,{})})}),a.jsx(Se,{path:"/analytics",element:a.jsx(ht,{allowedTeamRoles:["owner","admin"],children:a.jsx(AW,{})})}),a.jsx(Se,{path:"/team",element:a.jsx(ht,{allowedTeamRoles:["owner","admin"],children:a.jsx(zW,{})})}),a.jsx(Se,{path:"/quiz",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(FW,{})})}),a.jsx(Se,{path:"/quiz/quick-start",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(JW,{})})}),a.jsx(Se,{path:"/quiz/create-own",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(ZW,{})})}),a.jsx(Se,{path:"/quiz/study-assignment/:assignmentId",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(eK,{})})}),a.jsx(Se,{path:"/quiz/runner/:quizSessionId",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(yh,{})})}),a.jsx(Se,{path:"/schedule",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(lK,{})})}),a.jsx(Se,{path:"/achievements",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(tK,{})})}),a.jsx(Se,{path:"/leaderboard",element:a.jsx(ht,{allowedTeamRoles:["owner","admin","member"],children:a.jsx(dK,{})})}),a.jsx(Se,{path:"/billing",element:a.jsx(ht,{allowedTeamRoles:["owner"],children:a.jsx(DW,{})})}),a.jsx(Se,{path:"/billing/success",element:a.jsx($W,{})}),a.jsx(Se,{path:"/settings",element:a.jsx(ht,{children:a.jsx(hI,{})})}),a.jsx(Se,{path:"/admin",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(hK,{})})}),a.jsx(Se,{path:"/admin/users",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(pK,{})})}),a.jsx(Se,{path:"/admin/questions",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(xK,{})})}),a.jsx(Se,{path:"/admin/plans",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(vK,{})})}),a.jsx(Se,{path:"/admin/achievements",element:a.jsx(ht,{requireAdmin:!0,children:a.jsx(bK,{})})}),a.jsx(Se,{path:"*",element:a.jsx(Yn,{to:"/",replace:!0})})]})})})})})})})}ON(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(wK,{})}));
